<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>MapSpice UI react</title>
    <link href="//cdn.muicss.com/mui-0.9.23/css/mui.min.css" rel="stylesheet" type="text/css" />
    <script src="//unpkg.com/react@16/umd/react.development.js"></script>
    <script src="//unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="//unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="js/mapspice-ui-react.js"></script>
    <link rel="stylesheet" href="css/mapspice-ui-react.css">
    <link rel="stylesheet" href="css/overrides.css">
</head>
<body>
  <div id="app"></div>
<script type="text/babel">
  const mapDefinitions = [
    {
      "container": "shadedleft",
      "center": [
        -97.62767918845107,
        36.11096294847742
      ],
      "bounds": [
        [
          -125.83215744148865,
          17.174153970227337
        ],
        [
          -65.42823234437824,
          51.985068925546216
        ]
      ],
      "maxBounds": [
        [
          -168,
          -60
        ],
        [
          60,
          85
        ]
      ],
      "maxZoom": 18,
      "touchZoomRotate": false,
      "dragRotate": false,
      "style": {
        "metadata": {
          "mapspice:use-seamless-variable-transitions": true,
          "mapspice:always-visible-layers-ids": [
            "background",
            "worldlandmass",
            "State_boundaries",
            "popAbbrev",
            "popLabels",
            "County_boundaries",
            "Tract_boundaries",
            "road",
            "class1",
            "class2",
            "class3",
            "class4",
            "class5",
            "class6",
            "class7",
            "class8",
            "class9",
            "class10"
          ],
          "mapspice:color-palettes": {
            "gender": {
              "name": "Gender Gap",
              "type": "array",
              "colors": [
                "#f0f9e8",
                "#bae4bc",
                "#7bccc4",
                "#43a2ca",
                "#0868ac"
              ]
            }
          },
          "mapspice:preferred-summary-level-id": "countries",
          "mapspice:summary-levels": {
            "countries": {
              "name": "Countries",
              "minzoom": 0,
              "maxzoom": 10
            }
          }
        },
        "version": 8,
        "sprite": "sprite/history_sprite",
        "glyphs": "font/arial-regular/0-65535.pbf",
        "transition": {
          "duration": 600
        },
        "sources": {
          "socialexplorer": {
            "type": "vector",
            "tiles": [
              "https://tiles3.socialexplorer.com/gettile/?x={x}&y={y}&z={z}&layers={layers}&projection=EPSG-3857&columns={columns}"
            ],
            "layers": [
              {
                "layerId": "13974",
                "datasets": [
                  {
                    "datasetId": 16752,
                    "columns": [
                      "FIPS",
                      "NAME10",
                      "dethpenalt",
                      "restriction"
                    ]
                  }
                ]
              },
              {
                "layerId": "13974p",
                "datasets": [
                  {
                    "datasetId": 0,
                    "columns": [
                      "ABBREV",
                      "Geo_QName"
                    ]
                  }
                ]
              },
              {
                "layerId": "14078",
                "datasets": [
                  {
                    "datasetId": 0,
                    "columns": []
                  }
                ]
              },
              {
                "layerId": "10284",
                "datasets": [
                  {
                    "datasetId": 0,
                    "columns": []
                  }
                ]
              },
              {
                "layerId": "10552",
                "datasets": [
                  {
                    "datasetId": 0,
                    "columns": []
                  }
                ]
              },
              {
                "layerId": "15696p",
                "datasets": [
                  {
                    "datasetId": 0,
                    "columns": [
                      "address",
                      "city",
                      "state",
                      "class",
                      "class_1",
                      "year",
                      "Name"
                    ]
                  }
                ]
              },
              {
                "layerId": "15696",
                "datasets": [
                  {
                    "datasetId": 0,
                    "columns": [
                      "address",
                      "city",
                      "state",
                      "class",
                      "class_1",
                      "year",
                      "Name"
                    ]
                  }
                ]
              }
            ]
          }
        },
        "layers": [
          {
            "id": "background",
            "paint": {
              "background-color": "#FFFFFF"
            },
            "type": "background"
          },
          {
            "id": "worldlandmass",
            "paint": {
              "fill-color": "#dddddd"
            },
            "type": "fill",
            "source": "socialexplorer",
            "source-layer": "13974",
            "minzoom": 0,
            "maxzoom": 22
          },
          {
            "id": "State_boundaries",
            "type": "line",
            "source": "socialexplorer",
            "paint": {
              "line-color": "rgba(255, 255, 255, 1)",
              "line-width": 1,
              "line-blur": 1
            },
            "source-layer": "13974"
          },
          {
            "id": "County_boundaries",
            "type": "line",
            "source": "socialexplorer",
            "paint": {
              "line-color": "rgba(240, 240, 240, 1)",
              "line-width": 1,
              "line-blur": 1
            },
            "source-layer": "14078",
            "minzoom": 5,
            "maxzoom": 20
          },
          {
            "id": "Tract_boundaries",
            "type": "line",
            "source": "socialexplorer",
            "paint": {
              "line-color": "rgba(235, 235, 235, 1)",
              "line-width": 1,
              "line-blur": 1
            },
            "source-layer": "10284",
            "minzoom": 9,
            "maxzoom": 20
          },
          {
            "id": "road",
            "type": "line",
            "source": "socialexplorer",
            "paint": {
              "line-color": "rgba(150, 150, 150, 1)",
              "line-width": 1,
              "line-blur": 1
            },
            "source-layer": "10552",
            "minzoom": 10,
            "maxzoom": 20
          },
          {
            "id": "class1",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "black_city",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              1
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class9",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "gray_museum",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              9
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class10",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "blue_museum",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              10
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class2",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "black_bonfire",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              2
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class3",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "green_forest",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              3
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class4",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "black_factory",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              4
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class5",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "gray_location_on",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              5
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class6",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "gray_wb_sunny",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              6
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class7",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "gray_police",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              7
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "class8",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "15696p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-allow-overlap": false,
              "icon-image": "black_church",
              "icon-size": 0.6,
              "icon-allow-overlap": true,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "filter": [
              "==",
              "class_1",
              8
            ],
            "minzoom": 0,
            "maxzoom": 20
          },
          {
            "id": "popLabels",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "13974p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-field": "{Geo_QName}",
              "text-allow-overlap": false,
              "text-max-width": 8,
              "text-size": {
                "base": 1.5,
                "stops": [
                  [
                    4,
                    12
                  ],
                  [
                    8,
                    18
                  ]
                ]
              }
            },
            "minzoom": 4,
            "maxzoom": 20
          },
          {
            "id": "popAbbrev",
            "type": "symbol",
            "source": "socialexplorer",
            "source-layer": "13974p",
            "paint": {
              "text-halo-color": "rgba(255, 255, 255, 0.8)",
              "text-color": "#333",
              "text-halo-width": 1,
              "text-halo-blur": 1
            },
            "layout": {
              "text-field": "{ABBREV}",
              "text-allow-overlap": false,
              "text-max-width": 5,
              "text-size": 10
            },
            "minzoom": 0,
            "maxzoom": 4
          }
        ]
      },
      "swipe": false,
      "sideBySide": false
    }
  ];

  const layouts = [
    {
      // "header": {
      //   "layout": "inline"
      // },
      "title": {
        "book": "Kimmel (3e)",
        "text": "Confederate Places in the U.S.",
        "hideTitle": false,
        "position": "header left"
      },
      "legend": {
        "orientation": "vertical",
        "initialOpened": true,
        "preventHoverHighlight": true,
        "position": "mapfooter right",
        "customWidth": 250,
        // "customHeight": 350,
        "custom": {
          "title": "Facilities",
          "body": [
            {
              "controledLayerID": "class1",
              "label": "County, Flag, Holyiday, Marker"
            },
            {
              "controledLayerID": "class2",
              "label": "Campground, Fire Station"
            },
            {
              "controledLayerID": "class3",
              "label": "Forest, Tree"
            },
            {
              "controledLayerID": "class4",
              "label": "Military Base"
            },
            {
              "controledLayerID": "class5",
              "label": "Bridge, Dam Road/Street/Highway, Trail"
            },
            {
              "controledLayerID": "class6",
              "label": "Mountain, Park, Hatchery/Body of Water, River/Lake"
            },
            {
              "controledLayerID": "class7",
              "label": "Jail"
            },
            {
              "controledLayerID": "class8",
              "label": "Cemetery, Memorial, Plaque"
            },
            {
              "controledLayerID": "class10",
              "label": "Monument"
            },
            {
              "controledLayerID": "class9",
              "label": "Hospital,Buildings, College, House, Municipality, Museum, Room, School, Site"
            }
          ]
        }
      },
      "annotation": {
        "mapspice:annotaded-layer-id": [
          "class1",
          "class2",
          "class3",
          "class4",
          "class5",
          "class6",
          "class7",
          "class8",
          "class9",
          "class10"
        ],
        "customWidth": 230,
        "content": [
          {
            "style": "h1 bold",
            "valueColumns": "Name",
            "sufix": ""
          },
          {
            "style": "h3 ",
            "valueColumns": "city, state",
            "sufix": ""
          },
          {
            "style": "h3 ",
            "prefix": "Year: ",
            "overrideNullValue": "N/A",
            "valueColumns": "year",
            "sufix": ""
          },
          {
            "style": "h3 jammed break",
            "prefix": "Address: ",
            "overrideNullValue": "N/A",
            "valueColumns": "address",
            "sufix": ""
          }
        ]
      },
      "variableDescription": {
        "type": "overlay",
        "initialOpened": true
      },
      "zoomControl": {
        "position": "header left"
      },
      "locateControl": {
        "show": false
      }
    }
  ];

  function onMapInitialized(map) { 
    console.log(map);
    window.map = map;
  }

  ReactDOM.render(
    <MapSpiceUIReact.MapApplication
      mapDefinitions={mapDefinitions}
      layouts={layouts}
      className="map" />,
    document.getElementById('app')
  );
</script>
</body>
</html>
