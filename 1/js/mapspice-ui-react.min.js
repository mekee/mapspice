/**
 * @name MapSpice UI React
 * @version v1.0.0-production
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.MapSpiceUIReact=e()}}(function(){var e,t,n;return function r(e,t,n){function o(a,s){if(!t[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,r,e,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,n,r){!function(){"use strict";function t(){for(var e=[],n=0;n<arguments.length;n++){var o=arguments[n];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o))e.push(t.apply(null,o));else if("object"===i)for(var a in o)r.call(o,a)&&o[a]&&e.push(a)}}return e.join(" ")}var r={}.hasOwnProperty;"undefined"!=typeof n&&n.exports?n.exports=t:"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return t}):window.classNames=t}()},{}],2:[function(e,t,n){(function(n){"use strict";var r=e("./emptyFunction"),o={listen:function i(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function r(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function o(){e.detachEvent("on"+t,n)}}):void 0},capture:function a(e,t,o){return e.addEventListener?(e.addEventListener(t,o,!0),{remove:function i(){e.removeEventListener(t,o,!0)}}):("production"!==n.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function s(){}};t.exports=o}).call(this,e("_process"))},{"./emptyFunction":9,_process:28}],3:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},{}],4:[function(e,t,n){"use strict";function r(e){return e.replace(o,function(e,t){return t.toUpperCase()})}var o=/-(.)/g;t.exports=r},{}],5:[function(e,t,n){"use strict";function r(e){return o(e.replace(i,"ms-"))}var o=e("./camelize"),i=/^-ms-/;t.exports=r},{"./camelize":4}],6:[function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!o(e)&&(o(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var o=e("./isTextNode");t.exports=r},{"./isTextNode":19}],7:[function(e,t,n){(function(n){"use strict";function r(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?"production"!==n.env.NODE_ENV?a(!1,"toArray: Array-like object expected"):a(!1):void 0,"number"!=typeof t?"production"!==n.env.NODE_ENV?a(!1,"toArray: Object needs a length property"):a(!1):void 0,0===t||t-1 in e?void 0:"production"!==n.env.NODE_ENV?a(!1,"toArray: Object should have keys for indices"):a(!1),"function"==typeof e.callee?"production"!==n.env.NODE_ENV?a(!1,"toArray: Object can't be `arguments`. Use rest params (function(...args) {}) or Array.from() instead."):a(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(r){}for(var o=Array(t),i=0;i<t;i++)o[i]=e[i];return o}function o(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return o(e)?Array.isArray(e)?e.slice():r(e):[e]}var a=e("./invariant");t.exports=i}).call(this,e("_process"))},{"./invariant":17,_process:28}],8:[function(e,t,n){(function(n){"use strict";function r(e){var t=e.match(c);return t&&t[1].toLowerCase()}function o(e,t){var o=u;u?void 0:"production"!==n.env.NODE_ENV?l(!1,"createNodesFromMarkup dummy not initialized"):l(!1);var i=r(e),c=i&&s(i);if(c){o.innerHTML=c[1]+e+c[2];for(var p=c[0];p--;)o=o.lastChild}else o.innerHTML=e;var d=o.getElementsByTagName("script");d.length&&(t?void 0:"production"!==n.env.NODE_ENV?l(!1,"createNodesFromMarkup(...): Unexpected <script> element rendered."):l(!1),a(d).forEach(t));for(var f=Array.from(o.childNodes);o.lastChild;)o.removeChild(o.lastChild);return f}var i=e("./ExecutionEnvironment"),a=e("./createArrayFromMixed"),s=e("./getMarkupWrap"),l=e("./invariant"),u=i.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=o}).call(this,e("_process"))},{"./ExecutionEnvironment":3,"./createArrayFromMixed":7,"./getMarkupWrap":13,"./invariant":17,_process:28}],9:[function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function i(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},t.exports=o},{}],10:[function(e,t,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&Object.freeze(n),t.exports=n}).call(this,e("_process"))},{_process:28}],11:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(t){}}t.exports=r},{}],12:[function(e,t,n){"use strict";function r(e){if(e=e||("undefined"!=typeof document?document:void 0),"undefined"==typeof e)return null;try{return e.activeElement||e.body}catch(t){return e.body}}t.exports=r},{}],13:[function(e,t,n){(function(n){"use strict";function r(e){return a?void 0:"production"!==n.env.NODE_ENV?i(!1,"Markup wrapping node not initialized"):i(!1),d.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?d[e]:null}var o=e("./ExecutionEnvironment"),i=e("./invariant"),a=o.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],p=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],d={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(e){d[e]=p,s[e]=!0}),t.exports=r}).call(this,e("_process"))},{"./ExecutionEnvironment":3,"./invariant":17,_process:28}],14:[function(e,t,n){"use strict";function r(e){return e.Window&&e instanceof e.Window?{x:e.pageXOffset||e.document.documentElement.scrollLeft,y:e.pageYOffset||e.document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],15:[function(e,t,n){"use strict";function r(e){return e.replace(o,"-$1").toLowerCase()}var o=/([A-Z])/g;t.exports=r},{}],16:[function(e,t,n){"use strict";function r(e){return o(e).replace(i,"-ms-")}var o=e("./hyphenate"),i=/^ms-/;t.exports=r},{"./hyphenate":15}],17:[function(e,t,n){(function(e){"use strict";function n(e,t,n,o,i,a,s,l){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,a,s,l],p=0;u=new Error(t.replace(/%s/g,function(){return c[p++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var r=function o(e){};"production"!==e.env.NODE_ENV&&(r=function i(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),t.exports=n}).call(this,e("_process"))},{_process:28}],18:[function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"==typeof n.Node?e instanceof n.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=r},{}],19:[function(e,t,n){"use strict";function r(e){return o(e)&&3==e.nodeType}var o=e("./isNode");t.exports=r},{"./isNode":18}],20:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],21:[function(e,t,n){"use strict";var r=e("./ExecutionEnvironment"),o;r.canUseDOM&&(o=window.performance||window.msPerformance||window.webkitPerformance),t.exports=o||{}},{"./ExecutionEnvironment":3}],22:[function(e,t,n){"use strict";var r=e("./performance"),o;o=r.now?function i(){return r.now()}:function a(){return Date.now()},t.exports=o},{"./performance":21}],23:[function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function o(e,t){if(r(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!i.call(t,n[a])||!r(e[n[a]],t[n[a]]))return!1;return!0}var i=Object.prototype.hasOwnProperty;t.exports=o},{}],24:[function(e,t,n){(function(n){"use strict";var r=e("./emptyFunction"),o=r;if("production"!==n.env.NODE_ENV){var i=function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(a){}};o=function s(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];i.apply(void 0,[t].concat(r))}}}t.exports=o}).call(this,e("_process"))},{"./emptyFunction":9,_process:28}],25:[function(e,t,n){(function(e){function r(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function o(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function i(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function a(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function s(e){return function(t){return e(t)}}function l(e,t){return e.has(t)}function u(e,t){return null==e?void 0:e[t]}function c(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function p(e,t){return function(n){return e(t(n))}}function d(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function h(){this.__data__=jt?jt(null):{},this.size=0}function m(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function y(e){var t=this.__data__;if(jt){var n=t[e];return n===be?void 0:n}return _t.call(t,e)?t[e]:void 0}function v(e){var t=this.__data__;return jt?void 0!==t[e]:_t.call(t,e)}function g(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=jt&&void 0===t?be:t,this}function _(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function b(){this.__data__=[],this.size=0}function x(e){var t=this.__data__,n=B(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Pt.call(t,n,1),--this.size,!0}function w(e){var t=this.__data__,n=B(t,e);return n<0?void 0:t[n][1]}function E(e){return B(this.__data__,e)>-1}function k(e,t){var n=this.__data__,r=B(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function C(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function S(){this.size=0,this.__data__={hash:new f,map:new(It||_),string:new f}}function P(e){var t=ee(this,e)["delete"](e);return this.size-=t?1:0,t}function O(e){return ee(this,e).get(e)}function M(e){return ee(this,e).has(e)}function D(e,t){var n=ee(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function T(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new C;++t<n;)this.add(e[t])}function N(e){return this.__data__.set(e,be),this}function I(e){return this.__data__.has(e)}function L(e){var t=this.__data__=new _(e);this.size=t.size}function R(){this.__data__=new _,this.size=0}function A(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}function j(e){return this.__data__.get(e)}function z(e){return this.__data__.has(e)}function V(e,t){var n=this.__data__;if(n instanceof _){var r=n.__data__;if(!It||r.length<_e-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new C(r)}return n.set(e,t),this.size=n.size,this}function F(e,t){var n=Xt(e),r=!n&&Gt(e),o=!n&&!r&&Kt(e),i=!n&&!r&&!o&&Yt(e),s=n||r||o||i,l=s?a(e.length,String):[],u=l.length;for(var c in e)!t&&!_t.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||re(c,u))||l.push(c);return l}function B(e,t){for(var n=e.length;n--;)if(ue(e[n][0],t))return n;return-1}function U(e,t,n){var r=t(e);return Xt(e)?r:o(r,n(e))}function W(e){return null==e?void 0===e?Ue:Le:Ot&&Ot in Object(e)?ne(e):se(e)}function q(e){return me(e)&&W(e)==ke}function H(e,t,n,r,o){return e===t||(null==e||null==t||!me(e)&&!me(t)?e!==e&&t!==t:Z(e,t,n,r,H,o))}function Z(e,t,n,r,o,i){var a=Xt(e),s=Xt(t),l=a?Ce:Zt(e),u=s?Ce:Zt(t);l=l==ke?Re:l,u=u==ke?Re:u;var c=l==Re,p=u==Re,d=l==u;if(d&&Kt(e)){if(!Kt(t))return!1;a=!0,c=!1}if(d&&!c)return i||(i=new L),a||Yt(e)?Y(e,t,n,r,o,i):J(e,t,l,n,r,o,i);if(!(n&xe)){var f=c&&_t.call(e,"__wrapped__"),h=p&&_t.call(t,"__wrapped__");if(f||h){var m=f?e.value():e,y=h?t.value():t;return i||(i=new L),o(m,y,n,r,i)}}return!!d&&(i||(i=new L),$(e,t,n,r,o,i))}function G(e){if(!he(e)||ie(e))return!1;var t=de(e)?wt:nt;return t.test(le(e))}function X(e){return me(e)&&fe(e.length)&&!!ot[W(e)]}function K(e){if(!ae(e))return Tt(e);var t=[];for(var n in Object(e))_t.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Y(e,t,n,r,o,a){var s=n&xe,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var p=a.get(e);if(p&&a.get(t))return p==t;var d=-1,f=!0,h=n&we?new T:void 0;for(a.set(e,t),a.set(t,e);++d<u;){var m=e[d],y=t[d];if(r)var v=s?r(y,m,d,t,e,a):r(m,y,d,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(h){if(!i(t,function(e,t){if(!l(h,t)&&(m===e||o(m,e,n,r,a)))return h.push(t)})){f=!1;break}}else if(m!==y&&!o(m,y,n,r,a)){f=!1;break}}return a["delete"](e),a["delete"](t),f}function J(e,t,n,r,o,i,a){switch(n){case He:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qe:return!(e.byteLength!=t.byteLength||!i(new Ct(e),new Ct(t)));case Pe:case Oe:case Ie:return ue(+e,+t);case Me:return e.name==t.name&&e.message==t.message;case ze:case Fe:return e==t+"";case Ne:var s=c;case Ve:var l=r&xe;if(s||(s=d),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=we,a.set(e,t);var p=Y(s(e),s(t),r,o,i,a);return a["delete"](e),p;case Be:if(qt)return qt.call(e)==qt.call(t)}return!1}function $(e,t,n,r,o,i){var a=n&xe,s=Q(e),l=s.length,u=Q(t),c=u.length;if(l!=c&&!a)return!1;for(var p=l;p--;){var d=s[p];if(!(a?d in t:_t.call(t,d)))return!1}var f=i.get(e);if(f&&i.get(t))return f==t;var h=!0;i.set(e,t),i.set(t,e);for(var m=a;++p<l;){d=s[p];var y=e[d],v=t[d];if(r)var g=a?r(v,y,d,t,e,i):r(y,v,d,e,t,i);if(!(void 0===g?y===v||o(y,v,n,r,i):g)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var _=e.constructor,b=t.constructor;_!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(h=!1)}return i["delete"](e),i["delete"](t),h}function Q(e){return U(e,ye,Ht)}function ee(e,t){var n=e.__data__;return oe(t)?n["string"==typeof t?"string":"hash"]:n.map}function te(e,t){var n=u(e,t);return G(n)?n:void 0}function ne(e){var t=_t.call(e,Ot),n=e[Ot];try{e[Ot]=void 0;var r=!0}catch(o){}var i=xt.call(e);return r&&(t?e[Ot]=n:delete e[Ot]),i}function re(e,t){return t=null==t?Ee:t,!!t&&("number"==typeof e||rt.test(e))&&e>-1&&e%1==0&&e<t}function oe(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ie(e){return!!bt&&bt in e}function ae(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||yt;return e===n}function se(e){return xt.call(e)}function le(e){if(null!=e){try{return gt.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function ue(e,t){return e===t||e!==e&&t!==t}function ce(e){return null!=e&&fe(e.length)&&!de(e)}function pe(e,t){return H(e,t)}function de(e){if(!he(e))return!1;var t=W(e);return t==De||t==Te||t==Se||t==je}function fe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ee}function he(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function me(e){return null!=e&&"object"==typeof e}function ye(e){return ce(e)?F(e):K(e)}function ve(){return[]}function ge(){return!1}var _e=200,be="__lodash_hash_undefined__",xe=1,we=2,Ee=9007199254740991,ke="[object Arguments]",Ce="[object Array]",Se="[object AsyncFunction]",Pe="[object Boolean]",Oe="[object Date]",Me="[object Error]",De="[object Function]",Te="[object GeneratorFunction]",Ne="[object Map]",Ie="[object Number]",Le="[object Null]",Re="[object Object]",Ae="[object Promise]",je="[object Proxy]",ze="[object RegExp]",Ve="[object Set]",Fe="[object String]",Be="[object Symbol]",Ue="[object Undefined]",We="[object WeakMap]",qe="[object ArrayBuffer]",He="[object DataView]",Ze="[object Float32Array]",Ge="[object Float64Array]",Xe="[object Int8Array]",Ke="[object Int16Array]",Ye="[object Int32Array]",Je="[object Uint8Array]",$e="[object Uint8ClampedArray]",Qe="[object Uint16Array]",et="[object Uint32Array]",tt=/[\\^$.*+?()[\]{}|]/g,nt=/^\[object .+?Constructor\]$/,rt=/^(?:0|[1-9]\d*)$/,ot={};ot[Ze]=ot[Ge]=ot[Xe]=ot[Ke]=ot[Ye]=ot[Je]=ot[$e]=ot[Qe]=ot[et]=!0,ot[ke]=ot[Ce]=ot[qe]=ot[Pe]=ot[He]=ot[Oe]=ot[Me]=ot[De]=ot[Ne]=ot[Ie]=ot[Re]=ot[ze]=ot[Ve]=ot[Fe]=ot[We]=!1;var it="object"==typeof e&&e&&e.Object===Object&&e,at="object"==typeof self&&self&&self.Object===Object&&self,st=it||at||Function("return this")(),lt="object"==typeof n&&n&&!n.nodeType&&n,ut=lt&&"object"==typeof t&&t&&!t.nodeType&&t,ct=ut&&ut.exports===lt,pt=ct&&it.process,dt=function(){try{return pt&&pt.binding&&pt.binding("util")}catch(e){}}(),ft=dt&&dt.isTypedArray,ht=Array.prototype,mt=Function.prototype,yt=Object.prototype,vt=st["__core-js_shared__"],gt=mt.toString,_t=yt.hasOwnProperty,bt=function(){var e=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),xt=yt.toString,wt=RegExp("^"+gt.call(_t).replace(tt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=ct?st.Buffer:void 0,kt=st.Symbol,Ct=st.Uint8Array,St=yt.propertyIsEnumerable,Pt=ht.splice,Ot=kt?kt.toStringTag:void 0,Mt=Object.getOwnPropertySymbols,Dt=Et?Et.isBuffer:void 0,Tt=p(Object.keys,Object),Nt=te(st,"DataView"),It=te(st,"Map"),Lt=te(st,"Promise"),Rt=te(st,"Set"),At=te(st,"WeakMap"),jt=te(Object,"create"),zt=le(Nt),Vt=le(It),Ft=le(Lt),Bt=le(Rt),Ut=le(At),Wt=kt?kt.prototype:void 0,qt=Wt?Wt.valueOf:void 0;f.prototype.clear=h,f.prototype["delete"]=m,f.prototype.get=y,f.prototype.has=v,f.prototype.set=g,_.prototype.clear=b,_.prototype["delete"]=x,_.prototype.get=w,_.prototype.has=E,_.prototype.set=k,C.prototype.clear=S,C.prototype["delete"]=P,C.prototype.get=O,C.prototype.has=M,C.prototype.set=D,T.prototype.add=T.prototype.push=N,T.prototype.has=I,L.prototype.clear=R,L.prototype["delete"]=A,L.prototype.get=j,L.prototype.has=z,L.prototype.set=V;var Ht=Mt?function(e){return null==e?[]:(e=Object(e),r(Mt(e),function(t){return St.call(e,t)}))}:ve,Zt=W;(Nt&&Zt(new Nt(new ArrayBuffer(1)))!=He||It&&Zt(new It)!=Ne||Lt&&Zt(Lt.resolve())!=Ae||Rt&&Zt(new Rt)!=Ve||At&&Zt(new At)!=We)&&(Zt=function(e){var t=W(e),n=t==Re?e.constructor:void 0,r=n?le(n):"";if(r)switch(r){case zt:return He;case Vt:return Ne;case Ft:return Ae;case Bt:return Ve;case Ut:return We}return t});var Gt=q(function(){return arguments}())?q:function(e){return me(e)&&_t.call(e,"callee")&&!St.call(e,"callee")},Xt=Array.isArray,Kt=Dt||ge,Yt=ft?s(ft):X;t.exports=pe}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(t,n,r){(function(o){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,i.MapSpice_Map_v2_1_0=t()}}(function(){var e;return function n(e,r,o){function i(s,l){if(!r[s]){if(!e[s]){var u="function"==typeof t&&t;if(!l&&u)return u(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return i(n?n:t)},p,p.exports,n,e,r,o)}return r[s].exports}for(var a="function"==typeof t&&t,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,n,r){"use strict";!function(t,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof e&&e.amd?e(o):t.glMatrix=o()}(void 0,function(){function e(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}function t(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e}function n(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e}function o(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function i(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=o*l+a*s,e[2]=r*-s+i*l,e[3]=o*-s+a*l,e}function a(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=o*s,e[2]=i*l,e[3]=a*l,e}function s(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function l(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function u(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],f=t[11],h=t[12],m=t[13],y=t[14],v=t[15],g=n*s-r*a,_=n*l-o*a,b=n*u-i*a,x=r*l-o*s,w=r*u-i*s,E=o*u-i*l,k=c*m-p*h,C=c*y-d*h,S=c*v-f*h,P=p*y-d*m,O=p*v-f*m,M=d*v-f*y,D=g*M-_*O+b*P+x*S-w*C+E*k;return D?(D=1/D,e[0]=(s*M-l*O+u*P)*D,e[1]=(o*O-r*M-i*P)*D,e[2]=(m*E-y*w+v*x)*D,e[3]=(d*w-p*E-f*x)*D,e[4]=(l*S-a*M-u*C)*D,e[5]=(n*M-o*S+i*C)*D,e[6]=(y*b-h*E-v*_)*D,e[7]=(c*E-d*b+f*_)*D,e[8]=(a*O-s*S+u*k)*D,e[9]=(r*S-n*O-i*k)*D,e[10]=(h*w-m*b+v*g)*D,e[11]=(p*b-c*w-f*g)*D,e[12]=(s*C-a*P-l*k)*D,e[13]=(n*P-r*C+o*k)*D,e[14]=(m*_-h*x-y*g)*D,e[15]=(c*x-p*_+d*g)*D,e):null}function d(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],m=t[12],y=t[13],v=t[14],g=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*p+w*m,e[1]=_*o+b*l+x*d+w*y,e[2]=_*i+b*u+x*f+w*v,e[3]=_*a+b*c+x*h+w*g,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*p+w*m,e[5]=_*o+b*l+x*d+w*y,e[6]=_*i+b*u+x*f+w*v,e[7]=_*a+b*c+x*h+w*g,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*p+w*m,e[9]=_*o+b*l+x*d+w*y,e[10]=_*i+b*u+x*f+w*v,e[11]=_*a+b*c+x*h+w*g,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*p+w*m,e[13]=_*o+b*l+x*d+w*y,e[14]=_*i+b*u+x*f+w*v,e[15]=_*a+b*c+x*h+w*g,e}function f(e,t,n){var r,o,i,a,s,l,u,c,p,d,f,h,m=n[0],y=n[1],v=n[2];return t===e?(e[12]=t[0]*m+t[4]*y+t[8]*v+t[12],e[13]=t[1]*m+t[5]*y+t[9]*v+t[13],e[14]=t[2]*m+t[6]*y+t[10]*v+t[14],e[15]=t[3]*m+t[7]*y+t[11]*v+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],f=t[10],h=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=d,e[10]=f,e[11]=h,e[12]=r*m+s*y+p*v+t[12],e[13]=o*m+l*y+d*v+t[13],e[14]=i*m+u*y+f*v+t[14],e[15]=a*m+c*y+h*v+t[15]),e}function h(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function m(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+u*r,e[5]=a*o+c*r,e[6]=s*o+p*r,e[7]=l*o+d*r,e[8]=u*o-i*r,e[9]=c*o-a*r,e[10]=p*o-s*r,e[11]=d*o-l*r,e}function y(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+u*r,e[1]=a*o+c*r,e[2]=s*o+p*r,e[3]=l*o+d*r,e[4]=u*o-i*r,e[5]=c*o-a*r,e[6]=p*o-s*r,e[7]=d*o-l*r,e}function v(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e}function g(e,t,n,r,o,i,a){var s=1/(t-n),l=1/(r-o),u=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=(a+i)*u,e[15]=1,e}var _=(e(),n(),{vec3:{transformMat3:t},vec4:{transformMat4:r},mat2:{create:o,rotate:i,scale:a},mat3:{create:s,fromRotation:l},mat4:{create:u,identity:c,translate:f,scale:h,multiply:d,perspective:v,rotateX:m,rotateZ:y,invert:p,ortho:g}});return _})},{}],2:[function(t,n,r){"use strict";!function(t,o){"object"==typeof r&&"undefined"!=typeof n?n.exports=o():"function"==typeof e&&e.amd?e(o):t.ShelfPack=o()}(void 0,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}function n(e,t,n,r,o,i,a){this.id=e,this.x=t,this.y=n,this.w=r,this.h=o,this.maxw=i||r,this.maxh=a||o,this.refcount=0}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var n,r,o,i,a=[],s=0;s<e.length;s++)if(n=e[s].w||e[s].width,r=e[s].h||e[s].height,o=e[s].id,n&&r){if(i=this.packOne(n,r,o),!i)continue;t.inPlace&&(e[s].x=i.x,e[s].y=i.y,e[s].id=i.id),a.push(i)}return this.shrink(),a},e.prototype.packOne=function(e,n,r){var o,i,a,s,l={freebin:-1,shelf:-1,waste:1/0},u=0;if("string"==typeof r||"number"==typeof r){if(o=this.getBin(r))return this.ref(o),o;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(o=this.freebins[s],n===o.maxh&&e===o.maxw)return this.allocFreebin(s,e,n,r);n>o.maxh||e>o.maxw||n<=o.maxh&&e<=o.maxw&&(a=o.maxw*o.maxh-e*n,a<l.waste&&(l.waste=a,l.freebin=s))}for(s=0;s<this.shelves.length;s++)if(i=this.shelves[s],u+=i.h,!(e>i.free)){if(n===i.h)return this.allocShelf(s,e,n,r);n>i.h||n<i.h&&(a=(i.h-n)*e,a<l.waste&&(l.freebin=-1,l.waste=a,l.shelf=s))}if(l.freebin!==-1)return this.allocFreebin(l.freebin,e,n,r);if(l.shelf!==-1)return this.allocShelf(l.shelf,e,n,r);if(n<=this.h-u&&e<=this.w)return i=new t(u,this.w,n),this.allocShelf(this.shelves.push(i)-1,e,n,r);if(this.autoResize){var c,p,d,f;return c=p=this.h,d=f=this.w,(d<=c||e>d)&&(f=2*Math.max(e,d)),(c<d||n>c)&&(p=2*Math.max(n,c)),this.resize(f,p),this.packOne(e,n,r)}return null},e.prototype.allocFreebin=function(e,t,n,r){var o=this.freebins.splice(e,1)[0];return o.id=r,o.w=t,o.h=n,o.refcount=0,this.bins[r]=o,this.ref(o),o},e.prototype.allocShelf=function(e,t,n,r){var o=this.shelves[e],i=o.alloc(t,n,r);return this.bins[r]=i,this.ref(i),i},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,n=0;n<this.shelves.length;n++){var r=this.shelves[n];t+=r.h,e=Math.max(r.w-r.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1===++e.refcount){var t=e.h;this.stats[t]=(0|this.stats[t])+1}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0===--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(e);return!0},t.prototype.alloc=function(e,t,r){if(e>this.free||t>this.h)return null;var o=this.x;return this.x+=e,this.free-=e,new n(r,o,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],3:[function(e,t,n){"use strict";function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){"undefined"==typeof t&&(t=1e-6);var n,r,o,i,a;for(o=e,a=0;a<8;a++){if(i=this.sampleCurveX(o)-e,Math.abs(i)<t)return o;var s=this.sampleCurveDerivativeX(o);if(Math.abs(s)<1e-6)break;o-=i/s}if(n=0,r=1,o=e,o<n)return n;if(o>r)return r;for(;n<r;){if(i=this.sampleCurveX(o),Math.abs(i-e)<t)return o;e>i?n=o:r=o,o=.5*(r-n)+n}return o},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],4:[function(t,n,r){"use strict";!function(t,o){"object"==typeof r&&"undefined"!=typeof n?o(r):"function"==typeof e&&e.amd?e(["exports"],o):o(t.WhooTS=t.WhooTS||{})}(void 0,function(e){function t(e,t,r,o,i,a){a=a||{};var s=e+"?"+["bbox="+n(r,o,i),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+t].join("&");return s}function n(e,t,n){t=Math.pow(2,n)-t-1;var o=r(256*e,256*t,n),i=r(256*(e+1),256*(t+1),n);return o[0]+","+o[1]+","+i[0]+","+i[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n),o=e*r-2*Math.PI*6378137/2,i=t*r-2*Math.PI*6378137/2;return[o,i]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],5:[function(t,n,r){"use strict";(function(){var t,o,i,a,s,l,u,c,p,d,f,h,m,y,v,g,_,b,x,w,E,k,C,S,P,O,M,D,T,N,I,L,R,A,j,z,V,F,B,U,W,q,H,Z,G,X,K,Y,J,$,Q,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,pe,de,fe,he,me,ye,ve,ge,_e,be,xe,we,Ee,ke,Ce,Se,Pe,Oe=[].slice;Ee=function(){var e,t,n,r,o;for(e={},o="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,t=o.length;r<t;r++)n=o[r],e["[object "+n+"]"]=n.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),G=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),e<t&&(e=t),e>n&&(e=n),e},ke=function(e){return e.length>=3?[].slice.call(e):e[0]},w=function(e){var t;for(t in e)t<3?(e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e},a=Math.PI,ge=Math.round,C=Math.cos,D=Math.floor,ne=Math.pow,X=Math.log,be=Math.sin,xe=Math.sqrt,m=Math.atan2,J=Math.max,h=Math.abs,u=2*a,s=a/3,o=a/180,l=180/a,x=function(){return arguments[0]instanceof t?arguments[0]:function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,arguments,function(){})},f=[],"undefined"!=typeof n&&null!==n&&null!=n.exports&&(n.exports=x),"function"==typeof e&&e.amd?e([],function(){return x}):(ve="undefined"!=typeof r&&null!==r?r:this,ve.chroma=x),x.version="1.1.1",d={},c=[],p=!1,t=function(){function e(){var e,t,n,r,o,i,a,s,l;for(i=this,
t=[],s=0,r=arguments.length;s<r;s++)e=arguments[s],null!=e&&t.push(e);if(a=t[t.length-1],null!=d[a])i._rgb=w(d[a](ke(t.slice(0,-1))));else{for(p||(c=c.sort(function(e,t){return t.p-e.p}),p=!0),l=0,o=c.length;l<o&&(n=c[l],!(a=n.test.apply(n,t)));l++);a&&(i._rgb=w(d[a].apply(d,t)))}null==i._rgb&&console.warn("unknown format: "+t),null==i._rgb&&(i._rgb=[0,0,0]),3===i._rgb.length&&i._rgb.push(1)}return e.prototype.alpha=function(e){return arguments.length?(this._rgb[3]=e,this):this._rgb[3]},e.prototype.toString=function(){return this.name()},e}(),x._input=d,x.brewer=_={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ce={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6",rebeccapurple:"#663399"},x.colors=k=Ce,U=function(){var e,t,n,r,o,a,s,l,u;return t=ke(arguments),o=t[0],e=t[1],n=t[2],l=(o+16)/116,s=isNaN(e)?l:l+e/500,u=isNaN(n)?l:l-n/200,l=i.Yn*W(l),s=i.Xn*W(s),u=i.Zn*W(u),a=Pe(3.2404542*s-1.5371385*l-.4985314*u),r=Pe(-.969266*s+1.8760108*l+.041556*u),n=Pe(.0556434*s-.2040259*l+1.0572252*u),a=G(a,0,255),r=G(r,0,255),n=G(n,0,255),[a,r,n,t.length>3?t[3]:1]},Pe=function(e){return ge(255*(e<=.00304?12.92*e:1.055*ne(e,1/2.4)-.055))},W=function(e){return e>i.t1?e*e*e:i.t2*(e-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ue=function(){var e,t,n,r,o,i,a,s;return r=ke(arguments),n=r[0],t=r[1],e=r[2],o=he(n,t,e),i=o[0],a=o[1],s=o[2],[116*a-16,500*(i-a),200*(a-s)]},me=function(e){return(e/=255)<=.04045?e/12.92:ne((e+.055)/1.055,2.4)},Se=function(e){return e>i.t3?ne(e,1/3):e/i.t2+i.t0},he=function(){var e,t,n,r,o,a,s;return r=ke(arguments),n=r[0],t=r[1],e=r[2],n=me(n),t=me(t),e=me(e),o=Se((.4124564*n+.3575761*t+.1804375*e)/i.Xn),a=Se((.2126729*n+.7151522*t+.072175*e)/i.Yn),s=Se((.0193339*n+.119192*t+.9503041*e)/i.Zn),[o,a,s]},x.lab=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["lab"]),function(){})},d.lab=U,t.prototype.lab=function(){return ue(this._rgb)},y=function(e){var t,n,r,o,i,a,s,l,u,c,p;return e=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)o=e[n],r.push(x(o));return r}(),2===e.length?(u=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)o=e[n],r.push(o.lab());return r}(),i=u[0],a=u[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push(i[t]+e*(a[t]-i[t]));return r}(),x.lab.apply(x,n)}):3===e.length?(c=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)o=e[n],r.push(o.lab());return r}(),i=c[0],a=c[1],s=c[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*i[t]+2*(1-e)*e*a[t]+e*e*s[t]);return r}(),x.lab.apply(x,n)}):4===e.length?(p=function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)o=e[n],r.push(o.lab());return r}(),i=p[0],a=p[1],s=p[2],l=p[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;n<=2;t=++n)r.push((1-e)*(1-e)*(1-e)*i[t]+3*(1-e)*(1-e)*e*a[t]+3*(1-e)*e*e*s[t]+e*e*e*l[t]);return r}(),x.lab.apply(x,n)}):5===e.length&&(n=y(e.slice(0,3)),r=y(e.slice(2,5)),t=function(e){return e<.5?n(2*e):r(2*(e-.5))}),t},x.bezier=function(e){var t;return t=y(e),t.scale=function(){return x.scale(t)},t},x.cubehelix=function(e,t,n,r,o){var i,a,s;return null==e&&(e=300),null==t&&(t=-1.5),null==n&&(n=1),null==r&&(r=1),null==o&&(o=[0,1]),a=o[1]-o[0],i=0,s=function(s){var l,c,p,d,f,h,m,y,v;return l=u*((e+120)/360+t*s),m=ne(o[0]+a*s,r),h=0!==i?n[0]+s*i:n,c=h*m*(1-m)/2,d=C(l),v=be(l),y=m+c*(-.14861*d+1.78277*v),f=m+c*(-.29227*d-.90649*v),p=m+c*(1.97294*d),x(w([255*y,255*f,255*p]))},s.start=function(t){return null==t?e:(e=t,s)},s.rotations=function(e){return null==e?t:(t=e,s)},s.gamma=function(e){return null==e?r:(r=e,s)},s.hue=function(e){return null==e?n:(n=e,"array"===Ee(n)?(i=n[1]-n[0],0===i&&(n=n[1])):i=0,s)},s.lightness=function(e){return null==e?o:(o=e,"array"===Ee(o)?(a=o[1]-o[0],0===a&&(o=o[1])):a=0,s)},s.scale=function(){return x.scale(s)},s.hue(n),s},x.random=function(){var e,n,r,o;for(n="0123456789abcdef",e="#",r=o=0;o<6;r=++o)e+=n.charAt(D(16*Math.random()));return new t(e)},x.average=function(e){var n,r,o,i,a,s,l,u,c;for(u=i=r=n=0,a=e.length,l=0,s=e.length;l<s;l++)o=e[l],c=x(o).rgba(),u+=c[0],i+=c[1],r+=c[2],n+=c[3];return new t(u/a,i/a,r/a,n/a)},d.rgb=function(){var e,t,n,r;t=ke(arguments),n=[];for(e in t)r=t[e],n.push(r);return n},x.rgb=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["rgb"]),function(){})},t.prototype.rgb=function(){return this._rgb.slice(0,3)},t.prototype.rgba=function(){return this._rgb},c.push({p:15,test:function(e){var t;return t=ke(arguments),"array"===Ee(t)&&3===t.length?"rgb":4===t.length&&"number"===Ee(t[3])&&t[3]>=0&&t[3]<=1?"rgb":void 0}}),T=function(e){var t,n,r,o,i,a;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),a=parseInt(e,16),o=a>>16,r=a>>8&255,n=255&a,[o,r,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),a=parseInt(e,16),o=a>>24&255,r=a>>16&255,n=a>>8&255,t=ge((255&a)/255*100)/100,[o,r,n,t];if(null!=d.css&&(i=d.css(e)))return i;throw"unknown color: "+e},ie=function(e,t){var n,r,o,i,a,s,l;return null==t&&(t="rgb"),a=e[0],o=e[1],r=e[2],n=e[3],l=a<<16|o<<8|r,s="000000"+l.toString(16),s=s.substr(s.length-6),i="0"+ge(255*n).toString(16),i=i.substr(i.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return s+i;case"argb":return i+s;default:return s}}()},d.hex=function(e){return T(e)},x.hex=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["hex"]),function(){})},t.prototype.hex=function(e){return null==e&&(e="rgb"),ie(this._rgb,e)},c.push({p:10,test:function(e){if(1===arguments.length&&"string"===Ee(e))return"hex"}}),L=function(){var e,t,n,r,o,i,a,s,l,u,c,p,d,f;if(e=ke(arguments),o=e[0],c=e[1],a=e[2],0===c)l=r=t=255*a;else{for(f=[0,0,0],n=[0,0,0],d=a<.5?a*(1+c):a+c-a*c,p=2*a-d,o/=360,f[0]=o+1/3,f[1]=o,f[2]=o-1/3,i=s=0;s<=2;i=++s)f[i]<0&&(f[i]+=1),f[i]>1&&(f[i]-=1),6*f[i]<1?n[i]=p+6*(d-p)*f[i]:2*f[i]<1?n[i]=d:3*f[i]<2?n[i]=p+(d-p)*(2/3-f[i])*6:n[i]=p;u=[ge(255*n[0]),ge(255*n[1]),ge(255*n[2])],l=u[0],r=u[1],t=u[2]}return e.length>3?[l,r,t,e[3]]:[l,r,t]},se=function(e,t,n){var r,o,i,a,s;return void 0!==e&&e.length>=3&&(a=e,e=a[0],t=a[1],n=a[2]),e/=255,t/=255,n/=255,i=Math.min(e,t,n),J=Math.max(e,t,n),o=(J+i)/2,J===i?(s=0,r=Number.NaN):s=o<.5?(J-i)/(J+i):(J-i)/(2-J-i),e===J?r=(t-n)/(J-i):t===J?r=2+(n-e)/(J-i):n===J&&(r=4+(e-t)/(J-i)),r*=60,r<0&&(r+=360),[r,s,o]},x.hsl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["hsl"]),function(){})},d.hsl=L,t.prototype.hsl=function(){return se(this._rgb)},R=function(){var e,t,n,r,o,i,a,s,l,u,c,p,d,f,h,m,y,v;if(e=ke(arguments),o=e[0],m=e[1],v=e[2],v*=255,0===m)l=r=t=v;else switch(360===o&&(o=0),o>360&&(o-=360),o<0&&(o+=360),o/=60,i=D(o),n=o-i,a=v*(1-m),s=v*(1-m*n),y=v*(1-m*(1-n)),i){case 0:u=[v,y,a],l=u[0],r=u[1],t=u[2];break;case 1:c=[s,v,a],l=c[0],r=c[1],t=c[2];break;case 2:p=[a,v,y],l=p[0],r=p[1],t=p[2];break;case 3:d=[a,s,v],l=d[0],r=d[1],t=d[2];break;case 4:f=[y,a,v],l=f[0],r=f[1],t=f[2];break;case 5:h=[v,a,s],l=h[0],r=h[1],t=h[2]}return l=ge(l),r=ge(r),t=ge(t),[l,r,t,e.length>3?e[3]:1]},le=function(){var e,t,n,r,o,i,a,s,l;return a=ke(arguments),i=a[0],n=a[1],e=a[2],o=Math.min(i,n,e),J=Math.max(i,n,e),t=J-o,l=J/255,0===J?(r=Number.NaN,s=0):(s=t/J,i===J&&(r=(n-e)/t),n===J&&(r=2+(e-i)/t),e===J&&(r=4+(i-n)/t),r*=60,r<0&&(r+=360)),[r,s,l]},x.hsv=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["hsv"]),function(){})},d.hsv=R,t.prototype.hsv=function(){return le(this._rgb)},ee=function(e){var t,n,r;return"number"===Ee(e)&&e>=0&&e<=16777215?(r=e>>16,n=e>>8&255,t=255&e,[r,n,t,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},de=function(){var e,t,n,r;return r=ke(arguments),n=r[0],t=r[1],e=r[2],(n<<16)+(t<<8)+e},x.num=function(e){return new t(e,"num")},t.prototype.num=function(e){return null==e&&(e="rgb"),de(this._rgb,e)},d.num=ee,c.push({p:10,test:function(e){if(1===arguments.length&&"number"===Ee(e)&&e>=0&&e<=16777215)return"num"}}),S=function(e){var t,n,r,o,i,a,s,l;if(e=e.toLowerCase(),null!=x.colors&&x.colors[e])return T(x.colors[e]);if(i=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(s=i.slice(1,4),o=a=0;a<=2;o=++a)s[o]=+s[o];s[3]=1}else if(i=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(s=i.slice(1,5),o=l=0;l<=3;o=++l)s[o]=+s[o];else if(i=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(s=i.slice(1,4),o=t=0;t<=2;o=++t)s[o]=ge(2.55*s[o]);s[3]=1}else if(i=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(s=i.slice(1,5),o=n=0;n<=2;o=++n)s[o]=ge(2.55*s[o]);s[3]=+s[3]}else(i=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=i.slice(1,4),r[1]*=.01,r[2]*=.01,s=L(r),s[3]=1):(i=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=i.slice(1,4),r[1]*=.01,r[2]*=.01,s=L(r),s[3]=+i[4]);return s},oe=function(e){var t;return t=e[3]<1?"rgba":"rgb","rgb"===t?t+"("+e.slice(0,3).map(ge).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(ge).join(",")+","+e[3]+")":void 0},ye=function(e){return ge(100*e)/100},I=function(e,t){var n;return n=t<1?"hsla":"hsl",e[0]=ye(e[0]||0),e[1]=ye(100*e[1])+"%",e[2]=ye(100*e[2])+"%","hsla"===n&&(e[3]=t),n+"("+e.join(",")+")"},d.css=function(e){return S(e)},x.css=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["css"]),function(){})},t.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?oe(this._rgb):"hsl"===e.slice(0,3)?I(this.hsl(),this.alpha()):void 0},d.named=function(e){return T(Ce[e])},c.push({p:20,test:function(e){if(1===arguments.length&&null!=Ce[e])return"named"}}),t.prototype.name=function(e){var t,n;arguments.length&&(Ce[e]&&(this._rgb=T(Ce[e])),this._rgb[3]=1),t=this.hex();for(n in Ce)if(t===Ce[n])return n;return t},q=function(){var e,t,n,r;return r=ke(arguments),n=r[0],e=r[1],t=r[2],t*=o,[n,C(t)*e,be(t)*e]},H=function(){var e,t,n,r,o,i,a,s,l,u,c;return n=ke(arguments),s=n[0],o=n[1],a=n[2],u=q(s,o,a),e=u[0],t=u[1],r=u[2],c=U(e,t,r),l=c[0],i=c[1],r=c[2],[G(l,0,255),G(i,0,255),G(r,0,255),n.length>3?n[3]:1]},B=function(){var e,t,n,r,o,i;return i=ke(arguments),o=i[0],e=i[1],t=i[2],n=xe(e*e+t*t),r=(m(t,e)*l+360)%360,0===ge(1e4*n)&&(r=Number.NaN),[o,n,r]},ce=function(){var e,t,n,r,o,i,a;return i=ke(arguments),o=i[0],n=i[1],t=i[2],a=ue(o,n,t),r=a[0],e=a[1],t=a[2],B(r,e,t)},x.lch=function(){var e;return e=ke(arguments),new t(e,"lch")},x.hcl=function(){var e;return e=ke(arguments),new t(e,"hcl")},d.lch=H,d.hcl=function(){var e,t,n,r;return r=ke(arguments),t=r[0],e=r[1],n=r[2],H([n,e,t])},t.prototype.lch=function(){return ce(this._rgb)},t.prototype.hcl=function(){return ce(this._rgb).reverse()},re=function(e){var t,n,r,o,i,a,s,l,u;return null==e&&(e="rgb"),l=ke(arguments),s=l[0],o=l[1],t=l[2],s/=255,o/=255,t/=255,i=1-Math.max(s,Math.max(o,t)),r=i<1?1/(1-i):0,n=(1-s-i)*r,a=(1-o-i)*r,u=(1-t-i)*r,[n,a,u,i]},E=function(){var e,t,n,r,o,i,a,s,l;return t=ke(arguments),r=t[0],a=t[1],l=t[2],i=t[3],e=t.length>4?t[4]:1,1===i?[0,0,0,e]:(s=r>=1?0:ge(255*(1-r)*(1-i)),o=a>=1?0:ge(255*(1-a)*(1-i)),n=l>=1?0:ge(255*(1-l)*(1-i)),[s,o,n,e])},d.cmyk=function(){return E(ke(arguments))},x.cmyk=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["cmyk"]),function(){})},t.prototype.cmyk=function(){return re(this._rgb)},d.gl=function(){var e,t,n,r,o;for(r=function(){var e,n;e=ke(arguments),n=[];for(t in e)o=e[t],n.push(o);return n}.apply(this,arguments),e=n=0;n<=2;e=++n)r[e]*=255;return r},x.gl=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["gl"]),function(){})},t.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},pe=function(e,t,n){var r;return r=ke(arguments),e=r[0],t=r[1],n=r[2],e=K(e),t=K(t),n=K(n),.2126*e+.7152*t+.0722*n},K=function(e){return e/=255,e<=.03928?e/12.92:ne((e+.055)/1.055,2.4)},f=[],A=function(e,t,n,r){var o,i,a,s;for(null==n&&(n=.5),null==r&&(r="rgb"),"object"!==Ee(e)&&(e=x(e)),"object"!==Ee(t)&&(t=x(t)),a=0,i=f.length;a<i;a++)if(o=f[a],r===o[0]){s=o[1](e,t,n,r);break}if(null==s)throw"color mode "+r+" is not supported";return s.alpha(e.alpha()+n*(t.alpha()-e.alpha())),s},x.interpolate=A,t.prototype.interpolate=function(e,t,n){return A(this,e,t,n)},x.mix=A,t.prototype.mix=t.prototype.interpolate,F=function(e,n,r,o){var i,a;return i=e._rgb,a=n._rgb,new t(i[0]+r*(a[0]-i[0]),i[1]+r*(a[1]-i[1]),i[2]+r*(a[2]-i[2]),o)},f.push(["rgb",F]),t.prototype.luminance=function(e,t){var n,r,o,i;return null==t&&(t="rgb"),arguments.length?(0===e?this._rgb=[0,0,0,this._rgb[3]]:1===e?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,o=20,i=function(n,a){var s,l;return l=n.interpolate(a,.5,t),s=l.luminance(),Math.abs(e-s)<r||!o--?l:s>e?i(n,l):i(l,a)},n=pe(this._rgb),this._rgb=(n>e?i(x("black"),this):i(this,x("white"))).rgba()),this):pe(this._rgb)},we=function(e){var t,n,r,o;return o=e/100,o<66?(r=255,n=-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*X(n),t=o<20?0:-254.76935184120902+.8274096064007395*(t=o-10)+115.67994401066147*X(t)):(r=351.97690566805693+.114206453784165*(r=o-55)-40.25366309332127*X(r),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*X(n),t=255),w([r,n,t])},fe=function(){var e,t,n,r,o,i,a,s,l;for(a=ke(arguments),i=a[0],n=a[1],e=a[2],o=1e3,r=4e4,t=.4;r-o>t;)l=.5*(r+o),s=we(l),s[2]/s[0]>=e/i?r=l:o=l;return ge(l)},x.temperature=x.kelvin=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["temperature"]),function(){})},d.temperature=d.kelvin=d.K=we,t.prototype.temperature=function(){return fe(this._rgb)},t.prototype.kelvin=t.prototype.temperature,x.contrast=function(e,n){var r,o,i,a;return"string"!==(i=Ee(e))&&"number"!==i||(e=new t(e)),"string"!==(a=Ee(n))&&"number"!==a||(n=new t(n)),r=e.luminance(),o=n.luminance(),r>o?(r+.05)/(o+.05):(o+.05)/(r+.05)},t.prototype.get=function(e){var t,n,r,o,i,a;return r=this,i=e.split("."),o=i[0],t=i[1],a=r[o](),t?(n=o.indexOf(t),n>-1?a[n]:console.warn("unknown channel "+t+" in mode "+o)):a},t.prototype.set=function(e,t){var n,r,o,i,a,s;if(o=this,a=e.split("."),i=a[0],n=a[1])if(s=o[i](),r=i.indexOf(n),r>-1)if("string"===Ee(t))switch(t.charAt(0)){case"+":s[r]+=+t;break;case"-":s[r]+=+t;break;case"*":s[r]*=+t.substr(1);break;case"/":s[r]/=+t.substr(1);break;default:s[r]=+t}else s[r]=t;else console.warn("unknown channel "+n+" in mode "+i);else s=t;return o._rgb=x(s,i).alpha(o.alpha())._rgb,o},t.prototype.darken=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lab(),t[0]-=i.Kn*e,x.lab(t).alpha(n.alpha())},t.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},t.prototype.darker=t.prototype.darken,t.prototype.brighter=t.prototype.brighten,t.prototype.saturate=function(e){var t,n;return null==e&&(e=1),n=this,t=n.lch(),t[1]+=e*i.Kn,t[1]<0&&(t[1]=0),x.lch(t).alpha(n.alpha())},t.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},t.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),x(t[0]*e,t[1]*e,t[2]*e,e)},v=function(e,t,n){if(!v[n])throw"unknown blend mode "+n;return v[n](e,t)},g=function(e){return function(t,n){var r,o;return r=x(n).rgb(),o=x(t).rgb(),x(e(r,o),"rgb")}},M=function(e){return function(t,n){var r,o,i;for(i=[],r=o=0;o<=3;r=++o)i[r]=e(t[r],n[r]);return i}},Q=function(e,t){return e},$=function(e,t){return e*t/255},P=function(e,t){return e>t?t:e},Z=function(e,t){return e>t?e:t},_e=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},te=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},b=function(e,t){return 255*(1-(1-t/255)/(e/255))},O=function(e,t){return 255===e?255:(e=255*(t/255)/(1-e/255),e>255?255:e)},v.normal=g(M(Q)),v.multiply=g(M($)),v.screen=g(M(_e)),v.overlay=g(M(te)),v.darken=g(M(P)),v.lighten=g(M(Z)),v.dodge=g(M(O)),v.burn=g(M(b)),x.blend=v,x.analyze=function(e){var t,n,r,o;for(r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},n=0,t=e.length;n<t;n++)o=e[n],null==o||isNaN(o)||(r.values.push(o),r.sum+=o,o<r.min&&(r.min=o),o>r.max&&(r.max=o),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,t){return x.limits(r,e,t)},r},x.scale=function(e,t){var n,r,o,i,a,s,l,u,c,p,d,f,h,m,y,v,g,_,b,w,E;return c="rgb",p=x("#ccc"),m=0,s=!1,a=[0,1],h=[],f=[0,0],n=!1,o=[],d=!1,u=0,l=1,i=!1,r={},w=function(e){var t,n,r,i,a,s,l;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Ee(e)&&null!=(null!=(i=x.brewer)?i[e]:void 0)&&(e=x.brewer[e]),"array"===Ee(e)){for(e=e.slice(0),t=r=0,a=e.length-1;0<=a?r<=a:r>=a;t=0<=a?++r:--r)n=e[t],"string"===Ee(n)&&(e[t]=x(n));for(h.length=0,t=l=0,s=e.length-1;0<=s?l<=s:l>=s;t=0<=s?++l:--l)h.push(t/(e.length-1))}return b(),o=e},g=function(e){var t,r;if(null!=n){for(r=n.length-1,t=0;t<r&&e>=n[t];)t++;return t-1}return 0},E=function(e){return e},y=function(e){var t,r,o,i,a;return a=e,n.length>2&&(i=n.length-1,t=g(e),o=n[0]+(n[1]-n[0])*(0+.5*m),r=n[i-1]+(n[i]-n[i-1])*(1-.5*m),a=u+(n[t]+.5*(n[t+1]-n[t])-o)/(r-o)*(l-u)),a},_=function(e,t){var i,a,s,d,m,y,v,_;if(null==t&&(t=!1),isNaN(e))return p;if(t?_=e:n&&n.length>2?(i=g(e),_=i/(n.length-2),_=f[0]+_*(1-f[0]-f[1])):l!==u?(_=(e-u)/(l-u),_=f[0]+_*(1-f[0]-f[1]),_=Math.min(1,Math.max(0,_))):_=1,t||(_=E(_)),d=Math.floor(1e4*_),r[d])a=r[d];else{if("array"===Ee(o))for(s=m=0,v=h.length-1;0<=v?m<=v:m>=v;s=0<=v?++m:--m){if(y=h[s],_<=y){a=o[s];break}if(_>=y&&s===h.length-1){a=o[s];break}if(_>y&&_<h[s+1]){_=(_-y)/(h[s+1]-y),a=x.interpolate(o[s],o[s+1],_,c);break}}else"function"===Ee(o)&&(a=o(_));r[d]=a}return a},b=function(){return r={}},w(e),v=function(e){var t;return t=x(_(e)),d&&t[d]?t[d]():t},v.classes=function(e){var t;return null!=e?("array"===Ee(e)?(n=e,a=[e[0],e[e.length-1]]):(t=x.analyze(a),n=0===e?[t.min,t.max]:x.limits(t,"e",e)),v):n},v.domain=function(e){var t,n,r,i,s,c,p;if(!arguments.length)return a;if(u=e[0],l=e[e.length-1],h=[],r=o.length,e.length===r&&u!==l)for(s=0,i=e.length;s<i;s++)n=e[s],h.push((n-u)/(l-u));else for(t=p=0,c=r-1;0<=c?p<=c:p>=c;t=0<=c?++p:--p)h.push(t/(r-1));return a=[u,l],v},v.mode=function(e){return arguments.length?(c=e,b(),v):c},v.range=function(e,t){return w(e,t),v},v.out=function(e){return d=e,v},v.spread=function(e){return arguments.length?(m=e,v):m},v.correctLightness=function(e){return null==e&&(e=!0),i=e,b(),E=i?function(e){var t,n,r,o,i,a,s,l,u;for(t=_(0,!0).lab()[0],n=_(1,!0).lab()[0],s=t>n,r=_(e,!0).lab()[0],i=t+(n-t)*e,o=r-i,l=0,u=1,a=20;Math.abs(o)>.01&&a-- >0;)!function(){return s&&(o*=-1),o<0?(l=e,e+=.5*(u-e)):(u=e,e+=.5*(l-e)),r=_(e,!0).lab()[0],o=r-i}();return e}:function(e){return e},v},v.padding=function(e){return null!=e?("number"===Ee(e)&&(e=[e,e]),f=e,v):f},v.colors=function(){var t,r,o,i,s,l,u,c,p;if(i=0,s="hex",1===arguments.length&&("string"===Ee(arguments[0])?s=arguments[0]:i=arguments[0]),2===arguments.length&&(i=arguments[0],s=arguments[1]),i)return r=a[0],t=a[1]-r,function(){u=[];for(var e=0;0<=i?e<i:e>i;0<=i?e++:e--)u.push(e);return u}.apply(this).map(function(e){return v(r+e/(i-1)*t)[s]()});if(e=[],c=[],n&&n.length>2)for(o=p=1,l=n.length;1<=l?p<l:p>l;o=1<=l?++p:--p)c.push(.5*(n[o-1]+n[o]));else c=a;return c.map(function(e){return v(e)[s]()})},v},null==x.scales&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(e,t,n){var r,o,i,a,s,l,u;if(s={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(s.values.push(e),s.sum+=e,e<s.min&&(s.min=e),e>s.max&&(s.max=e),s.count+=1)},u=function(e,o){if(n(e,o))return r(null!=t&&"function"===Ee(t)?t(e):null!=t&&"string"===Ee(t)||"number"===Ee(t)?e[t]:e)},"array"===Ee(e))for(a=0,i=e.length;a<i;a++)l=e[a],u(l);else for(o in e)l=e[o],u(l,o);return s.domain=[s.min,s.max],s.limits=function(e,t){return x.limits(s,e,t)},s},x.limits=function(e,t,n){var r,o,i,a,s,l,u,c,p,d,f,m,y,v,g,_,b,w,E,k,C,S,P,O,M,T,N,I,L,R,A,j,z,V,F,B,U,W,q,H,Z,G,K,Y,$,Q,ee,te,re,oe,ie,ae,se,le,ue;if(null==t&&(t="equal"),null==n&&(n=7),"array"===Ee(e)&&(e=x.analyze(e)),M=e.min,J=e.max,ie=e.sum,le=e.values.sort(function(e,t){return e-t}),P=[],"c"===t.substr(0,1)&&(P.push(M),P.push(J)),"e"===t.substr(0,1)){for(P.push(M),k=A=1,F=n-1;1<=F?A<=F:A>=F;k=1<=F?++A:--A)P.push(M+k/n*(J-M));P.push(J)}else if("l"===t.substr(0,1)){if(M<=0)throw"Logarithmic scales are only possible for values > 0";for(T=Math.LOG10E*X(M),O=Math.LOG10E*X(J),P.push(M),k=ue=1,B=n-1;1<=B?ue<=B:ue>=B;k=1<=B?++ue:--ue)P.push(ne(10,T+k/n*(O-T)));P.push(J)}else if("q"===t.substr(0,1)){for(P.push(M),k=r=1,G=n-1;1<=G?r<=G:r>=G;k=1<=G?++r:--r)j=le.length*k/n,z=D(j),z===j?P.push(le[z]):(V=j-z,P.push(le[z]*V+le[z+1]*(1-V)));P.push(J)}else if("k"===t.substr(0,1)){for(I=le.length,v=new Array(I),w=new Array(n),oe=!0,L=0,_=null,_=[],_.push(M),k=o=1,K=n-1;1<=K?o<=K:o>=K;k=1<=K?++o:--o)_.push(M+k/n*(J-M));for(_.push(J);oe;){for(C=i=0,Y=n-1;0<=Y?i<=Y:i>=Y;C=0<=Y?++i:--i)w[C]=0;for(k=a=0,$=I-1;0<=$?a<=$:a>=$;k=0<=$?++a:--a){for(se=le[k],N=Number.MAX_VALUE,C=s=0,Q=n-1;0<=Q?s<=Q:s>=Q;C=0<=Q?++s:--s)E=h(_[C]-se),E<N&&(N=E,g=C);w[g]++,v[k]=g}for(R=new Array(n),C=l=0,ee=n-1;0<=ee?l<=ee:l>=ee;C=0<=ee?++l:--l)R[C]=null;for(k=u=0,te=I-1;0<=te?u<=te:u>=te;k=0<=te?++u:--u)b=v[k],null===R[b]?R[b]=le[k]:R[b]+=le[k];for(C=c=0,re=n-1;0<=re?c<=re:c>=re;C=0<=re?++c:--c)R[C]*=1/w[C];for(oe=!1,C=p=0,U=n-1;0<=U?p<=U:p>=U;C=0<=U?++p:--p)if(R[C]!==_[k]){oe=!0;break}_=R,L++,L>200&&(oe=!1)}for(S={},C=d=0,W=n-1;0<=W?d<=W:d>=W;C=0<=W?++d:--d)S[C]=[];for(k=f=0,q=I-1;0<=q?f<=q:f>=q;k=0<=q?++f:--f)b=v[k],S[b].push(le[k]);for(ae=[],C=m=0,H=n-1;0<=H?m<=H:m>=H;C=0<=H?++m:--m)ae.push(S[C][0]),ae.push(S[C][S[C].length-1]);for(ae=ae.sort(function(e,t){return e-t}),P.push(ae[0]),k=y=1,Z=ae.length-1;y<=Z;k=y+=2)isNaN(ae[k])||P.push(ae[k])}return P},N=function(e,t,n){var r,o,i,a;return r=ke(arguments),e=r[0],t=r[1],n=r[2],e/=360,e<1/3?(o=(1-t)/3,a=(1+t*C(u*e)/C(s-u*e))/3,i=1-(o+a)):e<2/3?(e-=1/3,a=(1-t)/3,i=(1+t*C(u*e)/C(s-u*e))/3,o=1-(a+i)):(e-=2/3,i=(1-t)/3,o=(1+t*C(u*e)/C(s-u*e))/3,a=1-(i+o)),a=G(n*a*3),i=G(n*i*3),o=G(n*o*3),[255*a,255*i,255*o,r.length>3?r[3]:1]},ae=function(){var e,t,n,r,o,i,a,s;return a=ke(arguments),i=a[0],t=a[1],e=a[2],u=2*Math.PI,i/=255,t/=255,e/=255,o=Math.min(i,t,e),r=(i+t+e)/3,s=1-o/r,0===s?n=0:(n=(i-t+(i-e))/2,n/=Math.sqrt((i-t)*(i-t)+(i-e)*(t-e)),n=Math.acos(n),e>t&&(n=u-n),n/=u),[360*n,s,r]},x.hsi=function(){return function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(t,Oe.call(arguments).concat(["hsi"]),function(){})},d.hsi=N,t.prototype.hsi=function(){return ae(this._rgb)},j=function(e,t,n,r){var o,i,a,s,l,u,c,p,d,f,h,m,y;return"hsl"===r?(m=e.hsl(),y=t.hsl()):"hsv"===r?(m=e.hsv(),y=t.hsv()):"hsi"===r?(m=e.hsi(),y=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",m=e.hcl(),y=t.hcl()),"h"===r.substr(0,1)&&(a=m[0],f=m[1],u=m[2],s=y[0],h=y[1],c=y[2]),isNaN(a)||isNaN(s)?isNaN(a)?isNaN(s)?i=Number.NaN:(i=s,1!==u&&0!==u||"hsv"===r||(d=h)):(i=a,1!==c&&0!==c||"hsv"===r||(d=f)):(o=s>a&&s-a>180?s-(a+360):s<a&&a-s>180?s+360-a:s-a,i=a+n*o),null==d&&(d=f+n*(h-f)),l=u+n*(c-u),p=x[r](i,d,l)},f=f.concat(function(){var e,t,n,r;for(n=["hsv","hsl","hsi","hcl","lch"],r=[],t=0,e=n.length;t<e;t++)Y=n[t],r.push([Y,j]);return r}()),V=function(e,t,n,r){var o,i;return o=e.num(),i=t.num(),x.num(o+(i-o)*n,"num")},f.push(["num",V]),z=function(e,n,r,o){var i,a,s;return a=e.lab(),s=n.lab(),i=new t(a[0]+r*(s[0]-a[0]),a[1]+r*(s[1]-a[1]),a[2]+r*(s[2]-a[2]),o)},f.push(["lab",z])}).call(void 0)},{}],6:[function(e,t,n){"use strict";n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?o-1:0,d=n?-1:1,f=e[t+p];for(p+=d,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+p],p+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,r),i-=u}return(f?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,p=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+p>=1?d/l:d*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+f]=255&s,f+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+f]=255&a,f+=h,a/=256,u-=8);e[n+f-h]|=128*m}},{}],7:[function(e,t,n){"use strict";function r(e){var t=[];for(var n in e.layers)t.push(i(e.layers[n]));var r=new c;return p.tile.write({layers:t},r),r.finish()}function o(e){var t={};for(var n in e)t[n]=new d(e[n].features),t[n].name=n;return r({layers:t})}function i(e){for(var t={name:e.name||"",version:e.version||1,
extent:e.extent||4096,keys:[],values:[],features:[]},n={},r={},o=0;o<e.length;o++){var i=e.feature(o);i.geometry=l(i.loadGeometry());var a=[];for(var s in i.properties){var c=n[s];"undefined"==typeof c&&(t.keys.push(s),c=t.keys.length-1,n[s]=c);var p=u(i.properties[s]),d=r[p.key];"undefined"==typeof d&&(t.values.push(p),d=t.values.length-1,r[p.key]=d),a.push(c),a.push(d)}i.tags=a,t.features.push(i)}return t}function a(e,t){return(t<<3)+(7&e)}function s(e){return e<<1^e>>31}function l(e){for(var t=[],n=0,r=0,o=e.length,i=0;i<o;i++){var l=e[i];t.push(a(1,1));for(var u=0;u<l.length;u++){1===u&&t.push(a(2,l.length-1));var c=l[u].x-n,p=l[u].y-r;t.push(s(c),s(p)),n+=c,r+=p}}return t}function u(e){var t,n=typeof e;return"string"===n?t={string_value:e}:"boolean"===n?t={bool_value:e}:"number"===n?t=e%1!==0?{double_value:e}:e<0?{sint_value:e}:{uint_value:e}:(e=JSON.stringify(e),t={string_value:e}),t.key=n+":"+e,t}var c=e("pbf"),p=e("./vector-tile-pb"),d=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=o,t.exports.GeoJSONWrapper=d},{"./lib/geojson_wrapper":8,"./vector-tile-pb":16,pbf:10}],8:[function(e,t,n){"use strict";function r(e){this.features=e,this.length=e.length}function o(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var i=e("point-geometry"),a=e("vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new o(this.features[e])},o.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],o=0;o<n.length;o++)r.push(new i(n[o][0],n[o][1]));this.geometry.push(r)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-(1/0),r=1/0,o=-(1/0),i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),o=Math.max(o,l.y)}return[t,r,n,o]},o.prototype.toGeoJSON=a.prototype.toGeoJSON},{"point-geometry":11,"vector-tile":12}],9:[function(e,t,n){"use strict";function r(e){var t;e&&e.length&&(t=e,e=t.length);var n=new Uint8Array(e||0);return t&&n.set(t),n.readUInt32LE=i.readUInt32LE,n.writeUInt32LE=i.writeUInt32LE,n.readInt32LE=i.readInt32LE,n.writeInt32LE=i.writeInt32LE,n.readFloatLE=i.readFloatLE,n.writeFloatLE=i.writeFloatLE,n.readDoubleLE=i.readDoubleLE,n.writeDoubleLE=i.writeDoubleLE,n.toString=i.toString,n.write=i.write,n.slice=i.slice,n.copy=i.copy,n._isBuffer=!0,n}function o(e){for(var t,n,r=e.length,o=[],i=0;i<r;i++){if(t=e.charCodeAt(i),t>55295&&t<57344){if(!n){t>56319||i+1===r?o.push(239,191,189):n=t;continue}if(t<56320){o.push(239,191,189),n=t;continue}t=n-55296<<10|t-56320|65536,n=null}else n&&(o.push(239,191,189),n=null);t<128?o.push(t):t<2048?o.push(t>>6|192,63&t|128):t<65536?o.push(t>>12|224,t>>6&63|128,63&t|128):o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}return o}t.exports=r;var i,a,s,l=e("ieee754");i={readUInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},writeUInt32LE:function(e,t){this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24},readInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+(this[e+3]<<24)},readFloatLE:function(e){return l.read(this,e,!0,23,4)},readDoubleLE:function(e){return l.read(this,e,!0,52,8)},writeFloatLE:function(e,t){return l.write(this,e,t,!0,23,4)},writeDoubleLE:function(e,t){return l.write(this,e,t,!0,52,8)},toString:function(e,t,n){var r="",o="";t=t||0,n=Math.min(this.length,n||this.length);for(var i=t;i<n;i++){var a=this[i];a<=127?(r+=decodeURIComponent(o)+String.fromCharCode(a),o=""):o+="%"+a.toString(16)}return r+=decodeURIComponent(o)},write:function(e,t){for(var n=e===a?s:o(e),r=0;r<n.length;r++)this[t+r]=n[r]},slice:function(e,t){return this.subarray(e,t)},copy:function(e,t){t=t||0;for(var n=0;n<this.length;n++)e[t+n]=this[n]}},i.writeInt32LE=i.writeUInt32LE,r.byteLength=function(e){return a=e,s=o(e),s.length},r.isBuffer=function(e){return!(!e||!e._isBuffer)}},{ieee754:6}],10:[function(e,t,n){(function(n){"use strict";function r(e){this.buf=y.isBuffer(e)?e:new y(e||0),this.pos=0,this.length=this.buf.length}function o(e,t){var n,r=t.buf;if(n=r[t.pos++],e+=268435456*(127&n),n<128)return e;if(n=r[t.pos++],e+=34359738368*(127&n),n<128)return e;if(n=r[t.pos++],e+=4398046511104*(127&n),n<128)return e;if(n=r[t.pos++],e+=562949953421312*(127&n),n<128)return e;if(n=r[t.pos++],e+=72057594037927940*(127&n),n<128)return e;if(n=r[t.pos++],e+=0x8000000000000000*(127&n),n<128)return e;throw new Error("Expected varint not more than 10 bytes")}function i(e,t){t.realloc(10);for(var n=t.pos+10;e>=1;){if(t.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var r=255&e;t.buf[t.pos++]=r|(e>=128?128:0),e/=128}}function a(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var o=n.pos-1;o>=e;o--)n.buf[o+r]=n.buf[o]}function s(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function l(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function u(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function c(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}t.exports=r;var y=n.Buffer||e("./buffer");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var v=4294967296,g=1/v,_=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),o=r>>3,i=this.pos;e(o,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=this.buf.readUInt32LE(this.pos);return this.pos+=4,e},readSFixed32:function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e},readFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*v;return this.pos+=8,e},readSFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*v;return this.pos+=8,e},readFloat:function(){var e=this.buf.readFloatLE(this.pos);return this.pos+=4,e},readDouble:function(){var e=this.buf.readDoubleLE(this.pos);return this.pos+=8,e},readVarint:function(){var e,t,n=this.buf;return t=n[this.pos++],e=127&t,t<128?e:(t=n[this.pos++],e|=(127&t)<<7,t<128?e:(t=n[this.pos++],e|=(127&t)<<14,t<128?e:(t=n[this.pos++],e|=(127&t)<<21,t<128?e:o(e,this))))},readVarint64:function(){var e=this.pos,t=this.readVarint();if(t<_)return t;for(var n=this.pos-2;255===this.buf[n];)n--;n<e&&(n=e),t=0;for(var r=0;r<n-e+1;r++){var o=127&~this.buf[e+r];t+=r<4?o<<7*r:o*Math.pow(2,7*r)}return-t-1},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.buf.toString("utf8",this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.slice(this.pos,e);return this.pos=e,t},readPackedVarint:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readVarint());return t},readPackedSVarint:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new y(t);this.buf.copy(n),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(e){this.realloc(4),this.buf.writeUInt32LE(e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),this.buf.writeInt32LE(e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),this.buf.writeInt32LE(e&-1,this.pos),this.buf.writeUInt32LE(Math.floor(e*g),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),this.buf.writeInt32LE(e&-1,this.pos),this.buf.writeInt32LE(Math.floor(e*g),this.pos+4),this.pos+=8},writeVarint:function(e){return e=+e,e>268435455?void i(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),void(e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e);var t=y.byteLength(e);this.writeVarint(t),this.realloc(t),this.buf.write(e,this.pos),this.pos+=t},writeFloat:function(e){this.realloc(4),this.buf.writeFloatLE(e,this.pos),this.pos+=4},writeDouble:function(e){this.realloc(8),this.buf.writeDoubleLE(e,this.pos),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&a(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,s,t)},writePackedSVarint:function(e,t){this.writeMessage(e,l,t)},writePackedBoolean:function(e,t){this.writeMessage(e,p,t)},writePackedFloat:function(e,t){this.writeMessage(e,u,t)},writePackedDouble:function(e,t){this.writeMessage(e,c,t)},writePackedFixed32:function(e,t){this.writeMessage(e,d,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,f,t)},writePackedFixed64:function(e,t){this.writeMessage(e,h,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,m,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}}).call(this,"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":9}],11:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],12:[function(e,t,n){"use strict";t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":13,"./lib/vectortilefeature.js":14,"./lib/vectortilelayer.js":15}],13:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(o,{},t)}function o(e,t,n){if(3===e){var r=new i(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var i=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":15}],14:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?i(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function i(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[r]=o}}function a(e){var t=e.length;if(t<=1)return[e];for(var n,r,o=[],i=0;i<t;i++){var a=s(e[i]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&o.push(n),n=[e[i]]):n.push(e[i]))}return n&&o.push(n),o}function s(e){for(var t,n,r=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}var l=e("point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,i=0,a=0,s=[];e.pos<n;){if(!o){var u=e.readVarint();r=7&u,o=u>>3}if(o--,1===r||2===r)i+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new l(i,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,o=0,i=0,a=1/0,s=-(1/0),l=1/0,u=-(1/0);e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)o+=e.readSVarint(),i+=e.readSVarint(),o<a&&(a=o),o>s&&(s=o),i<l&&(l=i),i>u&&(u=i);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},r.prototype.toGeoJSON=function(e,t,n){function o(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/l;e[t]=[360*(n.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,s,l=this.extent*Math.pow(2,n),u=this.extent*e,c=this.extent*t,p=this.loadGeometry(),d=r.types[this.type];switch(this.type){case 1:var f=[];for(i=0;i<p.length;i++)f[i]=p[i][0];p=f,o(p);break;case 2:for(i=0;i<p.length;i++)o(p[i]);break;case 3:for(p=a(p),i=0;i<p.length;i++)for(s=0;s<p[i].length;s++)o(p[i][s])}1===p.length?p=p[0]:d="Multi"+d;var h={type:"Feature",geometry:{type:d,coordinates:p},properties:this.properties};return"id"in this&&(h.id=this.id),h}},{"point-geometry":11}],15:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(i(n))}function i(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":14}],16:[function(e,t,n){"use strict";function r(e,t){return e.readFields(o,{layers:[]},t)}function o(e,t,n){3===e&&t.layers.push(d(n,n.readVarint()+n.pos))}function i(e,t){var n;if(void 0!==e.layers)for(n=0;n<e.layers.length;n++)t.writeMessage(3,h,e.layers[n])}function a(e,t){return e.readFields(s,{},t)}function s(e,t,n){1===e?t.string_value=n.readString():2===e?t.float_value=n.readFloat():3===e?t.double_value=n.readDouble():4===e?t.int_value=n.readVarint():5===e?t.uint_value=n.readVarint():6===e?t.sint_value=n.readSVarint():7===e&&(t.bool_value=n.readBoolean())}function l(e,t){void 0!==e.string_value&&t.writeStringField(1,e.string_value),void 0!==e.float_value&&t.writeFloatField(2,e.float_value),void 0!==e.double_value&&t.writeDoubleField(3,e.double_value),void 0!==e.int_value&&t.writeVarintField(4,e.int_value),void 0!==e.uint_value&&t.writeVarintField(5,e.uint_value),void 0!==e.sint_value&&t.writeSVarintField(6,e.sint_value),void 0!==e.bool_value&&t.writeBooleanField(7,e.bool_value)}function u(e,t){var n=e.readFields(c,{},t);return void 0===n.type&&(n.type="Unknown"),n}function c(e,t,n){1===e?t.id=n.readVarint():2===e?t.tags=n.readPackedVarint():3===e?t.type=n.readVarint():4===e&&(t.geometry=n.readPackedVarint())}function p(e,t){void 0!==e.id&&t.writeVarintField(1,e.id),void 0!==e.tags&&t.writePackedVarint(2,e.tags),void 0!==e.type&&t.writeVarintField(3,e.type),void 0!==e.geometry&&t.writePackedVarint(4,e.geometry)}function d(e,t){return e.readFields(f,{features:[],keys:[],values:[]},t)}function f(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():2===e?t.features.push(u(n,n.readVarint()+n.pos)):3===e?t.keys.push(n.readString()):4===e?t.values.push(a(n,n.readVarint()+n.pos)):5===e&&(t.extent=n.readVarint())}function h(e,t){void 0!==e.version&&t.writeVarintField(15,e.version),void 0!==e.name&&t.writeStringField(1,e.name);var n;if(void 0!==e.features)for(n=0;n<e.features.length;n++)t.writeMessage(2,p,e.features[n]);if(void 0!==e.keys)for(n=0;n<e.keys.length;n++)t.writeStringField(3,e.keys[n]);if(void 0!==e.values)for(n=0;n<e.values.length;n++)t.writeMessage(4,l,e.values[n]);void 0!==e.extent&&t.writeVarintField(5,e.extent)}var m=n.tile={read:r,write:i};m.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},m.value={read:a,write:l},m.feature={read:u,write:p},m.layer={read:d,write:h}},{}],17:[function(e,t,n){t.exports={version:"2.0.2"}},{}],18:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e){var o=e[r].paintVertexArray;if(0!==o.length){var i=o.serialize(t),a=o.constructor.serialize();n[r]={array:i,type:a}}}return n}var o=e("./program_configuration"),i=e("./vertex_array_type"),a=function(e,t){this.vertexOffset=e,this.primitiveOffset=t,this.vertexLength=0,this.primitiveLength=0},s=function(e,t,n){var r=this;this.globalProperties={zoom:n};var a=i(e.layoutAttributes);this.layoutVertexArray=new a;var s=e.elementArrayType;s&&(this.elementArray=new s);var l=e.elementArrayType2;l&&(this.elementArray2=new l),this.layerData={};for(var u=0,c=t;u<c.length;u+=1){var p=c[u],d=o.createDynamic(e.paintAttributes||[],p,n);r.layerData[p.id]={layer:p,programConfiguration:d,paintVertexArray:new d.PaintVertexArray,paintPropertyStatistics:d.createPaintPropertyStatistics()}}this.segments=[],this.segments2=[]};s.prototype.prepareSegment=function(e){var t=this.segments[this.segments.length-1];return(!t||t.vertexLength+e>s.MAX_VERTEX_ARRAY_LENGTH)&&(t=new a(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(t)),t},s.prototype.prepareSegment2=function(e){var t=this.segments2[this.segments2.length-1];return(!t||t.vertexLength+e>s.MAX_VERTEX_ARRAY_LENGTH)&&(t=new a(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(t)),t},s.prototype.populatePaintArrays=function(e){var t=this;for(var n in t.layerData){var r=t.layerData[n];0!==r.paintVertexArray.bytesPerElement&&r.programConfiguration.populatePaintArray(r.layer,r.paintVertexArray,r.paintPropertyStatistics,t.layoutVertexArray.length,t.globalProperties,e)}},s.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},s.prototype.serialize=function(e){return{layoutVertexArray:this.layoutVertexArray.serialize(e),elementArray:this.elementArray&&this.elementArray.serialize(e),elementArray2:this.elementArray2&&this.elementArray2.serialize(e),paintVertexArrays:r(this.layerData,e),segments:this.segments,segments2:this.segments2}},s.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,t.exports=s},{"./program_configuration":34,"./vertex_array_type":36}],19:[function(e,t,n){"use strict";var r=e("./array_group"),o=e("./buffer_group"),i=e("../util/util"),a=function(e,t){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.data=e.data,e.arrays?this.buffers=new o(t,e.layers,e.zoom,e.arrays):this.arrays=new r(t,e.layers,e.zoom)};a.prototype.populate=function(e,t){var n,r=this;if(this.layers[0].autoSource)for(var o=0,i=r.layers[0].autoSource;o<i.length;o+=1){var a=i[o];if(a.minzoom<=r.zoom&&a.maxzoom>r.zoom&&a.filter){n=a.filter;break}}for(var s=0,l=e;s<l.length;s+=1){var u=l[s];n&&!n(u)||r.layers[0].filter(u)&&(r.addFeature(u),t.featureIndex.insert(u,r.index))}},a.prototype.getPaintPropertyStatistics=function(){return i.mapObject(this.arrays.layerData,function(e){return e.paintPropertyStatistics})},a.prototype.isEmpty=function(){return this.arrays.isEmpty()},a.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),data:this.data,arrays:this.arrays.serialize(e)}},a.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)},t.exports=a,a.deserialize=function(e,t){if(t){for(var n={},r=0,o=e;r<o.length;r+=1){var a=o[r],s=a.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==s.length)for(var l=s[0].createBucket(i.extend({layers:s},a)),u=0,c=s;u<c.length;u+=1){var p=c[u];n[p.id]=l}}return n}}},{"../util/util":204,"./array_group":18,"./buffer_group":28}],20:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){e.emplaceBack(2*t+(r+1)/2,2*n+(o+1)/2,i,a)}var o=e("../bucket"),i=(e("../vertex_array_type"),e("../element_array_type")),a=e("../load_geometry"),s=e("../extent"),l=e("../../util/dragonfly_util").evaluateExpression,u={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_radius",components:1,type:"Int16"},{name:"a_outline_width",components:1,type:"Int16"}],elementArrayType:i(),paintAttributes:[{property:"bubble-color",type:"Uint8 "},{property:"bubble-opacity",type:"Uint8",multiplier:255},{property:"bubble-outline-color",type:"Uint8"},{property:"bubble-radius-multiplier",type:"Uint16"},{property:"bubble-max-radius",type:"Uint16"},{property:"bubble-max-radius-outline-color",type:"Uint16"},{property:"bubble-max-radius-outline-width",type:"Uint16"}]},c=function(e){function t(t){e.call(this,t,u)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(e){var t=this.arrays,n=l(this.layers[0].layout["bubble-radius"],e.properties),o=l(this.layers[0].paint["bubble-outline-width"],e.properties);this.metadata=this.metadata||{features:{}};for(var i=this.arrays.elementArray.length,u=0,c=a(e);u<c.length;u+=1)for(var p=c[u],d=0,f=p;d<f.length;d+=1){var h=f[d],m=h.x,y=h.y;if(!(m<0||m>=s||y<0||y>=s)){var v=t.prepareSegment(4),g=v.vertexLength;r(t.layoutVertexArray,m,y,-1,-1,n,o),r(t.layoutVertexArray,m,y,1,-1,n,o),r(t.layoutVertexArray,m,y,1,1,n,o),r(t.layoutVertexArray,m,y,-1,1,n,o),t.elementArray.emplaceBack(g,g+1,g+2),t.elementArray.emplaceBack(g,g+3,g+2),v.vertexLength+=4,v.primitiveLength+=2}}t.populatePaintArrays(e.properties);var _=this.arrays.elementArray.length;this.metadata.features[e.id]={calculatedRadius:n,bubbleElement:{count:_-i,offset:i}}},t}(o);c.programInterface=u,t.exports=c},{"../../util/dragonfly_util":190,"../bucket":19,"../element_array_type":29,"../extent":30,"../load_geometry":32,"../vertex_array_type":36}],21:[function(e,t,n){"use strict";function r(e,t,n,r,o){e.emplaceBack(2*t+(r+1)/2,2*n+(o+1)/2)}var o=e("../bucket"),i=e("../element_array_type"),a=e("../load_geometry"),s=e("../extent"),l={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:i(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]},u=function(e){function t(t){e.call(this,t,l)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(e){var t=this.arrays;this.metadata=this.metadata||{features:{}};for(var n=this.arrays.elementArray.length,o=0,i=a(e);o<i.length;o+=1)for(var l=i[o],u=0,c=l;u<c.length;u+=1){var p=c[u],d=p.x,f=p.y;if(!(d<0||d>=s||f<0||f>=s)){var h=t.prepareSegment(4),m=h.vertexLength;r(t.layoutVertexArray,d,f,-1,-1),r(t.layoutVertexArray,d,f,1,-1),r(t.layoutVertexArray,d,f,1,1),r(t.layoutVertexArray,d,f,-1,1),t.elementArray.emplaceBack(m,m+1,m+2),t.elementArray.emplaceBack(m,m+3,m+2),h.vertexLength+=4,h.primitiveLength+=2}}t.populatePaintArrays(e.properties);var y=this.arrays.elementArray.length;this.metadata.features[e.id]={circleElement:{count:y-n,offset:n}}},t}(o);u.programInterface=l,t.exports=u},{"../bucket":19,"../element_array_type":29,"../extent":30,"../load_geometry":32}],22:[function(e,t,n){"use strict";function r(e,t,n,r,o){e.emplaceBack(2*t+(r+1)/2,2*n+(o+1)/2)}var o=e("../bucket"),i=e("../load_geometry"),a=(e("../vertex_array_type"),e("../element_array_type")),s=e("../extent"),l=e("../../util/dragonfly_util").evaluateExpression,u=e("../../util/util").clamp,c=50,p=50,d=200,f=50,h=50,m={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:a(),paintAttributes:[{property:"dotdensity-blur",type:"Uint16 ",multiplier:10},{property:"dotdensity-radius",type:"Uint16"},{property:"dotdensity-color",type:"Uint8"},{property:"dotdensity-opacity",type:"Uint8",multiplier:255}]},y={},v=function(e){function t(n){e.call(this,n,m),this.mapId=n.mapId,void 0===t.allDots[this.mapId]&&(t.allDots[this.mapId]={zoom:void 0,layers:{}}),void 0===this.data&&(this.data={},this.data.layers={},this.data.layers[this.layers[0].id]={},this.data.layers[this.layers[0].id].fids=[],this.data.layers[this.layers[0].id].metadata={})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={allDots:{}};return n.allDots.get=function(){return y},n.allDots.set=function(e){return y=e},t.prototype.polygonArea=function(e){for(var t=this,n=0,r=0;r<e.length;r++)for(var o=e[r],i=0;i<o.length-1;i++)n+=t.fix(o[i].x)*t.fix(o[i+1].y)-t.fix(o[i+1].x)*t.fix(o[i].y);return n/2},t.prototype.fix=function(e){return u(e,0,s)},t.prototype.getNumberOfDotsToPlace=function(e,n,r,o,i){var a=Math.min(1,n/r),s=Math.ceil(e*a);n/s<f&&(s=Math.ceil(n/f));var l=t.allDots[this.mapId].layers[o];return void 0===l.features[i]&&(l.features[i]=0),e<c&&l.features[i]+s>e&&(s=Math.max(0,e-l.features[i])),l.features[i]+=s,s},t.prototype.pointInCircles=function(e,t,n){for(var r=n.length,o=0;o<r;o++){var i=n[o],a=(i.x-e)*(i.x-e)+(i.y-t)*(i.y-t);if(Math.sqrt(a)<i.radius)return i.inside}},t.prototype.pointInPolygon=function(e,t,n){if(e<0||e>=s||t<0||t>=s)return!1;for(var r=!1,o=0;o<n.length;o++)for(var i=n[o],a=0,l=i.length-1;a<i.length;l=a++){var u=i[a].x,c=i[a].y,p=i[l].x,d=i[l].y,f=c>t!=d>t&&e<(p-u)*(t-c)/(d-c)+u;f&&(r=!r)}return r},t.prototype.hausdorffDistance=function(e,t,n){for(var r=this,o=1e5,i=0;i<n.length;i++)for(var a=n[i],s=a.length-1,l=0;l<s;l++){var u=r.pointDistanceFromLineSegment(e,t,a[l].x,a[l].y,a[l+1].x,a[l+1].y);u<o&&(o=u)}return o},t.prototype.pointDistanceFromLineSegment=function(e,t,n,r,o,i){var a,s,l=(e-n)*(o-n)+(t-r)*(i-r),u=(o-n)*(o-n)+(i-r)*(i-r),c=l/u,p=n+c*(o-n),d=r+c*(i-r),f=((r-t)*(o-n)-(n-e)*(i-r))/u;s=Math.abs(f)*Math.sqrt(u);var h=p,m=d;if(c>=0&&c<=1)a=s;else{var y=(e-n)*(e-n)+(t-r)*(t-r),v=(e-o)*(e-o)+(t-i)*(t-i);y<v?(h=n,m=r,a=Math.sqrt(y)):(h=o,m=i,a=Math.sqrt(v))}return a},t.prototype.addFeature=function(e){var n=this,o=this.layers[0],a=this.arrays;this.zoom!==t.allDots[this.mapId].zoom&&(t.allDots[this.mapId]={zoom:this.zoom,layers:{}});var u=t.allDots[this.mapId].layers[o.id],f=o.layout["dotdensity-count"],m=o.sourceLayer;void 0!==u&&u.formula===f&&u.sourceLayer===m||(t.allDots[this.mapId].layers[o.id]={source:o.source,sourceLayer:m,formula:f,features:{}});for(var y=s/e.extent,v=e.bbox(),g=0;g<4;g++)v[g]=n.fix(v[g]*y);var _=i(e),b=this.polygonArea(_)/y,x=Math.pow(2,2*(19-this.zoom)+1)*y,w=e.properties.__area__/x;if(w&&!(w<=0)&&b&&!(b<=0)){var E=l(o.layout["dotdensity-count"],e.properties),k=this.getNumberOfDotsToPlace(E,b,w,o.id,e.id);this.data.layers[o.id].metadata={source:o.source,sourceLayer:m,formula:f};for(var C={id:e.id,countTotal:E,countPartial:k},S=[],P=[],O=0;O<k;O++){var M=k>c?p:d;do{var D=v[0]+Math.random()*(v[2]-v[0]),T=v[1]+Math.random()*(v[3]-v[1]),N=n.pointInCircles(D,T,S);if(void 0===N&&(N=n.pointInPolygon(D,T,_)),S.length<h){var I=n.hausdorffDistance(D,T,_);S.push({x:D,y:T,radius:I,inside:N})}if(N)break;D=void 0,T=void 0}while(--M>0);D&&T&&P.push([D,T])}if(0!==P.length){var L=a.prepareSegment(4*P.length);C.offset=a.elementArray.length/2*6,C.size=6*P.length;for(var R=0,A=P;R<A.length;R+=1){var j=A[R];D=j[0],T=j[1];var z=L.vertexLength;r(a.layoutVertexArray,D,T,-1,-1),r(a.layoutVertexArray,D,T,1,-1),r(a.layoutVertexArray,D,T,1,1),r(a.layoutVertexArray,D,T,-1,1),a.elementArray.emplaceBack(z,z+1,z+2),a.elementArray.emplaceBack(z,z+3,z+2),L.vertexLength+=4,L.primitiveLength+=2}this.data.layers[o.id].fids.push(C),a.populatePaintArrays(e.properties)}}},Object.defineProperties(t,n),t}(o);v.programInterface=m,t.exports=v},{"../../util/dragonfly_util":190,"../../util/util":204,"../bucket":19,"../element_array_type":29,"../extent":30,"../load_geometry":32,"../vertex_array_type":36}],23:[function(e,t,n){"use strict";var r=e("../bucket"),o=e("../element_array_type"),i=e("../load_geometry"),a=e("earcut"),s=e("../../util/classify_rings"),l=500,u={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],elementArrayType:o(3),elementArrayType2:o(2),paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",
multiplier:255}]},c=function(e){function t(t){e.call(this,t,u)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(e){var t=this.arrays;this.metadata=this.metadata||{features:{}};for(var n=this.arrays.elementArray.length,r=this.arrays.elementArray2.length,o=0,u=s(i(e),l);o<u.length;o+=1){for(var c=u[o],p=0,d=0,f=c;d<f.length;d+=1){var h=f[d];p+=h.length}for(var m=t.prepareSegment(p),y=m.vertexLength,v=[],g=[],_=0,b=c;_<b.length;_+=1){var x=b[_];if(0!==x.length){x!==c[0]&&g.push(v.length/2);var w=t.prepareSegment2(x.length),E=w.vertexLength;t.layoutVertexArray.emplaceBack(x[0].x,x[0].y),t.elementArray2.emplaceBack(E+x.length-1,E),v.push(x[0].x),v.push(x[0].y);for(var k=1;k<x.length;k++)t.layoutVertexArray.emplaceBack(x[k].x,x[k].y),t.elementArray2.emplaceBack(E+k-1,E+k),v.push(x[k].x),v.push(x[k].y);w.vertexLength+=x.length,w.primitiveLength+=x.length}}for(var C=a(v,g),S=0;S<C.length;S+=3)t.elementArray.emplaceBack(y+C[S],y+C[S+1],y+C[S+2]);m.vertexLength+=p,m.primitiveLength+=C.length/3}t.populatePaintArrays(e.properties);var P=this.arrays.elementArray.length,O=this.arrays.elementArray2.length;this.metadata.features[e.id]={fillElement:{count:P-n,offset:n},fillSecondElement:{count:O-r,offset:r}}},t}(r);c.programInterface=u,t.exports=c},{"../../util/classify_rings":185,"../bucket":19,"../element_array_type":29,"../load_geometry":32,earcut:208}],24:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s){e.emplaceBack(t,n,2*Math.floor(r*f)+a,o*f*2,i*f*2,Math.round(s))}function o(e,t){return e.x===t.x&&(e.x<0||e.x>l)||e.y===t.y&&(e.y<0||e.y>l)}var i=e("../bucket"),a=e("../element_array_type"),s=e("../load_geometry"),l=e("../extent"),u=e("earcut"),c=e("../../util/classify_rings"),p=500,d={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],elementArrayType:a(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},f=Math.pow(2,13),h=function(e){function t(t){e.call(this,t,d)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(e){for(var t=this.arrays,n=0,i=c(s(e),p);n<i.length;n+=1){for(var a=i[n],l=0,d=0,f=a;d<f.length;d+=1){var h=f[d];l+=h.length}for(var m=t.prepareSegment(5*l),y=[],v=[],g=[],_=0,b=a;_<b.length;_+=1){var x=b[_];if(0!==x.length){x!==a[0]&&v.push(y.length/2);for(var w=0,E=0;E<x.length;E++){var k=x[E];if(r(t.layoutVertexArray,k.x,k.y,0,0,1,1,0),g.push(m.vertexLength++),E>=1){var C=x[E-1];if(!o(k,C)){var S=k.sub(C)._perp()._unit();r(t.layoutVertexArray,k.x,k.y,S.x,S.y,0,0,w),r(t.layoutVertexArray,k.x,k.y,S.x,S.y,0,1,w),w+=C.dist(k),r(t.layoutVertexArray,C.x,C.y,S.x,S.y,0,0,w),r(t.layoutVertexArray,C.x,C.y,S.x,S.y,0,1,w);var P=m.vertexLength;t.elementArray.emplaceBack(P,P+1,P+2),t.elementArray.emplaceBack(P+1,P+2,P+3),m.vertexLength+=4,m.primitiveLength+=2}}y.push(k.x),y.push(k.y)}}}for(var O=u(y,v),M=0;M<O.length;M+=3)t.elementArray.emplaceBack(g[O[M]],g[O[M+1]],g[O[M+2]]);m.primitiveLength+=O.length/3}t.populatePaintArrays(e.properties)},t}(i);h.programInterface=d,t.exports=h},{"../../util/classify_rings":185,"../bucket":19,"../element_array_type":29,"../extent":30,"../load_geometry":32,earcut:208}],25:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){e.emplaceBack(t.x<<1|r,t.y<<1|o,Math.round(u*n.x)+128,Math.round(u*n.y)+128,(0===i?0:i<0?-1:1)+1|(a*f&63)<<2,a*f>>6)}var o=e("../bucket"),i=e("../element_array_type"),a=e("../load_geometry"),s=e("../extent"),l=e("vector-tile").VectorTileFeature,u=63,c=Math.cos(37.5*(Math.PI/180)),p=15,d=15,f=.5,h=Math.pow(2,d-1)/f,m={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",name:"a_gapwidth"},{property:"line-offset",multiplier:1,type:"Int8"}],elementArrayType:i()},y=function(e){function t(t){e.call(this,t,m)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addFeature=function(e){var t=this,n=this.layers[0].layout,r=n["line-join"],o=n["line-cap"],i=n["line-miter-limit"],s=n["line-round-limit"];this.metadata=this.metadata||{features:{}};for(var l=this.arrays.elementArray.length,u=0,c=a(e,d);u<c.length;u+=1){var p=c[u];t.addLine(p,e,r,o,i,s)}var f=this.arrays.elementArray.length;this.metadata.features[e.id]={lineElement:{count:f-l,offset:l}}},t.prototype.addLine=function(e,t,n,r,o,i){for(var a=this,u=t.properties,d="Polygon"===l.types[t.type],f=e.length;f>=2&&e[f-1].equals(e[f-2]);)f--;for(var h=0;h<f-1&&e[h].equals(e[h+1]);)h++;if(!(f<(d?3:2))){"bevel"===n&&(o=1.05);var m=p*(s/(512*this.overscaling)),y=e[h],v=this.arrays,g=v.prepareSegment(10*f);this.distance=0;var _,b,x,w,E,k,C,S=r,P=d?"butt":r,O=!0;this.e1=this.e2=this.e3=-1,d&&(_=e[f-2],E=y.sub(_)._unit()._perp());for(var M=h;M<f;M++)if(x=d&&M===f-1?e[h+1]:e[M+1],!x||!e[M].equals(x)){E&&(w=E),_&&(b=_),_=e[M],E=x?x.sub(_)._unit()._perp():w,w=w||E;var D=w.add(E);0===D.x&&0===D.y||D._unit();var T=D.x*E.x+D.y*E.y,N=0!==T?1/T:1/0,I=T<c&&b&&x;if(I&&M>h){var L=_.dist(b);if(L>2*m){var R=_.sub(_.sub(b)._mult(m/L)._round());a.distance+=R.dist(b),a.addCurrentVertex(R,a.distance,w.mult(1),0,0,!1,g),b=R}}var A=b&&x,j=A?n:x?S:P;if(A&&"round"===j&&(N<i?j="miter":N<=2&&(j="fakeround")),"miter"===j&&N>o&&(j="bevel"),"bevel"===j&&(N>2&&(j="flipbevel"),N<o&&(j="miter")),b&&(a.distance+=_.dist(b)),"miter"===j)D._mult(N),a.addCurrentVertex(_,a.distance,D,0,0,!1,g);else if("flipbevel"===j){if(N>100)D=E.clone().mult(-1);else{var z=w.x*E.y-w.y*E.x>0?-1:1,V=N*w.add(E).mag()/w.sub(E).mag();D._perp()._mult(V*z)}a.addCurrentVertex(_,a.distance,D,0,0,!1,g),a.addCurrentVertex(_,a.distance,D.mult(-1),0,0,!1,g)}else if("bevel"===j||"fakeround"===j){var F=w.x*E.y-w.y*E.x>0,B=-Math.sqrt(N*N-1);if(F?(C=0,k=B):(k=0,C=B),O||a.addCurrentVertex(_,a.distance,w,k,C,!1,g),"fakeround"===j){for(var U=Math.floor(8*(.5-(T-.5))),W=void 0,q=0;q<U;q++)W=E.mult((q+1)/(U+1))._add(w)._unit(),a.addPieSliceVertex(_,a.distance,W,F,g);a.addPieSliceVertex(_,a.distance,D,F,g);for(var H=U-1;H>=0;H--)W=w.mult((H+1)/(U+1))._add(E)._unit(),a.addPieSliceVertex(_,a.distance,W,F,g)}x&&a.addCurrentVertex(_,a.distance,E,-k,-C,!1,g)}else"butt"===j?(O||a.addCurrentVertex(_,a.distance,w,0,0,!1,g),x&&a.addCurrentVertex(_,a.distance,E,0,0,!1,g)):"square"===j?(O||(a.addCurrentVertex(_,a.distance,w,1,1,!1,g),a.e1=a.e2=-1),x&&a.addCurrentVertex(_,a.distance,E,-1,-1,!1,g)):"round"===j&&(O||(a.addCurrentVertex(_,a.distance,w,0,0,!1,g),a.addCurrentVertex(_,a.distance,w,1,1,!0,g),a.e1=a.e2=-1),x&&(a.addCurrentVertex(_,a.distance,E,-1,-1,!0,g),a.addCurrentVertex(_,a.distance,E,0,0,!1,g)));if(I&&M<f-1){var Z=_.dist(x);if(Z>2*m){var G=_.add(x.sub(_)._mult(m/Z)._round());a.distance+=G.dist(_),a.addCurrentVertex(G,a.distance,E.mult(1),0,0,!1,g),_=G}}O=!1}v.populatePaintArrays(u)}},t.prototype.addCurrentVertex=function(e,t,n,o,i,a,s){var l,u=a?1:0,c=this.arrays,p=c.layoutVertexArray,d=c.elementArray;l=n.clone(),o&&l._sub(n.perp()._mult(o)),r(p,e,l,u,0,o,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(d.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),i&&l._sub(n.perp()._mult(i)),r(p,e,l,u,1,-i,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(d.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>h/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,o,i,a,s))},t.prototype.addPieSliceVertex=function(e,t,n,o,i){var a=o?1:0;n=n.mult(o?-1:1);var s=this.arrays,l=s.layoutVertexArray,u=s.elementArray;r(l,e,n,0,a,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(u.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),o?this.e2=this.e3:this.e1=this.e3},t}(o);y.programInterface=m,t.exports=y},{"../bucket":19,"../element_array_type":29,"../extent":30,"../load_geometry":32,"vector-tile":238}],26:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s,l,u,c,p){e.emplaceBack(t,n,Math.round(64*r),Math.round(64*o),i/4,a/4,f(10*(c||0),p%256),f(10*(l||0),10*Math.min(u||25,25)),s?s[0]:void 0,s?s[1]:void 0,s?s[2]:void 0)}function o(e,t,n,r,o){return e.emplaceBack(t.x,t.y,Math.round(n.x),Math.round(n.y),10*r,10*o)}function i(e,t,n){var r={isFeatureConstant:t.isLayoutValueFeatureConstant(n),isZoomConstant:t.isLayoutValueZoomConstant(n)};if(r.isFeatureConstant&&(r.layoutSize=t.getLayoutValue(n,{zoom:e+1})),!r.isZoomConstant){for(var o=t.getLayoutValueStopZoomLevels(n),i=0;i<o.length&&o[i]<=e;)i++;i=Math.max(0,i-1);for(var a=i;a<o.length&&o[a]<e+1;)a++;a=Math.min(o.length-1,a),r.coveringZoomRange=[o[i],o[a]],t.isLayoutValueFeatureConstant(n)&&(r.coveringStopValues=[t.getLayoutValue(n,{zoom:o[i]}),t.getLayoutValue(n,{zoom:o[a]})]),r.functionBase=t.getLayoutProperty(n).base,"undefined"==typeof r.functionBase&&(r.functionBase=1),r.functionType=t.getLayoutProperty(n).type||"exponential"}return r}function a(e,t){return e.isLayoutValueZoomConstant(t)&&!e.isLayoutValueFeatureConstant(t)?[{name:"a_size",components:1,type:"Uint16"}]:e.isLayoutValueZoomConstant(t)||e.isLayoutValueFeatureConstant(t)?[]:[{name:"a_size",components:3,type:"Uint16"}]}function s(e,t,n,r,o){return e.isLayoutValueZoomConstant(r)&&!e.isLayoutValueFeatureConstant(r)?[10*e.getLayoutValue(r,{},o)]:e.isLayoutValueZoomConstant(r)||e.isLayoutValueFeatureConstant(r)?null:[10*e.getLayoutValue(r,{zoom:n[0]},o),10*e.getLayoutValue(r,{zoom:n[1]},o),10*e.getLayoutValue(r,{zoom:1+t},o)]}var l=e("point-geometry"),u=e("../array_group"),c=e("../buffer_group"),p=e("../element_array_type"),d=e("../extent"),f=e("../../shaders/encode_attribute").packUint8ToFloat,h=e("../../symbol/anchor"),m=e("../../symbol/get_anchors"),y=e("../../util/token"),v=e("../../symbol/quads"),g=e("../../symbol/shaping"),_=e("../../symbol/transform_text"),b=e("../../symbol/mergelines"),x=e("../../symbol/clip_line"),w=e("../../util/util"),E=e("../../util/script_detection"),k=e("../load_geometry"),C=e("../../symbol/collision_feature"),S=e("../../util/find_pole_of_inaccessibility"),P=e("../../util/classify_rings"),O=e("vector-tile").VectorTileFeature,M=g.shapeText,D=g.shapeIcon,T=g.WritingMode,N=v.getGlyphQuads,I=v.getIconQuads,L=p(),R=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],A={glyph:{layoutAttributes:R,elementArrayType:L,paintAttributes:[{name:"a_fill_color",property:"text-color",type:"Uint8"},{name:"a_halo_color",property:"text-halo-color",type:"Uint8"},{name:"a_halo_width",property:"text-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"text-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"text-opacity",type:"Uint8",multiplier:255}]},icon:{layoutAttributes:R,elementArrayType:L,paintAttributes:[{name:"a_fill_color",property:"icon-color",type:"Uint8"},{name:"a_halo_color",property:"icon-halo-color",type:"Uint8"},{name:"a_halo_width",property:"icon-halo-width",type:"Uint16",multiplier:10},{name:"a_halo_blur",property:"icon-halo-blur",type:"Uint16",multiplier:10},{name:"a_opacity",property:"icon-opacity",type:"Uint8",multiplier:255}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}],elementArrayType:p(2)}},j=function(e){var t=this;this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.sdfIcons=e.sdfIcons,this.iconsNeedLinear=e.iconsNeedLinear,this.fontstack=e.fontstack;var n=this.layers[0];if(this.symbolInterfaces={glyph:w.extend({},A.glyph,{layoutAttributes:[].concat(A.glyph.layoutAttributes,a(n,"text-size"))}),icon:w.extend({},A.icon,{layoutAttributes:[].concat(A.icon.layoutAttributes,a(n,"icon-size"))}),collisionBox:w.extend({},A.collisionBox,{layoutAttributes:[].concat(A.collisionBox.layoutAttributes)})},e.arrays){this.buffers={};for(var r in e.arrays)e.arrays[r]&&(t.buffers[r]=new c(t.symbolInterfaces[r],e.layers,e.zoom,e.arrays[r]));this.textSizeData=e.textSizeData,this.iconSizeData=e.iconSizeData}else this.textSizeData=i(this.zoom,n,"text-size"),this.iconSizeData=i(this.zoom,n,"icon-size")};j.prototype.populate=function(e,t){var n=this,r=this.layers[0],o=r.layout,i=o["text-font"],a=(!r.isLayoutValueFeatureConstant("text-field")||o["text-field"])&&i,s=!r.isLayoutValueFeatureConstant("icon-image")||o["icon-image"];if(this.features=[],a||s){for(var l=t.iconDependencies,u=t.glyphDependencies,c=u[i]=u[i]||{},p={zoom:this.zoom},d=0;d<e.length;d++){var f=e[d];if(r.filter(f)){var h=void 0;a&&(h=r.getLayoutValue("text-field",p,f.properties),r.isLayoutValueFeatureConstant("text-field")&&(h=y(f.properties,h)),h=_(h,r,p,f.properties));var m=void 0;if(s&&(m=r.getLayoutValue("icon-image",p,f.properties),r.isLayoutValueFeatureConstant("icon-image")&&(m=y(f.properties,m))),(h||m)&&(n.features.push({text:h,icon:m,index:d,sourceLayerIndex:f.sourceLayerIndex,geometry:k(f),properties:f.properties,type:O.types[f.type]}),m&&(l[m]=!0),h))for(var v=0;v<h.length;v++)c[h.charCodeAt(v)]=!0}}"line"===o["symbol-placement"]&&(this.features=b(this.features))}},j.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()},j.prototype.getPaintPropertyStatistics=function(){for(var e=this,t={},n=0,r=e.layers;n<r.length;n+=1){var o=r[n];t[o.id]=w.extend({},e.arrays.icon.layerData[o.id].paintPropertyStatistics,e.arrays.glyph.layerData[o.id].paintPropertyStatistics)}return t},j.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,fontstack:this.fontstack,arrays:w.mapObject(this.arrays,function(t){return t.isEmpty()?null:t.serialize(e)})}},j.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)},j.prototype.createArrays=function(){var e=this;this.arrays=w.mapObject(this.symbolInterfaces,function(t){return new u(t,e.layers,e.zoom)})},j.prototype.prepare=function(e,t){var n=this;this.symbolInstances=[];var r=512*this.overscaling;this.tilePixelRatio=d/r,this.compareText={},this.iconsNeedLinear=!1;var o=this.layers[0].layout,i=.5,a=.5;switch(o["text-anchor"]){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(o["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}for(var s="right"===o["text-justify"]?1:"left"===o["text-justify"]?0:.5,l=24,u=o["text-line-height"]*l,c="line"!==o["symbol-placement"]?o["text-max-width"]*l:0,p=o["text-letter-spacing"]*l,f=this.fontstack=o["text-font"].join(","),h="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],m=0,y=n.features;m<y.length;m+=1){var v=y[m],g=void 0;if(v.text){var _=E.allowsVerticalWritingMode(v.text),b=n.layers[0].getLayoutValue("text-offset",{zoom:n.zoom},v.properties).map(function(e){return e*l});g={},g[T.horizontal]=M(v.text,e[f],c,u,i,a,s,p,b,l,T.horizontal),g[T.vertical]=_&&h&&M(v.text,e[f],c,u,i,a,s,p,b,l,T.vertical)}else g={};var x=void 0;if(v.icon){var k=t[v.icon],C=n.layers[0].getLayoutValue("icon-offset",{zoom:n.zoom},v.properties);x=D(k,C),k&&(void 0===n.sdfIcons?n.sdfIcons=k.sdf:n.sdfIcons!==k.sdf&&w.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==k.pixelRatio?n.iconsNeedLinear=!0:0===o["icon-rotate"]&&n.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(n.iconsNeedLinear=!0))}(g[T.horizontal]||x)&&n.addFeature(v,g,x)}},j.prototype.addFeature=function(e,t,n){var r=this,o=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1},e.properties),i=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1},e.properties),a=this.layers[0].getLayoutValue("text-size",{zoom:18},e.properties);void 0===a&&(a=o);var s=this.layers[0].layout,l=24,u=o/l,c=this.tilePixelRatio*u,p=this.tilePixelRatio*a/l,f=this.tilePixelRatio*i,y=this.tilePixelRatio*s["symbol-spacing"],v=s["symbol-avoid-edges"],g=s["text-padding"]*this.tilePixelRatio,_=s["icon-padding"]*this.tilePixelRatio,b=s["text-max-angle"]/180*Math.PI,w="map"===s["text-rotation-alignment"]&&"line"===s["symbol-placement"],E="map"===s["icon-rotation-alignment"]&&"line"===s["symbol-placement"],k=s["text-allow-overlap"]||s["icon-allow-overlap"]||s["text-ignore-placement"]||s["icon-ignore-placement"],C=s["symbol-placement"],O=y/2,M=function(o,i){var a=!(i.x<0||i.x>d||i.y<0||i.y>d);if(!v||a){var s=a||k;r.addSymbolInstance(i,o,t,n,r.layers[0],s,r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,c,g,w,f,_,E,{zoom:r.zoom},e.properties)}};if("line"===C)for(var D=0,N=x(e.geometry,0,0,d,d);D<N.length;D+=1)for(var I=N[D],L=m(I,y,b,t[T.vertical]||t[T.horizontal],n,l,p,r.overscaling,d),R=0,A=L;R<A.length;R+=1){var j=A[R],z=t[T.horizontal];z&&r.anchorIsTooClose(z.text,O,j)||M(I,j)}else if("Polygon"===e.type)for(var V=0,F=P(e.geometry,0);V<F.length;V+=1){var B=F[V],U=S(B,16);M(B[0],new h(U.x,U.y,0))}else if("LineString"===e.type)for(var W=0,q=e.geometry;W<q.length;W+=1){var H=q[W];M(H,new h(H[0].x,H[0].y,0))}else if("Point"===e.type)for(var Z=0,G=e.geometry;Z<G.length;Z+=1)for(var X=G[Z],K=0,Y=X;K<Y.length;K+=1){var J=Y[K];M([J],new h(J.x,J.y,0))}},j.prototype.anchorIsTooClose=function(e,t,n){var r=this.compareText;if(e in r){for(var o=r[e],i=o.length-1;i>=0;i--)if(n.dist(o[i])<t)return!0}else r[e]=[];return r[e].push(n),!1},j.prototype.place=function(e,t){var n=this;this.createArrays();var r=this.layers[0],o=r.layout,i=e.maxScale,a="map"===o["text-rotation-alignment"]&&"line"===o["symbol-placement"],l="map"===o["icon-rotation-alignment"]&&"line"===o["symbol-placement"],u=o["text-allow-overlap"]||o["icon-allow-overlap"]||o["text-ignore-placement"]||o["icon-ignore-placement"];if(u){var c=e.angle,p=Math.sin(c),d=Math.cos(c);this.symbolInstances.sort(function(e,t){var n=p*e.anchor.x+d*e.anchor.y|0,r=p*t.anchor.x+d*t.anchor.y|0;return n-r||t.featureIndex-e.featureIndex})}for(var f=0,h=n.symbolInstances;f<h.length;f+=1){var m=h[f],y={boxStartIndex:m.textBoxStartIndex,boxEndIndex:m.textBoxEndIndex},v={boxStartIndex:m.iconBoxStartIndex,boxEndIndex:m.iconBoxEndIndex},g=!(m.textBoxStartIndex===m.textBoxEndIndex),_=!(m.iconBoxStartIndex===m.iconBoxEndIndex),b=o["text-optional"]||!g,x=o["icon-optional"]||!_,w=g?e.placeCollisionFeature(y,o["text-allow-overlap"],o["symbol-avoid-edges"]):e.minScale,E=_?e.placeCollisionFeature(v,o["icon-allow-overlap"],o["symbol-avoid-edges"]):e.minScale;if(b||x?!x&&w?w=Math.max(E,w):!b&&E&&(E=Math.max(E,w)):E=w=Math.max(E,w),g&&(e.insertCollisionFeature(y,w,o["text-ignore-placement"]),w<=i)){var k=s(r,n.zoom,n.textSizeData.coveringZoomRange,"text-size",m.featureProperties);n.addSymbols(n.arrays.glyph,m.glyphQuads,w,k,o["text-keep-upright"],a,e.angle,m.featureProperties,m.writingModes)}if(_&&(e.insertCollisionFeature(v,E,o["icon-ignore-placement"]),E<=i)){var C=s(r,n.zoom,n.iconSizeData.coveringZoomRange,"icon-size",m.featureProperties);n.addSymbols(n.arrays.icon,m.iconQuads,E,C,o["icon-keep-upright"],l,e.angle,m.featureProperties)}}t&&this.addToDebugBuffers(e)},j.prototype.addSymbols=function(e,t,n,o,i,a,s,l,u){for(var c=e.elementArray,p=e.layoutVertexArray,d=this.zoom,f=Math.max(Math.log(n)/Math.LN2+d,0),h=0,m=t;h<m.length;h+=1){var y=m[h],v=(y.anchorAngle+s+Math.PI)%(2*Math.PI);if(u&T.vertical){if(a&&y.writingMode===T.vertical){if(i&&a&&v<=5*Math.PI/4||v>7*Math.PI/4)continue}else if(i&&a&&v<=3*Math.PI/4||v>5*Math.PI/4)continue}else if(i&&a&&(v<=Math.PI/2||v>3*Math.PI/2))continue;var g=y.tl,_=y.tr,b=y.bl,x=y.br,w=y.tex,E=y.anchorPoint,k=Math.max(d+Math.log(y.minScale)/Math.LN2,f),C=Math.min(d+Math.log(y.maxScale)/Math.LN2,25);if(!(C<=k)){k===f&&(k=0);var S=Math.round(y.glyphAngle/(2*Math.PI)*256),P=e.prepareSegment(4),O=P.vertexLength;r(p,E.x,E.y,g.x,g.y,w.x,w.y,o,k,C,f,S),r(p,E.x,E.y,_.x,_.y,w.x+w.w,w.y,o,k,C,f,S),r(p,E.x,E.y,b.x,b.y,w.x,w.y+w.h,o,k,C,f,S),r(p,E.x,E.y,x.x,x.y,w.x+w.w,w.y+w.h,o,k,C,f,S),c.emplaceBack(O,O+1,O+2),c.emplaceBack(O+1,O+2,O+3),P.vertexLength+=4,P.primitiveLength+=2}}e.populatePaintArrays(l)},j.prototype.addToDebugBuffers=function(e){for(var t=this,n=this.arrays.collisionBox,r=n.layoutVertexArray,i=n.elementArray,a=-e.angle,s=e.yStretch,u=0,c=t.symbolInstances;u<c.length;u+=1){var p=c[u];p.textCollisionFeature={boxStartIndex:p.textBoxStartIndex,boxEndIndex:p.textBoxEndIndex},p.iconCollisionFeature={boxStartIndex:p.iconBoxStartIndex,boxEndIndex:p.iconBoxEndIndex};for(var d=0;d<2;d++){var f=p[0===d?"textCollisionFeature":"iconCollisionFeature"];if(f)for(var h=f.boxStartIndex;h<f.boxEndIndex;h++){var m=t.collisionBoxArray.get(h),y=m.anchorPoint,v=new l(m.x1,m.y1*s)._rotate(a),g=new l(m.x2,m.y1*s)._rotate(a),_=new l(m.x1,m.y2*s)._rotate(a),b=new l(m.x2,m.y2*s)._rotate(a),x=Math.max(0,Math.min(25,t.zoom+Math.log(m.maxScale)/Math.LN2)),w=Math.max(0,Math.min(25,t.zoom+Math.log(m.placementScale)/Math.LN2)),E=n.prepareSegment(4),k=E.vertexLength;o(r,y,v,x,w),o(r,y,g,x,w),o(r,y,b,x,w),o(r,y,_,x,w),i.emplaceBack(k,k+1),i.emplaceBack(k+1,k+2),i.emplaceBack(k+2,k+3),i.emplaceBack(k+3,k),E.vertexLength+=4,E.primitiveLength+=4}}}},j.prototype.addSymbolInstance=function(e,t,n,r,o,i,a,s,l,u,c,p,d,f,h,m,y,v){var g,_,b=[],x=[];for(var E in n){var k=parseInt(E,10);n[k]&&(x=x.concat(i?N(e,n[k],c,t,o,d,y,v):[]),g=new C(a,t,e,s,l,u,n[k],c,p,d,(!1)))}var S=g?g.boxStartIndex:this.collisionBoxArray.length,P=g?g.boxEndIndex:this.collisionBoxArray.length;r&&(b=i?I(e,r,f,t,o,m,n[T.horizontal],y,v):[],_=new C(a,t,e,s,l,u,r,f,h,m,(!0)));var O=_?_.boxStartIndex:this.collisionBoxArray.length,M=_?_.boxEndIndex:this.collisionBoxArray.length;P>j.MAX_INSTANCES&&w.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),M>j.MAX_INSTANCES&&w.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var D=(n[T.vertical]?T.vertical:0)|(n[T.horizontal]?T.horizontal:0);this.symbolInstances.push({textBoxStartIndex:S,textBoxEndIndex:P,iconBoxStartIndex:O,iconBoxEndIndex:M,glyphQuads:x,iconQuads:b,anchor:e,featureIndex:s,featureProperties:v,writingModes:D})},j.programInterfaces=A,j.MAX_INSTANCES=65535,t.exports=j},{"../../shaders/encode_attribute":60,"../../symbol/anchor":145,"../../symbol/clip_line":147,"../../symbol/collision_feature":149,"../../symbol/get_anchors":151,"../../symbol/mergelines":154,"../../symbol/quads":155,"../../symbol/shaping":156,"../../symbol/transform_text":158,"../../util/classify_rings":185,"../../util/find_pole_of_inaccessibility":192,"../../util/script_detection":200,"../../util/token":203,"../../util/util":204,"../array_group":18,"../buffer_group":28,"../element_array_type":29,"../extent":30,"../load_geometry":32,"point-geometry":230,"vector-tile":238}],27:[function(e,t,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Float32:"FLOAT"},o=function(e,t,n){this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.attributes=t.members,this.itemSize=t.bytesPerElement,this.type=n,this.arrayType=t};o.fromStructArray=function(e,t){return new o(e.serialize(),e.constructor.serialize(),t)},o.prototype.bind=function(e){var t=e[this.type];this.buffer?e.bindBuffer(t,this.buffer):(this.gl=e,this.buffer=e.createBuffer(),e.bindBuffer(t,this.buffer),e.bufferData(t,this.arrayBuffer,e.STATIC_DRAW),this.arrayBuffer=null)},o.prototype.enableAttributes=function(e,t){for(var n=this,r=0;r<this.attributes.length;r++){var o=n.attributes[r],i=t[o.name];void 0!==i&&e.enableVertexAttribArray(i)}},o.prototype.setVertexAttribPointers=function(e,t,n){for(var o=this,i=0;i<this.attributes.length;i++){var a=o.attributes[i],s=t[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[r[a.type]],!1,o.arrayType.bytesPerElement,a.offset+(o.arrayType.bytesPerElement*n||0))}},o.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},o.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},t.exports=o},{}],28:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("./buffer"),i=e("./program_configuration"),a=e("./vertex_array_type"),s=e("../render/vertex_array_object"),l=function(e,t,n,l){var u=this,c=a(e.layoutAttributes);this.layoutVertexBuffer=new o(l.layoutVertexArray,c.serialize(),o.BufferType.VERTEX),l.elementArray&&(this.elementBuffer=new o(l.elementArray,e.elementArrayType.serialize(),o.BufferType.ELEMENT)),l.elementArray2&&(this.elementBuffer2=new o(l.elementArray2,e.elementArrayType2.serialize(),o.BufferType.ELEMENT)),this.layerData={};for(var p=0,d=t;p<d.length;p+=1){var f=d[p],h=l.paintVertexArrays&&l.paintVertexArrays[f.id],m=i.createDynamic(e.paintAttributes||[],f,n),y=h?new o(h.array,h.type,o.BufferType.VERTEX):null;u.layerData[f.id]={programConfiguration:m,paintVertexBuffer:y}}this.segments=l.segments,this.segments2=l.segments2;for(var v=0,g=[u.segments,u.segments2];v<g.length;v+=1)for(var _=g[v],b=0,x=_||[];b<x.length;b+=1){var w=x[b];w.vaos=r.mapObject(u.layerData,function(){return new s})}};l.prototype.destroy=function(){var e=this;this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var t in e.layerData){var n=e.layerData[t].paintVertexBuffer;n&&n.destroy()}for(var r=0,o=[e.segments,e.segments2];r<o.length;r+=1)for(var i=o[r],a=0,s=i||[];a<s.length;a+=1){var l=s[a];for(var u in l.vaos)l.vaos[u].destroy()}},t.exports=l},{"../render/vertex_array_object":59,"../util/util":204,"./buffer":27,"./program_configuration":34,"./vertex_array_type":36}],29:[function(e,t,n){"use strict";function r(e){return o({members:[{type:"Uint16",name:"vertices",components:e||3}]})}var o=e("../util/struct_array");t.exports=r},{"../util/struct_array":202}],30:[function(e,t,n){"use strict";t.exports=8192},{}],31:[function(e,t,n){"use strict";function r(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function o(e,t){return t-e}function i(e,t){return t>0?t+2*e:e}function a(e,t,n,r,o){if(!t[0]&&!t[1])return e;t=l.convert(t),"viewport"===n&&t._rotate(-r);for(var i=[],a=0;a<e.length;a++){for(var s=e[a],u=[],c=0;c<s.length;c++)u.push(s[c].sub(t._mult(o)));i.push(u)}return i}function s(e,t){for(var n=[],r=new l(0,0),o=0;o<e.length;o++){for(var i=e[o],a=[],s=0;s<i.length;s++){var u=i[s-1],c=i[s],p=i[s+1],d=0===s?r:c.sub(u)._unit()._perp(),f=s===i.length-1?r:p.sub(c)._unit()._perp(),h=d._add(f)._unit(),m=h.x*f.x+h.y*f.y;h._mult(1/m),a.push(h._mult(t)._add(c))}n.push(a)}return n}var l=e("point-geometry"),u=e("./load_geometry"),c=e("./extent"),p=e("../style-spec/feature_filter"),d=(e("../util/dragonfly_util").evaluateExpression,e("../util/struct_array")),f=e("grid-index"),h=e("../util/dictionary_coder"),m=e("vector-tile"),y=e("pbf"),v=e("../util/vectortile_to_geojson"),g=e("../util/util").arraysIntersect,_=e("../util/intersection_tests"),b=_.multiPolygonIntersectsBufferedMultiPoint,x=_.multiPolygonIntersectsMultiPolygon,w=_.multiPolygonIntersectsBufferedMultiLine,E=_.circleIntersectsPoint,k=d({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),C=function(e,t,n){if(e.grid){var r=e,o=t;e=r.coord,t=r.overscaling,this.grid=new f(r.grid),this.featureIndexArray=new k(r.featureIndexArray),this.rawTileData=o,this.bucketLayerIDs=r.bucketLayerIDs,this.paintPropertyStatistics=r.paintPropertyStatistics}else this.grid=new f(c,16,0),this.featureIndexArray=new k;this.coord=e,this.overscaling=t,this.x=e.x,this.y=e.y,this.z=e.z-Math.log(t)/Math.LN2,this.setCollisionTile(n)};C.prototype.insert=function(e,t){var n=this,r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(e.index,e.sourceLayerIndex,t);for(var o=u(e),i=0;i<o.length;i++){for(var a=o[i],s=[1/0,1/0,-(1/0),-(1/0)],l=0;l<a.length;l++){var c=a[l];s[0]=Math.min(s[0],c.x),s[1]=Math.min(s[1],c.y),s[2]=Math.max(s[2],c.x),s[3]=Math.max(s[3],c.y)}n.grid.insert(r,s[0],s[1],s[2],s[3])}},C.prototype.setCollisionTile=function(e){this.collisionTile=e},C.prototype.serialize=function(e){var t=this.grid.toArrayBuffer();return e&&e.push(t),{coord:this.coord,overscaling:this.overscaling,grid:t,featureIndexArray:this.featureIndexArray.serialize(e),bucketLayerIDs:this.bucketLayerIDs,paintPropertyStatistics:this.paintPropertyStatistics}},C.prototype.query=function(e,t){var n=this;this.vtLayers||(this.vtLayers=new m.VectorTile(new y(this.rawTileData)).layers,this.sourceLayerCoder=new h(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var a={},s=e.params||{},u=c/e.tileSize/e.scale,d=p(s.filter);s.expanded&&(e.queryGeometry=[[new l((e.queryGeometry[0][0].x+e.queryGeometry[0][2].x)/2,(e.queryGeometry[0][0].y+e.queryGeometry[0][2].y)/2)]]);var f=0;for(var v in t)if(n.hasLayer(v)){var g=t[v],_=0;if("line"===g.type){var b=i(n.getPaintValue("line-width",g),n.getPaintValue("line-gap-width",g)),x=n.getPaintValue("line-offset",g),w=n.getPaintValue("line-translate",g);_=b/2+Math.abs(x)+r(w)}else"fill"===g.type?_=r(n.getPaintValue("fill-translate",g)):"fill-extrusion"===g.type?_=r(n.getPaintValue("fill-extrusion-translate",g)):"circle"===g.type?_=n.getPaintValue("circle-radius",g)+r(n.getPaintValue("circle-translate",g)):"bubble"===g.type&&(_=2048+r(n.getPaintValue("bubble-translate",g)));f=Math.max(f,_*u)}for(var E=e.queryGeometry.map(function(e){return e.map(function(e){return new l(e.x,e.y)})}),k=1/0,C=1/0,S=-(1/0),P=-(1/0),O=0;O<E.length;O++)for(var M=E[O],D=0;D<M.length;D++){var T=M[D];k=Math.min(k,T.x),C=Math.min(C,T.y),S=Math.max(S,T.x),P=Math.max(P,T.y)}var N=this.grid.query(k-f,C-f,S+f,P+f);N.sort(o),this.filterMatching(a,N,this.featureIndexArray,E,d,s.layers,t,e.bearing,u,e.tile,s.radius);var I=this.collisionTile.queryRenderedSymbols(E,e.scale);return I.sort(),this.filterMatching(a,I,this.collisionTile.collisionBoxArray,E,d,s.layers,t,e.bearing,u,e.tile,s.radius),a},C.prototype.filterMatching=function(e,t,n,r,o,c,p,d,f,h,m){for(var y,_=this,k=0;k<t.length;k++){var C=t[k];if(C!==y){y=C;var S=n.get(C),P=_.bucketLayerIDs[S.bucketIndex];if(!c||g(c,P)){var O=_.sourceLayerCoder.decode(S.sourceLayerIndex),M=_.vtLayers[O],D=M.feature(S.featureIndex);if(o(D))for(var T=null,N=0;N<P.length;N++){var I=P[N];if(!(c&&c.indexOf(I)<0)){var L=p[I];if(L){var R=void 0;if("symbol"!==L.type){T||(T=u(D));var A=L.paint;if("dotdensity"===L.type)continue;if("line"===L.type){R=a(r,_.getPaintValue("line-translate",L,D),_.getPaintValue("line-translate-anchor",L,D),d,f);var j=f/2*i(_.getPaintValue("line-width",L,D),_.getPaintValue("line-gap-width",L,D)),z=_.getPaintValue("line-offset",L,D);z&&(T=s(T,z*f));var V=!!A["line-query-as-fill"]&&x(R,T);if(!V&&!w(R,T,j))continue}else if("fill"===L.type||"fill-extrusion"===L.type){var F=L.type;if(R=a(r,_.getPaintValue(F+"-translate",L,D),_.getPaintValue(F+"-translate-anchor",L,D),d,f),m){var B=[[new l((R[0][0].x+R[0][2].x)/2,(R[0][0].y+R[0][2].y)/2)]],U=Math.abs(R[0][0].x-R[0][2].x)/2;if(!b(B,T,U))continue}else if(!x(R,T))continue}else if("circle"===L.type){R=a(r,_.getPaintValue("circle-translate",L,D),_.getPaintValue("circle-translate-anchor",L,D),d,f);var W=_.getPaintValue("circle-radius",L,D)*f;if(!b(R,T,W))continue}else if("bubble"===L.type){R=a(r,A["bubble-translate"],A["bubble-translate-anchor"],d,f);var q=L.paint["bubble-radius-multiplier"],H=h.metadata.buckets[L.id],Z=H?h.metadata.buckets[L.id].features[D.id].calculatedRadius:void 0,G=void 0!==A["bubble-max-radius"]?Math.min(q*Z,A["bubble-max-radius"]):q*Z,X=f*G;
if(!isNaN(X)&&!E(R,T,X))continue}}var K=new v(D,_.z,_.x,_.y);K.layer=L.serialize();var Y=e[I];void 0===Y&&(Y=e[I]=[]),Y.push(K)}}}}}}},C.prototype.hasLayer=function(e){var t=this;for(var n in t.bucketLayerIDs)for(var r=0,o=t.bucketLayerIDs[n];r<o.length;r+=1){var i=o[r];if(e===i)return!0}return!1},C.prototype.getPaintValue=function(e,t,n){var r=t.isPaintValueFeatureConstant(e);if(r||n){var o=n?n.properties:{};return t.getPaintValue(e,{zoom:this.z},o)}return this.paintPropertyStatistics[t.id][e].max},t.exports=C},{"../style-spec/feature_filter":86,"../util/dictionary_coder":187,"../util/dragonfly_util":190,"../util/intersection_tests":195,"../util/struct_array":202,"../util/util":204,"../util/vectortile_to_geojson":205,"./extent":30,"./load_geometry":32,"grid-index":219,pbf:229,"point-geometry":230,"vector-tile":238}],32:[function(e,t,n){"use strict";function r(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}var o=e("../util/util"),i=e("./extent"),a={15:r(15),16:r(16)};t.exports=function(e,t){for(var n=a[t||16],r=i/e.extent,s=e.loadGeometry(),l=0;l<s.length;l++)for(var u=s[l],c=0;c<u.length;c++){var p=u[c];p.x=Math.round(p.x*r),p.y=Math.round(p.y*r),(p.x<n.min||p.x>n.max||p.y<n.min||p.y>n.max)&&o.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}},{"../util/util":204,"./extent":30}],33:[function(e,t,n){"use strict";var r=e("../util/struct_array"),o=r({members:[{name:"a_pos",type:"Int16",components:2}]});t.exports=o},{"../util/struct_array":202}],34:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.zoomStops)return t.getPaintValue(e.property,n,r);var o=e.zoomStops.map(function(o){return t.getPaintValue(e.property,s.extend({},n,{zoom:o}),r)});return 1===o.length?o[0]:o}function o(e,t){var n=e.name;n||(n=e.property.replace(t.type+"-","").replace(/-/g,"_"));var r="color"===t._paintSpecifications[e.property].type;return s.extend({name:"a_"+n,components:r?4:1,multiplier:r?255:1,dimensions:r?4:1},e)}function i(e,t,n){var r,o=0;if("dragonfly-categorical"===e.type)return r=n[e.property],r=t["function"].categoricalValues.hasOwnProperty(r)?t["function"].categoricalValues[r]:-1,[r,o];var i=e.property.split(","),a=e["computed-options"]||{},s=a["insufficient-threshold"],l=a["insufficient-variable"],u=a.denominator,c=a["is-computed"],p=a["function"]||"percent",d=a.multiplier||0;return!c||"percent"!==p&&"ratio"!==p||n[u]?void 0!==s&&void 0!==l&&n[l]<s?[0,-1]:(i.forEach(function(e,t){var i=n[e];if(c&&"percent"===p?i=100*n[e]/n[u]:c&&"ratio"===p?i=n[e]/n[u]:c&&"multiply"===p&&(i=n[e]*d),void 0===r||void 0!==i)return void 0===r&&void 0===i?void(o=-2):void((void 0===r||r<i)&&(r=i,o=t))}),[r,o]):[0,-2]}var a=e("./vertex_array_type"),s=e("../util/util"),l=(e("../style-spec/util/parse_color"),function(){this.attributes=[],this.uniforms=[],this.interpolationUniforms=[],this.paintPropertyUniforms=[],this.pragmas={vertex:{},fragment:{}},this.cacheKey=""});l.createDynamic=function(e,t,n){for(var r=new l,i=0,s=e;i<s.length;i+=1){var u=s[i],c=o(u,t),p=c.name.slice(2);t.isPaintValueFeatureConstant(c.property)?r.addZoomAttribute(p,c):t.isPaintValueZoomConstant(c.property)?r.addPropertyAttribute(p,c,t):r.addZoomAndPropertyAttribute(p,c,t,n)}return r.PaintVertexArray=a(r.attributes),r},l.createStatic=function(e){for(var t=new l,n=0,r=e;n<r.length;n+=1){var o=r[n];t.addUniform(o,"u_"+o)}return t},l.prototype.addUniform=function(e,t){var n=this.getPragmas(e);n.define.push("uniform {precision} {type} "+t+";"),n.initialize.push("{precision} {type} "+e+" = "+t+";"),this.cacheKey+="/u_"+e},l.prototype.addZoomAttribute=function(e,t){this.uniforms.push(t),this.addUniform(e,t.name)},l.prototype.addPropertyAttribute=function(e,t,n){var r=n.getPaintProperty(t.property);if(r&&("dragonfly-interval"===r.type||"dragonfly-categorical"===r.type))return void this._addDragonflyPropertyAttribute(e,t,n);var o=this.getPragmas(e);this.attributes.push(t),o.define.push("varying {precision} {type} "+e+";"),o.vertex.define.push("attribute {precision} {type} "+t.name+";"),o.vertex.initialize.push(e+" = "+t.name+" / "+t.multiplier+".0;"),this.cacheKey+="/a_"+e},l.prototype.addZoomAndPropertyAttribute=function(e,t,n,r){var o=this,i=this.getPragmas(e);i.define.push("varying {precision} {type} "+e+";");var a=n.getPaintValueStopZoomLevels(t.property),l=0;if(a.length>4)for(;l<a.length-2&&a[l]<r;)l++;var u="u_"+e+"_t";i.vertex.define.push("uniform lowp float "+u+";"),this.interpolationUniforms.push({name:u,property:t.property,stopOffset:l});for(var c=[],p=0;p<4;p++)c.push(a[Math.min(l+p,a.length-1)]);var d=[];if(1===t.components)this.attributes.push(s.extend({},t,{components:4,zoomStops:c})),i.vertex.define.push("attribute {precision} vec4 "+t.name+";"),d.push(t.name);else for(var f=0;f<4;f++){var h=t.name+f;d.push(h),o.attributes.push(s.extend({},t,{name:h,zoomStops:[c[f]]})),i.vertex.define.push("attribute {precision} {type} "+h+";")}i.vertex.initialize.push(e+" = evaluate_zoom_function_"+t.components+"(            "+d.join(", ")+", "+u+") / "+t.multiplier+".0;"),this.cacheKey+="/z_"+e},l.prototype.getPragmas=function(e){return this.pragmas[e]||(this.pragmas[e]={define:[],initialize:[]},this.pragmas[e].fragment={define:[],initialize:[]},this.pragmas[e].vertex={define:[],initialize:[]}),this.pragmas[e]},l.prototype.applyPragmas=function(e,t){var n=this;return e.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(e,r,o,i,a){return n.pragmas[a][r].concat(n.pragmas[a][t][r]).join("\n").replace(/{type}/g,i).replace(/{precision}/g,o)})},l.prototype.createPaintPropertyStatistics=function(){for(var e=this,t={},n=0,r=e.attributes;n<r.length;n+=1){var o=r[n];1===o.dimensions&&(t[o.property]={max:-(1/0)})}return t},l.prototype.populatePaintArray=function(e,t,n,o,a,s){var l=this,u=t.length;t.resize(o);for(var c=0,p=l.attributes;c<p.length;c+=1){var d=p[c];if(d.isProperty)for(var f=e.getPaintProperty(d.property),h=i(f,e._paintTransitions[d.property].declaration,s),m=u;m<o;m++){var y=t.get(m);y[d.name+"0"]=h[0],y[d.name+"1"]=h[1]}else for(var v=r(d,e,a,s),g=u;g<o;g++){var _=t.get(g);if(4===d.components)for(var b=0;b<4;b++)_[d.name+b]=v[b]*d.multiplier;else _[d.name]=v*d.multiplier;if(1===d.dimensions){var x=n[d.property];x.max=Math.max(x.max,1===d.components?v:Math.max.apply(Math,v))}}}},l.prototype.setUniforms=function(e,t,n,r){for(var o=this,i=0,a=o.uniforms;i<a.length;i+=1){var s=a[i],l=n.transitionDisabled?n.paint[s.property]:n.getPaintValue(s.property,r);4===s.components?e.uniform4fv(t[s.name],l):e.uniform1f(t[s.name],l)}for(var u=0,c=o.interpolationUniforms;u<c.length;u+=1){var p=c[u],d=n.getPaintInterpolationT(p.property,r);e.uniform1f(t[p.name],Math.max(0,Math.min(3,d-p.stopOffset)))}for(var f=0,h=o.paintPropertyUniforms;f<h.length;f+=1){var m=h[f],y=n.getPaintProperty(m.property),v=[];if("dragonfly-categorical"===y.type){var g=n._paintTransitions[m.property].declaration;v=Object.keys(g["function"].categoricalValues).map(function(e){return g["function"].categoricalValues[e]})}else v=y.stops.map(function(e){return e[0]});var _=v.length/m.columnsCount;v=v.slice(0,_);var b=n.transitionDisabled?n.paint[m.property]:n.getPaintValue(m.property,r),x=void 0,w=void 0;"dragonfly-interval"===y.type&&void 0===v[0]&&(x=!0,v.shift(),4===m.components?e.uniform4fv(e.getUniformLocation(t.program,m.undefinedValue),b.slice(0,4)):e.uniform1f(e.getUniformLocation(t.program,m.undefinedValue),b[0])),"dragonfly-interval"===y.type&&v[0]===-(1/0)&&(w=!0,v.shift(),4===m.components?e.uniform4fv(e.getUniformLocation(t.program,m.insufficientValue),b.slice(4,8)):e.uniform1f(e.getUniformLocation(t.program,m.insufficientValue),b[1])),e.uniform1fv(e.getUniformLocation(t.program,m.rules),v),e.uniform1i(e.getUniformLocation(t.program,m.count),v.length);for(var E=0,k=0;E<b.length;){for(var C=0,S=[];C<_;)if(x&&0===C)E+=m.components,C++;else if(w&&1===C)E+=m.components,C++;else{for(var P=0;P<m.components;P++){var O=b[E+P]*m.multiplier;4===m.components&&(O=256*Math.floor(O)),k+1<m.columnsCount&&4===m.components&&(O+=Math.floor(b[_*m.components+E+P]*m.multiplier)),S.push(O)}E+=m.components,C++}4===m.components?e.uniform4fv(e.getUniformLocation(t.program,""+m.values+Math.floor(k/2)),S):e.uniform1fv(e.getUniformLocation(t.program,""+m.values+k),S),k+1<m.columnsCount&&4===m.components?(E+=_*m.components,k+=2):k++}}},l.prototype._addDragonflyPropertyAttribute=function(e,t,n){var r=this.getPragmas(e),o=n.getPaintProperty(t.property);r.define.push("varying {precision} {type} "+e+";");var i={type:"Float32",name:t.name+"_property",property:t.property,components:2,multiplier:1,dimensions:1,isProperty:!0};this.attributes.push(i),r.vertex.define.push("attribute highp vec2 "+i.name+";");var a=e+"_column_value",s=e+"_column_index",l=e+"_column_undefined",u=e+"_column_insufficent";r.vertex.initialize.push("float "+a+" = "+i.name+"[0];"),r.vertex.initialize.push("int "+s+" = int ("+i.name+"[1]);"),r.vertex.initialize.push("bool "+l+" ="+i.name+"[1] == -2.0;"),r.vertex.initialize.push("bool "+u+" ="+i.name+"[1] == -1.0;");var c={property:t.property,rules:"u_"+e+"_rules",undefinedValue:"u_"+e+"_undefined_value",insufficientValue:"u_"+e+"_insufficient_value",values:"u_"+e+"_values",count:"u_"+e+"_count",columnsCount:o.property.split(",").length,components:t.components,multiplier:t.multiplier,name:e};this.paintPropertyUniforms.push(c),r.vertex.define.push("uniform highp float "+c.rules+"[12];"),r.vertex.define.push("uniform lowp int "+c.count+";"),r.vertex.define.push("uniform {precision} {type} "+c.undefinedValue+";"),r.vertex.define.push("uniform {precision} {type} "+c.insufficientValue+";"),r.vertex.initialize.push("if ("+l+"){ "+e+" = "+c.undefinedValue+"; }"),r.vertex.initialize.push("if ("+u+"){ "+e+" = "+c.insufficientValue+"; }");for(var p=0;p<c.columnsCount;p+=2)r.vertex.define.push("uniform {precision} {type} "+c.values+Math.floor(p/2)+"[12];");for(var d=0;d<c.columnsCount;d++)r.vertex.initialize.push("if ("+e+"_column_index == "+d+") {"),r.vertex.initialize.push("  for (int i = 0; i < 12; i++) {"),r.vertex.initialize.push("    if (i == "+c.count+") break;"),"dragonfly-interval"===o.type?r.vertex.initialize.push("    if ("+a+" < "+c.rules+"[i]) {"):"dragonfly-categorical"===o.type&&r.vertex.initialize.push("    if ("+a+" == "+c.rules+"[i]) {"),4===c.components?(r.vertex.initialize.push("      "+e+" = "+c.values+Math.floor(d/2)+"[i];"),d%2===0?(r.vertex.initialize.push("      "+e+" = vec4("),r.vertex.initialize.push("        unpack_float("+e+"[0])[0] / "+c.multiplier+".0,"),r.vertex.initialize.push("        unpack_float("+e+"[1])[0] / "+c.multiplier+".0,"),r.vertex.initialize.push("        unpack_float("+e+"[2])[0] / "+c.multiplier+".0,"),r.vertex.initialize.push("        unpack_float("+e+"[3])[0] / "+c.multiplier+".0);")):(r.vertex.initialize.push("      "+e+" = vec4("),r.vertex.initialize.push("        unpack_float("+e+"[0])[1] / "+c.multiplier+".0,"),r.vertex.initialize.push("        unpack_float("+e+"[1])[1] / "+c.multiplier+".0,"),r.vertex.initialize.push("        unpack_float("+e+"[2])[1] / "+c.multiplier+".0,"),r.vertex.initialize.push("        unpack_float("+e+"[3])[1] / "+c.multiplier+".0);"))):r.vertex.initialize.push("      "+e+" = "+c.values+d+"[i];"),r.vertex.initialize.push("      break;"),r.vertex.initialize.push("    }"),r.vertex.initialize.push("  }"),r.vertex.initialize.push("}");this.cacheKey+="/a_"+e+"_"+c.columnsCount},t.exports=l},{"../style-spec/util/parse_color":105,"../util/util":204,"./vertex_array_type":36}],35:[function(e,t,n){"use strict";var r=e("../util/struct_array"),o=r({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});t.exports=o},{"../util/struct_array":202}],36:[function(e,t,n){"use strict";function r(e){return o({members:e,alignment:4})}var o=e("../util/struct_array");t.exports=r},{"../util/struct_array":202}],37:[function(e,t,n){"use strict";var r=t.exports=e("./index");r.Map=e("./ui/dragonfly_map"),r.util=e("./util/util")},{"./index":42,"./ui/dragonfly_map":168,"./util/util":204}],38:[function(e,t,n){"use strict";var r=function(e,t,n){this.column=e,this.row=t,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},r.prototype.sub=function(e){return this.clone()._sub(e)},r.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},r.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=r},{}],39:[function(e,t,n){"use strict";var r=e("../util/util").wrap,o=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};o.prototype.wrap=function(){return new o(r(this.lng,-180,180),this.lat)},o.prototype.toArray=function(){return[this.lng,this.lat]},o.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},o.convert=function(e){if(e instanceof o)return e;if(Array.isArray(e)&&2===e.length)return new o(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new o(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=o},{"../util/util":204}],40:[function(e,t,n){"use strict";var r=e("./lng_lat"),o=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};o.prototype.setNorthEast=function(e){return this._ne=r.convert(e),this},o.prototype.setSouthWest=function(e){return this._sw=r.convert(e),this},o.prototype.extend=function(e){var t,n,i=this._sw,a=this._ne;if(e instanceof r)t=e,n=e;else{if(!(e instanceof o))return Array.isArray(e)?e.every(Array.isArray)?this.extend(o.convert(e)):this.extend(r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return i||a?(i.lng=Math.min(t.lng,i.lng),i.lat=Math.min(t.lat,i.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(n.lng,n.lat)),this},o.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},o.prototype.getSouthWest=function(){return this._sw},o.prototype.getNorthEast=function(){return this._ne},o.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},o.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},o.prototype.getWest=function(){return this._sw.lng},o.prototype.getSouth=function(){return this._sw.lat},o.prototype.getEast=function(){return this._ne.lng},o.prototype.getNorth=function(){return this._ne.lat},o.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},o.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},o.convert=function(e){return!e||e instanceof o?e:new o(e)},t.exports=o},{"./lng_lat":39}],41:[function(e,t,n){"use strict";var r=e("./lng_lat"),o=e("point-geometry"),i=e("./coordinate"),a=e("../util/util"),s=e("../style-spec/util/interpolate"),l=e("../source/tile_coord"),u=e("../data/extent"),c=e("@mapbox/gl-matrix"),p=c.vec4,d=c.mat4,f=c.mat2,h=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},m={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};m.minZoom.get=function(){return this._minZoom},m.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},m.maxZoom.get=function(){return this._maxZoom},m.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},m.renderWorldCopies.get=function(){return this._renderWorldCopies},m.worldSize.get=function(){return this.tileSize*this.scale},m.centerPoint.get=function(){return this.size._div(2)},m.size.get=function(){return new o(this.width,this.height)},m.bearing.get=function(){return-this.angle/Math.PI*180},m.bearing.set=function(e){var t=-a.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=f.create(),f.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},m.pitch.get=function(){return this._pitch/Math.PI*180},m.pitch.set=function(e){var t=a.clamp(e,0,45)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},m.fov.get=function(){return this._fov/Math.PI*180},m.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},m.zoom.get=function(){return this._zoom},m.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},m.center.get=function(){return this._center},m.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},h.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},h.prototype.getVisibleWrappedCoordinates=function(e){for(var t=this.pointCoordinate(new o(0,0),0),n=this.pointCoordinate(new o(this.width,0),0),r=Math.floor(t.column),i=Math.floor(n.column),a=[e],s=r;s<=i;s++)0!==s&&a.push(new l(e.z,e.x,e.y,s));return a},h.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),n=t;if(t<e.minzoom)return[];t>e.maxzoom&&(t=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,t),i=new o(r.column-.5,r.row-.5),a=[this.pointCoordinate(new o(0,0),t),this.pointCoordinate(new o(this.width,0),t),this.pointCoordinate(new o(this.width,this.height),t),this.pointCoordinate(new o(0,this.height),t)];return l.cover(t,a,e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return i.dist(e)-i.dist(t)})},h.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},m.unmodified.get=function(){return this._unmodified},h.prototype.zoomScale=function(e){return Math.pow(2,e)},h.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},h.prototype.project=function(e){return new o(this.lngX(e.lng),this.latY(e.lat))},h.prototype.unproject=function(e){return new r(this.xLng(e.x),this.yLat(e.y))},m.x.get=function(){return this.lngX(this.center.lng)},m.y.get=function(){return this.latY(this.center.lat)},m.point.get=function(){return new o(this.x,this.y)},h.prototype.lngX=function(e){return(180+e)*this.worldSize/360},h.prototype.latY=function(e){var t=180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360));return(180-t)*this.worldSize/360},h.prototype.xLng=function(e){return 360*e/this.worldSize-180},h.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},h.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},h.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},h.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},h.prototype.locationCoordinate=function(e){return new i(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},h.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new r(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},h.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var n=0,r=[e.x,e.y,0,1],o=[e.x,e.y,1,1];p.transformMat4(r,r,this.pixelMatrixInverse),p.transformMat4(o,o,this.pixelMatrixInverse);var a=r[3],l=o[3],u=r[0]/a,c=o[0]/l,d=r[1]/a,f=o[1]/l,h=r[2]/a,m=o[2]/l,y=h===m?0:(n-h)/(m-h);return new i(s(u,c,y)/this.tileSize,s(d,f,y)/this.tileSize,this.zoom)._zoomTo(t)},h.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return p.transformMat4(n,n,this.pixelMatrix),new o(n[0]/n[3],n[1]/n[3])},h.prototype.calculatePosMatrix=function(e,t){var n=e.toCoordinate(t),r=this.worldSize/this.zoomScale(n.zoom),o=d.identity(new Float64Array(16));return d.translate(o,o,[n.column*r,n.row*r,0]),d.scale(o,o,[r/u,r/u,1]),d.multiply(o,this.projMatrix,o),new Float32Array(o)},h.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,i=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;i=this.latY(p[1]),a=this.latY(p[0]),e=a-i<u.y?u.y/(a-i):0}if(this.lngRange){var d=this.lngRange;s=this.lngX(d[0]),l=this.lngX(d[1]),t=l-s<u.x?u.x/(l-s):0}var f=Math.max(t||0,e||0);if(f)return this.center=this.unproject(new o(t?(l+s)/2:this.x,e?(a+i)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var h=this.y,m=u.y/2;h-m<i&&(r=i+m),h+m>a&&(r=a-m)}if(this.lngRange){var y=this.x,v=u.x/2;y-v<s&&(n=s+v),y+v>l&&(n=l-v)}void 0===n&&void 0===r||(this.center=this.unproject(new o(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},h.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,o=1.01*r,i=new Float64Array(16);d.perspective(i,this._fov,this.width/this.height,1,o),d.scale(i,i,[1,-1,1]),d.translate(i,i,[0,0,-this.cameraToCenterDistance]),d.rotateX(i,i,this._pitch),d.rotateZ(i,i,this.angle),d.translate(i,i,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(d.scale(i,i,[1,1,a,1]),this.projMatrix=i,i=d.create(),d.scale(i,i,[this.width/2,-this.height/2,1]),d.translate(i,i,[1,-1,0]),this.pixelMatrix=d.multiply(new Float64Array(16),i,this.projMatrix),i=d.invert(new Float64Array(16),this.pixelMatrix),!i)throw new Error("failed to invert matrix");this.pixelMatrixInverse=i}},Object.defineProperties(h.prototype,m),t.exports=h},{"../data/extent":30,"../source/tile_coord":77,"../style-spec/util/interpolate":104,"../util/util":204,"./coordinate":38,"./lng_lat":39,"@mapbox/gl-matrix":1,"point-geometry":230}],42:[function(e,t,n){"use strict";var r=e("./util/browser"),o=t.exports={};o.version=e("../package.json").version,o.workerCount=Math.max(Math.floor(r.hardwareConcurrency/2),1),o.Map=e("./ui/map"),o.NavigationControl=e("./ui/control/navigation_control"),o.GeolocateControl=e("./ui/control/geolocate_control"),o.AttributionControl=e("./ui/control/attribution_control"),o.ScaleControl=e("./ui/control/scale_control"),o.FullscreenControl=e("./ui/control/fullscreen_control"),o.Popup=e("./ui/popup"),o.Marker=e("./ui/marker"),o.Style=e("./style/style"),o.LngLat=e("./geo/lng_lat"),o.LngLatBounds=e("./geo/lng_lat_bounds"),o.Point=e("point-geometry"),o.Evented=e("./util/evented"),o.supported=e("./util/browser").supported;var i=e("./util/config");o.config=i;var a=e("./source/rtl_text_plugin");o.setRTLTextPlugin=a.setRTLTextPlugin,Object.defineProperty(o,"accessToken",{get:function(){return i.ACCESS_TOKEN},set:function(e){i.ACCESS_TOKEN=e}})},{"../package.json":17,"./geo/lng_lat":39,"./geo/lng_lat_bounds":40,"./source/rtl_text_plugin":72,"./style/style":132,"./ui/control/attribution_control":161,"./ui/control/fullscreen_control":162,"./ui/control/geolocate_control":163,"./ui/control/navigation_control":165,"./ui/control/scale_control":166,"./ui/map":177,"./ui/marker":178,"./ui/popup":179,"./util/browser":182,"./util/config":186,"./util/evented":191,"point-geometry":230}],43:[function(e,t,n){"use strict";function r(e,t,n){var r=e.gl,i=e.transform,a=i.tileSize,s=n.paint["background-color"],l=n.paint["background-pattern"],u=n.paint["background-opacity"],c=!l&&1===s[3]&&1===u;if(e.isOpaquePass===c){r.disable(r.STENCIL_TEST),e.setDepthSublayer(0);var p;l?(p=e.useProgram("fillPattern",e.basicFillProgramConfiguration),o.prepare(l,e,p),e.tileExtentPatternVAO.bind(r,p,e.tileExtentBuffer)):(p=e.useProgram("fill",e.basicFillProgramConfiguration),r.uniform4fv(p.u_color,s),e.tileExtentVAO.bind(r,p,e.tileExtentBuffer)),r.uniform1f(p.u_opacity,u);for(var d=i.coveringTiles({tileSize:a}),f=0,h=d;f<h.length;f+=1){var m=h[f];l&&o.setTile({coord:m,tileSize:a},e,p),r.uniformMatrix4fv(p.u_matrix,!1,e.transform.calculatePosMatrix(m)),r.drawArrays(r.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}var o=e("./pattern");t.exports=r},{"./pattern":57}],44:[function(e,t,n){"use strict";function r(e,t,n,r){i(e,t,n,r),n.isMask||o(e,t,n,r)}function o(e,t,n,r){if(0!==e._featuresStyles.features.length){var o=e._featuresStyles.features,a=e._featuresStyles.styles;if(o&&0!==o.length&&a&&0!==a.length){n.transitionDisabled=!0;for(var s=0;s<o.length;s++){var l=o[s],u=a[s];if(n.id===l.layer.id)for(var c=0;c<r.length;c++){var p=r[c],d=t.getTile(p),f=d.metadata.buckets[n.id];if(f){var h=f.features[l.id];if(h){var m={};for(var y in u)m[y]=n.paint[y],n.paint[y]=u[y];i(e,t,n,[p],h);for(var v in m)n.paint[v]=m[v]}}}}n.transitionDisabled=!1}}}function i(e,t,n,r,o){if(!e.isOpaquePass){var i=e.gl;e.setDepthSublayer(0),e.depthMask(!1);var a=i.getParameter(i.DEPTH_TEST);a&&i.disable(i.DEPTH_TEST),i.disable(i.STENCIL_TEST);for(var s=0;s<r.length;s++){var l=r[s],u=t.getTile(l),c=u.getBucket(n);if(c){var p=c.buffers,d=p.layerData[n.id],f=d.programConfiguration,h=e.useProgram("bubble",f);f.setUniforms(i,h,n,{zoom:e.transform.zoom}),i.uniform2fv(h.u_extrude_scale,e.transform.pixelsToGLUnits),i.uniformMatrix4fv(h.u_matrix,!1,e.translatePosMatrix(l.posMatrix,u,n.paint["bubble-translate"],n.paint["bubble-translate-anchor"]));for(var m=void 0,y=void 0,v=0,g=p.segments;v<g.length;v+=1){var _=g[v];o?(m=o.bubbleElement.offset,y=o.bubbleElement.count,m>=_.primitiveOffset&&m+y<=_.primitiveOffset+_.primitiveLength&&(_.vaos[n.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer,d.paintVertexBuffer,_.vertexOffset),i.drawElements(i.TRIANGLES,3*y,i.UNSIGNED_SHORT,3*m*2))):(_.vaos[n.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer,d.paintVertexBuffer,_.vertexOffset),i.drawElements(i.TRIANGLES,3*_.primitiveLength,i.UNSIGNED_SHORT,3*_.primitiveOffset*2))}}}a&&i.enable(i.DEPTH_TEST)}}e("../util/browser"),t.exports=r},{"../util/browser":182}],45:[function(e,t,n){"use strict";function r(e,t,n,r){i(e,t,n,r),o(e,t,n,r)}function o(e,t,n,r){if(0!==e._featuresStyles.features.length){var o=e._featuresStyles.features,a=e._featuresStyles.styles;if(o&&0!==o.length&&a&&0!==a.length){n.transitionDisabled=!0;for(var s=0;s<o.length;s++){var l=o[s],u=a[s];if(n.id===l.layer.id)for(var c=0;c<r.length;c++){var p=r[c],d=t.getTile(p),f=d.metadata.buckets[n.id];if(f){var h=f.features[l.id];if(h){var m={};for(var y in u)m[y]=n.paint[y],n.paint[y]=u[y];i(e,t,n,[p],h);for(var v in m)n.paint[v]=m[v]}}}}n.transitionDisabled=!1}}}function i(e,t,n,r,o){if(!e.isOpaquePass){var i=e.gl;e.setDepthSublayer(0),e.depthMask(!1),i.disable(i.STENCIL_TEST);for(var s=0;s<r.length;s++){var l=r[s],u=t.getTile(l),c=u.getBucket(n);if(c){var p=c.buffers,d=p.layerData[n.id],f=d.programConfiguration,h=e.useProgram("circle",f);f.setUniforms(i,h,n,{zoom:e.transform.zoom}),"map"===n.paint["circle-pitch-scale"]?(i.uniform1i(h.u_scale_with_map,!0),i.uniform2f(h.u_extrude_scale,e.transform.pixelsToGLUnits[0]*e.transform.cameraToCenterDistance,e.transform.pixelsToGLUnits[1]*e.transform.cameraToCenterDistance)):(i.uniform1i(h.u_scale_with_map,!1),i.uniform2fv(h.u_extrude_scale,e.transform.pixelsToGLUnits)),i.uniform1f(h.u_devicepixelratio,a.devicePixelRatio),i.uniformMatrix4fv(h.u_matrix,!1,e.translatePosMatrix(l.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"]));for(var m=void 0,y=void 0,v=0,g=p.segments;v<g.length;v+=1){var _=g[v];o?(m=o.circleElement.offset,y=o.circleElement.count,m>=_.primitiveOffset&&m+y<=_.primitiveOffset+_.primitiveLength&&(_.vaos[n.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer,d.paintVertexBuffer,_.vertexOffset),i.drawElements(i.TRIANGLES,3*y,i.UNSIGNED_SHORT,3*m*2))):(_.vaos[n.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer,d.paintVertexBuffer,_.vertexOffset),i.drawElements(i.TRIANGLES,3*_.primitiveLength,i.UNSIGNED_SHORT,3*_.primitiveOffset*2))}}}}}var a=e("../util/browser");t.exports=r},{"../util/browser":182}],46:[function(e,t,n){"use strict";function r(e,t,n,r){var o=e.gl;o.enable(o.STENCIL_TEST);for(var i=e.useProgram("collisionBox"),a=0;a<r.length;a++){var s=r[a],l=t.getTile(s),u=l.getBucket(n);if(u){var c=u.buffers.collisionBox;if(c){o.uniformMatrix4fv(i.u_matrix,!1,s.posMatrix),e.enableTileClippingMask(s),e.lineWidth(1),o.uniform1f(i.u_scale,Math.pow(2,e.transform.zoom-l.coord.z)),o.uniform1f(i.u_zoom,10*e.transform.zoom),o.uniform1f(i.u_maxzoom,10*(l.coord.z+1));for(var p=0,d=c.segments;p<d.length;p+=1){var f=d[p];f.vaos[n.id].bind(o,i,c.layoutVertexBuffer,c.elementBuffer,null,f.vertexOffset),o.drawElements(o.LINES,2*f.primitiveLength,o.UNSIGNED_SHORT,2*f.primitiveOffset*2)}}}}}t.exports=r},{}],47:[function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<n.length;r++)o(e,t,n[r])}function o(e,t,n){var r=e.gl;r.disable(r.STENCIL_TEST),e.lineWidth(1*a.devicePixelRatio);var o=n.posMatrix,d=e.useProgram("debug");r.uniformMatrix4fv(d.u_matrix,!1,o),r.uniform4f(d.u_color,1,0,0,1),e.debugVAO.bind(r,d,e.debugBuffer),r.drawArrays(r.LINE_STRIP,0,e.debugBuffer.length);for(var f=i(n.toString(),50,200,5),h=new p,m=0;m<f.length;m+=2)h.emplaceBack(f[m],f[m+1]);var y=u.fromStructArray(h,u.BufferType.VERTEX),v=new c;v.bind(r,d,y),r.uniform4f(d.u_color,1,1,1,1);for(var g=t.getTile(n).tileSize,_=l/(Math.pow(2,e.transform.zoom-n.z)*g),b=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<b.length;x++){var w=b[x];r.uniformMatrix4fv(d.u_matrix,!1,s.translate([],o,[_*w[0],_*w[1],0])),r.drawArrays(r.LINES,0,y.length)}r.uniform4f(d.u_color,0,0,0,1),r.uniformMatrix4fv(d.u_matrix,!1,o),r.drawArrays(r.LINES,0,y.length)}function i(e,t,n,r){r=r||1;var o,i,a,s,l,u,c,p,f=[];for(o=0,i=e.length;o<i;o++)if(l=d[e[o]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)l[1][a]===-1&&l[1][a+1]===-1?p=null:(u=t+l[1][a]*r,c=n-l[1][a+1]*r,p&&f.push(p.x,p.y,u,c),p={x:u,y:c});t+=l[0]*r}return f}var a=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,l=e("../data/extent"),u=e("../data/buffer"),c=e("./vertex_array_object"),p=e("../data/pos_array");t.exports=r;var d={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],
",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/buffer":27,"../data/extent":30,"../data/pos_array":33,"../util/browser":182,"./vertex_array_object":59,"@mapbox/gl-matrix":1}],48:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass){var i=e.gl;e.setDepthSublayer(0),e.depthMask(!0);var a=i.getParameter(i.DEPTH_TEST);0===n.paint["dotdensity-opacity"]?i.disable(i.DEPTH_TEST):i.enable(i.DEPTH_TEST),i.disable(i.STENCIL_TEST);for(var s=0;s<r.length;s++){var l=r[s],u=t.getTile(l),c=u.getBucket(n);if(c){var p=c.buffers,d=p.layerData[n.id],f=d.programConfiguration,h=e.useProgram("dotdensity",f);f.setUniforms(i,h,n,{zoom:e.transform.zoom}),i.uniform2fv(h.u_extrude_scale,e.transform.pixelsToGLUnits),i.uniform1f(h.u_devicepixelratio,o.devicePixelRatio),i.uniformMatrix4fv(h.u_matrix,!1,e.translatePosMatrix(l.posMatrix,u,0,0));for(var m=0,y=p.segments;m<y.length;m+=1){var v=y[m];v.vaos[n.id].bind(i,h,p.layoutVertexBuffer,p.elementBuffer,d.paintVertexBuffer,v.vertexOffset),i.drawElements(i.TRIANGLES,3*v.primitiveLength,i.UNSIGNED_SHORT,3*v.primitiveOffset*2)}}}i.clear(i.DEPTH_BUFFER_BIT),a?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST)}}var o=e("../util/browser");t.exports=r},{"../util/browser":182}],49:[function(e,t,n){"use strict";function r(e,t,n,r,o){if("fill"!==o&&"stroke"!==o)throw"Invalid method in drawFeature";if(0!==e._featuresStyles.features.length){var l=e._featuresStyles.features,u=e._featuresStyles.styles;if(l&&0!==l.length&&u&&0!==u.length){n.transitionDisabled=!0;for(var p=0;p<l.length;p++){var d=l[p],f=u[p];if(n.id===d.layer.id){var h=t.getTile(r),m=h.metadata.buckets[n.id];if(m){var y=m.features[d.id];if(y){var v={};for(var g in f)v[g]=n.paint[g],g.endsWith("color")?n.paint[g]=n.paint[g]?c(n.paint[g],f[g]):f[g]:n.paint[g]=f[g];"fill"===o&&i(e,t,n,[r],a,y),"stroke"===o&&n.paint["fill-outline-color"]&&i(e,t,n,[r],s,y,n.paint["fill-outline-color"]);for(var _ in v)n.paint[_]=v[_]}}}}n.transitionDisabled=!1}}}function o(e,t,n,o){var l=e.gl;l.enable(l.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"];if(e.isOpaquePass===u&&(e.setDepthSublayer(1),n.paint["fill-color"][3]=1===n.paint["fill-color"][3]?1.01:n.paint["fill-color"][3],i(e,t,n,o,a),e._featuresStyles.features.length>0&&!n.isMask))for(var c=0;c<o.length;c++)r(e,t,n,o[c],"fill");if(!e.isOpaquePass&&n.paint["fill-antialias"]&&(e.lineWidth(2),e.depthMask(!1),e.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),i(e,t,n,o,s),e._featuresStyles.features.length>0&&!n.isMask))for(var p=0;p<o.length;p++)r(e,t,n,o[p],"stroke")}function i(e,t,n,r,o,i){for(var a=!0,s=0,l=r;s<l.length;s+=1){var u=l[s],c=t.getTile(u),p=c.getBucket(n);p&&(e.enableTileClippingMask(u),o(e,t,n,c,u,p.buffers,a,i),a=!1)}}function a(e,t,n,r,o,i,a,s){for(var u,c,p=e.gl,d=i.layerData[n.id],f=l("fill",n.paint["fill-pattern"],e,d,n,r,o,a),h=0,m=i.segments;h<m.length;h+=1){var y=m[h];s?(u=s.fillElement.offset,c=s.fillElement.count,u>=y.primitiveOffset&&u+c<=y.primitiveOffset+y.primitiveLength&&(y.vaos[n.id].bind(p,f,i.layoutVertexBuffer,i.elementBuffer,d.paintVertexBuffer,y.vertexOffset),p.drawElements(p.TRIANGLES,3*c,p.UNSIGNED_SHORT,3*u*2))):(y.vaos[n.id].bind(p,f,i.layoutVertexBuffer,i.elementBuffer,d.paintVertexBuffer,y.vertexOffset),p.drawElements(p.TRIANGLES,3*y.primitiveLength,p.UNSIGNED_SHORT,3*y.primitiveOffset*2))}}function s(e,t,n,r,o,i,a,s,u){var c=e.gl,p=i.layerData[n.id],d=n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),f=l("fillOutline",d,e,p,n,r,o,a);c.uniform2f(f.u_world,c.drawingBufferWidth,c.drawingBufferHeight);for(var h,m,y=0,v=i.segments2;y<v.length;y+=1){var g=v[y];s?(h=s.fillSecondElement.offset,m=s.fillSecondElement.count,h>=g.primitiveOffset&&h+m<=g.primitiveOffset+g.primitiveLength&&(g.vaos[n.id].bind(c,f,i.layoutVertexBuffer,i.elementBuffer2,p.paintVertexBuffer,g.vertexOffset),c.drawElements(c.LINES,2*m,c.UNSIGNED_SHORT,2*h*2))):(g.vaos[n.id].bind(c,f,i.layoutVertexBuffer,i.elementBuffer2,p.paintVertexBuffer,g.vertexOffset),c.drawElements(c.LINES,2*g.primitiveLength,c.UNSIGNED_SHORT,2*g.primitiveOffset*2))}}function l(e,t,n,r,o,i,a,s){var l,c=n.currentProgram;return t?(l=n.useProgram(e+"Pattern",r.programConfiguration),(s||l!==c||o.isMask)&&(r.programConfiguration.setUniforms(n.gl,l,o,{zoom:n.transform.zoom}),u.prepare(o.paint["fill-pattern"],n,l)),u.setTile(i,n,l)):(l=n.useProgram(e,r.programConfiguration),(s||l!==c||o.isMask)&&r.programConfiguration.setUniforms(n.gl,l,o,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(l.u_matrix,!1,n.translatePosMatrix(a.posMatrix,i,o.paint["fill-translate"],o.paint["fill-translate-anchor"])),l}var u=e("./pattern"),c=e("../util/dragonfly_util").blendColors;t.exports=o},{"../util/dragonfly_util":190,"./pattern":57}],50:[function(e,t,n){"use strict";function r(e,t,n,r){if(0!==n.paint["fill-extrusion-opacity"]){var a=e.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),e.depthMask(!0);var s=new o(a,e,n);s.bindFramebuffer(),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);for(var l=0;l<r.length;l++)i(e,t,n,r[l]);s.unbindFramebuffer(),s.renderToMap()}}function o(e,t,n){this.gl=e,this.width=t.width,this.height=t.height,this.painter=t,this.layer=n,this.texture=null,this.fbo=null,this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function i(e,t,n,r){if(!e.isOpaquePass){var o=t.getTile(r),i=o.getBucket(n);if(i){var s=i.buffers,l=e.gl,u=n.paint["fill-extrusion-pattern"],c=s.layerData[n.id],d=c.programConfiguration,f=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",d);d.setUniforms(l,f,n,{zoom:e.transform.zoom}),u&&(p.prepare(u,e,f),p.setTile(o,e,f),l.uniform1f(f.u_height_factor,-Math.pow(2,r.z)/o.tileSize/8)),e.gl.uniformMatrix4fv(f.u_matrix,!1,e.translatePosMatrix(r.posMatrix,o,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),a(f,e);for(var h=0,m=s.segments;h<m.length;h+=1){var y=m[h];y.vaos[n.id].bind(l,f,s.layoutVertexBuffer,s.elementBuffer,c.paintVertexBuffer,y.vertexOffset),l.drawElements(l.TRIANGLES,3*y.primitiveLength,l.UNSIGNED_SHORT,3*y.primitiveOffset*2)}}}}function a(e,t){var n=t.gl,r=t.style.light,o=r.calculated.position,i=[o.x,o.y,o.z],a=d.create();"viewport"===r.calculated.anchor&&d.fromRotation(a,-t.transform.angle),h.transformMat3(i,i,a),n.uniform3fv(e.u_lightpos,i),n.uniform1f(e.u_lightintensity,r.calculated.intensity),n.uniform3fv(e.u_lightcolor,r.calculated.color.slice(0,3))}var s=e("@mapbox/gl-matrix"),l=e("../data/buffer"),u=e("./vertex_array_object"),c=e("../data/pos_array"),p=e("./pattern"),d=s.mat3,f=s.mat4,h=s.vec3;t.exports=r,o.prototype.bindFramebuffer=function(){var e=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,this.height),e.activeTexture(e.TEXTURE1),this.texture?e.bindTexture(e.TEXTURE_2D,this.texture):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),e.bindFramebuffer(e.FRAMEBUFFER,this.fbo),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);else{this.fbo=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.fbo);var t=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,t),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.width,this.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0)}},o.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer(),this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]),this.painter.saveViewportTexture(this.texture)},o.prototype.renderToMap=function(){var e=this.gl,t=this.painter,n=t.useProgram("extrusionTexture");e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture),e.uniform1f(n.u_opacity,this.layer.paint["fill-extrusion-opacity"]),e.uniform1i(n.u_image,1),e.uniformMatrix4fv(n.u_matrix,!1,f.ortho(f.create(),0,t.width,t.height,0,0,1)),e.disable(e.DEPTH_TEST),e.uniform2f(n.u_world,e.drawingBufferWidth,e.drawingBufferHeight);var r=new c;r.emplaceBack(0,0),r.emplaceBack(1,0),r.emplaceBack(0,1),r.emplaceBack(1,1);var o=l.fromStructArray(r,l.BufferType.VERTEX),i=new u;i.bind(e,n,o),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.enable(e.DEPTH_TEST)}},{"../data/buffer":27,"../data/pos_array":33,"./pattern":57,"./vertex_array_object":59,"@mapbox/gl-matrix":1}],51:[function(e,t,n){"use strict";function r(e,t,n,r){i(e,t,n,r),o(e,t,n,r)}function o(e,t,n,r){if(0!==e._featuresStyles.features.length){var o=e._featuresStyles.features,a=e._featuresStyles.styles;if(o&&0!==o.length&&a&&0!==a.length){var s=e.gl,l=s.getParameter(s.DEPTH_TEST);l&&s.disable(s.DEPTH_TEST),n.transitionDisabled=!0;for(var c=0;c<o.length;c++){var p=o[c],d=a[c];if(n.id===p.layer.id)for(var f=0;f<r.length;f++){var h=r[f],m=t.getTile(h),y=m.metadata.buckets[n.id];if(y){var v=y.features[p.id];if(v){var g={};for(var _ in d)g[_]=n.paint[_],_.endsWith("color")?n.paint[_]=n.paint[_]?u(n.paint[_],d[_]):d[_]:n.paint[_]=d[_];i(e,t,n,[h],v);for(var b in g)n.paint[b]=g[b]}}}}l&&s.enable(s.DEPTH_TEST),n.transitionDisabled=!1}}}function i(e,t,n,r,o){if(!e.isOpaquePass){e.setDepthSublayer(0),e.depthMask(!1);var i=e.gl;if(i.enable(i.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var s,l=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,c=0,p=r;c<p.length;c+=1){var d=p[c],f=t.getTile(d),h=f.getBucket(n);if(h){var m=h.buffers.layerData[n.id],y=e.currentProgram,v=e.useProgram(l,m.programConfiguration),g=u||v!==y,_=s!==f.coord.z;g&&m.programConfiguration.setUniforms(e.gl,v,n,{zoom:e.transform.zoom}),a(v,e,f,h.buffers,n,d,m,g,_,o),s=f.coord.z,u=!1}}}}function a(e,t,n,r,o,i,a,u,c,p){var d,f,h,m,y=t.gl,v=o.paint["line-dasharray"],g=o.paint["line-pattern"];if(u||c){var _=1/l(n,1,t.transform.tileZoom);if(v){d=t.lineAtlas.getDash(v.from,"round"===o.layout["line-cap"]),f=t.lineAtlas.getDash(v.to,"round"===o.layout["line-cap"]);var b=d.width*v.fromScale,x=f.width*v.toScale;y.uniform2f(e.u_patternscale_a,_/b,-d.height/2),y.uniform2f(e.u_patternscale_b,_/x,-f.height/2),y.uniform1f(e.u_sdfgamma,t.lineAtlas.width/(256*Math.min(b,x)*s.devicePixelRatio)/2)}else if(g){if(h=t.spriteAtlas.getPosition(g.from,!0),m=t.spriteAtlas.getPosition(g.to,!0),!h||!m)return;y.uniform2f(e.u_pattern_size_a,h.size[0]*g.fromScale/_,m.size[1]),y.uniform2f(e.u_pattern_size_b,m.size[0]*g.toScale/_,m.size[1])}y.uniform2f(e.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}u&&(v?(y.uniform1i(e.u_image,0),y.activeTexture(y.TEXTURE0),t.lineAtlas.bind(y),y.uniform1f(e.u_tex_y_a,d.y),y.uniform1f(e.u_tex_y_b,f.y),y.uniform1f(e.u_mix,v.t)):g&&(y.uniform1i(e.u_image,0),y.activeTexture(y.TEXTURE0),t.spriteAtlas.bind(y,!0),y.uniform2fv(e.u_pattern_tl_a,h.tl),y.uniform2fv(e.u_pattern_br_a,h.br),y.uniform2fv(e.u_pattern_tl_b,m.tl),y.uniform2fv(e.u_pattern_br_b,m.br),y.uniform1f(e.u_fade,g.t)),y.uniform1f(e.u_width,o.paint["line-width"])),t.enableTileClippingMask(i);var w=t.translatePosMatrix(i.posMatrix,n,o.paint["line-translate"],o.paint["line-translate-anchor"]);y.uniformMatrix4fv(e.u_matrix,!1,w),y.uniform1f(e.u_ratio,1/l(n,1,t.transform.zoom));for(var E,k,C=0,S=r.segments;C<S.length;C+=1){var P=S[C];p?(E=p.lineElement.offset,k=p.lineElement.count,E>=P.primitiveOffset&&E+k<=P.primitiveOffset+P.primitiveLength&&(P.vaos[o.id].bind(y,e,r.layoutVertexBuffer,r.elementBuffer,a.paintVertexBuffer,P.vertexOffset),y.drawElements(y.TRIANGLES,3*k,y.UNSIGNED_SHORT,3*E*2))):(P.vaos[o.id].bind(y,e,r.layoutVertexBuffer,r.elementBuffer,a.paintVertexBuffer,P.vertexOffset),y.drawElements(y.TRIANGLES,3*P.primitiveLength,y.UNSIGNED_SHORT,3*P.primitiveOffset*2))}}var s=e("../util/browser"),l=e("../source/pixels_to_tile_units"),u=e("../util/dragonfly_util").blendColors;t.exports=r},{"../source/pixels_to_tile_units":69,"../util/browser":182,"../util/dragonfly_util":190}],52:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass){var i=e.gl;i.enable(i.DEPTH_TEST),e.depthMask(!0),i.depthFunc(i.LESS);for(var a=r.length&&r[0].z,s=0;s<r.length;s++){var l=r[s];e.setDepthSublayer(l.z-a),o(e,t,n,l)}i.depthFunc(i.LEQUAL)}}function o(e,t,n,r){var o=e.gl;o.disable(o.STENCIL_TEST);var u=t.getTile(r),c=e.transform.calculatePosMatrix(r,t.getSource().maxzoom);u.registerFadeDuration(e.style.animationLoop,n.paint["raster-fade-duration"]);var p=e.useProgram("raster");o.uniformMatrix4fv(p.u_matrix,!1,c),o.uniform1f(p.u_brightness_low,n.paint["raster-brightness-min"]),o.uniform1f(p.u_brightness_high,n.paint["raster-brightness-max"]),o.uniform1f(p.u_saturation_factor,s(n.paint["raster-saturation"])),o.uniform1f(p.u_contrast_factor,a(n.paint["raster-contrast"])),o.uniform3fv(p.u_spin_weights,i(n.paint["raster-hue-rotate"]));var d,f,h=u.sourceCache&&u.sourceCache.findLoadedParent(r,0,{}),m=l(u,h,n,e.transform);o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,u.texture),o.activeTexture(o.TEXTURE1),h?(o.bindTexture(o.TEXTURE_2D,h.texture),d=Math.pow(2,h.coord.z-u.coord.z),f=[u.coord.x*d%1,u.coord.y*d%1]):o.bindTexture(o.TEXTURE_2D,u.texture),o.uniform2fv(p.u_tl_parent,f||[0,0]),o.uniform1f(p.u_scale_parent,d||1),o.uniform1f(p.u_buffer_scale,1),o.uniform1f(p.u_fade_t,m.mix),o.uniform1f(p.u_opacity,m.opacity*n.paint["raster-opacity"]),o.uniform1i(p.u_image0,0),o.uniform1i(p.u_image1,1);var y=u.boundsBuffer||e.rasterBoundsBuffer,v=u.boundsVAO||e.rasterBoundsVAO;v.bind(o,p,y),o.drawArrays(o.TRIANGLE_STRIP,0,y.length)}function i(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function a(e){return e>0?1/(1-e):1+e}function s(e){return e>0?1-1/(1.001-e):-e}function l(e,t,n,r){var o=n.paint["raster-fade-duration"];if(e.sourceCache&&o>0){var i=Date.now(),a=(i-e.timeAdded)/o,s=t?(i-t.timeAdded)/o:-1,l=e.sourceCache.getSource(),c=r.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),p=!t||Math.abs(t.coord.z-c)>Math.abs(e.coord.z-c),d=p&&e.refreshedUponExpiration?1:u.clamp(p?a:1-s,0,1);return e.refreshedUponExpiration&&a>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var u=e("../util/util");t.exports=r},{"../util/util":204}],53:[function(e,t,n){"use strict";function r(e,t,n,r){if(!e.isOpaquePass){var i=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),a=e.gl;i?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST),e.setDepthSublayer(0),e.depthMask(!1),o(e,t,n,r,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-rotation-alignment"]),o(e,t,n,r,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"]),t.map.showCollisionBoxes&&c(e,t,n,r)}}function o(e,t,n,r,o,s,l,u,c){if(o||!e.style.sprite||e.style.sprite.loaded()){var p=e.gl,d="map"===u,f="map"===c,h=f;h?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST);for(var m,y,v=0,g=r;v<g.length;v+=1){var _=g[v],b=t.getTile(_),x=b.getBucket(n);if(x){var w=o?x.buffers.glyph:x.buffers.icon;if(w&&w.segments.length){var E=w.layerData[n.id],k=E.programConfiguration,C=o||x.sdfIcons,S=o?x.textSizeData:x.iconSizeData;m&&x.fontstack===y||(m=e.useProgram(C?"symbolSDF":"symbolIcon",k),k.setUniforms(p,m,n,{zoom:e.transform.zoom}),i(m,e,n,_.z,o,C,d,f,x.fontstack,x.iconsNeedLinear,S)),e.enableTileClippingMask(_),p.uniformMatrix4fv(m.u_matrix,!1,e.translatePosMatrix(_.posMatrix,b,s,l)),a(m,k,e,n,b,w,o,C,f),y=x.fontstack}}}h||p.enable(p.DEPTH_TEST)}}function i(e,t,n,r,o,i,a,s,c,p,f){var h=t.gl,m=t.transform;if(h.uniform1i(e.u_rotate_with_map,a),h.uniform1i(e.u_pitch_with_map,s),h.activeTexture(h.TEXTURE0),h.uniform1i(e.u_texture,0),h.uniform1f(e.u_is_text,o?1:0),o){var y=c&&t.glyphSource.getGlyphAtlas(c);if(!y)return;y.updateTexture(h),h.uniform2f(e.u_texsize,y.width/4,y.height/4)}else{var v=t.options.rotating||t.options.zooming,g=!n.isLayoutValueFeatureConstant("icon-size")||!n.isLayoutValueZoomConstant("icon-size")||1!==n.getLayoutValue("icon-size",{zoom:m.zoom}),_=g||u.devicePixelRatio!==t.spriteAtlas.pixelRatio||p,b=s||m.pitch;t.spriteAtlas.bind(h,i||v||_||b),h.uniform2f(e.u_texsize,t.spriteAtlas.width/4,t.spriteAtlas.height/4)}if(h.activeTexture(h.TEXTURE1),t.frameHistory.bind(h),h.uniform1i(e.u_fadetexture,1),h.uniform1f(e.u_zoom,m.zoom),h.uniform1f(e.u_pitch,m.pitch/360*2*Math.PI),h.uniform1f(e.u_bearing,m.bearing/360*2*Math.PI),h.uniform1f(e.u_aspect_ratio,m.width/m.height),h.uniform1i(e.u_is_size_zoom_constant,f.isZoomConstant?1:0),h.uniform1i(e.u_is_size_feature_constant,f.isFeatureConstant?1:0),f.isZoomConstant||f.isFeatureConstant)if(f.isFeatureConstant&&!f.isZoomConstant){var x;if("interval"===f.functionType)x=n.getLayoutValue(o?"text-size":"icon-size",{zoom:m.zoom});else{var w="interval"===f.functionType?0:d(m.zoom,f.functionBase,f.coveringZoomRange[0],f.coveringZoomRange[1]),E=f.coveringStopValues[0],k=f.coveringStopValues[1];x=E+(k-E)*l.clamp(w,0,1)}h.uniform1f(e.u_size,x),h.uniform1f(e.u_layout_size,f.layoutSize)}else f.isFeatureConstant&&f.isZoomConstant&&h.uniform1f(e.u_size,f.layoutSize);else{var C=d(m.zoom,f.functionBase,f.coveringZoomRange[0],f.coveringZoomRange[1]);h.uniform1f(e.u_size_t,l.clamp(C,0,1))}}function a(e,t,n,r,o,i,a,l,u){var c=n.gl,d=n.transform;if(u){var f=p(o,1,d.zoom);c.uniform2f(e.u_extrude_scale,f,f)}else{var h=d.cameraToCenterDistance;c.uniform2f(e.u_extrude_scale,d.pixelsToGLUnits[0]*h,d.pixelsToGLUnits[1]*h)}if(l){var m=(a?"text":"icon")+"-halo-width",y=!r.isPaintValueFeatureConstant(m)||r.paint[m],v=(u?Math.cos(d._pitch):1)*d.cameraToCenterDistance;c.uniform1f(e.u_gamma_scale,v),y&&(c.uniform1f(e.u_is_halo,1),s(i,r,c,e)),c.uniform1f(e.u_is_halo,0)}s(i,r,c,e)}function s(e,t,n,r){for(var o=e.layerData[t.id],i=o&&o.paintVertexBuffer,a=0,s=e.segments;a<s.length;a+=1){var l=s[a];l.vaos[t.id].bind(n,r,e.layoutVertexBuffer,e.elementBuffer,i,l.vertexOffset),n.drawElements(n.TRIANGLES,3*l.primitiveLength,n.UNSIGNED_SHORT,3*l.primitiveOffset*2)}}var l=e("../util/util"),u=e("../util/browser"),c=e("./draw_collision_debug"),p=e("../source/pixels_to_tile_units"),d=e("../style-spec/function").interpolationFactor;t.exports=r},{"../source/pixels_to_tile_units":69,"../style-spec/function":88,"../util/browser":182,"../util/util":204,"./draw_collision_debug":46}],54:[function(e,t,n){"use strict";var r=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};r.prototype.record=function(e,t,n){var r=this;this.firstFrame&&(e=0,this.firstFrame=!1),t=Math.floor(10*t);var o;if(t<this.previousZoom)for(o=t+1;o<=this.previousZoom;o++)r.changeTimes[o]=e,r.changeOpacities[o]=r.opacities[o];else for(o=t;o>this.previousZoom;o--)r.changeTimes[o]=e,r.changeOpacities[o]=r.opacities[o];for(o=0;o<256;o++){var i=e-r.changeTimes[o],a=255*(n?i/n:1);o<=t?r.opacities[o]=r.changeOpacities[o]+a:r.opacities[o]=r.changeOpacities[o]-a}this.changed=!0,this.previousZoom=t},r.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.changed&&(e.texSubImage2D(e.TEXTURE_2D,0,0,0,256,1,e.ALPHA,e.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,256,1,0,e.ALPHA,e.UNSIGNED_BYTE,this.array))},t.exports=r},{}],55:[function(e,t,n){"use strict";var r=e("../util/util"),o=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};o.prototype.setSprite=function(e){this.sprite=e},o.prototype.getDash=function(e,t){var n=e.join(",")+t;return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},o.prototype.addDash=function(e,t){var n=this,o=t?7:0,i=2*o+1,a=128;if(this.nextRow+i>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var s=0,l=0;l<e.length;l++)s+=e[l];for(var u=this.width/s,c=u/2,p=e.length%2===1,d=-o;d<=o;d++)for(var f=n.nextRow+o+d,h=n.width*f,m=p?-e[e.length-1]:0,y=e[0],v=1,g=0;g<this.width;g++){for(;y<g/u;)m=y,y+=e[v],p&&v===e.length-1&&(y+=e[0]),v++;var _=Math.abs(g-m*u),b=Math.abs(g-y*u),x=Math.min(_,b),w=v%2===1,E=void 0;if(t){var k=o?d/o*(c+1):0;if(w){var C=c-Math.abs(k);E=Math.sqrt(x*x+C*C)}else E=c-Math.sqrt(x*x+k*k)}else E=(w?1:-1)*x;n.data[3+4*(h+g)]=Math.max(0,Math.min(255,E+a))}var S={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:s};return this.nextRow+=i,this.dirty=!0,S},o.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},t.exports=o},{"../util/util":204}],56:[function(e,t,n){"use strict";var r=e("../util/browser"),o=e("@mapbox/gl-matrix").mat4,i=e("./frame_history"),a=e("../source/source_cache"),s=e("../data/extent"),l=e("../source/pixels_to_tile_units"),u=e("../util/util"),c=e("../data/buffer"),p=e("./vertex_array_object"),d=e("../data/raster_bounds_array"),f=e("../data/pos_array"),h=e("../data/program_configuration"),m=e("./shaders"),y={symbol:e("./draw_symbol"),dotdensity:e("./draw_dotdensity"),bubble:e("./draw_bubble"),circle:e("./draw_circle"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},v=function(e,t){this.gl=e,this.transform=t,this.reusableTextures={tiles:{},viewport:null},this.preFbos={},this.frameHistory=new i,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=h.createStatic(["color","opacity"]),this.emptyProgramConfiguration=new h};v.prototype.resize=function(e,t){var n=this.gl;this.width=e*r.devicePixelRatio,this.height=t*r.devicePixelRatio,n.viewport(0,0,this.width,this.height)},v.prototype.setup=function(){var e=this.gl;e.verbose=!0,e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.STENCIL_TEST),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),this._depthMask=!1,e.depthMask(!1);var t=new f;t.emplaceBack(0,0),t.emplaceBack(s,0),t.emplaceBack(0,s),t.emplaceBack(s,s),this.tileExtentBuffer=c.fromStructArray(t,c.BufferType.VERTEX),this.tileExtentVAO=new p,this.tileExtentPatternVAO=new p;var n=new f;n.emplaceBack(0,0),n.emplaceBack(s,0),n.emplaceBack(s,s),n.emplaceBack(0,s),n.emplaceBack(0,0),this.debugBuffer=c.fromStructArray(n,c.BufferType.VERTEX),this.debugVAO=new p;var r=new d;r.emplaceBack(0,0,0,0),r.emplaceBack(s,0,32767,0),r.emplaceBack(0,s,0,32767),r.emplaceBack(s,s,32767,32767),this.rasterBoundsBuffer=c.fromStructArray(r,c.BufferType.VERTEX),this.rasterBoundsVAO=new p,this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))},v.prototype.clearColor=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},v.prototype.clearStencil=function(){var e=this.gl;e.clearStencil(0),e.stencilMask(255),e.clear(e.STENCIL_BUFFER_BIT)},v.prototype.clearDepth=function(){var e=this.gl;e.clearDepth(1),this.depthMask(!0),e.clear(e.DEPTH_BUFFER_BIT)},v.prototype._renderTileClippingMasks=function(e){var t=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(255),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var r=1;this._tileClippingMaskIDs={};for(var o=0,i=e;o<i.length;o+=1){var a=i[o],s=t._tileClippingMaskIDs[a.id]=r++;n.stencilFunc(n.ALWAYS,s,255);var l=t.useProgram("fill",t.basicFillProgramConfiguration);n.uniformMatrix4fv(l.u_matrix,!1,a.posMatrix),t.tileExtentVAO.bind(n,l,t.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},v.prototype.enableTileClippingMask=function(e){var t=this.gl;t.stencilFunc(t.EQUAL,this._tileClippingMaskIDs[e.id],255)},v.prototype.prepareBuffers=function(){},v.prototype.bindDefaultFramebuffer=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},v.prototype.render=function(e,t){if(this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.spriteAtlas=e.spriteAtlas,this.spriteAtlas.setSprite(e.sprite),
this.glyphSource=e.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,e.getTransition().duration),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(t.showOverdrawInspector),this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var n=this.options.showTileBoundariesSource?this.style.sourceCaches[this.options.showTileBoundariesSource]:this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];n&&y.debug(this,n,n.getVisibleCoordinates())}},v.prototype.renderPass=function(){var e,t,n=this,r=this.style._order;this.currentLayer=this.isOpaquePass?r.length-1:0,this.isOpaquePass?this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND);for(var o=0;o<r.length;o++){var i=n.style._layers[r[n.currentLayer]];i.source!==(e&&e.id)&&(e=n.style.sourceCaches[i.source],t=[],e&&(e.prepare&&e.prepare(),n.clearStencil(),t=e.getVisibleCoordinates(),e.getSource().isTileClipped&&n._renderTileClippingMasks(t)),n.isOpaquePass||t.reverse()),n.renderLayer(n,e,i,t);var a=n.currentLayer,s=n.getMaskLayers();if(s[i.id])for(var l=0;l<s[i.id].length;l++){var u=s[i.id][l],c=n.style._layers[u.id];n.currentLayer=r.indexOf(c.id),c.source!==(e&&e.id)&&(e=n.style.sourceCaches[c.source],t=[],e&&(e.prepare&&e.prepare(),n.clearStencil(),t=e.getVisibleCoordinates(),e.getSource().isTileClipped&&n._renderTileClippingMasks(t)),n.isOpaquePass||t.reverse()),!c.isHidden(n.transform.zoom)&&t.length&&y[c.type](n,e,u,t)}n.currentLayer=a+(n.isOpaquePass?-1:1)}},v.prototype.depthMask=function(e){e!==this._depthMask&&(this._depthMask=e,this.gl.depthMask(e))},v.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,y[n.type](e,t,n,r))},v.prototype.setDepthSublayer=function(e){var t=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,n=t-1+this.depthRange;this.gl.depthRange(n,t)},v.prototype.translatePosMatrix=function(e,t,n,r){if(!n[0]&&!n[1])return e;if("viewport"===r){var i=Math.sin(-this.transform.angle),a=Math.cos(-this.transform.angle);n=[n[0]*a-n[1]*i,n[0]*i+n[1]*a]}var s=[l(t,n[0],this.transform.zoom),l(t,n[1],this.transform.zoom),0],u=new Float32Array(16);return o.translate(u,e,s),u},v.prototype.saveTileTexture=function(e){var t=this.reusableTextures.tiles[e.size];t?t.push(e):this.reusableTextures.tiles[e.size]=[e]},v.prototype.saveViewportTexture=function(e){this.reusableTextures.viewport=e},v.prototype.getTileTexture=function(e){var t=this.reusableTextures.tiles[e];return t&&t.length>0?t.pop():null},v.prototype.getViewportTexture=function(e,t){var n=this.reusableTextures.viewport;if(n)return n.width===e&&n.height===t?n:(this.gl.deleteTexture(n),void(this.reusableTextures.viewport=null))},v.prototype.lineWidth=function(e){this.gl.lineWidth(u.clamp(e,this.lineWidthRange[0],this.lineWidthRange[1]))},v.prototype.showOverdrawInspector=function(e){if(e||this._showOverdrawInspector){this._showOverdrawInspector=e;var t=this.gl;if(e){t.blendFunc(t.CONSTANT_COLOR,t.ONE);var n=8,r=1/n;t.blendColor(r,r,r,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)}else t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}},v.prototype.createProgram=function(e,t){var n=this.gl,o=n.createProgram(),i=m[e],a="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1)+"\n";this._showOverdrawInspector&&(a+="#define OVERDRAW_INSPECTOR;\n");var s=t.applyPragmas(a+m.prelude.fragmentSource+i.fragmentSource,"fragment"),l=t.applyPragmas(a+m.prelude.vertexSource+i.vertexSource,"vertex"),u=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(u,s),n.compileShader(u),n.attachShader(o,u);var c=n.createShader(n.VERTEX_SHADER);n.shaderSource(c,l),n.compileShader(c),n.attachShader(o,c),n.linkProgram(o);for(var p=n.getProgramParameter(o,n.ACTIVE_ATTRIBUTES),d={program:o,numAttributes:p},f=0;f<p;f++){var h=n.getActiveAttrib(o,f);d[h.name]=n.getAttribLocation(o,h.name)}for(var y=n.getProgramParameter(o,n.ACTIVE_UNIFORMS),v=0;v<y;v++){var g=n.getActiveUniform(o,v);d[g.name]=n.getUniformLocation(o,g.name)}return d},v.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=this.createProgram(e,t)),this.cache[n]},v.prototype.useProgram=function(e,t){var n=this.gl,r=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.currentProgram!==r&&(n.useProgram(r.program),this.currentProgram=r),r},t.exports=v},{"../data/buffer":27,"../data/extent":30,"../data/pos_array":33,"../data/program_configuration":34,"../data/raster_bounds_array":35,"../source/pixels_to_tile_units":69,"../source/source_cache":74,"../util/browser":182,"../util/util":204,"./draw_background":43,"./draw_bubble":44,"./draw_circle":45,"./draw_debug":47,"./draw_dotdensity":48,"./draw_fill":49,"./draw_fill_extrusion":50,"./draw_line":51,"./draw_raster":52,"./draw_symbol":53,"./frame_history":54,"./shaders":58,"./vertex_array_object":59,"@mapbox/gl-matrix":1}],57:[function(e,t,n){"use strict";var r=e("../source/pixels_to_tile_units");n.prepare=function(e,t,n){var r=t.gl,o=t.spriteAtlas.getPosition(e.from,!0),i=t.spriteAtlas.getPosition(e.to,!0);o&&i&&(r.uniform1i(n.u_image,0),r.uniform2fv(n.u_pattern_tl_a,o.tl),r.uniform2fv(n.u_pattern_br_a,o.br),r.uniform2fv(n.u_pattern_tl_b,i.tl),r.uniform2fv(n.u_pattern_br_b,i.br),r.uniform1f(n.u_mix,e.t),r.uniform2fv(n.u_pattern_size_a,o.size),r.uniform2fv(n.u_pattern_size_b,i.size),r.uniform1f(n.u_scale_a,e.fromScale),r.uniform1f(n.u_scale_b,e.toScale),r.activeTexture(r.TEXTURE0),t.spriteAtlas.bind(r,!0))},n.setTile=function(e,t,n){var o=t.gl;o.uniform1f(n.u_tile_units_to_pixels,1/r(e,1,t.transform.tileZoom));var i=Math.pow(2,e.coord.z),a=e.tileSize*Math.pow(2,t.transform.tileZoom)/i,s=a*(e.coord.x+e.coord.w*i),l=a*e.coord.y;o.uniform2f(n.u_pixel_coord_upper,s>>16,l>>16),o.uniform2f(n.u_pixel_coord_lower,65535&s,65535&l)}},{"../source/pixels_to_tile_units":69}],58:[function(e,t,n){"use strict";e("path"),t.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\n\n// To minimize the number of attributes needed in the mapbox-gl-native shaders,\n// we encode a 4-component color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},bubble:{fragmentSource:"//!\n\nprecision mediump float;\n\nvarying vec2 v_extrude;\nvarying float v_radius;\nvarying float v_outline_width;\nvarying vec4 v_outline_color;\nvarying float v_outline_padding_width;\n\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float radius_multiplier\n#pragma mapbox: define mediump float max_radius\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float radius_multiplier\n    #pragma mapbox: initialize mediump float max_radius\n    vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);\n\n    float distance = length(v_extrude);\n    float pixel_ratio = 1.0 / v_radius;\n    float outline_ration = (v_outline_width - v_outline_padding_width) / v_radius;\n    float outline_padding_ration = v_outline_width / v_radius;\n\n    // outside bubble\n    if (distance > 1.0) {\n        gl_FragColor = color0;\n    }\n    // on outer rim of outline\n    else if (distance >= 1.0 - pixel_ratio) {\n        float blend = (distance - (1.0 - pixel_ratio)) / pixel_ratio;\n        gl_FragColor = mix(v_outline_color * opacity, color0, blend);\n    }\n    // inside outline area\n    else if (distance >= 1.0 - outline_ration) {\n        gl_FragColor = v_outline_color * opacity;\n    }\n    // on inner rim of outline\n    else if (distance >= 1.0 - outline_ration - pixel_ratio) {\n        float blend = (distance - (1.0 - outline_ration - pixel_ratio)) / pixel_ratio;\n        if (v_outline_padding_width > 0.0) {\n            gl_FragColor = mix(color0 * opacity, v_outline_color * opacity, blend);\n        } else {\n            gl_FragColor = mix(color * opacity, v_outline_color * opacity, blend);\n        }\n    }\n    // inside outline padding area\n    else if (distance >= 1.0 - outline_padding_ration) {\n        gl_FragColor = color0;\n    }\n    // on outer rim of outline padding area\n    else if (distance >= 1.0 - outline_padding_ration - pixel_ratio) {\n        float blend = (distance - (1.0 - outline_padding_ration - pixel_ratio)) / pixel_ratio;\n        gl_FragColor = mix(color * opacity, color0 * opacity, blend);\n    }\n    // inside bubble area\n    else {\n        gl_FragColor = color * opacity;\n    }\n}\n",vertexSource:"//!\n\nprecision mediump float;\n\nattribute vec2 a_pos;\nattribute float a_radius;\nattribute float a_outline_width;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform bool u_scale_with_map;\n\nvarying vec2 v_extrude;\nvarying float v_radius;\nvarying float v_outline_width;\nvarying vec4 v_outline_color;\nvarying float v_outline_padding_width;\n\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp vec4 max_radius_outline_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float radius_multiplier\n#pragma mapbox: define mediump float max_radius\n#pragma mapbox: define mediump float max_radius_outline_width\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp vec4 max_radius_outline_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float radius_multiplier\n    #pragma mapbox: initialize mediump float max_radius\n    #pragma mapbox: initialize mediump float max_radius_outline_width\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n    float radius = a_radius * radius_multiplier;\n    if (max_radius > 0.0 && radius > max_radius) {\n        v_outline_color = max_radius_outline_color;\n        v_outline_width = max_radius_outline_width + 4.0;\n        radius = max_radius;\n        v_outline_padding_width = 4.0;\n    } else {\n        v_outline_color = outline_color;\n        v_outline_width = a_outline_width;\n        v_outline_padding_width = 0.0;\n    }\n    v_radius = radius + v_outline_width;\n\n    vec2 extrude = v_extrude * v_radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n    gl_Position.xy += extrude * gl_Position.w;\n}\n"},dotdensity:{fragmentSource:"//!\n\nprecision mediump float;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    float t = smoothstep(1.0 - max(blur, v_antialiasblur), 1.0, length(v_extrude));\n    gl_FragColor = color * (1.0 - t) * opacity;\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n",vertexSource:"//!\n\nprecision highp float;\nuniform float u_devicepixelratio;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\n\nvoid main(void) {\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    // gl_Position is divided by gl_Position.w after this shader runs.\n    // Multiply the extrude by it so that it isn't affected by it.\n    gl_Position.xy += extrude * gl_Position.w;\n\n    // randomize z-index so we can render multi-variable dot-density\n    gl_Position.z = fract(sin(dot(a_pos ,vec2(12.9898,78.233))) * 43758.5453);\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / u_devicepixelratio / radius;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:'\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\n\n// icon-size data (see symbol_sdf.vertex.glsl for more)\nattribute vec3 a_size;\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform mediump float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform mediump float u_size; // used when size is both zoom and feature constant\nuniform mediump float u_layout_size; // used when size is feature constant\n\n#pragma mapbox: define lowp float opacity\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform bool u_is_text;\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    mediump vec2 label_data = unpack_float(a_data[2]);\n    mediump float a_labelminzoom = label_data[0];\n    mediump vec2 a_zoom = unpack_float(a_data[3]);\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    float size;\n    // In order to accommodate placing labels around corners in\n    // symbol-placement: line, each glyph in a label could have multiple\n    // "quad"s only one of which should be shown at a given zoom level.\n    // The min/max zoom assigned to each quad is based on the font size at\n    // the vector tile\'s zoom level, which might be different than at the\n    // currently rendered zoom level if text-size is zoom-dependent.\n    // Thus, we compensate for this difference by calculating an adjustment\n    // based on the scale of rendered text size relative to layout text size.\n    mediump float layoutSize;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n        layoutSize = a_size[2] / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n        layoutSize = size;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n        layoutSize = u_layout_size;\n    } else {\n        size = u_size;\n        layoutSize = u_size;\n    }\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    mediump float zoomAdjust = log2(size / layoutSize);\n    mediump float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\n    mediump float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\n\n    vec2 extrude = fontScale * u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n'},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\nvarying float v_size;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    highp float gamma_scaled = gamma * v_gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist) * fade_alpha;\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature),\n//   layoutSize == text-size(layoutZoomLevel, feature) ]\nattribute vec3 a_size;\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform mediump float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform mediump float u_size; // used when size is both zoom and feature constant\nuniform mediump float u_layout_size; // used when size is feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform bool u_is_text;\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\nvarying float v_size;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n\n    mediump vec2 label_data = unpack_float(a_data[2]);\n    mediump float a_labelminzoom = label_data[0];\n    mediump float a_labelangle = label_data[1];\n\n    mediump vec2 a_zoom = unpack_float(a_data[3]);\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // In order to accommodate placing labels around corners in\n    // symbol-placement: line, each glyph in a label could have multiple\n    // \"quad\"s only one of which should be shown at a given zoom level.\n    // The min/max zoom assigned to each quad is based on the font size at\n    // the vector tile's zoom level, which might be different than at the\n    // currently rendered zoom level if text-size is zoom-dependent.\n    // Thus, we compensate for this difference by calculating an adjustment\n    // based on the scale of rendered text size relative to layout text size.\n    mediump float layoutSize;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        v_size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n        layoutSize = a_size[2] / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        v_size = a_size[0] / 10.0;\n        layoutSize = v_size;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        v_size = u_size;\n        layoutSize = u_layout_size;\n    } else {\n        v_size = u_size;\n        layoutSize = u_size;\n    }\n\n    float fontScale = u_is_text ? v_size / 24.0 : v_size;\n\n    mediump float zoomAdjust = log2(v_size / layoutSize);\n    mediump float adjustedZoom = (u_zoom - zoomAdjust) * 10.0;\n    // result: z = 0 if a_minzoom <= adjustedZoom < a_maxzoom, and 1 otherwise\n    // Used below to move the vertex out of the clip space for when the current\n    // zoom is out of the glyph's zoom range.\n    mediump float z = 2.0 - step(a_minzoom, adjustedZoom) - (1.0 - step(a_maxzoom, adjustedZoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_labelangle / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = fontScale * u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_labelangle / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = fontScale * u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = fontScale * u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},{path:227}],59:[function(e,t,n){"use strict";var r=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.boundVertexOffset=null,this.vao=null};r.prototype.bind=function(e,t,n,r,o,i){void 0===e.extVertexArrayObject&&(e.extVertexArrayObject=e.getExtension("OES_vertex_array_object"));var a=!this.vao||this.boundProgram!==t||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==o||this.boundElementBuffer!==r||this.boundVertexOffset!==i;!e.extVertexArrayObject||a?(this.freshBind(e,t,n,r,o,i),this.gl=e):e.extVertexArrayObject.bindVertexArrayOES(this.vao)},r.prototype.freshBind=function(e,t,n,r,o,i){var a,s=t.numAttributes;if(e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=e.extVertexArrayObject.createVertexArrayOES(),e.extVertexArrayObject.bindVertexArrayOES(this.vao),a=0,this.boundProgram=t,this.boundVertexBuffer=n,this.boundVertexBuffer2=o,this.boundElementBuffer=r,this.boundVertexOffset=i;else{a=e.currentNumAttributes||0;for(var l=s;l<a;l++)e.disableVertexAttribArray(l)}n.enableAttributes(e,t),o&&o.enableAttributes(e,t),n.bind(e),n.setVertexAttribPointers(e,t,i),o&&(o.bind(e),o.setVertexAttribPointers(e,t,i)),r&&r.bind(e),e.currentNumAttributes=s},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=r},{}],60:[function(e,t,n){"use strict";var r=e("../util/util");n.packUint8ToFloat=function(e,t){return e=r.clamp(Math.floor(e),0,255),t=r.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":204}],61:[function(e,t,n){"use strict";var r=e("./image_source"),o=e("../util/window"),i=function(e){function t(t,n,r,o){e.call(this,t,n,r,o),this.options=n,this.animate=!n.hasOwnProperty("animate")||n.animate}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||o.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var e;this.play=function(){e=this.map.style.animationLoop.set(1/0),this.map._rerender()},this.pause=function(){this.map.style.animationLoop.cancel(e)},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.canvas&&this.animate&&this.play())},t.prototype.prepare=function(){var e=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,e)},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,n=[e.canvas.width,e.canvas.height];t<n.length;t+=1){var r=n[t];if(isNaN(r)||r<=0)return!0}return!1},t}(r);t.exports=i},{"../util/window":184,"./image_source":67}],62:[function(e,t,n){"use strict";var r=e("../data/element_array_type"),o=e("../data/buffer"),i={},a={},s=function(){},l={allDots:{},tiles:{}};l.allDots.get=function(){return i},l.tiles.get=function(){return a},s.addDotDensityData=function(e,t,n){e&&(void 0===a[n]&&(a[n]={}),void 0===i[n]&&(i[n]={}),void 0===a[n][t.coord.z]&&(a[n][t.coord.z]={}),e.buckets.forEach(function(e){if(void 0!==e.data){void 0===s.allDots[n][e.zoom]&&(s.allDots[n][e.zoom]={layers:{}}),void 0===a[n][t.coord.z][t.coord.id]&&(a[n][t.coord.z][t.coord.id]={});var i=function(i){void 0===a[n][t.coord.z][t.coord.id][i]&&(a[n][t.coord.z][t.coord.id][i]={});var l=s.allDots[n][e.zoom].layers[i],u=e.data.layers[i].metadata.formula,c=e.data.layers[i].metadata.sourceLayer,p=e.data.layers[i].metadata.source;void 0!==l&&s.allDots[n][e.zoom].layers[i].formula===u&&l.sourceLayer===c||(s.allDots[n][e.zoom].layers[i]={source:p,sourceLayer:c,formula:u,features:{}}),e.data.layers[i].fids.forEach(function(t){var r=s.allDots[n][e.zoom].layers[i].features[t.id];s.allDots[n][e.zoom].layers[i].features[t.id]=void 0!==r?r:t.countTotal});var d=t.buckets[i].buffers.elementBuffer.arrayBuffer,f=r(),h=new f,m=new Uint16Array(d);e.data.layers[i].fids.forEach(function(r){var o=r.id,l=s.allDots[n][e.zoom].layers[i].features[o];if(r.countPartial>l){for(var u=r.offset+6*l,c=r.offset+r.size,p=u;p<c;p++)m[p]=0;s.allDots[n][e.zoom].layers[i].features[o]=0,a[n][t.coord.z][t.coord.id][i][o]=l}else a[n][t.coord.z][t.coord.id][i][o]=r.countPartial,
s.allDots[n][e.zoom].layers[i].features[o]-=r.countPartial}),h.arrayBuffer=m.buffer,h.length=m.buffer.byteLength,h.capacity=m.buffer.byteLength,h._trim(),t.buckets[i].buffers.elementBuffer=new o(h,f.serialize(),o.BufferType.ELEMENT)};for(var l in e.data.layers)i(l)}}))},s.removeDotDensityData=function(e,t){if(void 0!==a[t]&&void 0!==a[t][e.coord.z]&&void 0!==a[t][e.coord.z][e.coord.id]){var n=e.coord.z;if(void 0!==s.allDots[t][n]&&0!==Object.keys(s.allDots[t][n].layers).length){for(var r in a[t][e.coord.z][e.coord.id])if(s.allDots[t][n].layers.hasOwnProperty(r))for(var o in a[t][e.coord.z][e.coord.id][r])void 0!==a[t][e.coord.z][e.coord.id][r][o]&&(s.allDots[t][n].layers[r].features[o]+=a[t][e.coord.z][e.coord.id][r][o]);delete a[t][e.coord.z][e.coord.id]}}},Object.defineProperties(s,l),t.exports=s},{"../data/buffer":27,"../data/element_array_type":29}],63:[function(e,t,n){"use strict";function r(e,t){var n=[];for(var r in e.layers){var i=t.filter(function(e){return e.layerId===r});n.push(o(e.layers[r],i))}var a=new p;return c.tile.write({layers:n},a),a.finish()}function o(e,t){for(var n={name:e.name||"",version:e.version||1,extent:e.extent||4096,keys:[],values:[],features:[]},r={},o={},i=0;i<e.length;i++){var a=e.feature(i);a.geometry=s(a.loadGeometry()),a.id=a.id||a._id;for(var u=0;u<t.length;u++){var c=t[u],p=d(c.formula,a.properties);void 0!==p&&(a.properties[c.name]=p)}var f=[];for(var h in a.properties)if(a.properties.hasOwnProperty(h)){var m=r[h];"undefined"==typeof m&&(n.keys.push(h),m=n.keys.length-1,r[h]=m);var y=l(a.properties[h]),v=o[y.key];"undefined"==typeof v&&(n.values.push(y),v=n.values.length-1,o[y.key]=v),f.push(m),f.push(v)}a.tags=f,n.features.push(a)}return n}function i(e,t){return(t<<3)+(7&e)}function a(e){return e<<1^e>>31}function s(e){for(var t=[],n=0,r=0,o=e.length,s=0;s<o;s++){var l=e[s];t.push(i(1,1));for(var u=0;u<l.length;u++){1===u&&t.push(i(2,l.length-1));var c=l[u].x-n,p=l[u].y-r;t.push(a(c),a(p)),n+=c,r+=p}}return t}function l(e){var t,n=typeof e;return t="string"===n?{string_value:e}:"boolean"===n?{bool_value:e}:"number"===n?e!==(0|e)?{float_value:e}:e<0?{sint_value:e}:{uint_value:e}:{string_value:""+e},t.key=n+":"+e,t}var u=e("vector-tile"),c=e("../../node_modules/vt-pbf/vector-tile-pb"),p=e("pbf"),d=e("../util/dragonfly_util").evaluateExpression;n.url=function(e,t){if(!t.url||t.url.indexOf("{layers}")===-1)return t.url;var n=Object.keys(e).filter(function(n){var r=e[n],o=r.source===t.source,i=void 0===r.minzoom||r.minzoom<=t.zoom,a=void 0===r.maxzoom||r.maxzoom>=t.zoom,s=void 0===r.layout||"none"!==r.layout.visibility;return o&&i&&a&&s}),r=[];n.forEach(function(t){r.push(e[t])});for(var o=[],i=[],a={},s=0;s<Object.keys(r).length;s++){var l=r[s],u=l.sourceLayer;if(void 0!==l.autoSource)for(var c=0;c<l.autoSource.length;c++){var p=l.autoSource[c];if(p.minzoom<=t.zoom&&p.maxzoom>t.zoom){l.sourceLayer=u=p["source-layer"];break}}if(l.source===t.source&&(o.indexOf(u)===-1&&o.push(u),t.sources[t.source]&&t.sources[t.source].layers))for(var d=t.sources[t.source].layers,f=0;f<d.length;f++){var h=d[f];if(h){if(u!==h.layerId)continue;if(h.datasets){a[u]=a[u]||[];for(var m=0;m<h.datasets.length;m++)a[u].push(h.datasets[m])}}}}for(var y in a)if(a.hasOwnProperty(y)){var v=a[y];if(v&&v.length>0)for(var g=0;g<v.length;g++){var _=v[g];if(_.columns)for(var b=0;b<_.columns.length;b++){var x=_.columns[b];if(x.indexOf("->")===-1){var w=y+"."+_.datasetId+"."+x;i.indexOf(w)===-1&&i.push(w)}}}}for(var s=0;s<r.length;s++){var l=r[s];if("dotdensity"===l.type){var E=l.sourceLayer+".-1.__area__";i.indexOf(E)===-1&&i.push(E)}}return 0!==o.length?t.url.replace("{layers}",o.join(".")).replace("{columns}",i.join(",")):void 0},n.serialize=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&e[n]._source._options&&(t[n]={layers:e[n]._source._options.layers});return t},n.calculateComputedColumns=function(e,t){if(e&&t&&t.layers&&0!==Object.keys(t.layers).length){var n=[];for(var o in e)if(e.hasOwnProperty(o)){var i=e[o],a=i.layers;if(a)for(var s=0;s<a.length;s++){var l=a[s];if(l){var c=l.datasets;if(c)for(var d=0;d<c.length;d++){var f=c[d],h=f.columns;if(h)for(var m=0;m<h.length;m++){var y=h[m];if(y.indexOf("->")!==-1){var v=y.split("->")[0],g=y.split("->")[1];n.push({name:v,formula:g,layerId:l.layerId})}}}}}}if(0!==n.length){var _=r(t,n);return{pbf:_,vectorTile:new u.VectorTile(new p(new Uint8Array(_)))}}}},n.fromVectorTile=function(e){var t=[];for(var n in e.layers)t.push(o(e.layers[n],[]));var r=new p;return c.tile.write({layers:t},r),r.finish()}},{"../../node_modules/vt-pbf/vector-tile-pb":16,"../util/dragonfly_util":190,pbf:229,"vector-tile":238}],64:[function(e,t,n){"use strict";function r(e){var t=a.document.createElement("a");return t.href=e,t.href}var o=e("../util/evented"),i=e("../util/util"),a=e("../util/window"),s=e("../data/extent"),l=function(e){function t(t,n,r,o){e.call(this),n=n||{},this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(o),this._data=n.data,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(n.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){return t?void e.fire("error",{error:t}):void e.fire("data",{dataType:"source",sourceDataType:"metadata"})})},t.prototype.onAdd=function(e){this.load(),this.map=e},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){return e?t.fire("error",{error:e}):void t.fire("data",{dataType:"source",sourceDataType:"content"})}),this},t.prototype._updateWorkerData=function(e){var t=this,n=i.extend({},this.workerOptions),o=this._data;"string"==typeof o?n.url=r(o):n.data=JSON.stringify(o),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){t._loaded=!0,e(n)})},t.prototype.loadTile=function(e,t){var n=this,r=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,o={type:this.type,uid:e.uid,coord:e.coord,zoom:e.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send("loadTile",o,function(r,o){if(e.unloadVectorData(),!e.aborted)return r?t(r):(e.loadVectorData(o,n.map.painter),e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(n)),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},function(){},e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},t.prototype.serialize=function(){return{type:this.type,data:this._data}},t}(o);t.exports=l},{"../data/extent":30,"../util/evented":191,"../util/util":204,"../util/window":184}],65:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("geojson-rewind"),i=e("./geojson_wrapper"),a=e("vt-pbf"),s=e("supercluster"),l=e("geojson-vt"),u=e("./vector_tile_worker_source"),c=function(e){function t(t,n,r){e.call(this,t,n),r&&(this.loadGeoJSON=r),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadVectorData=function(e,t){var n=e.source,r=e.coord;if(!this._geoJSONIndexes[n])return t(null,null);var o=this._geoJSONIndexes[n].getTile(Math.min(r.z,e.maxZoom),r.x,r.y);if(!o)return t(null,null);var s=new i(o.features);s.name="_geojsonTileLayer";var l=a({layers:{_geojsonTileLayer:s}});0===l.byteOffset&&l.byteLength===l.buffer.byteLength||(l=new Uint8Array(l)),s.rawData=l.buffer,t(null,s)},t.prototype.loadData=function(e,t){var n=function(n,r){var i=this;return n?t(n):"object"!=typeof r?t(new Error("Input data is not a valid GeoJSON object.")):(o(r,!0),void this._indexData(r,e,function(n,r){return n?t(n):(i._geoJSONIndexes[e.source]=r,void t(null))}))}.bind(this);this.loadGeoJSON(e,n)},t.prototype.loadGeoJSON=function(e,t){if(e.url)r.getJSON(e.url,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(n){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source]},t.prototype._indexData=function(e,t,n){try{t.cluster?n(null,s(t.superclusterOptions).load(e.features)):n(null,l(e,t.geojsonVtOptions))}catch(r){return n(r)}},t}(u);t.exports=c},{"../util/ajax":181,"./geojson_wrapper":66,"./vector_tile_worker_source":79,"geojson-rewind":210,"geojson-vt":214,supercluster:233,"vt-pbf":7}],66:[function(e,t,n){"use strict";var r=e("point-geometry"),o=e("vector-tile").VectorTileFeature,i=e("../data/extent"),a=function(e){var t=this;if(this.type=e.type,1===e.type){this.rawGeometry=[];for(var n=0;n<e.geometry.length;n++)t.rawGeometry.push([e.geometry[n]])}else this.rawGeometry=e.geometry;this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10)),this.extent=i};a.prototype.loadGeometry=function(){var e=this,t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var o=t[n],i=[],a=0;a<o.length;a++)i.push(new r(o[a][0],o[a][1]));e.geometry.push(i)}return this.geometry},a.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-(1/0),r=1/0,o=-(1/0),i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),o=Math.max(o,l.y)}return[t,r,n,o]},a.prototype.toGeoJSON=function(){o.prototype.toGeoJSON.call(this)};var s=function(e){this.features=e,this.length=e.length,this.extent=i};s.prototype.feature=function(e){return new a(this.features[e])},t.exports=s},{"../data/extent":30,"point-geometry":230,"vector-tile":238}],67:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/window"),i=e("./tile_coord"),a=e("../geo/lng_lat"),s=e("point-geometry"),l=e("../util/evented"),u=e("../util/ajax"),c=e("../data/extent"),p=e("../data/raster_bounds_array"),d=e("../data/buffer"),f=e("../render/vertex_array_object"),h=function(e){function t(t,n,r,o){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.setEventedParent(o),this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,u.getImage(this.options.url,function(t,n){return t?e.fire("error",{error:t}):(e.image=n,void e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.load(),this.map=e,this.image&&this.setCoordinates(this.coordinates)},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(a.convert(e)).zoomTo(0)}),o=this.centerCoord=r.getCoordinatesCenter(n);return o.column=Math.floor(o.column),o.row=Math.floor(o.row),this.coord=i.fromCoordinate(o.zoom,o.column,o.row),this.minzoom=this.maxzoom=o.zoom,this._tileCoords=n.map(function(e){var t=e.zoomTo(o.zoom);return new s(Math.round((t.column-o.column)*c),Math.round((t.row-o.row)*c))}),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype._setTile=function(e){this.tile=e;var t=32767,n=new p;n.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),n.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,t,0),n.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,t),n.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,t,t),this.tile.buckets={},this.tile.boundsBuffer=d.fromStructArray(n,d.BufferType.VERTEX),this.tile.boundsVAO=new f},t.prototype.prepare=function(){this.tile&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},t.prototype._prepareImage=function(e,t,n){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.tile.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)):n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t):(t instanceof o.HTMLVideoElement||t instanceof o.ImageData||t instanceof o.HTMLCanvasElement)&&(e.bindTexture(e.TEXTURE_2D,this.tile.texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t))},t.prototype.loadTile=function(e,t){this.coord&&this.coord.toString()===e.coord.toString()?(this._setTile(e),t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",urls:this.url,coordinates:this.coordinates}},t}(l);t.exports=h},{"../data/buffer":27,"../data/extent":30,"../data/raster_bounds_array":35,"../geo/lng_lat":39,"../render/vertex_array_object":59,"../util/ajax":181,"../util/evented":191,"../util/util":204,"../util/window":184,"./tile_coord":77,"point-geometry":230}],68:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/ajax"),i=e("../util/browser"),a=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t){var n=function(e,n){if(e)return t(e);var o=r.pick(n,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);n.vector_layers&&(o.vectorLayers=n.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(e){return e.id})),t(null,o)};e.url?o.getJSON(a(e.url),n):i.frame(n.bind(null,null,e))}},{"../util/ajax":181,"../util/browser":182,"../util/mapbox":199,"../util/util":204}],69:[function(e,t,n){"use strict";var r=e("../data/extent");t.exports=function(e,t,n){return t*(r/(e.tileSize*Math.pow(2,n-e.coord.z)))}},{"../data/extent":30}],70:[function(e,t,n){"use strict";function r(e,t){var n=e.coord,r=t.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function o(e){for(var t=e[0]||{},n=1;n<e.length;n++){var r=e[n];for(var o in r){var i=r[o],a=t[o];if(void 0===a)a=t[o]=i;else for(var s=0;s<i.length;s++)a.push(i[s])}}return t}var i=e("./tile_coord");n.rendered=function(e,t,n,i,a,s){var l=e.tilesIn(n);l.sort(r);for(var u=[],c=0;c<l.length;c++){var p=l[c];p.tile.featureIndex&&u.push(p.tile.featureIndex.query({queryGeometry:p.queryGeometry,scale:p.scale,tileSize:p.tile.tileSize,bearing:s,params:i,tile:p.tile},t))}return o(u)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],o={},a=0;a<n.length;a++){var s=n[a],l=new i(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;o[l]||(o[l]=!0,s.querySourceFeatures(r,t))}return r}},{"./tile_coord":77}],71:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/ajax"),i=e("../util/evented"),a=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,l=e("./tile_bounds"),u=function(e){function t(t,n,o,i){e.call(this),this.id=t,this.dispatcher=o,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this.options=n,r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this.options,function(t,n){return t?e.fire("error",t):(r.extend(e,n),e.setBounds(n.bounds),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),void e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.load(),this.map=e},t.prototype.setBounds=function(e){this.bounds=e,e&&(this.tileBounds=new l(e,this.minzoom,this.maxzoom))},t.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.loadTile=function(e,t){function n(n,r){if(delete e.request,e.aborted)return this.state="unloaded",t(null);if(n)return this.state="errored",t(n);this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var o=this.map.painter.gl;e.texture=this.map.painter.getTileTexture(r.width),e.texture?(o.bindTexture(o.TEXTURE_2D,e.texture),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,r)):(e.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,e.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),this.map.painter.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,this.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this.map.painter.extTextureFilterAnisotropicMax),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r),e.texture.size=r.width),o.generateMipmap(o.TEXTURE_2D),e.state="loaded",t(null)}var r=s(e.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);e.request=o.getImage(r,n.bind(this))},t.prototype.abortTile=function(e){e.request&&(e.request.abort(),delete e.request)},t.prototype.unloadTile=function(e){e.texture&&this.map.painter.saveTileTexture(e.texture)},t}(i);t.exports=u},{"../util/ajax":181,"../util/evented":191,"../util/mapbox":199,"../util/util":204,"./load_tilejson":68,"./tile_bounds":76}],72:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("../util/evented"),i=e("../util/window"),a=!1,s=null;t.exports.evented=new o,t.exports.registerForPluginAvailability=function(e){return s?e(s,t.exports.errorCallback):t.exports.evented.once("pluginAvailable",e),e},t.exports.setRTLTextPlugin=function(e,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,t.exports.errorCallback=n,r.getArrayBuffer(e,function(e,r){e?n(e):(s=i.URL.createObjectURL(new i.Blob([r.data]),{type:"text/javascript"}),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})}},{"../util/ajax":181,"../util/evented":191,"../util/window":184}],73:[function(e,t,n){"use strict";var r=e("../util/util"),o={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};n.create=function(e,t,n,i){if(t=new o[t.type](e,t,n,i),t.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+t.id);return r.bindAll(["load","abort","unload","serialize","prepare"],t),t},n.getType=function(e){return o[e]},n.setType=function(e,t){o[e]=t}},{"../source/canvas_source":61,"../source/geojson_source":64,"../source/image_source":67,"../source/raster_tile_source":71,"../source/vector_tile_source":78,"../source/video_source":80,"../util/util":204}],74:[function(e,t,n){"use strict";function r(e,t,n){var r=n.zoomTo(Math.min(e.z,t));return{x:(r.column-(e.x+e.w*Math.pow(2,e.z)))*f,y:(r.row-e.y)*f}}function o(e,t){return e%32-t%32}function i(e){return"raster"===e||"image"===e||"video"===e}var a=e("./source"),s=e("./tile"),l=e("../util/evented"),u=e("./tile_coord"),c=e("../util/lru_cache"),p=e("../geo/coordinate"),d=e("../util/util"),f=e("../data/extent"),h=function(e){function t(t,n,r){e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),this.on("error",function(){this._sourceErrored=!0}),this._source=a.create(t,n,r,this),this._tiles={},this._cache=new c(0,this.unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._isIdRenderable=this._isIdRenderable.bind(this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var n=e._tiles[t];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype.unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e)},t.prototype.abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e)},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},t.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(o)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype._isIdRenderable=function(e){return this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;this._cache.reset();for(var t in e._tiles)e.reloadTile(t,"reloading")},t.prototype.reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this.loadTile(n,this._tileLoaded.bind(this,n,e,t)))},t.prototype._tileLoaded=function(e,t,n,r){return r?(e.state="errored",void(404!==r.status&&this._source.fire("error",{tile:e,error:r}))):(e.sourceCache=this,e.timeAdded=(new Date).getTime(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),this._source.fire("data",{dataType:"source",tile:e,coord:e.coord}),void(this.map&&(this.map.painter.tileExtentVAO.vao=null)))},t.prototype.getTile=function(e){return this.getTileByID(e.id)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype.findLoadedChildren=function(e,t,n){var r=this,o=!1;for(var i in r._tiles){var a=r._tiles[i];if(!(n[i]||!a.hasData()||a.coord.z<=e.z||a.coord.z>t)){var s=Math.pow(2,Math.min(a.coord.z,r._source.maxzoom)-Math.min(e.z,r._source.maxzoom));if(Math.floor(a.coord.x/s)===e.x&&Math.floor(a.coord.y/s)===e.y)for(n[i]=!0,o=!0;a&&a.coord.z-1>e.z;){var l=a.coord.parent(r._source.maxzoom).id;a=r._tiles[l],a&&a.hasData()&&(delete n[i],n[l]=!0)}}}return o},t.prototype.findLoadedParent=function(e,t,n){for(var r=this,o=e.z-1;o>=t;o--){e=e.parent(r._source.maxzoom);var i=r._tiles[e.id];if(i&&i.hasData())return n[e.id]=!0,i;if(r._cache.has(e.id))return n[e.id]=!0,r._cache.getWithoutRemoving(e.id)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/e.tileSize)+1,n=Math.ceil(e.height/e.tileSize)+1,r=t*n,o=5;this._cache.setMaxSize(Math.floor(r*o))},t.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded){var r,o,a,s;this.updateCacheSize(e);var l=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),c=Math.max(l-t.maxOverzooming,this._source.minzoom),p=Math.max(l+t.maxUnderzooming,this._source.minzoom),f={};this._coveredTiles={};var h;for(this.used?this._source.coord?h=e.getVisibleWrappedCoordinates(this._source.coord):(h=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(h=h.filter(function(e){return n._source.hasTile(e)}))):h=[],r=0;r<h.length;r++)o=h[r],a=n.addTile(o),f[o.id]=!0,a.hasData()||n.findLoadedChildren(o,p,f)||(s=n.findLoadedParent(o,c,f),s&&n.addTile(s.coord));var m={};if(i(this._source.type))for(var y=Object.keys(f),v=0;v<y.length;v++){var g=y[v];o=u.fromID(g),a=n._tiles[g],a&&("undefined"==typeof a.fadeEndTime||a.fadeEndTime>=Date.now())&&(n.findLoadedChildren(o,p,f)&&(f[g]=!0),s=n.findLoadedParent(o,c,m),s&&n.addTile(s.coord))}var _;for(_ in m)f[_]||(n._coveredTiles[_]=!0);for(_ in m)f[_]=!0;var b=d.keysDifference(this._tiles,f);for(r=0;r<b.length;r++)n.removeTile(+b[r])}},t.prototype.addTile=function(e){var t=this._tiles[e.id];if(t)return t;var n=e.wrapped();t=this._tiles[n.id],t||(t=this._cache.get(n.id),t&&(t.redoPlacement(this._source),this._cacheTimers[n.id]&&(clearTimeout(this._cacheTimers[n.id]),this._cacheTimers[n.id]=void 0,this._setTileReloadTimer(n.id,t))));var r=Boolean(t);if(!r){var o=e.z,i=o>this._source.maxzoom?Math.pow(2,o-this._source.maxzoom):1;t=new s(n,this._source.tileSize*i,this._source.maxzoom),this.loadTile(t,this._tileLoaded.bind(this,t,e.id,t.state))}return t.uses++,this._tiles[e.id]=t,r||this._source.fire("dataloading",{tile:t,coord:t.coord,dataType:"source"}),t},t.prototype._setTileReloadTimer=function(e,t){var n=this,r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n.reloadTile(e,"expired"),n._timers[e]=void 0},r))},t.prototype._setCacheInvalidationTimer=function(e,t){var n=this,r=t.getExpiryTimeout();r&&(this._cacheTimers[e]=setTimeout(function(){n._cache.remove(e),n._cacheTimers[e]=void 0},r))},t.prototype.removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),this._timers[e]=void 0),!(t.uses>0)))if(t.hasData()){var n=t.coord.wrapped().id;this._cache.add(n,t),this._setCacheInvalidationTimer(n,t)}else t.aborted=!0,this.abortTile(t),this.unloadTile(t)},t.prototype.clearTiles=function(){var e=this;for(var t in e._tiles)e.removeTile(t);this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,n={},o=this.getIds(),i=1/0,a=1/0,s=-(1/0),l=-(1/0),c=e[0].zoom,d=0;d<e.length;d++){var h=e[d];i=Math.min(i,h.column),a=Math.min(a,h.row),s=Math.max(s,h.column),l=Math.max(l,h.row)}for(var m=0;m<o.length;m++){var y=t._tiles[o[m]],v=u.fromID(o[m]),g=[r(v,y.sourceMaxZoom,new p(i,a,c)),r(v,y.sourceMaxZoom,new p(s,l,c))];if(g[0].x<f&&g[0].y<f&&g[1].x>=0&&g[1].y>=0){for(var _=[],b=0;b<e.length;b++)_.push(r(v,y.sourceMaxZoom,e[b]));var x=n[y.coord.id];void 0===x&&(x=n[y.coord.id]={tile:y,coord:v,queryGeometry:[],scale:Math.pow(2,t.transform.zoom-y.coord.z)}),x.queryGeometry.push(_)}}var w=[];for(var E in n)w.push(n[E]);return w},t.prototype.redoPlacement=function(){for(var e=this,t=this.getIds(),n=0;n<t.length;n++){var r=e.getTileByID(t[n]);r.redoPlacement(e._source)}},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(u.fromID),n=0,r=t;n<r.length;n+=1){var o=r[n];o.posMatrix=e.transform.calculatePosMatrix(o,e._source.maxzoom)}return t},t}(l);h.maxOverzooming=10,h.maxUnderzooming=3,t.exports=h},{"../data/extent":30,"../geo/coordinate":38,"../util/evented":191,"../util/lru_cache":198,"../util/util":204,"./source":73,"./tile":75,"./tile_coord":77}],75:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../data/bucket"),i=e("../data/feature_index"),a=e("vector-tile"),s=e("pbf"),l=e("../util/vectortile_to_geojson"),u=e("../style-spec/feature_filter"),c=e("../symbol/collision_tile"),p=e("../symbol/collision_box"),d=3e4,f=function(e,t,n){this.coord=e,this.uid=r.uniqueId(),this.uses=0,this.tileSize=t,this.sourceMaxZoom=n,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};f.prototype.registerFadeDuration=function(e,t){var n=t+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,e.set(this.fadeEndTime-Date.now()))},f.prototype.loadVectorData=function(e,t){this.hasData()&&this.unloadVectorData(),this.state="loaded",e&&(e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=new p(e.collisionBoxArray),this.collisionTile=new c(e.collisionTile,this.collisionBoxArray),this.featureIndex=new i(e.featureIndex,this.rawTileData,this.collisionTile),this.buckets=o.deserialize(e.buckets,t.style),this.vtLayers=null,this.metadata=e.metadata)},f.prototype.reloadSymbolData=function(e,t){var n=this;if("unloaded"!==this.state&&null!==this.collisionBoxArray){this.collisionTile=new c(e.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var i in n.buckets){var a=n.buckets[i];"symbol"===a.layers[0].type&&(a.destroy(),delete n.buckets[i])}r.extend(this.buckets,o.deserialize(e.buckets,t))}},f.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.collisionBoxArray=null,this.collisionTile=null,this.featureIndex=null,this.vtLayers=null,this.state="unloaded"},f.prototype.redoPlacement=function(e){var t=this;if("vector"===e.type||"geojson"===e.type)return"loaded"!==this.state?void(this.redoWhenDone=!0):void(this.collisionTile&&(this.state="reloading",e.dispatcher.send("redoPlacement",{type:e.type,uid:this.uid,source:e.id,angle:e.map.transform.angle,pitch:e.map.transform.pitch,showCollisionBoxes:e.map.showCollisionBoxes},function(n,r){t.reloadSymbolData(r,e.map.style),e.map&&(e.map.painter.tileExtentVAO.vao=null),t.state="loaded",t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(e))},this.workerID)))},f.prototype.getBucket=function(e){return this.buckets[e.id]},f.prototype.querySourceFeatures=function(e,t){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new a.VectorTile(new s(this.rawTileData)).layers);var r=this.vtLayers._geojsonTileLayer||this.vtLayers[t.sourceLayer];if(r)for(var o=u(t&&t.filter),i={z:this.coord.z,x:this.coord.x,y:this.coord.y},c=0;c<r.length;c++){var p=r.feature(c);if(o(p)){var d=new l(p,n.coord.z,n.coord.x,n.coord.y);d.tile=i,e.push(d)}}}},f.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},f.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=r.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var o=Date.now(),i=!1;if(this.expirationTime>o)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=o+Math.max(a,d):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},f.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},t.exports=f},{"../data/bucket":19,"../data/feature_index":31,"../style-spec/feature_filter":86,"../symbol/collision_box":148,"../symbol/collision_tile":150,"../util/util":204,"../util/vectortile_to_geojson":205,pbf:229,"vector-tile":238}],76:[function(e,t,n){"use strict";var r=e("../geo/lng_lat_bounds"),o=e("../util/util").clamp,i=function(e,t,n){this.bounds=r.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};i.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},i.prototype.contains=function(e,t){var n=t?Math.min(e.z,t):e.z,r={minX:Math.floor(this.lngX(this.bounds.getWest(),n)),minY:Math.floor(this.latY(this.bounds.getNorth(),n)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),n)),
maxY:Math.ceil(this.latY(this.bounds.getSouth(),n))},o=e.x>=r.minX&&e.x<r.maxX&&e.y>=r.minY&&e.y<r.maxY;return o},i.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},i.prototype.latY=function(e,t){var n=o(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+n)/(1-n))*-r},t.exports=i},{"../geo/lng_lat_bounds":40,"../util/util":204}],77:[function(e,t,n){"use strict";function r(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function o(e,t,n,r,o){var i=Math.max(n,Math.floor(t.y0)),a=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,p=t.dx<0,d=i;d<a;d++){var f=l*Math.max(0,Math.min(e.dy,d+c-e.y0))+e.x0,h=u*Math.max(0,Math.min(t.dy,d+p-t.y0))+t.x0;o(Math.floor(h),Math.ceil(f),d)}}function i(e,t,n,i,a,s){var l,u=r(e,t),c=r(t,n),p=r(n,e);u.dy>c.dy&&(l=u,u=c,c=l),u.dy>p.dy&&(l=u,u=p,p=l),c.dy>p.dy&&(l=c,c=p,p=l),u.dy&&o(p,u,i,a,s),c.dy&&o(p,c,i,a,s)}function a(e,t,n){for(var r,o="",i=e;i>0;i--)r=1<<i-1,o+=(t&r?1:0)+(n&r?2:0);return o}var s=e("@mapbox/whoots-js"),l=e("../geo/coordinate"),u=function(e,t,n,r){isNaN(r)&&(r=0),this.z=+e,this.x=+t,this.y=+n,this.w=+r,r*=2,r<0&&(r=r*-1-1);var o=1<<this.z;this.id=32*(o*o*r+o*this.y+this.x)+this.z,this.posMatrix=null};u.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},u.fromCoordinate=function(e,t,n){var r=Math.pow(2,e),o=Math.floor(t/r),i=n,a=t-r*o;return new u(e,a,i,o)},u.prototype.toCoordinate=function(e){var t=Math.min(this.z,void 0===e?this.z:e),n=Math.pow(2,t),r=this.y,o=this.x+n*this.w;return new l(o,r,t)},u.prototype.url=function(e,t,n){var r=s.getTileBBox(this.x,this.y,this.z),o=a(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,t||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",o).replace("{bbox-epsg-3857}",r)},u.prototype.parent=function(e){return 0===this.z?null:this.z>e?new u(this.z-1,this.x,this.y,this.w):new u(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},u.prototype.wrapped=function(){return new u(this.z,this.x,this.y,0)},u.prototype.children=function(e){if(this.z>=e)return[new u(this.z+1,this.x,this.y,this.w)];var t=this.z+1,n=2*this.x,r=2*this.y;return[new u(t,n,r,this.w),new u(t,n+1,r,this.w),new u(t,n,r+1,this.w),new u(t,n+1,r+1,this.w)]},u.cover=function(e,t,n,r){function o(e,t,o){var i,l,c,p;if(o>=0&&o<=a)for(i=e;i<t;i++)l=Math.floor(i/a),c=(i%a+a)%a,0!==l&&r!==!0||(p=new u(n,c,o,l),s[p.id]=p)}void 0===r&&(r=!0);var a=1<<e,s={};return i(t[0],t[1],t[2],0,a,o),i(t[2],t[3],t[0],0,a,o),Object.keys(s).map(function(e){return s[e]})},u.fromID=function(e){var t=e%32,n=1<<t,r=(e-t)/32,o=r%n,i=(r-o)/n%n,a=Math.floor(r/(n*n));return a%2!==0&&(a=a*-1-1),a/=2,new u(t,o,i,a)},t.exports=u},{"../geo/coordinate":38,"@mapbox/whoots-js":4}],78:[function(e,t,n){"use strict";var r=e("../util/evented"),o=e("../util/util"),i=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL,s=e("./dragonfly_source"),l=e("./dotdensity_handler"),u=e("./tile_bounds"),c=function(e){function t(t,n,r,i){if(e.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,o.extend(this,o.pick(n,["url","scheme","tileSize"])),this._options=o.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),i(this._options,function(t,n){return t?void e.fire("error",t):(o.extend(e,n),e.setBounds(n.bounds),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),void e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.setBounds=function(e){this.bounds=e,e&&(this.tileBounds=new u(e,this.minzoom,this.maxzoom))},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.onAdd=function(e){this.load(),this.map=e},t.prototype.serialize=function(){return o.extend({},this._options)},t.prototype.loadTile=function(e,t){function n(n,r){if(l.removeDotDensityData(e,this.dispatcher.id),!e.aborted){if(n)return t(n);this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),l.addDotDensityData(r,e,this.dispatcher.id),e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(this)),t(null),e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)}}if(this.map.style){var r=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,o={sources:s.serialize(this.map.style.sourceCaches),url:a(e.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:e.uid,coord:e.coord,zoom:e.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",o,n.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",o,n.bind(this),e.workerID)}},t.prototype.abortTile=function(e){l.removeDotDensityData(e,this.dispatcher.id),this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t}(r);t.exports=c},{"../util/evented":191,"../util/mapbox":199,"../util/util":204,"./dotdensity_handler":62,"./dragonfly_source":63,"./load_tilejson":68,"./tile_bounds":76}],79:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("vector-tile"),i=e("pbf"),a=e("./worker_tile"),s=e("../util/util"),l=e("./dragonfly_source"),u=function(e,t,n){this.actor=e,this.layerIndex=t,n&&(this.loadVectorData=n),this.loading={},this.loaded={}};u.prototype.loadTile=function(e,t,n){function r(e,r){return delete this.loading[o][i],e?t(e):r?(u.vectorTile=r,u.parse(r,this.layerIndex,this.actor,function(e,n,o){if(e)return t(e);var i={};r.expires&&(i.expires=r.expires),r.cacheControl&&(i.cacheControl=r.cacheControl),t(null,s.extend({rawTileData:r.rawData},n,i),o)},n),this.loaded[o]=this.loaded[o]||{},void(this.loaded[o][i]=u)):t(null,null)}var o=e.source,i=e.uid;this.loading[o]||(this.loading[o]={}),this.shouldAbortTile(i,e),e.url=l.url(this.layerIndex._layers,e);var u=this.loading[o][i]=new a(e);u.abort=this.loadVectorData(e,r.bind(this))},u.prototype.reloadTile=function(e,t,n){function r(e,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,a.layerIndex,a.actor,r)}t(e,n)}var o=this.loaded[e.source],i=e.uid,a=this;if(this.shouldAbortTile(i,e),o&&o[i]){var s=o[i],l=this.layerIndex.familiesBySource[s.source];if(!l)return;var u=Object.keys(s.data.layers),c=Object.keys(l).length>u.length||Object.keys(l).some(function(e){return!u.some(function(t){return e===t})});"parsing"===s.status?s.reloadCallback=t:c||"done"!==s.status?this.loadTile(e,t,n):s.parse(s.vectorTile,this.layerIndex,this.actor,r.bind(s),n)}},u.prototype.abortTile=function(e){var t=this.loading[e.source],n=e.uid;t&&t[n]&&t[n].abort&&(t[n].abort(),delete t[n])},u.prototype.removeTile=function(e){var t=this.loaded[e.source],n=e.uid;t&&t[n]&&delete t[n]},u.prototype.loadVectorData=function(e,t){function n(e,n){if(e)return t(e);var r=new o.VectorTile(new i(n.data));r.rawData=n.data,r.cacheControl=n.cacheControl,r.expires=n.expires,t(e,r)}if(void 0!==e.url){var a=r.getArrayBuffer(e.url,n.bind(this));return function(){a.abort()}}},u.prototype.redoPlacement=function(e,t){var n=this.loaded[e.source],r=this.loading[e.source],o=e.uid;if(n&&n[o]){var i=n[o],a=i.redoPlacement(e.angle,e.pitch,e.showCollisionBoxes);a.result&&t(null,a.result,a.transferables)}else r&&r[o]&&(r[o].angle=e.angle)},u.prototype.shouldAbortTile=function(e,t){var n=this,r=t.source;if(void 0===this.loading[r][e])for(var o in n.loading[r]){var i=n.loading[r][o];if(i.coord.id===t.coord.id&&i.source===t.source){n.abortTile(i);break}}else this.abortTile(t)},t.exports=u},{"../util/ajax":181,"../util/util":204,"./dragonfly_source":63,"./worker_tile":82,pbf:229,"vector-tile":238}],80:[function(e,t,n){"use strict";var r=e("../util/ajax"),o=e("./image_source"),i=function(e){function t(t,n,r,o){e.call(this,t,n,r,o),this.roundZoom=!0,this.type="video",this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,n){if(t)return e.fire("error",{error:t});e.video=n,e.video.loop=!0;var r;e.video.addEventListener("playing",function(){r=e.map.style.animationLoop.set(1/0),e.map._rerender()}),e.video.addEventListener("pause",function(){e.map.style.animationLoop.cancel(r)}),e.map&&e.video.play(),e._finishLoading()})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.load(),this.map=e,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t}(o);t.exports=i},{"../util/ajax":181,"./image_source":67}],81:[function(e,t,n){"use strict";var r=e("../util/actor"),o=e("../style/style_layer_index"),i=e("./vector_tile_worker_source"),a=e("./geojson_worker_source"),s=e("../data/bucket/dotdensity_bucket"),l=e("../util/dragonfly_util").injectCustomFunctions,u=e("./rtl_text_plugin"),c=function(e){var t=this;this.self=e,this.actor=new r(e,this),l(),this.layerIndexes={},this.workerSourceTypes={vector:i,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(u.applyArabicShaping||u.processBidirectionalText)throw new Error("RTL text plugin already registered.");u.applyArabicShaping=e.applyArabicShaping,u.processBidirectionalText=e.processBidirectionalText}};c.prototype.setLayers=function(e,t){this.getLayerIndex(e).replace(t)},c.prototype.clearDotdensityLayer=function(e,t){s.allDots[e]&&delete s.allDots[e].layers[t.layerId]},c.prototype.clearDotdensityLayers=function(e,t){if(s.allDots[e])for(var n in s.allDots[e].layers)t.source===s.allDots[e].layers[n].source&&delete s.allDots[e].layers[n]},c.prototype.updateLayers=function(e,t){this.getLayerIndex(e).update(t.layers,t.removedIds,t.symbolOrder)},c.prototype.loadTile=function(e,t,n){this.clearDotdensityDictionary(e),this.getWorkerSource(e,t.type).loadTile(t,n,e)},c.prototype.reloadTile=function(e,t,n){this.clearDotdensityDictionary(e),this.getWorkerSource(e,t.type).reloadTile(t,n,e)},c.prototype.abortTile=function(e,t){this.clearDotdensityDictionary(e),this.getWorkerSource(e,t.type).abortTile(t)},c.prototype.removeTile=function(e,t){this.clearDotdensityDictionary(e),this.getWorkerSource(e,t.type).removeTile(t)},c.prototype.removeSource=function(e,t){var n=this.getWorkerSource(e,t.type);void 0!==n.removeSource&&n.removeSource(t)},c.prototype.redoPlacement=function(e,t,n){this.getWorkerSource(e,t.type).redoPlacement(t,n)},c.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(r){n(r)}},c.prototype.loadRTLTextPlugin=function(e,t,n){try{u.applyArabicShaping||u.processBidirectionalText||this.self.importScripts(t)}catch(r){n(r)}},c.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t},c.prototype.getWorkerSource=function(e,t){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var r={send:function(t,r,o,i){n.actor.send(t,r,o,i,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](r,this.getLayerIndex(e))}return this.workerSources[e][t]},c.prototype.clearDotdensityDictionary=function(e){if(s.allDots[e])for(var t in s.allDots[e].layers)delete s.allDots[e].layers[t]},t.exports=function(e){return new c(e)}},{"../data/bucket/dotdensity_bucket":22,"../style/style_layer_index":142,"../util/actor":180,"../util/dragonfly_util":190,"./geojson_worker_source":65,"./rtl_text_plugin":72,"./vector_tile_worker_source":79}],82:[function(e,t,n){"use strict";function r(e,t){for(var n=0,r=e.layers;n<r.length;n+=1){var o=r[n];o.recalculate(t)}}function o(e,t){return e.filter(function(e){return!e.isEmpty()}).map(function(e){return e.serialize(t)})}var i=e("../data/feature_index"),a=e("../symbol/collision_tile"),s=e("../symbol/collision_box"),l=e("../util/dictionary_coder"),u=e("../util/util"),c=e("./dragonfly_source"),p=function(e){this.coord=e.coord,this.uid=e.uid,this.zoom=e.zoom,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.angle=e.angle,this.pitch=e.pitch,this.showCollisionBoxes=e.showCollisionBoxes,this.sources=e.sources};p.prototype.parse=function(e,t,n,p,d){var f=this;e.layers||(e={layers:{_geojsonTileLayer:e}}),this.status="parsing",this.data=e;var h=c.calculateComputedColumns(this.sources,e);if(h&&(e.layers=h.vectorTile.layers,e.rawData=h.pbf.buffer),!e.rawData){var m=c.fromVectorTile(e,[]);e.rawData=m.buffer}this.collisionBoxArray=new s;var y=new l(Object.keys(e.layers).sort()),v=new i(this.coord,this.overscaling);v.bucketLayerIDs={};var g={},_=0,b={featureIndex:v,iconDependencies:{},glyphDependencies:{}},x=t.familiesBySource[this.source];for(var w in x){var E=e.layers[w];if(E){1===E.version&&u.warnOnce('Vector tile source "'+f.source+'" layer "'+w+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var k=y.encode(w),C=[],S=0;S<E.length;S++){var P=E.feature(S);P.index=S,P.sourceLayerIndex=k,C.push(P)}for(var O=0,M=x[w];O<M.length;O+=1){var D=M[O],T=D[0];if(!(T.autoSource&&T.sourceLayer!==E.name||T.minzoom&&f.zoom<T.minzoom||T.maxzoom&&f.zoom>=T.maxzoom||T.layout&&"none"===T.layout.visibility)){for(var N=0,I=D;N<I.length;N+=1){var L=I[N];L.recalculate(f.zoom)}var R=g[T.id]=T.createBucket({index:_,layers:D,zoom:f.zoom,mapId:d,overscaling:f.overscaling,collisionBoxArray:f.collisionBoxArray});R.populate(C,b),v.bucketLayerIDs[_]=D.map(function(e){return e.id}),_++}}}}var A=function(e){f.status="done",v.paintPropertyStatistics={};for(var t in g)u.extend(v.paintPropertyStatistics,g[t].getPaintPropertyStatistics());var n={buckets:{}},r=function(e){g[e].layers.length>1?g[e].layers.forEach(function(t){return n.buckets[t.id]=g[e].metadata}):n.buckets[e]=g[e].metadata};for(var i in g)r(i);var a=[];p(null,{metadata:n,buckets:o(u.values(g),a),featureIndex:v.serialize(a),collisionTile:e.serialize(a),collisionBoxArray:f.collisionBoxArray.serialize()},a)};this.symbolBuckets=[];for(var j=t.symbolOrder.length-1;j>=0;j--){var z=g[t.symbolOrder[j]];z&&f.symbolBuckets.push(z)}if(0===this.symbolBuckets.length)return A(new a(this.angle,this.pitch,this.collisionBoxArray));var V=0,F=Object.keys(b.iconDependencies),B=u.mapObject(b.glyphDependencies,function(e){return Object.keys(e).map(Number)}),U=function(e){if(e)return p(e);if(V++,2===V){for(var t=new a(f.angle,f.pitch,f.collisionBoxArray),n=0,o=f.symbolBuckets;n<o.length;n+=1){var i=o[n];r(i,f.zoom),i.prepare(B,F),i.place(t,f.showCollisionBoxes)}A(t)}};Object.keys(B).length?n.send("getGlyphs",{uid:this.uid,stacks:B},function(e,t){B=t,U(e)}):U(),F.length?n.send("getIcons",{icons:F},function(e,t){F=t,U(e)}):U()},p.prototype.redoPlacement=function(e,t,n){var i=this;if(this.angle=e,this.pitch=t,"done"!==this.status)return{};for(var s=new a(this.angle,this.pitch,this.collisionBoxArray),l=0,u=i.symbolBuckets;l<u.length;l+=1){var c=u[l];r(c,i.zoom),c.place(s,n)}var p=[];return{result:{buckets:o(this.symbolBuckets,p),collisionTile:s.serialize(p)},transferables:p}},t.exports=p},{"../data/feature_index":31,"../symbol/collision_box":148,"../symbol/collision_tile":150,"../util/dictionary_coder":187,"../util/util":204,"./dragonfly_source":63}],83:[function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return i.forEach(function(e){e in t&&(n[e]=t[e])}),n}function o(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=r(e[o],t[e[o].ref]));return e}var i=e("./util/ref_properties");t.exports=o},{"./util/ref_properties":106}],84:[function(e,t,n){"use strict";function r(e,t,n,r){e=e||{},t=t||{};var o;for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||(n.push({command:c.removeSource,args:[o]}),r[o]=!0));for(o in t)t.hasOwnProperty(o)&&(e.hasOwnProperty(o)?u(e[o],t[o])||(n.push({command:c.removeSource,args:[o]}),n.push({command:c.addSource,args:[o,t[o]]}),r[o]=!0):n.push({command:c.addSource,args:[o,t[o]]}))}function o(e,t,n,r,o,i){e=e||{},t=t||{};var a;for(a in e)e.hasOwnProperty(a)&&(u(e[a],t[a])||n.push({command:i,args:[r,a,t[a],o]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(u(e[a],t[a])||n.push({command:i,args:[r,a,t[a],o]}))}function i(e){return e.id}function a(e,t){return e[t.id]=t,e}function s(e,t,n){e=e||[],t=t||[];var r,s,l,p,d,f,h,m=e.map(i),y=t.map(i),v=e.reduce(a,{}),g=t.reduce(a,{}),_=m.slice(),b=Object.create(null);for(r=0,s=0;r<m.length;r++)l=m[r],g.hasOwnProperty(l)?s++:(n.push({command:c.removeLayer,args:[l]}),_.splice(_.indexOf(l,s),1));for(r=0,s=0;r<y.length;r++)l=y[y.length-1-r],_[_.length-1-r]!==l&&(v.hasOwnProperty(l)?(n.push({command:c.removeLayer,args:[l]}),_.splice(_.lastIndexOf(l,_.length-s),1)):s++,f=_[_.length-r],n.push({command:c.addLayer,args:[g[l],f]}),_.splice(_.length-r,0,l),b[l]=!0);for(r=0;r<y.length;r++)if(l=y[r],p=v[l],d=g[l],!b[l]&&!u(p,d))if(u(p.source,d.source)&&u(p["source-layer"],d["source-layer"])&&u(p.type,d.type)){o(p.layout,d.layout,n,l,null,c.setLayoutProperty),o(p.paint,d.paint,n,l,null,c.setPaintProperty),u(p.filter,d.filter)||n.push({command:c.setFilter,args:[l,d.filter]}),u(p.minzoom,d.minzoom)&&u(p.maxzoom,d.maxzoom)||n.push({command:c.setLayerZoomRange,args:[l,d.minzoom,d.maxzoom]});for(h in p)p.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?o(p[h],d[h],n,l,h.slice(6),c.setPaintProperty):u(p[h],d[h])||n.push({command:c.setLayerProperty,args:[l,h,d[h]]}));for(h in d)d.hasOwnProperty(h)&&!p.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?o(p[h],d[h],n,l,h.slice(6),c.setPaintProperty):u(p[h],d[h])||n.push({command:c.setLayerProperty,args:[l,h,d[h]]}))}else n.push({command:c.removeLayer,args:[l]}),f=_[_.lastIndexOf(l)+1],n.push({command:c.addLayer,args:[d,f]})}function l(e,t){if(!e)return[{command:c.setStyle,args:[t]}];var n=[];try{if(!u(e.version,t.version))return[{command:c.setStyle,args:[t]}];u(e.center,t.center)||n.push({command:c.setCenter,args:[t.center]}),u(e.zoom,t.zoom)||n.push({command:c.setZoom,args:[t.zoom]}),u(e.bearing,t.bearing)||n.push({command:c.setBearing,args:[t.bearing]}),u(e.pitch,t.pitch)||n.push({command:c.setPitch,args:[t.pitch]}),u(e.sprite,t.sprite)||n.push({command:c.setSprite,args:[t.sprite]}),u(e.glyphs,t.glyphs)||n.push({command:c.setGlyphs,args:[t.glyphs]}),u(e.transition,t.transition)||n.push({command:c.setTransition,args:[t.transition]}),u(e.light,t.light)||n.push({command:c.setLight,args:[t.light]});var o={},i=[];r(e.sources,t.sources,i,o);var a=[];e.layers&&e.layers.forEach(function(e){o[e.source]?n.push({command:c.removeLayer,args:[e.id]}):a.push(e)}),n=n.concat(i),s(a,t.layers,n)}catch(l){console.warn("Unable to compute style diff:",l),n=[{command:c.setStyle,args:[t]}]}return n}var u=e("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=l,t.exports.operations=c},{"lodash.isequal":97}],85:[function(e,t,n){"use strict";function r(e,t){this.message=(e?e+": ":"")+o.apply(o,Array.prototype.slice.call(arguments,2)),null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}var o=e("util").format;t.exports=r},{util:237}],86:[function(e,t,n){"use strict";function r(e){return new Function("f","var p = (f && f.properties || {}); return "+o(e))}function o(e){if(!e)return"true";var t=e[0];if(e.length<=1)return"any"===t?"false":"true";var n="=="===t?a(e[1],e[2],"===",!1):"!="===t?a(e[1],e[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?a(e[1],e[2],t,!0):"any"===t?s(e.slice(1),"||"):"all"===t?s(e.slice(1),"&&"):"none"===t?c(s(e.slice(1),"||")):"in"===t?l(e[1],e.slice(2)):"!in"===t?c(l(e[1],e.slice(2))):"has"===t?u(e[1]):"!has"===t?c(u([e[1]])):"=~"===t||"!~"===t?p(e[1],e[2],t):"starts-with"===t?d(e[1],e.slice(2)):"true";return"("+n+")"}function i(e){return"$type"===e?"f.type":"$id"===e?"f.id":"p["+JSON.stringify(e)+"]"}function a(e,t,n,r){var o=i(e),a="$type"===e?h.indexOf(t):JSON.stringify(t);return(r?"typeof "+o+"=== typeof "+a+"&&":"")+o+n+a}function s(e,t){return e.map(o).join(t)}function l(e,t){"$type"===e&&(t=t.map(function(e){return h.indexOf(e)}));var n=JSON.stringify(t.sort(f)),r=i(e);return t.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(t.length-1)+")"}function u(e){return JSON.stringify(e)+" in p"}function c(e){return"!("+e+")"}function p(e,t,n){if(!(t instanceof RegExp))throw"Regex expression filter invalid: value must be of type RegExp";return"function() {var sp = "+i(e)+';if (typeof sp === "number") sp = numberToComparableString(sp);return '+("!~"===n?"!":"")+t+".test(sp); }()"}function d(e,t){t=t.map(function(e){return e.toString()}),"$type"===e&&(t=t.map(function(e){return h.indexOf(e)}));var n=JSON.stringify(t.sort(f)),r=i(e);return'function(v, a, i, j) {if ((typeof a !== "number") && !v) return false;while (i <= j) { var m = (i + j) >> 1;    var v_start =  v.toString().slice(0, a[m].length);    if (a[m] === v_start) return true; if (a[m] > v_start) j = m - 1; else i = m + 1;}return false; }('+r+", "+n+",0,"+(t.length-1)+")"}function f(e,t){return e<t?-1:e>t?1:0}t.exports=r;var h=["Unknown","Point","LineString","Polygon"]},{}],87:[function(e,t,n){"use strict";function r(e){return e>v?Math.pow(e,1/3):e/y+h}function o(e){return e>m?e*e*e:y*(e-h)}function i(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function a(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=a(e[0]),n=a(e[1]),o=a(e[2]),i=r((.4124564*t+.3575761*n+.1804375*o)/p),s=r((.2126729*t+.7151522*n+.072175*o)/d),l=r((.0193339*t+.119192*n+.9503041*o)/f);return[116*s-16,500*(i-s),200*(s-l),e[3]]}function l(e){var t=(e[0]+16)/116,n=isNaN(e[1])?t:t+e[1]/500,r=isNaN(e[2])?t:t-e[2]/200;return t=d*o(t),n=p*o(n),r=f*o(r),[i(3.2404542*n-1.5371385*t-.4985314*r),i(-.969266*n+1.8760108*t+.041556*r),i(.0556434*n-.2040259*t+1.0572252*r),e[3]]}function u(e){var t=s(e),n=t[0],r=t[1],o=t[2],i=Math.atan2(o,r)*_;return[i<0?i+360:i,Math.sqrt(r*r+o*o),n,e[3]]}function c(e){var t=e[0]*g,n=e[1],r=e[2];return l([r,Math.cos(t)*n,Math.sin(t)*n,e[3]])}var p=.95047,d=1,f=1.08883,h=4/29,m=6/29,y=3*m*m,v=m*m*m,g=Math.PI/180,_=180/Math.PI;t.exports={lab:{forward:s,reverse:l},hcl:{forward:u,reverse:c}}},{}],88:[function(e,t,n){"use strict";function r(e){return e}function o(e,t){var n,i="color"===t.type;if(h(e)){var f=e.stops&&"object"==typeof e.stops[0][0],m=f||void 0!==e.property,_=f||!m,b=e.type||("interpolated"===t["function"]?"exponential":"interval");i&&(e=g({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],v(e[1])]})),e["default"]?e["default"]=v(e["default"]):e["default"]=v(t["default"]));var x,w,E;if("exponential"===b)x=p;else if("interval"===b)x=c;else if("categorical"===b){x=u,w=Object.create(null);for(var k=0,C=e.stops;k<C.length;k+=1){var S=C[k];w[S[0]]=S[1]}E=typeof e.stops[0][0]}else if("identity"===b)x=d;else if("dragonfly-interval"===b)x=s;else{if("dragonfly-categorical"!==b)throw new Error('Unknown function type "'+b+'"');x=a}var P;if(e.colorSpace&&"rgb"!==e.colorSpace){if(!y[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var O=y[e.colorSpace];e=JSON.parse(JSON.stringify(e));for(var M=0;M<e.stops.length;M++)e.stops[M]=[e.stops[M][0],O.forward(e.stops[M][1])];P=O.reverse}else P=r;if(f){for(var D={},T=[],N=0;N<e.stops.length;N++){var I=e.stops[N],L=I[0].zoom;void 0===D[L]&&(D[L]={zoom:L,type:e.type,property:e.property,"default":e["default"],stops:[]},T.push(L)),D[L].stops.push([I[0].value,I[1]])}for(var R=[],A=0,j=T;A<j.length;A+=1){var z=j[A];R.push([D[z].zoom,o(D[z],t)])}if(R.sort(function(e,t){return e[0]-t[0]}),n=function(n,r){return P("dragonfly-interval"===e.type||"dragonfly-categorical"===e.type?l(R,n)(n,r):p({stops:R,base:e.base},t,n)(n,r))},n.isFeatureConstant=!1,n.isZoomConstant=!1,"dragonfly-categorical"===e.type){n.categoricalValues={};for(var V=0;V<e.stops.length;V++){var F=e.stops[V];n.categoricalValues.hasOwnProperty(F[0].value)||(n.categoricalValues[F[0].value]=Object.keys(n.categoricalValues).length)}}}else if(_)n=function(n){return P(x===u||x===a?x(e,t,n,w,E):x(e,t,n,w,E))},n.isFeatureConstant=!0,n.isZoomConstant=!1;else if(n=function(n,r){var o=r[e.property];return P(x(e,t,o,w,E))},n.isFeatureConstant=!1,n.isZoomConstant=!0,"dragonfly-categorical"===e.type){n.categoricalValues={};for(var B=0;B<e.stops.length;B++){var U=e.stops[B];n.categoricalValues.hasOwnProperty(U[0])||(n.categoricalValues[U[0]]=Object.keys(n.categoricalValues).length)}}}else i&&e&&(e=v(e)),n=function(){return e},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function i(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function a(e,t,n,r,o){var i=[];return e.stops.forEach(function(e){Array.isArray(e[1])?e[1].forEach(function(e){return i.push(e)}):i.push(e[1])}),i}function s(e,t,n){var r=[];return e.stops.forEach(function(e){Array.isArray(e[1])?e[1].forEach(function(e){return r.push(e)}):r.push(e[1])}),r}function l(e,t){var n=e.length;if(1===n)return e[0][1];var r,o;for(o=0;o<n;o++)if(e[o][0]>=t){r=e[o];break}return void 0===r?e[n-1][1]:r[1]}function u(e,t,n,r,o){var a=typeof n===o?r[n]:void 0;return i(a,e["default"],t["default"])}function c(e,t,n){if("number"!==_(n))return i(e["default"],t["default"]);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var o=f(e.stops,n);return e.stops[o][1]}function p(e,t,n){var o=void 0!==e.base?e.base:1;if("number"!==_(n))return i(e["default"],t["default"]);var a=e.stops.length;if(1===a)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[a-1][0])return e.stops[a-1][1];var s=f(e.stops,n),l=m(n,o,e.stops[s][0],e.stops[s+1][0]),u=e.stops[s][1],c=e.stops[s+1][1],p=b[t.type]||r;return"function"==typeof u?function(){var e=u.apply(void 0,arguments),t=c.apply(void 0,arguments);if(void 0!==e&&void 0!==t)return p(e,t,l)}:p(u,c,l)}function d(e,t,n){return"color"===t.type?n=v(n):_(n)!==t.type&&(n=void 0),i(n,e["default"],t["default"])}function f(e,t){for(var n,r,o=e.length,i=0,a=o-1,s=0;i<=a;){if(s=Math.floor((i+a)/2),n=e[s][0],r=e[s+1][0],t===n||t>n&&t<r)return s;n<t?i=s+1:n>t&&(a=s-1)}return Math.max(s-1,0)}function h(e){return"object"==typeof e&&(e.stops||"identity"===e.type)}function m(e,t,n,r){var o=r-n,i=e-n;return 1===t?i/o:(Math.pow(t,i)-1)/(Math.pow(t,o)-1)}var y=e("./color_spaces"),v=e("../util/parse_color"),g=e("../util/extend"),_=e("../util/get_type"),b=e("../util/interpolate");t.exports=o,t.exports.isFunctionDefinition=h,t.exports.interpolationFactor=m,t.exports.findStopLessThanOrEqualTo=f},{"../util/extend":102,"../util/get_type":103,"../util/interpolate":104,"../util/parse_color":105,"./color_spaces":87}],89:[function(e,t,n){"use strict";function r(e){return a(i.map(function(t){return e[t]}))}function o(e){for(var t={},n=0;n<e.length;n++){var o=r(e[n]),i=t[o];i||(i=t[o]=[]),i.push(e[n])}var a=[];for(var s in t)a.push(t[s]);return a}var i=e("./util/ref_properties"),a=e("fast-stable-stringify");t.exports=o},{"./util/ref_properties":106,"fast-stable-stringify":91}],90:[function(e,t,n){"use strict";function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function o(e){return e<0?0:e>1?1:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return o("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function l(e){var t=e.replace(/ /g,"").toLowerCase();if(t in u)return u[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var o=t.indexOf("("),l=t.indexOf(")");if(o!==-1&&l+1===t.length){var c=t.substr(0,o),p=t.substr(o+1,l-(o+1)).split(","),d=1;switch(c){case"rgba":if(4!==p.length)return null;d=a(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),d];case"hsla":if(4!==p.length)return null;d=a(p.pop());case"hsl":if(3!==p.length)return null;var f=(parseFloat(p[0])%360+360)%360/360,h=a(p[1]),m=a(p[2]),y=m<=.5?m*(h+1):m+h-m*h,v=2*m-y;return[r(255*s(v,y,f+1/3)),r(255*s(v,y,f)),r(255*s(v,y,f-1/3)),d];default:return null}}return null}var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],
lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=l}catch(c){}},{}],91:[function(e,t,n){"use strict";function r(e){var t,n,o,u,c,p;switch(typeof e){case"object":if(null===e)return null;if(i(e)){for(o="[",n=e.length-1,t=0;t<n;t++)o+=r(e[t])+",";return n>-1&&(o+=r(e[t])),o+"]"}for(u=a(e).sort(),n=u.length,o="{",c=u[t=0],p=n>0&&void 0!==e[c];t<n;)p?(o+='"'+c.replace(s,l)+'":'+r(e[c]),c=u[++t],p=t<n&&void 0!==e[c],p&&(o+=",")):(c=u[++t],p=t<n&&void 0!==e[c]);return o+"}";case"undefined":return null;case"string":return'"'+e.replace(s,l)+'"';default:return e}}var o={}.toString,i=Array.isArray||function(e){return"[object Array]"===o.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},s=/[\u0000-\u001f"\\]/g,l=function(e){var t=e.charCodeAt(0);switch(t){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return t>15?"\\u00"+t.toString(16):"\\u000"+t.toString(16)}};t.exports=function(e){if(void 0!==e)return""+r(e)},t.exports.stringSearch=s,t.exports.stringReplace=l},{}],92:[function(e,t,n){"use strict";function r(e){return!!e&&"object"==typeof e}function o(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function i(e,t,n,o,s,l){return e===t||(null==e||null==t||!c(e)&&!r(t)?e!==e&&t!==t:a(e,t,i,n,o,s,l))}function a(e,t,n,r,o,i,a){var c=p(e),f=p(t),y=m,v=m;c||(y=C.call(e),y==h?y=b:y!=b&&(c=d(e))),f||(v=C.call(t),v==h?v=b:v!=b&&(f=d(t)));var g=y==b,_=v==b,x=y==v;if(x&&!c&&!g)return l(e,t,y);if(!o){var w=g&&k.call(e,"__wrapped__"),E=_&&k.call(t,"__wrapped__");if(w||E)return n(w?e.value():e,E?t.value():t,r,o,i,a)}if(!x)return!1;i||(i=[]),a||(a=[]);for(var S=i.length;S--;)if(i[S]==e)return a[S]==t;i.push(e),a.push(t);var P=(c?s:u)(e,t,n,r,o,i,a);return i.pop(),a.pop(),P}function s(e,t,n,r,i,a,s){var l=-1,u=e.length,c=t.length;if(u!=c&&!(i&&c>u))return!1;for(;++l<u;){var p=e[l],d=t[l],f=r?r(i?d:p,i?p:d,l):void 0;if(void 0!==f){if(f)continue;return!1}if(i){if(!o(t,function(e){return p===e||n(p,e,r,i,a,s)}))return!1}else if(p!==d&&!n(p,d,r,i,a,s))return!1}return!0}function l(e,t,n){switch(n){case y:case v:return+e==+t;case g:return e.name==t.name&&e.message==t.message;case _:return e!=+e?t!=+t:e==+t;case x:case w:return e==t+""}return!1}function u(e,t,n,r,o,i,a){var s=f(e),l=s.length,u=f(t),c=u.length;if(l!=c&&!o)return!1;for(var p=l;p--;){var d=s[p];if(!(o?d in t:k.call(t,d)))return!1}for(var h=o;++p<l;){d=s[p];var m=e[d],y=t[d],v=r?r(o?y:m,o?m:y,d):void 0;if(!(void 0===v?n(m,y,r,o,i,a):v))return!1;h||(h="constructor"==d)}if(!h){var g=e.constructor,_=t.constructor;if(g!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _))return!1}return!0}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var p=e("lodash.isarray"),d=e("lodash.istypedarray"),f=e("lodash.keys"),h="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",g="[object Error]",_="[object Number]",b="[object Object]",x="[object RegExp]",w="[object String]",E=Object.prototype,k=E.hasOwnProperty,C=E.toString;t.exports=i},{"lodash.isarray":96,"lodash.istypedarray":98,"lodash.keys":99}],93:[function(e,t,n){"use strict";function r(e,t,n){if("function"!=typeof e)return o;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function o(e){return e}t.exports=r},{}],94:[function(e,t,n){"use strict";function r(e){return!!e&&"object"==typeof e}function o(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function i(e){return a(e)&&f.call(e)==l}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(i(e)?h.test(p.call(e)):r(e)&&u.test(e))}var l="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,d=c.hasOwnProperty,f=c.toString,h=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},{}],95:[function(e,t,n){"use strict";function r(e){return i(e)&&m.call(e,"callee")&&(!v.call(e,"callee")||y.call(e)==p)}function o(e){return null!=e&&s(e.length)&&!a(e)}function i(e){return u(e)&&o(e)}function a(e){var t=l(e)?y.call(e):"";return t==d||t==f}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return!!e&&"object"==typeof e}var c=9007199254740991,p="[object Arguments]",d="[object Function]",f="[object GeneratorFunction]",h=Object.prototype,m=h.hasOwnProperty,y=h.toString,v=h.propertyIsEnumerable;t.exports=r},{}],96:[function(e,t,n){"use strict";function r(e){return!!e&&"object"==typeof e}function o(e,t){var n=null==e?void 0:e[t];return l(n)?n:void 0}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=g}function a(e){return s(e)&&m.call(e)==c}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function l(e){return null!=e&&(a(e)?y.test(f.call(e)):r(e)&&p.test(e))}var u="[object Array]",c="[object Function]",p=/^\[object .+?Constructor\]$/,d=Object.prototype,f=Function.prototype.toString,h=d.hasOwnProperty,m=d.toString,y=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=o(Array,"isArray"),g=9007199254740991,_=v||function(e){return r(e)&&i(e.length)&&m.call(e)==u};t.exports=_},{}],97:[function(e,t,n){"use strict";function r(e,t,n,r){n="function"==typeof n?i(n,r,3):void 0;var a=n?n(e,t):void 0;return void 0===a?o(e,t,n):!!a}var o=e("lodash._baseisequal"),i=e("lodash._bindcallback");t.exports=r},{"lodash._baseisequal":92,"lodash._bindcallback":93}],98:[function(e,t,n){"use strict";function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function o(e){return!!e&&"object"==typeof e}function i(e){return o(e)&&r(e.length)&&!!T[I.call(e)]}var a=9007199254740991,s="[object Arguments]",l="[object Array]",u="[object Boolean]",c="[object Date]",p="[object Error]",d="[object Function]",f="[object Map]",h="[object Number]",m="[object Object]",y="[object RegExp]",v="[object Set]",g="[object String]",_="[object WeakMap]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",k="[object Int8Array]",C="[object Int16Array]",S="[object Int32Array]",P="[object Uint8Array]",O="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]",T={};T[w]=T[E]=T[k]=T[C]=T[S]=T[P]=T[O]=T[M]=T[D]=!0,T[s]=T[l]=T[b]=T[u]=T[x]=T[c]=T[p]=T[d]=T[f]=T[h]=T[m]=T[y]=T[v]=T[g]=T[_]=!1;var N=Object.prototype,I=N.toString;t.exports=i},{}],99:[function(e,t,n){"use strict";function r(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&a(g(e))}function i(e,t){return e="number"==typeof e||f.test(e)?+e:-1,t=null==t?v:t,e>-1&&e%1==0&&e<t}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function s(e){for(var t=u(e),n=t.length,r=n&&e.length,o=!!r&&a(r)&&(d(e)||p(e)),s=-1,l=[];++s<n;){var c=t[s];(o&&i(c,r)||m.call(e,c))&&l.push(c)}return l}function l(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){if(null==e)return[];l(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(d(e)||p(e))&&t||0;for(var n=e.constructor,r=-1,o="function"==typeof n&&n.prototype===e,s=Array(t),u=t>0;++r<t;)s[r]=r+"";for(var c in e)u&&i(c,t)||"constructor"==c&&(o||!m.call(e,c))||s.push(c);return s}var c=e("lodash._getnative"),p=e("lodash.isarguments"),d=e("lodash.isarray"),f=/^\d+$/,h=Object.prototype,m=h.hasOwnProperty,y=c(Object,"keys"),v=9007199254740991,g=r("length"),_=y?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&o(e)?s(e):l(e)?y(e):[]}:s;t.exports=_},{"lodash._getnative":94,"lodash.isarguments":95,"lodash.isarray":96}],100:[function(e,t,n){"use strict";t.exports=e("./v8.json")},{"./v8.json":101}],101:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number","default":0,period:360,units:"degrees"},pitch:{type:"number","default":0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number","default":0},maxzoom:{type:"number","default":22},tileSize:{type:"number","default":512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number","default":18},buffer:{type:"number","default":128,maximum:512,minimum:0},tolerance:{type:"number","default":.375},cluster:{type:"boolean","default":!1},clusterRadius:{type:"number","default":50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean","default":"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},background:{},bubble:{},dotdensity:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"},"auto-source":{type:"array",value:"layer"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_background","layout_bubble","layout_dotdensity"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_line:{"line-cap":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},"default":"butt"},"line-join":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},"default":"miter"},"line-miter-limit":{type:"number","default":2,"function":"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number","default":1.05,"function":"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_symbol:{"symbol-placement":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},"default":"point"},"symbol-spacing":{type:"number","default":250,minimum:1,"function":"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1},"icon-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image"]},"icon-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["icon-image"]},"icon-size":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},"default":"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,"default":[0,0,0,0],units:"pixels","function":"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number","default":2,minimum:0,"function":"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},"default":"auto",requires:["text-field"]},"text-field":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,"default":"",tokens:!0},"text-font":{type:"array",value:"string","function":"piecewise-constant","zoom-function":!0,"default":["OpenSans-Regular"],requires:["text-field"]},"text-size":{type:"number","default":16,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number","default":10,minimum:0,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number","default":1.2,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number","default":0,units:"ems","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{left:{},center:{},right:{}},"default":"center",requires:["text-field"]},"text-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center",requires:["text-field"]},"text-max-angle":{type:"number","default":45,units:"degrees","function":"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number","default":0,period:360,units:"degrees","function":"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number","default":2,minimum:0,units:"pixels","function":"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum","function":"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},"default":"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems","function":"interpolated","zoom-function":!0,"property-function":!0,length:2,"default":[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field"]},"text-optional":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},"default":"visible"}},layout_dotdensity:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"},"dotdensity-count":{type:"string","function":"piecewise-constant","zoom-function":!0,"property-function":!0,transition:!0,tokens:!0},"dotdensity-seed":{type:"number","default":1,"function":"interpolated",transition:!0}},layout_bubble:{visibility:{type:"enum","function":"piecewise-constant",values:["visible","none"],"default":"visible"},"bubble-radius":{type:"string","function":"piecewise-constant",tokens:!0}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},"=~":{},"!~":{},"x-radius":{},"starts-with":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},"function":{stops:{type:"array",value:"function_stop"},base:{type:"number","default":1,minimum:0},property:{type:"string","default":"$zoom"},"computed-options":{type:"*"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{},"dragonfly-interval":{},"dragonfly-categorical":{}},"default":"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},"default":"rgb"},"default":{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum","default":"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array","default":[1.15,210,30],length:3,value:"number",transition:!0,"function":"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color","default":"#ffffff","function":"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number","default":.5,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_background","paint_bubble","paint_dotdensity"],paint_fill:{"fill-antialias":{type:"boolean","function":"piecewise-constant","zoom-function":!0,"default":!0},"fill-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["fill-translate"]},"fill-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!1,"default":1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":0,minimum:0,maximum:65535,units:"meters",transition:!0},"fill-extrusion-base":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":0,minimum:0,maximum:65535,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-query-as-fill":{type:"boolean","default":!0},"line-opacity":{type:"number","function":"interpolated","zoom-function":!0,"property-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["line-translate"]},"line-width":{type:"number","default":1,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number","function":"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number","default":5,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number","default":0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map"},"circle-stroke-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color","default":"rgba(0, 0, 0, 0)","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number","default":0,minimum:0,"function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum","function":"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},"default":"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number","default":0,period:360,"function":"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number","function":"interpolated","zoom-function":!0,"default":0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number","function":"interpolated","zoom-function":!0,"default":1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number","default":0,minimum:-1,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number","default":300,minimum:0,"function":"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string","function":"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated","zoom-function":!0,transition:!0}},paint_bubble:{"bubble-radius-multiplier":{type:"number","default":1,minimum:0,"function":"interpolated",transition:!1,requires:["bubble-radius"]},"bubble-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"bubble-outline-color":{type:"color","default":"#000000","function":"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"bubble-max-radius":{type:"number","function":"interpolated",transition:!0,requires:["bubble-radius"]},"bubble-max-radius-outline-color":{type:"color","default":"#000000","function":"interpolated",transition:!0,requires:["bubble-max-radius"]},"bubble-max-radius-outline-width":{type:"number","default":1,minimum:0,"function":"interpolated",transition:!0,requires:["bubble-max-radius"]},"bubble-outline-width":{type:"string","default":"2","function":"interpolated",transition:!0,units:"pixels"},"bubble-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0},"bubble-translate":{type:"array",value:"number",length:2,"default":[0,0],"function":"interpolated",transition:!0,units:"pixels"},"bubble-translate-anchor":{type:"enum","function":"piecewise-constant",values:["map","viewport"],"default":"map",requires:["bubble-translate"]}},paint_dotdensity:{"dotdensity-radius":{type:"number","default":3,minimum:0,"function":"interpolated",transition:!0,units:"pixels"},"dotdensity-color":{type:"color","default":"#000000","function":"interpolated",transition:!0},"dotdensity-opacity":{type:"number","default":1,minimum:0,maximum:1,"function":"interpolated",transition:!0},"dotdensity-blur":{type:"number","default":0,"function":"interpolated",transition:!0}},transition:{duration:{type:"number","default":300,minimum:0,units:"milliseconds"},delay:{type:"number","default":0,minimum:0,units:"milliseconds"}}}},{}],102:[function(e,t,n){"use strict";t.exports=function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r=t[n];for(var o in r)e[o]=r[o]}return e}},{}],103:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],104:[function(e,t,n){
"use strict";function r(e,t,n){return e*(1-n)+t*n}t.exports=r,r.number=r,r.vec2=function(e,t,n){return[r(e[0],t[0],n),r(e[1],t[1],n)]},r.color=function(e,t,n){return[r(e[0],t[0],n),r(e[1],t[1],n),r(e[2],t[2],n),r(e[3],t[3],n)]},r.array=function(e,t,n){return e.map(function(e,o){return r(e,t[o],n)})}},{}],105:[function(e,t,n){"use strict";var r=e("csscolorparser").parseCSSColor;t.exports=function(e){if("string"==typeof e){var t=r(e);if(!t)return;return[t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]]}return Array.isArray(e)?e:void 0}},{csscolorparser:90}],106:[function(e,t,n){"use strict";t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],107:[function(e,t,n){"use strict";t.exports=function(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}},{}],108:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("../util/extend");t.exports=function(t){var n=e("./validate_function"),a=e("./validate_object"),s={"*":function(){return[]},array:e("./validate_array"),"boolean":e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),"enum":e("./validate_enum"),filter:e("./validate_filter"),"function":e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},l=t.value,u=t.valueSpec,c=t.key,p=t.styleSpec,d=t.style;if("string"===o(l)&&"@"===l[0]){if(p.$version>7)return[new r(c,l,"constants have been deprecated as of v8")];if(!(l in d.constants))return[new r(c,l,'constant "%s" not found',l)];t=i({},t,{value:d.constants[l]})}return u["function"]&&"object"===o(l)?n(t):u.type&&s[u.type]?s[u.type](t):a(i({},t,{valueSpec:u.type?p[u.type]:u}))}},{"../error/validation_error":85,"../util/extend":102,"../util/get_type":103,"./validate_array":109,"./validate_boolean":110,"./validate_color":111,"./validate_constants":112,"./validate_enum":113,"./validate_filter":114,"./validate_function":115,"./validate_layer":117,"./validate_light":119,"./validate_number":120,"./validate_object":121,"./validate_source":124,"./validate_string":125}],109:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("./validate"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,a=e.style,s=e.styleSpec,l=e.key,u=e.arrayElementValidator||o;if("array"!==r(t))return[new i(l,t,"array expected, %s found",r(t))];if(n.length&&t.length!==n.length)return[new i(l,t,"array length %d expected, length %d found",n.length,t.length)];if(n["min-length"]&&t.length<n["min-length"])return[new i(l,t,"array length at least %d expected, length %d found",n["min-length"],t.length)];var c={type:n.value};s.$version<7&&(c["function"]=n["function"]),"object"===r(n.value)&&(c=n.value);for(var p=[],d=0;d<t.length;d++)p=p.concat(u({array:t,arrayIndex:d,value:t[d],valueSpec:c,style:a,styleSpec:s,key:l+"["+d+"]"}));return p}},{"../error/validation_error":85,"../util/get_type":103,"./validate":108}],110:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,i=r(t);return"boolean"!==i?[new o(n,t,"boolean expected, %s found",i)]:[]}},{"../error/validation_error":85,"../util/get_type":103}],111:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,a=o(n);return"string"!==a?[new r(t,n,"color expected, %s found",a)]:null===i(n)?[new r(t,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":85,"../util/get_type":103,csscolorparser:90}],112:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type");t.exports=function(e){var t=e.key,n=e.value,i=e.styleSpec;if(i.$version>7)return n?[new r(t,n,"constants have been deprecated as of v8")]:[];var a=o(n);if("object"!==a)return[new r(t,n,"object expected, %s found",a)];var s=[];for(var l in n)"@"!==l[0]&&s.push(new r(t+"."+l,n[l],'constants must start with "@"'));return s}},{"../error/validation_error":85,"../util/get_type":103}],113:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,i=e.valueSpec,a=[];return Array.isArray(i.values)?i.values.indexOf(o(n))===-1&&a.push(new r(t,n,"expected one of [%s], %s found",i.values.join(", "),n)):Object.keys(i.values).indexOf(o(n))===-1&&a.push(new r(t,n,"expected one of [%s], %s found",Object.keys(i.values).join(", "),n)),a}},{"../error/validation_error":85,"../util/unbundle_jsonlint":107}],114:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("./validate_enum"),i=e("../util/get_type"),a=e("../util/unbundle_jsonlint");t.exports=function s(e){var t,n=e.value,l=e.key,u=e.styleSpec,c=[];if("array"!==i(n))return[new r(l,n,"array expected, %s found",i(n))];if(n.length<1)return[new r(l,n,"filter array must have at least 1 element")];switch(c=c.concat(o({key:l+"[0]",value:n[0],valueSpec:u.filter_operator,style:e.style,styleSpec:e.styleSpec})),a(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===a(n[1])&&c.push(new r(l,n,'"$type" cannot be use with operator "%s"',n[0]));case"==":case"!=":3!==n.length&&c.push(new r(l,n,'filter array for operator "%s" must have 3 elements',n[0]));case"in":case"starts-with":case"!in":n.length>=2&&(t=i(n[1]),"string"!==t&&c.push(new r(l+"[1]",n[1],"string expected, %s found",t)));for(var p=2;p<n.length;p++)t=i(n[p]),"$type"===a(n[1])?c=c.concat(o({key:l+"["+p+"]",value:n[p],valueSpec:u.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==t&&"number"!==t&&"boolean"!==t&&c.push(new r(l+"["+p+"]",n[p],"string, number, or boolean expected, %s found",t));break;case"any":case"all":case"none":for(var d=1;d<n.length;d++)c=c.concat(s({key:l+"["+d+"]",value:n[d],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":t=i(n[1]),2!==n.length?c.push(new r(l,n,'filter array for "%s" operator must have 2 elements',n[0])):"string"!==t&&c.push(new r(l+"[1]",n[1],"string expected, %s found",t))}return c}},{"../error/validation_error":85,"../util/get_type":103,"../util/unbundle_jsonlint":107,"./validate_enum":113}],115:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("./validate"),a=e("./validate_object"),s=e("./validate_array"),l=e("./validate_number"),u=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===y)return[new r(e.key,e.value,'identity function may not have a "stops" property')];var t=[],i=e.value;return t=t.concat(s({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===o(i)&&0===i.length&&t.push(new r(e.key,i,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,s=e.key;if("array"!==o(n))return[new r(s,n,"array expected, %s found",o(n))];if(2!==n.length)return[new r(s,n,"array length %d expected, length %d found",2,n.length)];if(b){if(y&&y.indexOf("dragonfly")!==-1)return[new r(s,n,y+" cannot be zoom dependant")];if("object"!==o(n[0]))return[new r(s,n,"object expected, %s found",o(n[0]))];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value&&(!y||y.indexOf("dragonfly")===-1))return[new r(s,n,"object stop key must have value")];if(h&&h>u(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];u(n[0].zoom)!==h&&(h=u(n[0].zoom),f=void 0,v={}),t=t.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:l,value:c}}))}else t=t.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec}));return t.concat(i({key:s+"[1]",value:n[1],valueSpec:m,style:e.style,styleSpec:e.styleSpec}))}function c(e){var t=o(e.value),n=u(e.value);if(d){if(t!==d&&"dragonfly-interval"!==y&&"dragonfly-categorical"!==y)return[new r(e.key,e.value,"%s stop domain type must match previous stop domain type %s",t,d)]}else d=t;if("number"!==t&&"string"!==t&&"boolean"!==t&&"dragonfly-interval"!==y&&"dragonfly-categorical"!==y)return[new r(e.key,e.value,"stop domain value must be a number, string, or boolean")];if("number"!==t&&"categorical"!==y&&"dragonfly-interval"!==y&&"dragonfly-categorical"!==y){var i="number expected, %s found";return m["property-function"]&&void 0===y&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(e.key,e.value,i,t)]}return"string"===t&&"insufficient"!==n&&"dragonfly-interval"===y?[new r(e.key,e.value,'property value must be a number, "insufficient" or undefined')]:"number"!==t&&"undefined"!==t&&"string"!==t&&"dragonfly-interval"===y?[new r(e.key,e.value,'property value must be a number, "insufficient" or undefined')]:"categorical"!==y||"number"!==t||isFinite(n)&&Math.floor(n)===n?"number"===t&&void 0!==f&&n<f?[new r(e.key,e.value,"stop domain values must appear in ascending order")]:(f=n,"categorical"===y&&n in v?[new r(e.key,e.value,"stop domain values must be unique")]:(v[n]=!0,[])):[new r(e.key,e.value,"integer expected, found %s",n)]}function p(e){return i({key:e.key,value:e.value,valueSpec:m,style:e.style,styleSpec:e.styleSpec})}var d,f,h,m=e.valueSpec,y=u(e.value.type),v={},g="categorical"!==y&&void 0===e.value.property,_=!g,b="array"===o(e.value.stops)&&"array"===o(e.value.stops[0])&&"object"===o(e.value.stops[0][0]),x=a({key:e.key,value:e.value,valueSpec:e.styleSpec["function"],style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,"default":p}});return"identity"===y&&g&&x.push(new r(e.key,e.value,'missing required property "property"')),"identity"===y||e.value.stops||x.push(new r(e.key,e.value,'missing required property "stops"')),"exponential"===y&&"piecewise-constant"===e.valueSpec["function"]&&x.push(new r(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?x.push(new r(e.key,e.value,"property functions not supported")):g&&!e.valueSpec["zoom-function"]&&x.push(new r(e.key,e.value,"zoom functions not supported"))),"categorical"!==y&&!b||void 0!==e.value.property||x.push(new r(e.key,e.value,'"property" property is required')),x}},{"../error/validation_error":85,"../util/get_type":103,"../util/unbundle_jsonlint":107,"./validate":108,"./validate_array":109,"./validate_number":120,"./validate_object":121}],116:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,i=o(e);return i.length?i:(t.indexOf("{fontstack}")===-1&&i.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&i.push(new r(n,t,'"glyphs" url must include a "{range}" token')),i)}},{"../error/validation_error":85,"./validate_string":125}],117:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/unbundle_jsonlint"),i=e("./validate_object"),a=e("./validate_filter"),s=e("./validate_paint_property"),l=e("./validate_layout_property"),u=e("../util/extend");t.exports=function(e){var t=[],n=e.value,c=e.key,p=e.style,d=e.styleSpec;n.type||n.ref||t.push(new r(c,n,'either "type" or "ref" is required'));var f=o(n.type),h=o(n.ref);if(n.id)for(var m=o(n.id),y=0;y<e.arrayIndex;y++){var v=p.layers[y];o(v.id)===m&&t.push(new r(c,n.id,'duplicate layer id "%s", previously used at line %d',n.id,v.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(c,n[e],'"%s" is prohibited for ref layers',e))});var g;p.layers.forEach(function(e){o(e.id)===h&&(g=e)}),g?g.ref?t.push(new r(c,n.ref,"ref cannot reference another ref layer")):f=o(g.type):t.push(new r(c,n.ref,'ref layer "%s" not found',h))}else if("background"!==f)if(n.source){var _=p.sources&&p.sources[n.source],b=_&&o(_.type);_?"vector"===b&&"raster"===f?t.push(new r(c,n.source,'layer "%s" requires a raster source',n.id)):"raster"===b&&"raster"!==f?t.push(new r(c,n.source,'layer "%s" requires a vector source',n.id)):"vector"!==b||n["source-layer"]||t.push(new r(c,n,'layer "%s" must specify a "source-layer"',n.id)):t.push(new r(c,n.source,'source "%s" not found',n.source))}else t.push(new r(c,n,'missing required property "source"'));return t=t.concat(i({key:c,value:n,valueSpec:d.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(e){return i({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return l(u({layerType:f},e))}}})},paint:function(e){return i({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(u({layerType:f},e))}}})}}}))}},{"../error/validation_error":85,"../util/extend":102,"../util/unbundle_jsonlint":107,"./validate_filter":114,"./validate_layout_property":118,"./validate_object":121,"./validate_paint_property":122}],118:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"layout")}},{"./validate_property":123}],119:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("./validate");t.exports=function(e){var t=e.value,n=e.styleSpec,a=n.light,s=e.style,l=[],u=o(t);if(void 0===t)return l;if("object"!==u)return l=l.concat([new r("light",t,"object expected, %s found",u)]);for(var c in t){var p=c.match(/^(.*)-transition$/);l=p&&a[p[1]]&&a[p[1]].transition?l.concat(i({key:c,value:t[c],valueSpec:n.transition,style:s,styleSpec:n})):a[c]?l.concat(i({key:c,value:t[c],valueSpec:a[c],style:s,styleSpec:n})):l.concat([new r(c,t[c],'unknown property "%s"',c)])}return l}},{"../error/validation_error":85,"../util/get_type":103,"./validate":108}],120:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,i=e.valueSpec,a=r(n);return"number"!==a?[new o(t,n,"number expected, %s found",a)]:"minimum"in i&&n<i.minimum?[new o(t,n,"%s is less than the minimum value %s",n,i.minimum)]:"maximum"in i&&n>i.maximum?[new o(t,n,"%s is greater than the maximum value %s",n,i.maximum)]:[]}},{"../error/validation_error":85,"../util/get_type":103}],121:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/get_type"),i=e("./validate");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},l=e.style,u=e.styleSpec,c=[],p=o(n);if("object"!==p)return[new r(t,n,"object expected, %s found",p)];for(var d in n){var f=d.split(".")[0],h=a[f]||a["*"],m=void 0;if(s[f])m=s[f];else if(a[f])m=i;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new r(t,n[d],'unknown property "%s"',d));continue}m=i}c=c.concat(m({key:(t?t+".":t)+d,value:n[d],valueSpec:h,style:l,styleSpec:u,object:n,objectKey:d}))}for(var y in a)a[y].required&&void 0===a[y]["default"]&&void 0===n[y]&&c.push(new r(t,n,'missing required property "%s"',y));return c}},{"../error/validation_error":85,"../util/get_type":103,"./validate":108}],122:[function(e,t,n){"use strict";var r=e("./validate_property");t.exports=function(e){return r(e,"paint")}},{"./validate_property":123}],123:[function(e,t,n){"use strict";var r=e("./validate"),o=e("../error/validation_error"),i=e("../util/get_type");t.exports=function(e,t){var n=e.key,a=e.style,s=e.styleSpec,l=e.value,u=e.objectKey,c=s[t+"_"+e.layerType];if(!c)return[];var p=u.match(/^(.*)-transition$/);if("paint"===t&&p&&c[p[1]]&&c[p[1]].transition)return r({key:n,value:l,valueSpec:s.transition,style:a,styleSpec:s});var d=e.valueSpec||c[u];if(!d)return[new o(n,l,'unknown property "%s"',u)];var f;if("string"===i(l)&&d["property-function"]&&!d.tokens&&(f=/^{([^}]+)}$/.exec(l)))return[new o(n,l,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',u,JSON.stringify(f[1]))];var h=[];return"symbol"===e.layerType&&"text-field"===u&&a&&!a.glyphs&&h.push(new o(n,l,'use of "text-field" requires a style "glyphs" property')),h.concat(r({key:e.key,value:l,valueSpec:d,style:a,styleSpec:s}))}},{"../error/validation_error":85,"../util/get_type":103,"./validate":108}],124:[function(e,t,n){"use strict";var r=e("../error/validation_error"),o=e("../util/unbundle_jsonlint"),i=e("./validate_object"),a=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,s=e.styleSpec,l=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var u=o(t.type),c=[];switch(u){case"vector":case"raster":if(c=c.concat(i({key:n,value:t,valueSpec:s.source_tile,style:e.style,styleSpec:s})),"url"in t)for(var p in t)["type","url","tileSize"].indexOf(p)<0&&c.push(new r(n+"."+p,t[p],'a source with a "url" property may not include a "%s" property',p));return c;case"geojson":return i({key:n,value:t,valueSpec:s.source_geojson,style:l,styleSpec:s});case"video":return i({key:n,value:t,valueSpec:s.source_video,style:l,styleSpec:s});case"image":return i({key:n,value:t,valueSpec:s.source_image,style:l,styleSpec:s});case"canvas":return i({key:n,value:t,valueSpec:s.source_canvas,style:l,styleSpec:s});default:return a({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:l,styleSpec:s})}}},{"../error/validation_error":85,"../util/unbundle_jsonlint":107,"./validate_enum":113,"./validate_object":121}],125:[function(e,t,n){"use strict";var r=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,i=r(t);return("number"!==i||n.indexOf("bubble-outline-width")===-1&&n.indexOf("bubble-radius")===-1)&&"string"!==i?[new o(n,t,"string expected, %s found",i)]:[]}},{"../error/validation_error":85,"../util/get_type":103}],126:[function(e,t,n){"use strict";function r(e,t){t=t||l;var n=[];return n=n.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:u,"*":function(){return[]}}})),t.$version>7&&e.constants&&(n=n.concat(a({key:"constants",value:e.constants,style:e,styleSpec:t}))),o(n)}function o(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function i(e){return function(){return o(e.apply(this,arguments))}}var a=e("./validate/validate_constants"),s=e("./validate/validate"),l=e("./reference/latest"),u=e("./validate/validate_glyphs_url");r.source=i(e("./validate/validate_source")),r.light=i(e("./validate/validate_light")),r.layer=i(e("./validate/validate_layer")),r.filter=i(e("./validate/validate_filter")),r.paintProperty=i(e("./validate/validate_paint_property")),r.layoutProperty=i(e("./validate/validate_layout_property")),t.exports=r},{"./reference/latest":100,"./validate/validate":108,"./validate/validate_constants":112,"./validate/validate_filter":114,"./validate/validate_glyphs_url":116,"./validate/validate_layer":117,"./validate/validate_layout_property":118,"./validate/validate_light":119,"./validate/validate_paint_property":122,"./validate/validate_source":124}],127:[function(e,t,n){"use strict";var r=function(){this.n=0,this.times=[]};r.prototype.stopped=function(){return this.times=this.times.filter(function(e){return e.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(e){return this.times.push({id:this.n,time:e+(new Date).getTime()}),this.n++},r.prototype.cancel=function(e){this.times=this.times.filter(function(t){return t.id!==e})},t.exports=r},{}],128:[function(e,t,n){"use strict";var r=e("../style-spec/reference/latest"),o=e("../style-spec/util/parse_color");t.exports=function(e){return{_featuresStyles:{features:[],styles:[]},getFeaturesStyles:function(){return this._featuresStyles},setFeaturesStyles:function(t,n){if(!t)throw"No features passed";if(!n)throw"No styles passed";if(t.length!==n.length)throw"Each feature needs a style";for(var i=[],a=0;a<n.length;a++){var s=t[a],l=n[a],u={},c=s.layer.type,p=r["paint_"+c];for(var d in p)if(p.hasOwnProperty(d)){var f=void 0;void 0!==l[d]&&(f=l[d]),void 0!==f&&("color"===p[d].type&&(f=o(f)),u[d]=f)}i.push(u)}this._featuresStyles={features:t,styles:i},e._update()},clearFeaturesStyles:function(){this._featuresStyles={features:[],styles:[]},e._update()}}}},{"../style-spec/reference/latest":100,"../style-spec/util/parse_color":105}],129:[function(e,t,n){"use strict";var r=e("../style/style_layer");t.exports=function(e){return{_maskLayers:{},getMaskLayers:function(){return this._maskLayers},addLayerMask:function(t,n,o,i){this._maskLayers[n]=this._maskLayers[n]||[];var a=e.style,s=r.create(o);s.metadata["mask-id"]=i.id;var l=Object.keys(i.paint),u=a.stylesheet?a.stylesheet.transition:{};for(var c in l){var p=l[c];s.setPaintProperty(p,i.paint[p]),s.updatePaintTransition(p,[],{transition:!0},u||{},a.animationLoop,a.zoomHistory)}s.isMask=!0,this._maskLayers[n].push(s)},removeLayerMask:function(e,t){this._maskLayers[t]&&(this._maskLayers[t]=this._maskLayers[t].filter(function(t){return t.id!==e}))},updateLayerMaskPaintProperty:function(t,n,r,o,i){for(var a=this,s=0;s<this._maskLayers[n].length;s++){var l=a._maskLayers[n][s];if(l.id===t&&l.metadata["mask-id"]===r){var u=e.style,c=u.stylesheet?u.stylesheet.transition:{};l.setPaintProperty(o,i),l.updatePaintTransition(o,[],{transition:!0},c||{},u.animationLoop,u.zoomHistory);break}}},clearMaskLayers:function(){this._maskLayers={}}}}},{"../style/style_layer":134}],130:[function(e,t,n){"use strict";var r=e("../util/evented"),o=e("../util/ajax"),i=e("../util/browser"),a=e("../util/mapbox").normalizeSpriteURL,s=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.pixelRatio=1,this.sdf=!1},l=function(e){function t(t,n){var r=this;e.call(this),this.base=t,this.retina=i.devicePixelRatio>1,this.setEventedParent(n);var s=this.retina?"@2x":"";o.getJSON(a(t,s,".json"),function(e,t){return e?void r.fire("error",{error:e}):(r.data=t,void(r.imgData&&r.fire("data",{dataType:"style"})))}),o.getImage(a(t,s,".png"),function(e,t){return e?void r.fire("error",{error:e}):(r.imgData=i.getImageData(t),r.width=t.width,void(r.data&&r.fire("data",{dataType:"style"})))})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toJSON=function(){return this.base},t.prototype.loaded=function(){return!(!this.data||!this.imgData)},t.prototype.resize=function(){var e=this;if(i.devicePixelRatio>1!==this.retina){var n=new t(this.base);n.on("data",function(){e.data=n.data,e.imgData=n.imgData,e.width=n.width,e.retina=n.retina})}},t.prototype.getSpritePosition=function(e){if(!this.loaded())return new s;var t=this.data&&this.data[e];return t&&this.imgData?t:new s},t}(r);t.exports=l},{"../util/ajax":181,"../util/browser":182,"../util/evented":191,"../util/mapbox":199}],131:[function(e,t,n){"use strict";var r=e("../style-spec/reference/latest"),o=e("../util/util"),i=e("../util/evented"),a=e("./validate_style"),s=e("./style_declaration"),l=e("./style_transition"),u="-transition",c=function(e){function t(t){e.call(this),this.properties=["anchor","color","position","intensity"],this._specifications=r.light,this.set(t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){var t=this;if(!this._validate(a.light,e)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},e=o.extend({anchor:this._specifications.anchor["default"],color:this._specifications.color["default"],position:this._specifications.position["default"],intensity:this._specifications.intensity["default"]},e);for(var n=0,r=t.properties;n<r.length;n+=1){var i=r[n];t._declarations[i]=new s(t._specifications[i],e[i])}return this}},t.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},t.prototype.getLightProperty=function(e){return o.endsWith(e,u)?this._transitionOptions[e]:this._declarations[e]&&this._declarations[e].value},t.prototype.getLightValue=function(e,t){if("position"===e){var n=this._transitions[e].calculate(t),r=o.sphericalToCartesian(n);return{x:r[0],y:r[1],z:r[2]}}return this._transitions[e].calculate(t)},t.prototype.setLight=function(e){var t=this;if(!this._validate(a.light,e))for(var n in e){var r=e[n];o.endsWith(n,u)?t._transitionOptions[n]=r:null===r||void 0===r?delete t._declarations[n]:t._declarations[n]=new s(t._specifications[n],r)}},t.prototype.recalculate=function(e){var t=this;for(var n in t._declarations)t.calculated[n]=t.getLightValue(n,{zoom:e})},t.prototype._applyLightDeclaration=function(e,t,n,r,i){var a=n.transition?this._transitions[e]:void 0,c=this._specifications[e];if(null!==t&&void 0!==t||(t=new s(c,c["default"])),!a||a.declaration.json!==t.json){var p=o.extend({duration:300,delay:0},r,this.getLightProperty(e+u)),d=this._transitions[e]=new l(c,t,a,p);d.instant()||(d.loopID=i.set(d.endTime-Date.now())),a&&i.cancel(a.loopID)}},t.prototype.updateLightTransitions=function(e,t,n){var r,o=this;for(r in o._declarations)o._applyLightDeclaration(r,o._declarations[r],e,t,n)},t.prototype._validate=function(e,t){return a.emitErrors(this,e.call(a,o.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(i);t.exports=c},{"../style-spec/reference/latest":100,"../util/evented":191,"../util/util":204,"./style_declaration":133,"./style_transition":143,"./validate_style":144}],132:[function(e,t,n){"use strict";var r=e("../util/evented"),o=e("./style_layer"),i=e("./image_sprite"),a=e("./light"),s=e("../symbol/glyph_source"),l=e("../symbol/sprite_atlas"),u=e("../render/line_atlas"),c=e("../util/util"),p=e("../util/ajax"),d=e("../util/mapbox"),f=e("../util/browser"),h=e("../util/dispatcher"),m=e("./animation_loop"),y=e("./validate_style"),v=e("../source/source"),g=e("../source/query_features"),_=e("../source/source_cache"),b=e("../style-spec/reference/latest"),x=e("../style-spec/function"),w=e("../util/global_worker_pool"),E=e("../style-spec/deref"),k=e("../source/dotdensity_handler"),C=e("../style-spec/diff"),S=e("../source/rtl_text_plugin"),P=c.pick(C.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),O=c.pick(C.operations,["setCenter","setZoom","setBearing","setPitch"]),M=function(e){function t(t,n,r){var o=this;e.call(this),this.map=n,this.animationLoop=n&&n.animationLoop||new m,this.dispatcher=new h(w(),this),this.spriteAtlas=new l(1024,1024),this.spriteAtlas.setEventedParent(this),this.lineAtlas=new u(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,c.bindAll(["_redoPlacement"],this),this._resetUpdates(),r=c.extend({validate:"string"!=typeof t||!d.isMapboxURL(t)},r),this.setEventedParent(n),this.fire("dataloading",{dataType:"style"});var a=this;this._rtlTextPluginCallback=S.registerForPluginAvailability(function(e){a.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in a.sourceCaches)a.sourceCaches[t].reload()});var v=function(e,t){if(e)return void o.fire("error",{error:e});if(!r.validate||!y.emitErrors(o,y(t,b))){o._loaded=!0,o.stylesheet=t,o.updateClasses();for(var n in t.sources)o.addSource(n,t.sources[n],r);t.sprite&&(o.sprite=new i(t.sprite,o)),o.glyphSource=new s(t.glyphs),o._resolve(),o.fire("data",{dataType:"style"}),o.fire("style.load")}};"string"==typeof t?p.getJSON(d.normalizeStyleURL(t),v):f.frame(v.bind(this,null,t)),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=o.sourceCaches[e.sourceId].getSource();if(t&&t.vectorLayerIds)for(var n in o._layers){var r=o._layers[n];r.source===t.id&&o._validateLayer(r)}}})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(e.sourceLayer&&t){var n=t.getSource();("geojson"===n.type||n.vectorLayerIds&&n.vectorLayerIds.indexOf(e.sourceLayer)===-1)&&this.fire("error",{error:new Error('Source layer "'+e.sourceLayer+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')})}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},t.prototype._resolve=function(){var e=this,t=E(this.stylesheet.layers);this._order=t.map(function(e){return e.id}),this._layers={};for(var n=0,r=t;n<r.length;n+=1){var i=r[n];i=o.create(i),i.setEventedParent(e,{layer:{id:i.id}}),e._layers[i.id]=i}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new a(this.stylesheet.light)},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype._applyClasses=function(e,t){var n=this;if(this._loaded){e=e||[],t=t||{transition:!0};var r=this.stylesheet.transition||{},o=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var i in o){var a=n._layers[i],s=n._updatedPaintProps[i];if(n._updatedAllPaintProps||s.all)a.updatePaintTransitions(e,t,r,n.animationLoop,n.zoomHistory);else for(var l in s)n._layers[i].updatePaintTransition(l,e,t,r,n.animationLoop,n.zoomHistory)}this.light.updateLightTransitions(t,r,this.animationLoop)}},t.prototype._recalculate=function(e){var t=this;if(this._loaded){for(var n in t.sourceCaches)t.sourceCaches[n].used=!1;this._updateZoomHistory(e);for(var r=0,o=t._order;r<o.length;r+=1){var i=o[r],a=t._layers[i];a.recalculate(e),!a.isHidden(e)&&a.source&&t.sourceCaches[a.source]&&(t.sourceCaches[a.source].used=!0)}this.light.recalculate(e);var s=300;Math.floor(this.z)!==Math.floor(e)&&this.animationLoop.set(s),this.z=e}},t.prototype._updateZoomHistory=function(e){var t=this.zoomHistory;void 0===t.lastIntegerZoom&&(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=0,t.lastZoom=e),Math.floor(t.lastZoom)<Math.floor(e)?(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)>Math.floor(e)&&(t.lastIntegerZoom=Math.floor(e+1),t.lastIntegerZoomTime=Date.now()),t.lastZoom=e},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e,t){var n=this;if(this._changed){var r=Object.keys(this._updatedLayers),o=Object.keys(this._removedLayers);(r.length||o.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(r,o);for(var i in n._updatedSources){var a=n._updatedSources[i];"reload"===a?n._reloadSource(i):"clear"===a&&n._clearSource(i)}this._applyClasses(e,t),this._resetUpdates(),this.fire("data",{dataType:"style"})}},t.prototype._updateWorkerLayers=function(e,t){var n=this,r=this._updatedSymbolOrder?this._order.filter(function(e){return"symbol"===n._layers[e].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t,symbolOrder:r})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),y.emitErrors(this,y(e,b)))return!1;e=c.extend({},e),e.layers=E(e.layers);var n=C(this.serialize(),e).filter(function(e){return!(e.command in O)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in P)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addSource=function(e,t,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t)+".");
var o=["vector","raster","geojson","video","image","canvas"],i=o.indexOf(t.type)>=0;if(!i||!this._validate(y.source,"sources."+e,t,null,n)){var a=this.sourceCaches[e]=new _(e,t,this.dispatcher);a.style=this,a.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:a.serialize(),sourceId:e}}),a.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){if(this._checkLoaded(),this.sourceRemove(e),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");var t=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],t.setEventedParent(null),t.clearTiles(),t.onRemove&&t.onRemove(this.map),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,n){this._checkLoaded();var r=void 0!==e.ref?E([e,this.getLayer(e.ref).serialize()])[0]:e,i=r.id;if("object"==typeof e.source&&(this.addSource(i,e.source),e=c.extend(e,{source:i})),!this._validate(y.layer,"layers."+i,r,{arrayIndex:-1},n)){var a=o.create(r);this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}});var s=t?this._order.indexOf(t):this._order.length;if(this._order.splice(s,0,i),this._layers[i]=a,this._removedLayers[i]&&a.source){var l=this._removedLayers[i];delete this._removedLayers[i],this._updatedSources[a.source]=l.type!==a.type?"clear":"reload"}this._updateLayer(a),"symbol"===a.type&&(this._updatedSymbolOrder=!0),this.updateClasses(i)}},t.prototype.moveLayer=function(e,t){this._checkLoaded(),this._changed=!0;var n=this._layers[e];if(!n)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var r=this._order.indexOf(e);this._order.splice(r,1);var o=t?this._order.indexOf(t):this._order.length;this._order.splice(o,0,e),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload"))},t.prototype.removeLayer=function(e){this._checkLoaded(),this.layerRemove(e);var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),"symbol"===t.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);return r?void(r.minzoom===t&&r.maxzoom===n||(this.layerRemove(e),null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")})},t.prototype.setFilter=function(e,t){this._checkLoaded();var n=this.getLayer(e);return n?void(null!==t&&void 0!==t&&this._validate(y.filter,"layers."+n.id+".filter",t)||c.deepEqual(n.filter,t)||(n.filter=c.clone(t),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,n){var r=this;this._checkLoaded();var o=this.getLayer(e);if(!o)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(o.getLayoutProperty(t),n)){"visibility"===t&&"none"===n&&this.layerRemove(e);var i=this._layers;for(var a in i)i.hasOwnProperty(a)&&i[a].sourceLayer===o.sourceLayer&&"dotdensity"===i[a].type&&r.layerRemove(e);o.setLayoutProperty(t,n),this._updateLayer(o)}},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,n,r){this._checkLoaded();var o=this.getLayer(e);if(!o)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(o.getPaintProperty(t,r),n)){var i=o.isPaintValueFeatureConstant(t),a=o.getPaintProperty(t),s=o.isPaintValueZoomConstant(t);o.setPaintProperty(t,n,r);var l=!(n&&x.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property);l!==i?this._updateLayer(o):l||(a&&n&&a.type===n.type?"dragonfly-interval"!==n.type&&"dragonfly-categorical"!==n.type?this._updateLayer(o):s===o.isPaintValueZoomConstant(t)&&a.property===n.property||this._updateLayer(o):this._updateLayer(o)),this.updateClasses(e,t)}},t.prototype.getPaintProperty=function(e,t,n){return this.getLayer(e).getPaintProperty(t,n)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.updateClasses=function(e,t){if(this._changed=!0,e){var n=this._updatedPaintProps;n[e]||(n[e]={}),n[e][t||"all"]=!0}else this._updatedAllPaintProps=!0},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload"),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,n=[],r=this._order.length-1;r>=0;r--)for(var o=t._order[r],i=0,a=e;i<a.length;i+=1){var s=a[i],l=s[o];if(l)for(var u=0,c=l;u<c.length;u+=1){var p=c[u];n.push(p)}}return n},t.prototype.queryRenderedFeatures=function(e,t,n,r){var o=this;t&&t.filter&&this._validate(y.filter,"queryRenderedFeatures.filter",t.filter);var i={};if(t&&t.layers){if(!Array.isArray(t.layers))return void this.fire("error",{error:"parameters.layers must be an Array."});for(var a=0,s=t.layers;a<s.length;a+=1){var l=s[a],u=o._layers[l];if(!u)return void o.fire("error",{error:"The layer '"+l+"' does not exist in the map's style and cannot be queried for features."});i[u.source]=!0}}var c=[];for(var p in o.sourceCaches)if(!t.layers||i[p]){var d=g.rendered(o.sourceCaches[p],o._layers,e,t,n,r);c.push(d)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(y.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?g.source(n,t):[]},t.prototype.addSourceType=function(e,t,n){return v.getType(e)?n(new Error('A source type called "'+e+'" already exists.')):(v.setType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e,t){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var o in e)if(!c.deepEqual(e[o],n[o])){r=!0;break}if(r){var i=this.stylesheet.transition||{};this.light.setLight(e),this.light.updateLightTransitions(t||{transition:!0},i,this.animationLoop)}},t.prototype._validate=function(e,t,n,r,o){return(!o||o.validate!==!1)&&y.emitErrors(this,e.call(y,c.extend({key:t,style:this.serialize(),value:n,styleSpec:b},r)))},t.prototype._remove=function(){var e=this;S.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var n in t.sourceCaches)t.sourceCaches[n].update(e)},t.prototype._redoPlacement=function(){var e=this;for(var t in e.sourceCaches)e.sourceCaches[t].redoPlacement()},t.prototype.getIcons=function(e,t,n){var r=this,o=function(){r.spriteAtlas.setSprite(r.sprite),r.spriteAtlas.addIcons(t.icons,n)};!this.sprite||this.sprite.loaded()?o():this.sprite.on("data",o)},t.prototype.getGlyphs=function(e,t,n){function r(e,t,r){e&&console.error(e),s[r]=t,a--,0===a&&n(null,s)}var o=this,i=t.stacks,a=Object.keys(i).length,s={};for(var l in i)o.glyphSource.getSimpleGlyphs(l,i[l],t.uid,r)},t.prototype.layerRemove=function(e){var t=this;if(k.allDots[this.dispatcher.id])for(var n in k.allDots[t.dispatcher.id])delete k.allDots[t.dispatcher.id][n].layers[e];if(k.tiles[this.dispatcher.id])for(var r in k.tiles[t.dispatcher.id])if(k.tiles[t.dispatcher.id][r])for(var o in k.tiles[t.dispatcher.id][r])delete k.tiles[t.dispatcher.id][r][o][e];this.dispatcher.broadcast("clearDotdensityLayer",{layerId:e},null)},t.prototype.sourceRemove=function(e){var t=this;if(k.allDots[this.dispatcher.id])for(var n in k.allDots[t.dispatcher.id])for(var r in k.allDots[t.dispatcher.id][n].layers)if(e===k.allDots[t.dispatcher.id][n].layers[r].source&&(delete k.allDots[t.dispatcher.id][n].layers[r],k.tiles[t.dispatcher.id]&&k.tiles[t.dispatcher.id][n]))for(var o in k.tiles[t.dispatcher.id][n])delete k.tiles[t.dispatcher.id][n][o][r];this.dispatcher.broadcast("clearDotdensityLayers",{source:e},null)},t}(r);t.exports=M},{"../render/line_atlas":55,"../source/dotdensity_handler":62,"../source/query_features":70,"../source/rtl_text_plugin":72,"../source/source":73,"../source/source_cache":74,"../style-spec/deref":83,"../style-spec/diff":84,"../style-spec/function":88,"../style-spec/reference/latest":100,"../symbol/glyph_source":153,"../symbol/sprite_atlas":157,"../util/ajax":181,"../util/browser":182,"../util/dispatcher":188,"../util/evented":191,"../util/global_worker_pool":193,"../util/mapbox":199,"../util/util":204,"./animation_loop":127,"./image_sprite":130,"./light":131,"./style_layer":134,"./validate_style":144}],133:[function(e,t,n){"use strict";var r=e("../style-spec/function"),o=e("../util/util"),i=function(e,t){var n=this;if(this.value=o.clone(t),this.isFunction=r.isFunctionDefinition(t),this.json=JSON.stringify(this.value),this.minimum=e.minimum,this["function"]=r(this.value,e),this.isFeatureConstant=this["function"].isFeatureConstant,this.isZoomConstant=this["function"].isZoomConstant,this.isFeatureConstant||this.isZoomConstant){if(!this.isZoomConstant){this.stopZoomLevels=[];for(var i=0,a=n.value.stops;i<a.length;i+=1){var s=a[i];n.stopZoomLevels.indexOf(s[0])<0&&n.stopZoomLevels.push(s[0])}}}else{this.stopZoomLevels=[];for(var l=[],u=0,c=n.value.stops;u<c.length;u+=1){var p=c[u],d=p[0].zoom;n.stopZoomLevels.indexOf(d)<0&&(n.stopZoomLevels.push(d),l.push([d,l.length]))}this._functionInterpolationT=r({type:"exponential",stops:l,base:t.base},{type:"number"})}};i.prototype.calculate=function(e,t){var n=this["function"](e&&e.zoom,t||{});return void 0!==this.minimum&&n<this.minimum?this.minimum:n},i.prototype.calculateInterpolationT=function(e){return this.isFeatureConstant||this.isZoomConstant?0:this._functionInterpolationT(e&&e.zoom,{})},t.exports=i},{"../style-spec/function":88,"../util/util":204}],134:[function(e,t,n){"use strict";function r(e){return e.value}var o=e("../util/util"),i=e("./style_transition"),a=e("./style_declaration"),s=e("../style-spec/reference/latest"),l=e("./validate_style"),u=e("../style-spec/util/parse_color"),c=e("../util/evented"),p="-transition",d=function(e){function t(t){var n=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.source=t.source,this.sourceLayer=t["source-layer"],this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.filter=t.filter,this.autoSource=t["auto-source"],this.paint={},this.layout={},this._paintSpecifications=s["paint_"+this.type],this._layoutSpecifications=s["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var r,o,i={validate:!1};for(var a in t){var l=a.match(/^paint(?:\.(.*))?$/);if(l){var u=l[1]||"";for(r in t[a])n.setPaintProperty(r,t[a][r],u,i)}}for(o in t.layout)n.setLayoutProperty(o,t.layout[o],i);for(r in n._paintSpecifications)n.paint[r]=n.getPaintValue(r);for(o in n._layoutSpecifications)n._updateLayoutValue(o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setLayoutProperty=function(e,t,n){if(null==t)delete this._layoutDeclarations[e];else{var r="layers."+this.id+".layout."+e;if(this._validate(l.layoutProperty,r,e,t,n))return;this._layoutDeclarations[e]=new a(this._layoutSpecifications[e],t)}this._updateLayoutValue(e)},t.prototype.getLayoutProperty=function(e){return this._layoutDeclarations[e]&&this._layoutDeclarations[e].value},t.prototype.getLayoutValue=function(e,t,n){var r=this._layoutSpecifications[e],o=this._layoutDeclarations[e];return o?o.calculate(t,n):r["default"]},t.prototype.setPaintProperty=function(e,t,n,r){var i="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+e;if(o.endsWith(e,p))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===t||void 0===t)delete this._paintTransitionOptions[n||""][e];else{if(this._validate(l.paintProperty,i,e,t,r))return;this._paintTransitionOptions[n||""][e]=t}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null===t||void 0===t)delete this._paintDeclarations[n||""][e];else{if(this._validate(l.paintProperty,i,e,t,r))return;this._paintDeclarations[n||""][e]=new a(this._paintSpecifications[e],t)}},t.prototype.getPaintProperty=function(e,t){return t=t||"",o.endsWith(e,p)?this._paintTransitionOptions[t]&&this._paintTransitionOptions[t][e]:this._paintDeclarations[t]&&this._paintDeclarations[t][e]&&this._paintDeclarations[t][e].value},t.prototype.getPaintValue=function(e,t,n){var r=this._paintSpecifications[e],o=this._paintTransitions[e];return o?o.calculate(t,n):"color"===r.type&&r["default"]?u(r["default"]):r["default"]},t.prototype.getPaintValueStopZoomLevels=function(e){var t=this._paintTransitions[e];return t?t.declaration.stopZoomLevels:[]},t.prototype.getLayoutValueStopZoomLevels=function(e){var t=this._layoutDeclarations[e];return t?t.stopZoomLevels:[]},t.prototype.getPaintInterpolationT=function(e,t){var n=this._paintTransitions[e];return n.declaration.calculateInterpolationT(t)},t.prototype.getLayoutInterpolationT=function(e,t){var n=this._layoutDeclarations[e];return n.calculateInterpolationT(t)},t.prototype.isPaintValueFeatureConstant=function(e){var t=this._paintTransitions[e];return!t||t.declaration.isFeatureConstant},t.prototype.isLayoutValueFeatureConstant=function(e){var t=this._layoutDeclarations[e];return!t||t.isFeatureConstant},t.prototype.isPaintValueZoomConstant=function(e){var t=this._paintTransitions[e];return!t||t.declaration.isZoomConstant},t.prototype.isLayoutValueZoomConstant=function(e){var t=this._layoutDeclarations[e];return!t||t.isZoomConstant},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.layout.visibility},t.prototype.updatePaintTransitions=function(e,t,n,r,i){for(var a=this,s=o.extend({},this._paintDeclarations[""]),l=0;l<e.length;l++)o.extend(s,a._paintDeclarations[e[l]]);var u;for(u in s)a._applyPaintDeclaration(u,s[u],t,n,r,i);for(u in a._paintTransitions)u in s||a._applyPaintDeclaration(u,null,t,n,r,i)},t.prototype.updatePaintTransition=function(e,t,n,r,o,i){for(var a=this,s=this._paintDeclarations[""][e],l=0;l<t.length;l++){var u=a._paintDeclarations[t[l]];u&&u[e]&&(s=u[e])}this._applyPaintDeclaration(e,s,n,r,o,i)},t.prototype.recalculate=function(e){var t=this;for(var n in t._paintTransitions)t.paint[n]=t.getPaintValue(n,{zoom:e});for(var r in t._layoutFunctions)t.layout[r]=t.getLayoutValue(r,{zoom:e})},t.prototype.serialize=function(){var e=this,t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,"auto-source":this.autoSource,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:o.mapObject(this._layoutDeclarations,r)};for(var n in e._paintDeclarations){var i=""===n?"paint":"paint."+n;t[i]=o.mapObject(e._paintDeclarations[n],r)}return o.filterObject(t,function(e,t){return void 0!==e&&!("layout"===t&&!Object.keys(e).length)})},t.prototype._applyPaintDeclaration=function(e,t,n,r,s,l){var u=this._paintSpecifications[e],c=n.transition&&u.transition?this._paintTransitions[e]:void 0;if(null!==t&&void 0!==t||(t=new a(u,u["default"])),!c||c.declaration.json!==t.json){var d=o.extend({duration:300,delay:0},r,this.getPaintProperty(e+p)),f=this._paintTransitions[e]=new i(u,t,c,d,l);f.instant()||(f.loopID=s.set(f.endTime-Date.now())),c&&s.cancel(c.loopID)}},t.prototype._updateLayoutValue=function(e){var t=this._layoutDeclarations[e];t&&t.isFunction?this._layoutFunctions[e]=!0:(delete this._layoutFunctions[e],this.layout[e]=this.getLayoutValue(e))},t.prototype._validate=function(e,t,n,r,o){return(!o||o.validate!==!1)&&l.emitErrors(this,e.call(l,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:s,style:{glyphs:!0,sprite:!0}}))},t}(c);t.exports=d;var f={bubble:e("./style_layer/bubble_style_layer"),dotdensity:e("./style_layer/dotdensity_style_layer"),circle:e("./style_layer/circle_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer")};d.create=function(e){var t=f[e.type]||d;return new t(e)}},{"../style-spec/reference/latest":100,"../style-spec/util/parse_color":105,"../util/evented":191,"../util/util":204,"./style_declaration":133,"./style_layer/bubble_style_layer":135,"./style_layer/circle_style_layer":136,"./style_layer/dotdensity_style_layer":137,"./style_layer/fill_extrusion_style_layer":138,"./style_layer/fill_style_layer":139,"./style_layer/line_style_layer":140,"./style_layer/symbol_style_layer":141,"./style_transition":143,"./validate_style":144}],135:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/bubble_bucket"),i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=i},{"../../data/bucket/bubble_bucket":20,"../style_layer":134}],136:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/circle_bucket"),i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=i},{"../../data/bucket/circle_bucket":21,"../style_layer":134}],137:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/dotdensity_bucket"),i=function(e){function t(t){t.layout["dotdensity-seed"]=Math.random(),e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=i},{"../../data/bucket/dotdensity_bucket":22,"../style_layer":134}],138:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/fill_extrusion_bucket"),i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,n,r){var o=e.prototype.getPaintValue.call(this,t,n,r);return"fill-extrusion-color"===t&&o&&(o[3]=1),o},t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=i},{"../../data/bucket/fill_extrusion_bucket":24,"../style_layer":134}],139:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/fill_bucket"),i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,n,r){var o=this;if("fill-outline-color"===t){if(void 0===this.getPaintProperty("fill-outline-color"))return e.prototype.getPaintValue.call(this,"fill-color",n,r);for(var i=this._paintTransitions["fill-outline-color"];i;){var a=i&&i.declaration&&i.declaration.value;if(!a)return e.prototype.getPaintValue.call(o,"fill-color",n,r);i=i.oldTransition}}return e.prototype.getPaintValue.call(this,t,n,r)},t.prototype.getPaintValueStopZoomLevels=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):e.prototype.getPaintValueStopZoomLevels.call(this,t)},t.prototype.getPaintInterpolationT=function(t,n){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.getPaintInterpolationT.call(this,"fill-color",n):e.prototype.getPaintInterpolationT.call(this,t,n)},t.prototype.isPaintValueFeatureConstant=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):e.prototype.isPaintValueFeatureConstant.call(this,t)},t.prototype.isPaintValueZoomConstant=function(t){return"fill-outline-color"===t&&void 0===this.getPaintProperty("fill-outline-color")?e.prototype.isPaintValueZoomConstant.call(this,"fill-color"):e.prototype.isPaintValueZoomConstant.call(this,t)},t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=i},{"../../data/bucket/fill_bucket":23,"../style_layer":134}],140:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/line_bucket"),i=e("../../util/util"),a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getPaintValue=function(t,n,r){var o=e.prototype.getPaintValue.call(this,t,n,r);if(o&&"line-dasharray"===t){var a=this.getPaintValue("line-width",i.extend({},n,{zoom:Math.floor(n.zoom)}),r);o.fromScale*=a,o.toScale*=a}return o},t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=a},{"../../data/bucket/line_bucket":25,"../../util/util":204,"../style_layer":134}],141:[function(e,t,n){"use strict";var r=e("../style_layer"),o=e("../../data/bucket/symbol_bucket"),i=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutValue=function(t,n,r){var o=e.prototype.getLayoutValue.call(this,t,n,r);if("auto"!==o)return o;switch(t){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,r)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,r);default:return o}},t.prototype.createBucket=function(e){return new o(e)},t}(r);t.exports=i},{"../../data/bucket/symbol_bucket":26,"../style_layer":134}],142:[function(e,t,n){"use strict";var r=e("./style_layer"),o=e("../util/util"),i=e("../style-spec/feature_filter"),a=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){var t=this;this.symbolOrder=[];for(var n=0,r=e;n<r.length;n+=1){var o=r[n];"symbol"===o.type&&t.symbolOrder.push(o.id)}this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t,n){for(var s=this,l=0,u=e;l<u.length;l+=1){var c=u[l];s._layerConfigs[c.id]=c;var p=s._layers[c.id]=r.create(c);p.updatePaintTransitions({},{transition:!1}),p.filter=i(p.filter)}for(var d=0,f=t;d<f.length;d+=1){var h=f[d];delete s._layerConfigs[h],delete s._layers[h]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var m=a(o.values(this._layerConfigs)),y=function(){var e=g[v],t=e.map(function(e){return s._layers[e.id]}),n=t[0];if(!n.layout||"none"!==n.layout.visibility){var r=n.source||"",o=s.familiesBySource[r];if(o||(o=s.familiesBySource[r]={}),n.autoSource&&n.autoSource.length>0)n.autoSource.forEach(function(e){Array.isArray(e.filter)&&(e.filter=i(e.filter));var n=e["source-layer"],r=o[n];r||(r=o[n]=[]),r.push(t)});else{var a=n.sourceLayer||"_geojsonTileLayer",l=o[a];l||(l=o[a]=[]),l.push(t)}}},v=0,g=m;v<g.length;v+=1)y()},t.exports=s},{"../style-spec/feature_filter":86,"../style-spec/group_by_layout":89,"../util/util":204,"./style_layer":134}],143:[function(e,t,n){"use strict";function r(e,t,n){if(void 0!==e&&void 0!==t)return{from:e.to,fromScale:e.toScale,to:t.to,toScale:t.toScale,t:n}}var o=e("../util/util"),i=e("../style-spec/util/interpolate"),a={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},s=function(e,t,n,o,s){this.declaration=t,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=o.duration||0,this.delay=o.delay||0,this.zoomTransitioned="piecewise-constant"===e["function"]&&e.transition,this.interp=this.zoomTransitioned?r:i[e.type],t.isFeatureConstant||!t.value||"dragonfly-categorical"!==t.value.type&&"dragonfly-interval"!==t.value.type||(this.interp=i.array),this.zoomHistory=s||a,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};s.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},s.prototype.calculate=function(e,t,n){var r=this._calculateTargetValue(e,t);if(this.instant())return r;if(n=n||Date.now(),n>=this.endTime)return r;var i=this.oldTransition.calculate(e,t,this.startTime),a=o.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(i,r,a)},s.prototype._calculateTargetValue=function(e,t){if(!this.zoomTransitioned)return this.declaration.calculate(e,t);var n=e.zoom,r=this.zoomHistory.lastIntegerZoom,o=n>r?2:.5,a=this.declaration.calculate({zoom:n>r?n-1:n+1},t),s=this.declaration.calculate({zoom:n},t),l=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),u=Math.abs(n-r),c=i(l,1,u);return void 0!==a&&void 0!==s?{from:a,fromScale:o,to:s,toScale:1,t:c}:void 0},t.exports=s},{"../style-spec/util/interpolate":104,"../util/util":204}],144:[function(e,t,n){"use strict";t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){if(t=t.filter(function(e){return e.message.indexOf("string, number, or boolean expected")==-1}),t=t.filter(function(e){return e.message.indexOf('glyphs: "glyphs" url must include')==-1}),0==t.length)return!1;for(var n=0;n<t.length;n++)e.fire("error",{error:new Error(t[n].message)});return!0}return!1}},{"../style-spec/validate_style.min":126}],145:[function(e,t,n){"use strict";var r=e("point-geometry"),o=function(e){function t(t,n,r,o){e.call(this,t,n),this.angle=r,void 0!==o&&(this.segment=o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);t.exports=o},{"point-geometry":230}],146:[function(e,t,n){"use strict";function r(e,t,n,r,o){if(void 0===t.segment)return!0;for(var i=t,a=t.segment+1,s=0;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(i),i=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<n/2;){var c=e[a-1],p=e[a],d=e[a+1];if(!d)return!1;var f=c.angleTo(p)-p.angleTo(d);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>o)return!1;a++,s+=p.dist(d)}return!0}t.exports=r},{}],147:[function(e,t,n){"use strict";function r(e,t,n,r,i){for(var a=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],d=l[c+1];p.x<t&&d.x<t||(p.x<t?p=new o(t,p.y+(d.y-p.y)*((t-p.x)/(d.x-p.x)))._round():d.x<t&&(d=new o(t,p.y+(d.y-p.y)*((t-p.x)/(d.x-p.x)))._round()),p.y<n&&d.y<n||(p.y<n?p=new o(p.x+(d.x-p.x)*((n-p.y)/(d.y-p.y)),n)._round():d.y<n&&(d=new o(p.x+(d.x-p.x)*((n-p.y)/(d.y-p.y)),n)._round()),p.x>=r&&d.x>=r||(p.x>=r?p=new o(r,p.y+(d.y-p.y)*((r-p.x)/(d.x-p.x)))._round():d.x>=r&&(d=new o(r,p.y+(d.y-p.y)*((r-p.x)/(d.x-p.x)))._round()),p.y>=i&&d.y>=i||(p.y>=i?p=new o(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round():d.y>=i&&(d=new o(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(d)))))}return a}var o=e("point-geometry");t.exports=r},{"point-geometry":230}],148:[function(e,t,n){"use strict";var r=e("../util/struct_array"),o=e("point-geometry"),i=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(i.prototype.StructType.prototype,"anchorPoint",{get:function(){return new o(this.anchorPointX,this.anchorPointY)}}),t.exports=i},{"../util/struct_array":202,"point-geometry":230}],149:[function(e,t,n){"use strict";var r=function(e,t,n,r,o,i,a,s,l,u,c){var p=a.top*s-l,d=a.bottom*s+l,f=a.left*s-l,h=a.right*s+l;if(this.boxStartIndex=e.length,u){var m=d-p,y=h-f;if(m>0)if(m=Math.max(10*s,m),c){var v=t[n.segment+1].sub(t[n.segment])._unit()._mult(y),g=[n.sub(v),n.add(v)];this._addLineCollisionBoxes(e,g,n,0,y,m,r,o,i)}else this._addLineCollisionBoxes(e,t,n,n.segment,y,m,r,o,i)}else e.emplaceBack(n.x,n.y,f,p,h,d,1/0,r,o,i,0,0,0,0,0);this.boxEndIndex=e.length};r.prototype._addLineCollisionBoxes=function(e,t,n,r,o,i,a,s,l){var u=i/2,c=Math.floor(o/u),p=-i/2,d=this.boxes,f=n,h=r+1,m=p;do{if(h--,h<0)return d;m-=t[h].dist(f),f=t[h]}while(m>-o/2);for(var y=t[h].dist(t[h+1]),v=0;v<c;v++){for(var g=-o/2+v*u;m+y<g;){if(m+=y,h++,h+1>=t.length)return d;y=t[h].dist(t[h+1])}var _=g-m,b=t[h],x=t[h+1],w=x.sub(b)._unit()._mult(_)._add(b)._round(),E=Math.max(Math.abs(g-p)-u/2,0),k=o/2/E;e.emplaceBack(w.x,w.y,-i/2,-i/2,i/2,i/2,k,a,s,l,0,0,0,0,0)}return d},t.exports=r},{}],150:[function(e,t,n){"use strict";var r=e("point-geometry"),o=e("../data/extent"),i=e("grid-index"),a=e("../util/intersection_tests"),s=function(e,t,n){if("object"==typeof e){var r=e;n=t,e=r.angle,t=r.pitch,this.grid=new i(r.grid),this.ignoredGrid=new i(r.ignoredGrid)}else this.grid=new i(o,12,6),this.ignoredGrid=new i(o,12,0);this.minScale=.5,this.maxScale=2,this.angle=e,this.pitch=t;var a=Math.sin(e),s=Math.cos(e);if(this.rotationMatrix=[s,-a,a,s],this.reverseRotationMatrix=[s,a,-a,s],this.yStretch=1/Math.cos(t/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=n,0===n.length){n.emplaceBack();var l=32767;n.emplaceBack(0,0,0,-l,0,l,l,0,0,0,0,0,0,0,0,0),n.emplaceBack(o,0,0,-l,0,l,l,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-l,0,l,0,l,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,o,-l,0,l,0,l,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]};s.prototype.serialize=function(e){var t=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return e&&(e.push(t),e.push(n)),{angle:this.angle,pitch:this.pitch,grid:t,ignoredGrid:n}},s.prototype.placeCollisionFeature=function(e,t,n){for(var o=this,i=this.collisionBoxArray,a=this.minScale,s=this.rotationMatrix,l=this.yStretch,u=e.boxStartIndex;u<e.boxEndIndex;u++){var c=i.get(u),p=c.anchorPoint._matMult(s),d=p.x,f=p.y,h=d+c.x1,m=f+c.y1*l,y=d+c.x2,v=f+c.y2*l;if(c.bbox0=h,c.bbox1=m,c.bbox2=y,c.bbox3=v,!t)for(var g=o.grid.query(h,m,y,v),_=0;_<g.length;_++){var b=i.get(g[_]),x=b.anchorPoint._matMult(s);if(a=o.getPlacementScale(a,p,c,x,b),a>=o.maxScale)return a}if(n){var w=void 0;if(o.angle){var E=o.reverseRotationMatrix,k=new r(c.x1,c.y1).matMult(E),C=new r(c.x2,c.y1).matMult(E),S=new r(c.x1,c.y2).matMult(E),P=new r(c.x2,c.y2).matMult(E);w=o.tempCollisionBox,w.anchorPointX=c.anchorPoint.x,w.anchorPointY=c.anchorPoint.y,w.x1=Math.min(k.x,C.x,S.x,P.x),
w.y1=Math.min(k.y,C.x,S.x,P.x),w.x2=Math.max(k.x,C.x,S.x,P.x),w.y2=Math.max(k.y,C.x,S.x,P.x),w.maxScale=c.maxScale}else w=c;for(var O=0;O<this.edges.length;O++){var M=o.edges[O];if(a=o.getPlacementScale(a,c.anchorPoint,w,M.anchorPoint,M),a>=o.maxScale)return a}}}return a},s.prototype.queryRenderedSymbols=function(e,t){var n={},o=[];if(0===e.length||0===this.grid.length&&0===this.ignoredGrid.length)return o;for(var i=this.collisionBoxArray,s=this.rotationMatrix,l=this.yStretch,u=[],c=1/0,p=1/0,d=-(1/0),f=-(1/0),h=0;h<e.length;h++)for(var m=e[h],y=0;y<m.length;y++){var v=m[y].matMult(s);c=Math.min(c,v.x),p=Math.min(p,v.y),d=Math.max(d,v.x),f=Math.max(f,v.y),u.push(v)}for(var g=this.grid.query(c,p,d,f),_=this.ignoredGrid.query(c,p,d,f),b=0;b<_.length;b++)g.push(_[b]);for(var x=Math.pow(2,Math.ceil(Math.log(t)/Math.LN2*10)/10),w=0;w<g.length;w++){var E=i.get(g[w]),k=E.sourceLayerIndex,C=E.featureIndex;if(void 0===n[k]&&(n[k]={}),!n[k][C]&&!(x<E.placementScale||x>E.maxScale)){var S=E.anchorPoint.matMult(s),P=S.x+E.x1/t,O=S.y+E.y1/t*l,M=S.x+E.x2/t,D=S.y+E.y2/t*l,T=[new r(P,O),new r(M,O),new r(M,D),new r(P,D)];a.polygonIntersectsPolygon(u,T)&&(n[k][C]=!0,o.push(g[w]))}}return o},s.prototype.getPlacementScale=function(e,t,n,r,o){var i=t.x-r.x,a=t.y-r.y,s=(o.x1-n.x2)/i,l=(o.x2-n.x1)/i,u=(o.y1-n.y2)*this.yStretch/a,c=(o.y2-n.y1)*this.yStretch/a;(isNaN(s)||isNaN(l))&&(s=l=1),(isNaN(u)||isNaN(c))&&(u=c=1);var p=Math.min(Math.max(s,l),Math.max(u,c)),d=o.maxScale,f=n.maxScale;return p>d&&(p=d),p>f&&(p=f),p>e&&p>=o.placementScale&&(e=p),e},s.prototype.insertCollisionFeature=function(e,t,n){for(var r=this,o=n?this.ignoredGrid:this.grid,i=this.collisionBoxArray,a=e.boxStartIndex;a<e.boxEndIndex;a++){var s=i.get(a);s.placementScale=t,t<r.maxScale&&o.insert(a,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},t.exports=s},{"../data/extent":30,"../util/intersection_tests":195,"grid-index":219,"point-geometry":230}],151:[function(e,t,n){"use strict";function r(e,t,n,r,i,a,s,l,u){var c=r?.6*a*s:0,p=Math.max(r?r.right-r.left:0,i?i.right-i.left:0),d=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;t-p*s<t/4&&(t=p*s+t/4);var f=2*a,h=d?t/2*l%t:(p/2+f)*s*l%t;return o(e,h,t,c,n,p*s,d,!1,u)}function o(e,t,n,r,l,u,c,p,d){for(var f=u/2,h=0,m=0;m<e.length-1;m++)h+=e[m].dist(e[m+1]);for(var y=0,v=t-n,g=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),E=x.angleTo(b);v+n<y+w;){v+=n;var k=(v-y)/w,C=i(b.x,x.x,k),S=i(b.y,x.y,k);if(C>=0&&C<d&&S>=0&&S<d&&v-f>=0&&v+f<=h){var P=new a(C,S,E,_)._round();r&&!s(e,P,u,r,l)||g.push(P)}}y+=w}return p||g.length||c||(g=o(e,y/2,n,r,l,u,c,!0,d)),g}var i=e("../style-spec/util/interpolate"),a=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=r},{"../style-spec/util/interpolate":104,"../symbol/anchor":145,"./check_max_angle":146}],152:[function(e,t,n){"use strict";var r=e("@mapbox/shelf-pack"),o=e("../util/util"),i=4,a=128,s=2048,l=function(){this.width=a,this.height=a,this.atlas=new r(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)};l.prototype.getGlyphs=function(){var e,t,n,r=this,o={};for(var i in r.ids)e=i.split("#"),t=e[0],n=e[1],o[t]||(o[t]=[]),o[t].push(n);return o},l.prototype.getRects=function(){var e,t,n,r=this,o={};for(var i in r.ids)e=i.split("#"),t=e[0],n=e[1],o[t]||(o[t]={}),o[t][n]=r.index[i];return o},l.prototype.addGlyph=function(e,t,n,r){var i=this;if(!n)return null;var a=t+"#"+n.id;if(this.index[a])return this.ids[a].indexOf(e)<0&&this.ids[a].push(e),this.index[a];if(!n.bitmap)return null;var s=n.width+2*r,l=n.height+2*r,u=1,c=s+2*u,p=l+2*u;c+=4-c%4,p+=4-p%4;var d=this.atlas.packOne(c,p);if(d||(this.resize(),d=this.atlas.packOne(c,p)),!d)return o.warnOnce("glyph bitmap overflow"),null;this.index[a]=d,this.ids[a]=[e];for(var f=this.data,h=n.bitmap,m=0;m<l;m++)for(var y=i.width*(d.y+m+u)+d.x+u,v=s*m,g=0;g<s;g++)f[y+g]=h[v+g];return this.dirty=!0,d},l.prototype.resize=function(){var e=this,t=this.width,n=this.height;if(!(t>=s||n>=s)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=i,this.height*=i,this.atlas.resize(this.width,this.height);for(var r=new ArrayBuffer(this.width*this.height),o=0;o<n;o++){var a=new Uint8Array(e.data.buffer,n*o,t),l=new Uint8Array(r,n*o*i,t);l.set(a)}this.data=new Uint8Array(r)}},l.prototype.bind=function(e){this.gl=e,this.texture?e.bindTexture(e.TEXTURE_2D,this.texture):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,null))},l.prototype.updateTexture=function(e){this.bind(e),this.dirty&&(e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data),this.dirty=!1)},t.exports=l},{"../util/util":204,"@mapbox/shelf-pack":2}],153:[function(e,t,n){"use strict";function r(e,t,n,r){return r=r||"abc",n.replace("{s}",r[e.length%r.length]).replace("{fontstack}",e).replace("{range}",t)}var o=e("../util/mapbox").normalizeGlyphsURL,i=e("../util/ajax"),a=e("../util/verticalize_punctuation"),s=e("../util/glyphs"),l=e("../symbol/glyph_atlas"),u=e("pbf"),c=function(e,t,n){var r=1;this.advance=e.advance,this.left=e.left-n-r,this.top=e.top+n+r,this.rect=t},p=function(e){this.url=e&&o(e),this.atlases={},this.stacks={},this.loading={}};p.prototype.getSimpleGlyphs=function(e,t,n,r){var o=this;void 0===this.stacks[e]&&(this.stacks[e]={}),void 0===this.atlases[e]&&(this.atlases[e]=new l);for(var i={},s=this.stacks[e],u=this.atlases[e],p=3,d={},f=0,h=function(t){var r=Math.floor(t/256);if(s[r]){var o=s[r].glyphs[t],a=u.addGlyph(n,e,o,p);o&&(i[t]=new c(o,a,p))}else void 0===d[r]&&(d[r]=[],f++),d[r].push(t)},m=0;m<t.length;m++){var y=t[m],v=String.fromCharCode(y);h(y),a.lookup[v]&&h(a.lookup[v].charCodeAt(0))}f||r(void 0,i,e);var g=function(t,a,s){if(!t)for(var l=o.stacks[e][a]=s.stacks[0],h=0;h<d[a].length;h++){var m=d[a][h],y=l.glyphs[m],v=u.addGlyph(n,e,y,p);y&&(i[m]=new c(y,v,p))}f--,f||r(void 0,i,e)};for(var _ in d)o.loadRange(e,_,g)},p.prototype.loadRange=function(e,t,n){if(256*t>65535)return n("glyphs > 65535 not supported");void 0===this.loading[e]&&(this.loading[e]={});var o=this.loading[e];if(o[t])o[t].push(n);else{o[t]=[n];var a=256*t+"-"+(256*t+255),l=r(e,a,this.url);i.getArrayBuffer(l,function(e,n){for(var r=!e&&new s(new u(n.data)),i=0;i<o[t].length;i++)o[t][i](e,t,r);delete o[t]})}},p.prototype.getGlyphAtlas=function(e){return this.atlases[e]},t.exports=p},{"../symbol/glyph_atlas":152,"../util/ajax":181,"../util/glyphs":194,"../util/mapbox":199,"../util/verticalize_punctuation":206,pbf:229}],154:[function(e,t,n){"use strict";t.exports=function(e){function t(t){s.push(e[t]),l++}function n(e,t,n){var r=a[e];return delete a[e],a[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=i[t];return delete i[t],i[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function o(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var i={},a={},s=[],l=0,u=0;u<e.length;u++){var c=e[u],p=c.geometry,d=c.text;if(d){var f=o(d,p),h=o(d,p,!0);if(f in a&&h in i&&a[f]!==i[h]){var m=r(f,h,p),y=n(f,h,s[m].geometry);delete i[f],delete a[h],a[o(d,s[y].geometry,!0)]=y,s[m].geometry=null}else f in a?n(f,h,p):h in i?r(f,h,p):(t(u),i[f]=l-1,a[h]=l-1)}else t(u)}return s.filter(function(e){return e.geometry})}},{}],155:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s,l,u,c){this.anchorPoint=e,this.tl=t,this.tr=n,this.bl=r,this.br=o,this.tex=i,this.anchorAngle=a,this.glyphAngle=s,this.minScale=l,this.maxScale=u,this.writingMode=c}function o(e,t,n,o,i,a,s,l,u){var c,p,h,m,y=t.image.rect,v=i.layout,g=1,_=t.left-g,b=_+y.w/t.image.pixelRatio,x=t.top-g,w=x+y.h/t.image.pixelRatio;if("none"!==v["icon-text-fit"]&&s){var E=b-_,k=w-x,C=v["text-size"]/24,S=s.left*C,P=s.right*C,O=s.top*C,M=s.bottom*C,D=P-S,T=M-O,N=v["icon-text-fit-padding"][0],I=v["icon-text-fit-padding"][1],L=v["icon-text-fit-padding"][2],R=v["icon-text-fit-padding"][3],A="width"===v["icon-text-fit"]?.5*(T-k):0,j="height"===v["icon-text-fit"]?.5*(D-E):0,z="width"===v["icon-text-fit"]||"both"===v["icon-text-fit"]?D:E,V="height"===v["icon-text-fit"]||"both"===v["icon-text-fit"]?T:k;c=new d(S+j-R,O+A-N),p=new d(S+j+I+z,O+A-N),h=new d(S+j+I+z,O+A+L+V),m=new d(S+j-R,O+A+L+V)}else c=new d(_,x),p=new d(b,x),h=new d(b,w),m=new d(_,w);var F=i.getLayoutValue("icon-rotate",l,u)*Math.PI/180;if(a){var B=o[e.segment];if(e.y===B.y&&e.x===B.x&&e.segment+1<o.length){var U=o[e.segment+1];F+=Math.atan2(e.y-U.y,e.x-U.x)+Math.PI}else F+=Math.atan2(e.y-B.y,e.x-B.x)}if(F){var W=Math.sin(F),q=Math.cos(F),H=[q,-W,W,q];c=c.matMult(H),p=p.matMult(H),m=m.matMult(H),h=h.matMult(H)}return[new r(new d(e.x,e.y),c,p,m,h,t.image.rect,0,0,f,1/0)]}function i(e,t,n,o,i,s,l,u){for(var c=i.getLayoutValue("text-rotate",l,u)*Math.PI/180,p=i.layout["text-keep-upright"],h=t.positionedGlyphs,m=[],y=0;y<h.length;y++){var v=h[y],g=v.glyph;if(g){var _=g.rect;if(_){var b=(v.x+g.advance/2)*n,x=void 0,w=f;s?(x=[],w=a(x,e,b,o,e.segment,!1),p&&(w=Math.min(w,a(x,e,b,o,e.segment,!0)))):x=[{anchorPoint:new d(e.x,e.y),upsideDown:!1,angle:0,maxScale:1/0,minScale:f}];var E=v.x+g.left,k=v.y-g.top,C=E+_.w,S=k+_.h,P=new d(v.x,g.advance/2),O=new d(E,k),M=new d(C,k),D=new d(E,S),T=new d(C,S);0!==v.angle&&(O._sub(P)._rotate(v.angle)._add(P),M._sub(P)._rotate(v.angle)._add(P),D._sub(P)._rotate(v.angle)._add(P),T._sub(P)._rotate(v.angle)._add(P));for(var N=0;N<x.length;N++){var I=x[N],L=O,R=M,A=D,j=T;if(c){var z=Math.sin(c),V=Math.cos(c),F=[V,-z,z,V];L=L.matMult(F),R=R.matMult(F),A=A.matMult(F),j=j.matMult(F)}var B=Math.max(I.minScale,w),U=(e.angle+(I.upsideDown?Math.PI:0)+2*Math.PI)%(2*Math.PI),W=(I.angle+(I.upsideDown?Math.PI:0)+2*Math.PI)%(2*Math.PI);m.push(new r(I.anchorPoint,L,R,A,j,_,U,W,B,I.maxScale,t.writingMode))}}}}return m}function a(e,t,n,r,o,i){for(var a=n>=0^i,l=Math.abs(n),f=new d(t.x,t.y),h=c(a,r,o),m={anchor:f,end:h,index:o,minScale:u(l,f,h),maxScale:1/0};;){if(s(e,m,a,i),m.minScale<=t.scale)return t.scale;var y=p(m,r,l,a);if(!y)return m.minScale;m=y}}function s(e,t,n,r){var o=Math.atan2(t.end.y-t.anchor.y,t.end.x-t.anchor.x),i=n?o:o+Math.PI;e.push({anchorPoint:t.anchor,upsideDown:r,minScale:t.minScale,maxScale:t.maxScale,angle:(i+2*Math.PI)%(2*Math.PI)})}function l(e,t,n){var r=t.sub(e)._unit();return e.sub(r._mult(n))}function u(e,t,n){var r=t.dist(n);return e/r}function c(e,t,n){return e?t[n+1]:t[n]}function p(e,t,n,r){for(var o=e.end,i=o,a=e.index;i.equals(o);){if(r&&a+2<t.length)a+=1;else{if(r||0===a)return null;a-=1}i=c(r,t,a)}var s=l(o,i,e.anchor.dist(e.end));return{anchor:s,end:i,index:a,minScale:u(n,s,i),maxScale:e.minScale}}var d=e("point-geometry");t.exports={getIconQuads:o,getGlyphQuads:i,SymbolQuad:r};var f=.5},{"point-geometry":230}],156:[function(e,t,n){"use strict";function r(e,t,n,r,o){this.codePoint=e,this.x=t,this.y=n,this.glyph=r||null,this.angle=o}function o(e,t,n,r,o,i,a){this.positionedGlyphs=e,this.text=t,this.top=n,this.bottom=r,this.left=o,this.right=i,this.writingMode=a}function i(e,t){for(var n=[],r=0,o=0,i=t;o<i.length;o+=1){var a=i[o];n.push(e.substring(r,a)),r=a}return r<e.length&&n.push(e.substring(r,e.length)),n}function a(e,t,n,r,a,s,l,u,c,p,h){var m=e.trim();h===x.vertical&&(m=_(m));var y,v=[],g=new o(v,m,c[1],c[1],c[0],c[0],h);return y=b.processBidirectionalText?b.processBidirectionalText(m,d(m,u,n,t)):i(m,d(m,u,n,t)),f(g,t,y,r,a,s,l,c,h,u,p),!!v.length&&g}function s(e,t,n,r){var o=0;for(var i in e){var a=r[e.charCodeAt(i)];a&&(o+=a.advance+t)}var s=Math.max(1,Math.ceil(o/n));return o/s}function l(e,t,n,r){var o=Math.pow(e-t,2);return r?e<t?o/2:2*o:o+Math.abs(n)*n}function u(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function c(e,t,n,r,o,i){for(var a=null,s=l(t,n,o,i),u=0,c=r;u<c.length;u+=1){var p=c[u],d=t-p.x,f=l(d,n,o,i)+p.badness;f<=s&&(a=p,s=f)}return{index:e,x:t,priorBreak:a,badness:s}}function p(e){return e?p(e.priorBreak).concat(e.index):[]}function d(e,t,n,r){if(!n)return[];if(!e)return[];for(var o=[],i=s(e,t,n,r),a=0,l=0;l<e.length;l++){var d=e.charCodeAt(l),f=r[d];f&&!w[d]&&(a+=f.advance+t),l<e.length-1&&(E[d]||g.charAllowsIdeographicBreaking(d))&&o.push(c(l+1,a,i,o,u(d,e.charCodeAt(l+1)),!1))}return p(c(e.length,a,i,o,0,!0))}function f(e,t,n,o,i,a,s,l,u,c,p){var d=-17,f=0,y=d,v=0,_=e.positionedGlyphs;for(var b in n){var w=n[b].trim();if(w.length){for(var E=_.length,k=0;k<w.length;k++){var C=w.charCodeAt(k),S=t[C];S&&(g.charHasUprightVerticalOrientation(C)&&u!==x.horizontal?(_.push(new r(C,f,0,S,-Math.PI/2)),f+=p+c):(_.push(new r(C,f,y,S,0)),f+=S.advance+c))}if(_.length!==E){var P=f-c;v=Math.max(P,v),h(_,t,E,_.length-1,s)}f=0,y+=o}else y+=o}m(_,s,i,a,v,o,n.length,l);var O=n.length*o;e.top+=-a*O,e.bottom=e.top+O,e.left+=-i*v,e.right=e.left+v}function h(e,t,n,r,o){if(o)for(var i=t[e[r].codePoint].advance,a=(e[r].x+i)*o,s=n;s<=r;s++)e[s].x-=a}function m(e,t,n,r,o,i,a,s){for(var l=(t-n)*o+s[0],u=(-r*a+.5)*i+s[1],c=0;c<e.length;c++)e[c].x+=l,e[c].y+=u}function y(e,t){if(!e||!e.rect)return null;var n=t[0],r=t[1],o=n-e.width/2,i=o+e.width,a=r-e.height/2,s=a+e.height;return new v(e,a,s,o,i)}function v(e,t,n,r,o){this.image=e,this.top=t,this.bottom=n,this.left=r,this.right=o}var g=e("../util/script_detection"),_=e("../util/verticalize_punctuation"),b=e("../source/rtl_text_plugin"),x={horizontal:1,vertical:2};t.exports={shapeText:a,shapeIcon:y,WritingMode:x};var w={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},E={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":72,"../util/script_detection":200,"../util/verticalize_punctuation":206}],157:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a,s,l,u,c){var p,d,f=r*t+n,h=s*i+a;if(c)for(h-=i,d=-1;d<=u;d++,h+=i)for(f=((d+u)%u+r)*t+n,p=-1;p<=l;p++)o[h+p]=e[f+(p+l)%l];else for(d=0;d<u;d++,f+=t,h+=i)for(p=0;p<l;p++)o[h+p]=e[f+p]}var o=e("@mapbox/shelf-pack"),i=e("../util/browser"),a=e("../util/util"),s=e("../util/window"),l=e("../util/evented"),u=function(e){function t(t,n){e.call(this),this.width=t,this.height=n,this.shelfPack=new o(t,n),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=i.devicePixelRatio>1?2:1,this.dirty=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.allocateImage=function(e,t){e/=this.pixelRatio,t/=this.pixelRatio;var n=2,r=e+n+(4-(e+n)%4),o=t+n+(4-(t+n)%4),i=this.shelfPack.packOne(r,o);return i?i:(a.warnOnce("SpriteAtlas out of space."),null)},t.prototype.addImage=function(e,t,n){var r,o,a;if(t instanceof s.HTMLImageElement?(r=t.width,o=t.height,t=i.getImageData(t),a=1):(r=n.width,o=n.height,a=n.pixelRatio||1),ArrayBuffer.isView(t)&&(t=new Uint32Array(t.buffer)),!(t instanceof Uint32Array))return this.fire("error",{error:new Error("Image provided in an invalid format. Supported formats are HTMLImageElement and ArrayBufferView.")});if(this.images[e])return this.fire("error",{error:new Error("An image with this name already exists.")});var l=this.allocateImage(r,o);if(!l)return this.fire("error",{error:new Error("There is not enough space to add this image.")});var u={rect:l,width:r/a,height:o/a,sdf:!1,pixelRatio:a/this.pixelRatio};this.images[e]=u,this.copy(t,r,l,{pixelRatio:a,x:0,y:0,width:r,height:o},!1),this.fire("data",{dataType:"style"})},t.prototype.removeImage=function(e){var t=this.images[e];return delete this.images[e],t?(this.shelfPack.unref(t.rect),void this.fire("data",{dataType:"style"})):this.fire("error",{error:new Error("No image with this name exists.")})},t.prototype.getImage=function(e,t){if(this.images[e])return this.images[e];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(e);if(!n.width||!n.height)return null;var r=this.allocateImage(n.width,n.height);if(!r)return null;var o={rect:r,width:n.width/n.pixelRatio,height:n.height/n.pixelRatio,sdf:n.sdf,pixelRatio:n.pixelRatio/this.pixelRatio};if(this.images[e]=o,!this.sprite.imgData)return null;var i=new Uint32Array(this.sprite.imgData.buffer);return this.copy(i,this.sprite.width,r,n,t),o},t.prototype.getPosition=function(e,t){var n=this.getImage(e,t),r=n&&n.rect;if(!r)return null;var o=n.width*n.pixelRatio,i=n.height*n.pixelRatio,a=1;return{size:[n.width,n.height],tl:[(r.x+a)/this.width,(r.y+a)/this.height],br:[(r.x+a+o)/this.width,(r.y+a+i)/this.height]}},t.prototype.allocate=function(){var e=this;if(!this.data){var t=Math.floor(this.width*this.pixelRatio),n=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(t*n);for(var r=0;r<this.data.length;r++)e.data[r]=0}},t.prototype.copy=function(e,t,n,o,i){this.allocate();var a=this.data,s=1;r(e,t,o.x,o.y,a,this.width*this.pixelRatio,(n.x+s)*this.pixelRatio,(n.y+s)*this.pixelRatio,o.width,o.height,i),this.dirty=!0},t.prototype.setSprite=function(e){e&&this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio),this.sprite=e},t.prototype.addIcons=function(e,t){for(var n=this,r=0;r<e.length;r++)n.getImage(e[r]);t(null,this.images)},t.prototype.bind=function(e,t){var n=!1;this.texture?e.bindTexture(e.TEXTURE_2D,this.texture):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n=!0);var r=t?e.LINEAR:e.NEAREST;r!==this.filter&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),this.filter=r),this.dirty&&(this.allocate(),n?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)},t}(l);t.exports=u},{"../util/browser":182,"../util/evented":191,"../util/util":204,"../util/window":184,"@mapbox/shelf-pack":2}],158:[function(e,t,n){"use strict";var r=e("../source/rtl_text_plugin");t.exports=function(e,t,n,o){var i=t.getLayoutValue("text-transform",n,o);return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),r.applyArabicShaping&&(e=r.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":72}],159:[function(e,t,n){"use strict";var r=e("../util/dom"),o=e("point-geometry"),i={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){v("mouseout",e)}function a(t){e.stop(),w=r.mousePos(_,t),v("mousedown",t),x=!0}function s(t){var n=e.dragRotate&&e.dragRotate.isActive();b&&!n&&v("contextmenu",b),b=null,x=!1,v("mouseup",t)}function l(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==_;)n=n.parentNode;n===_&&v("mousemove",t)}}function u(t){e.stop(),g("touchstart",t),!t.touches||t.touches.length>1||(E?(clearTimeout(E),E=null,v("dblclick",t)):E=setTimeout(f,300))}function c(e){g("touchmove",e)}function p(e){g("touchend",e)}function d(e){g("touchcancel",e)}function f(){E=null}function h(e){var t=r.mousePos(_,e);t.equals(w)&&v("click",e)}function m(e){v("dblclick",e),e.preventDefault()}function y(t){var n=e.dragRotate&&e.dragRotate.isActive();x||n?x&&(b=t):v("contextmenu",t),t.preventDefault()}function v(t,n){var o=r.mousePos(_,n);return e.fire(t,{lngLat:e.unproject(o),point:o,originalEvent:n})}function g(t,n){var i=r.touchPos(_,n),a=i.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new o(0,0));return e.fire(t,{lngLat:e.unproject(a),point:a,lngLats:i.map(function(t){return e.unproject(t)},this),points:i,originalEvent:n})}var _=e.getCanvasContainer(),b=null,x=!1,w=null,E=null;for(var k in i)e[k]=new i[k](e,t),t.interactive&&t[k]&&e[k].enable(t[k]);_.addEventListener("mouseout",n,!1),_.addEventListener("mousedown",a,!1),_.addEventListener("mouseup",s,!1),_.addEventListener("mousemove",l,!1),_.addEventListener("touchstart",u,!1),_.addEventListener("touchend",p,!1),_.addEventListener("touchmove",c,!1),_.addEventListener("touchcancel",d,!1),_.addEventListener("click",h,!1),_.addEventListener("dblclick",m,!1),_.addEventListener("contextmenu",y,!1)}},{"../util/dom":189,"./handler/box_zoom":169,"./handler/dblclick_zoom":170,"./handler/drag_pan":171,"./handler/drag_rotate":172,"./handler/keyboard":173,"./handler/scroll_zoom":174,"./handler/touch_zoom_rotate":175,"point-geometry":230}],160:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../style-spec/util/interpolate"),i=e("../util/browser"),a=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),l=e("point-geometry"),u=e("../util/evented"),c=function(e){function t(t,n){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=n.bearingSnap}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,n){return e=l.convert(e).mult(-1),this.panTo(this.transform.center,r.extend({offset:e},t),n)},t.prototype.panTo=function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,n){if(t=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var o=t.padding;t.padding={top:o,bottom:o,right:o,left:o}}if(!r.deepEqual(Object.keys(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return void r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");e=s.convert(e);var i=[t.padding.left-t.padding.right,t.padding.top-t.padding.bottom],u=Math.min(t.padding.right,t.padding.left),c=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+i[0],t.offset[1]+i[1]];var p=e.getWest(),d=e.getEast(),f=e.getNorth(),h=e.getSouth(),m=l.convert(t.offset),y=this.transform,v=y.project(new a(0,h)),g=y.project(new a(0,f)),_=v.sub(g),b=(y.height-2*c-2*Math.abs(m.y))/_.y,x=y.project(new a(d,0)),w=p<d?y.project(new a(p,0)):y.project(new a(-360+p,0)),E=x.sub(w),k=(y.width-2*u-2*Math.abs(m.x))/E.x,C=y.unproject(v.add(g).div(2)).lat,S=p<d?(p+d)/2:(-360+p+d)/2;return S=S<-180?(S+360)%180:S,b<0||k<0?void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."):(t.center=new a(S,C),t.zoom=Math.min(y.scaleZoom(y.scale*Math.min(k,b)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n))},t.prototype.jumpTo=function(e,t){this.stop();var n=this.transform,r=!1,o=!1,i=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),"center"in e&&(n.center=a.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(o=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(i=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),o&&this.fire("rotate",t),i&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var n=this;this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e),e.animate===!1&&(e.duration=0),e.smoothEasing&&0!==e.duration&&(e.easing=this._smoothOutEasing(e.duration));var i=this.transform,s=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in e?+e.zoom:s,d="bearing"in e?this._normalizeBearing(e.bearing,u):u,f="pitch"in e?+e.pitch:c,h=i.centerPoint.add(l.convert(e.offset)),m=i.pointLocation(h),y=a.convert(e.center||m);this._normalizeCenter(y);var v,g,_=i.project(m),b=i.project(y).sub(_),x=i.zoomScale(p-s);return e.around&&(v=a.convert(e.around),g=i.locationPoint(v)),this.zooming=p!==s,this.rotating=u!==d,this.pitching=f!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(this.zooming&&(i.zoom=o(s,p,e)),this.rotating&&(i.bearing=o(u,d,e)),this.pitching&&(i.pitch=o(c,f,e)),v)i.setLocationAtPoint(v,g);else{var n=i.zoomScale(i.zoom-s),r=p>s?Math.min(2,x):Math.max(.5,x),a=Math.pow(r,1-e),l=i.unproject(_.add(b.mult(e*a)).mult(n));i.setLocationAtPoint(i.renderWorldCopies?l.wrap():l,h)}this._fireMoveEvents(t)},function(){e.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._easeToEnd(t)},e.delayEndEvents):n._easeToEnd(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._easeToEnd=function(e){var t=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),n&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function n(e){var t=(S*S-C*C+(e?-1:1)*D*D*P*P)/(2*(e?S:C)*D*P);return Math.log(Math.sqrt(t*t+1)-t)}function i(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function u(e){return i(e)/s(e)}var c=this;this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var p=this.transform,d=this.getZoom(),f=this.getBearing(),h=this.getPitch(),m="zoom"in e?+e.zoom:d,y="bearing"in e?this._normalizeBearing(e.bearing,f):f,v="pitch"in e?+e.pitch:h,g=p.zoomScale(m-d),_=p.centerPoint.add(l.convert(e.offset)),b=p.pointLocation(_),x=a.convert(e.center||b);this._normalizeCenter(x);var w=p.project(b),E=p.project(x).sub(w),k=e.curve,C=Math.max(p.width,p.height),S=C/g,P=E.mag();if("minZoom"in e){var O=r.clamp(Math.min(e.minZoom,d,m),p.minZoom,p.maxZoom),M=C/p.zoomScale(O-d);k=Math.sqrt(M/P*2)}var D=k*k,T=n(0),N=function(e){return s(T)/s(T+k*e)},I=function(e){return C*((s(T)*u(T+k*e)-i(T))/D)/P},L=(n(1)-T)/k;if(Math.abs(P)<1e-5){if(Math.abs(C-S)<1e-5)return this.easeTo(e,t);var R=S<C?-1:1;L=Math.abs(Math.log(S/C))/k,I=function(){return 0},N=function(e){return Math.exp(R*k*e)}}if("duration"in e)e.duration=+e.duration;else{var A="screenSpeed"in e?+e.screenSpeed/k:+e.speed;e.duration=1e3*L/A}return this.zooming=!0,this.rotating=f!==y,this.pitching=v!==h,this._prepareEase(t,!1),this._ease(function(e){var n=e*L,r=1/N(n);p.zoom=d+p.scaleZoom(r),this.rotating&&(p.bearing=o(f,y,e)),this.pitching&&(p.pitch=o(h,v,e));var i=p.unproject(w.add(E.mult(I(n))).mult(r));p.setLocationAtPoint(p.renderWorldCopies?i.wrap():i,_),this._fireMoveEvents(t)},function(){return c._easeToEnd(t)},e),this},t.prototype.isEasing=function(){return!!this._abortFn},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},t.prototype._ease=function(e,t,n){this._finishFn=t,this._abortFn=i.timed(function(t){e.call(this,n.easing(t)),1===t&&this._finishEase()},n.animate===!1?0:n.duration,this)},t.prototype._finishEase=function(){delete this._abortFn;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},t.prototype._smoothOutEasing=function(e){var t=r.ease;if(this._prevEase){var n=this._prevEase,o=(Date.now()-n.start)/n.duration,i=n.easing(o+.01)-n.easing(o),a=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-a*a);t=r.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:e,easing:t},t},t}(u);t.exports=c},{"../geo/lng_lat":39,"../geo/lng_lat_bounds":40,"../style-spec/util/interpolate":104,"../util/browser":182,"../util/evented":191,"../util/util":204,"point-geometry":230}],161:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=function(e){this.options=e,o.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};i.prototype.getDefaultPosition=function(){return"bottom-right"},i.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=r.create("div","dragonfly-ctrl dragonfly-ctrl-attrib"),t&&this._container.classList.add("dragonfly-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},i.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},i.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".dragonfly-improve-map")),this._editLink){var e=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+e.lng+"/"+e.lat+"/"+Math.round(this._map.getZoom()+1)}},i.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},i.prototype._updateAttributions=function(){if(this._map.style){var e=[],t=this._map.style.sourceCaches;for(var n in t){var r=t[n].getSource();r.attribution&&e.indexOf(r.attribution)<0&&e.push(r.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),this._container.innerHTML=e.join(" | "),this._editLink=null}},i.prototype._updateCompact=function(){var e=this._map.getCanvasContainer().offsetWidth<=640;this._container.classList[e?"add":"remove"]("mapboxgl-compact")},t.exports=i},{"../../util/dom":189,"../../util/util":204}],162:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=function(){this._fullscreen=!1,o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.document&&(this._fullscreenchange="MSFullscreenChange")};a.prototype.onAdd=function(e){var t="dragonfly-ctrl",n=this._container=r.create("div",t+" dragonfly-ctrl-group"),o=this._fullscreenButton=r.create("button",t+"-icon "+t+"-fullscreen",this._container);return o.setAttribute("aria-label","Toggle fullscreen"),
o.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),this._mapContainer=e.getContainer(),i.document.addEventListener(this._fullscreenchange,this._changeIcon),n},a.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=null,i.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){var e=i.document.fullscreenElement||i.document.mozFullScreenElement||i.document.webkitFullscreenElement||i.document.msFullscreenElement;if(e===this._mapContainer!==this._fullscreen){this._fullscreen=!this._fullscreen;var t="dragonfly-ctrl";this._fullscreenButton.classList.toggle(t+"-shrink"),this._fullscreenButton.classList.toggle(t+"-fullscreen")}},a.prototype._onClickFullscreen=function(){this._isFullscreen()?i.document.exitFullscreen?i.document.exitFullscreen():i.document.mozCancelFullScreen?i.document.mozCancelFullScreen():i.document.msExitFullscreen?i.document.msExitFullscreen():i.document.webkitCancelFullScreen&&i.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=a},{"../../util/dom":189,"../../util/util":204,"../../util/window":184}],163:[function(e,t,n){"use strict";function r(e){void 0!==o?e(o):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){o="denied"!==t.state,e(o)}):(o=!!s.navigator.geolocation,e(o))}var o,i=e("../../util/evented"),a=e("../../util/dom"),s=e("../../util/window"),l=e("../../util/util"),u={enableHighAccuracy:!1,timeout:6e3},c="dragonfly-ctrl",p=function(e){function t(t){e.call(this),this.options=t||{},l.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=a.create("div",c+" "+c+"-group"),r(this._setupUI),this._container},t.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},t.prototype._onSuccess=function(e){this._map.jumpTo({center:[e.coords.longitude,e.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",e),this._finish()},t.prototype._onError=function(e){this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){e!==!1&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=a.create("button",c+"-icon "+c+"-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},t.prototype._onClickGeolocate=function(){var e=l.extend(u,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("mapboxgl-watching"),this._geolocateButton.setAttribute("aria-pressed",!1),s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):(this._geolocateButton.classList.add("mapboxgl-watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)):(s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,e),this._timeoutId=setTimeout(this._finish,1e4))},t}(i);t.exports=p},{"../../util/dom":189,"../../util/evented":191,"../../util/util":204,"../../util/window":184}],164:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=function(){o.bindAll(["_updateLogo"],this)};i.prototype.onAdd=function(e){return this._map=e,this._container=r.create("div","mapboxgl-ctrl"),this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},i.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("sourcedata",this._updateLogo)},i.prototype.getDefaultPosition=function(){return"bottom-left"},i.prototype._updateLogo=function(e){if(e&&"metadata"===e.sourceDataType)if(!this._container.childNodes.length&&this._logoRequired()){var t=r.create("a","dragonfly-ctrl-logo");t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._map.off("data",this._updateLogo)}else this._container.childNodes.length&&!this._logoRequired()&&this.onRemove()},i.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e){var n=e[t].getSource();if(n.mapbox_logo)return!0}return!1}},t.exports=i},{"../../util/dom":189,"../../util/util":204}],165:[function(e,t,n){"use strict";function r(e){return new i.MouseEvent(e.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:e.detail,view:e.view,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,movementX:e.movementX,movementY:e.movementY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey})}var o=e("../../util/dom"),i=e("../../util/window"),a=e("../../util/util"),s="dragonfly-ctrl",l=function(){a.bindAll(["_rotateCompassArrow"],this)};l.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},l.prototype.onAdd=function(e){return this._map=e,this._container=o.create("div",s+" "+s+"-group",e.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(s+"-icon "+s+"-zoom-in","Zoom In",e.zoomIn.bind(e)),this._zoomOutButton=this._createButton(s+"-icon "+s+"-zoom-out","Zoom Out",e.zoomOut.bind(e)),this._compass=this._createButton(s+"-icon "+s+"-compass","Reset North",e.resetNorth.bind(e)),this._compassArrow=o.create("span",s+"-compass-arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container},l.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("rotate",this._rotateCompassArrow),this._map=void 0},l.prototype._onContextMenu=function(e){e.preventDefault()},l.prototype._onCompassDown=function(e){0===e.button&&(o.disableDrag(),i.document.addEventListener("mousemove",this._onCompassMove),i.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(r(e)),e.stopPropagation())},l.prototype._onCompassMove=function(e){0===e.button&&(this._map.getCanvasContainer().dispatchEvent(r(e)),e.stopPropagation())},l.prototype._onCompassUp=function(e){0===e.button&&(i.document.removeEventListener("mousemove",this._onCompassMove),i.document.removeEventListener("mouseup",this._onCompassUp),o.enableDrag(),this._map.getCanvasContainer().dispatchEvent(r(e)),e.stopPropagation())},l.prototype._createButton=function(e,t,n){var r=o.create("button",e,this._container);return r.type="button",r.setAttribute("aria-label",t),r.addEventListener("click",function(){n()}),r},t.exports=l},{"../../util/dom":189,"../../util/util":204,"../../util/window":184}],166:[function(e,t,n){"use strict";function r(e,t,n){var r=n&&n.maxWidth||100,a=e._container.clientHeight/2,s=i(e.unproject([0,a]),e.unproject([r,a]));if(n&&"imperial"===n.unit){var l=3.2808*s;if(l>5280){var u=l/5280;o(t,r,u,"mi")}else o(t,r,l,"ft")}else o(t,r,s,"m")}function o(e,t,n,r){var o=a(n),i=o/n;"m"===r&&o>=1e3&&(o/=1e3,r="km"),e.style.width=t*i+"px",e.innerHTML=o+r}function i(e,t){var n=6371e3,r=Math.PI/180,o=e.lat*r,i=t.lat*r,a=Math.sin(o)*Math.sin(i)+Math.cos(o)*Math.cos(i)*Math.cos((t.lng-e.lng)*r),s=n*Math.acos(Math.min(a,1));return s}function a(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}var s=e("../../util/dom"),l=e("../../util/util"),u=function(e){this.options=e,l.bindAll(["_onMove"],this)};u.prototype.getDefaultPosition=function(){return"bottom-left"},u.prototype._onMove=function(){r(this._map,this._container,this.options)},u.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","dragonfly-ctrl dragonfly-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},u.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=u},{"../../util/dom":189,"../../util/util":204}],167:[function(e,t,n){"use strict";t.exports=function(e){function t(t){var n=[];for(var r in e.style._layers)e.style._layers.hasOwnProperty(r)&&o(r)&&n.push(r);return a(n,t)}function n(e){var n=t(e),r=n.filter(function(e){return i(e)});return a(r,e)}function r(e){var n=t(e),r=n.filter(function(e){return!i(e)});return a(r,e)}function o(t){var n=e.style._layers[t],r=void 0===n.minzoom||n.minzoom<=e.getZoom(),o=void 0===n.maxzoom||n.maxzoom>=e.getZoom(),i=void 0===n.layout||"none"!==n.layout.visibility;return r&&o&&i}function i(t){var n=e.style._layers[t];return"bubble"===n.type}function a(e,t){return e?t?e.filter(function(e){return t.indexOf(e)!==-1}):e:t}function s(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o.layer.id+":"+o.id;n[i]||(n[i]=!0,t.push(o))}return t}return{_attachFeaturesClickListener:function(){var t,n=300;this.on("dblclick",function(e){t&&clearTimeout(t)}),this.on("click",function(r){t&&clearTimeout(t),t=setTimeout(function(){e.fire("featuresClick",{features:e.queryRenderedFeatures(r.point)})},n)})},queryRenderedFeatures:function(o,i){if(i=i||{},i.radius){var a=Array.isArray(o)?o[0]:o.x,l=Array.isArray(o)?o[1]:o.y;o=[[a-i.radius,l-i.radius],[a+i.radius,l+i.radius]]}var u=r(t(i.layers)),c=e._queryRenderedFeaturesOld(o,{expanded:!1,radius:i.radius,layers:u}),p=n(t(i.layers));if(p.length>0){var d=e._queryRenderedFeaturesOld(o,{expanded:!0,radius:i.radius,layers:p});c=s(c.concat(d))}return c}}}},{}],168:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../style/dragonfly_features_styles"),i=e("./dragonfly_interaction"),a=e("../style/dragonfly_mask_layers"),s=t.exports=e("./map");s.prototype._queryRenderedFeaturesOld=s.prototype.queryRenderedFeatures,s.prototype._setupContainerOld=s.prototype._setupContainer,s.prototype._setupContainer=function(){this._setupContainerOld(),r.extend(this,i(this)),this._attachFeaturesClickListener();var e=this;e.on("render",function(){clearTimeout(e._renderedTimeout),e._renderedTimeout=setTimeout(function(){e.fire("rendered")},750)})},s.prototype._setupPainterOld=s.prototype._setupPainter,s.prototype._setupPainter=function(){this._setupPainterOld(),r.extend(this.painter,o(this)),r.extend(this.painter,a(this))}},{"../style/dragonfly_features_styles":128,"../style/dragonfly_mask_layers":129,"../util/util":204,"./dragonfly_interaction":167,"./map":177}],169:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../geo/lng_lat_bounds"),i=e("../../util/util"),a=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),i.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,n=r.mousePos(this._el,e);this._box||(this._box=r.create("div","dragonfly-boxzoom",this._container),this._container.classList.add("dragonfly-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(t.x,n.x),i=Math.max(t.x,n.x),a=Math.min(t.y,n.y),s=Math.max(t.y,n.y);r.setTransform(this._box,"translate("+o+"px,"+a+"px)"),this._box.style.width=i-o+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,n=r.mousePos(this._el,e),i=(new o).extend(this._map.unproject(t)).extend(this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(i,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:i})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("dragonfly-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":40,"../../util/dom":189,"../../util/util":204,"../../util/window":184}],170:[function(e,t,n){"use strict";var r=function(e){this._map=e,this._onDblClick=this._onDblClick.bind(this)};r.prototype.isEnabled=function(){return!!this._enabled},r.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},r.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},r.prototype._onDblClick=function(e){this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},t.exports=r},{}],171:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=.3,s=o.bezier(0,0,a,1),l=1400,u=2500,c=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},c.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(i.document.addEventListener("touchmove",this._onMove),i.document.addEventListener("touchend",this._onTouchEnd)):(i.document.addEventListener("mousemove",this._onMove),i.document.addEventListener("mouseup",this._onMouseUp)),i.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=r.mousePos(this._el,e),this._inertia=[[Date.now(),this._pos]])},c.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e));var t=r.mousePos(this._el,e),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),t]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),t),this._fireEvent("drag",e),this._fireEvent("move",e),this._pos=t,e.preventDefault()}},c.prototype._onUp=function(e){var t=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",e),this._drainInertiaBuffer();var n=function(){t._map.moving=!1,t._fireEvent("moveend",e)},r=this._inertia;if(r.length<2)return void n();var o=r[r.length-1],i=r[0],c=o[1].sub(i[1]),p=(o[0]-i[0])/1e3;if(0===p||o[1].equals(i[1]))return void n();var d=c.mult(a/p),f=d.mag();f>l&&(f=l,d._unit()._mult(f));var h=f/(u*a),m=d.mult(-h/2);this._map.panBy(m,{duration:1e3*h,easing:s,noMoveStart:!0},{originalEvent:e})}},c.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),i.document.removeEventListener("mousemove",this._onMove),i.document.removeEventListener("mouseup",this._onMouseUp),i.removeEventListener("blur",this._onMouseUp))},c.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),i.document.removeEventListener("touchmove",this._onMove),i.document.removeEventListener("touchend",this._onTouchEnd))},c.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},c.prototype._ignoreEvent=function(e){var t=this._map;if(t.boxZoom&&t.boxZoom.isActive())return!0;if(t.dragRotate&&t.dragRotate.isActive())return!0;if(e.touches)return e.touches.length>1;if(e.ctrlKey)return!0;var n=1,r=0;return"mousemove"===e.type?e.buttons&0===n:e.button&&e.button!==r},c.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now(),n=160;e.length>0&&t-e[0][0]>n;)e.shift()},t.exports=c},{"../../util/dom":189,"../../util/util":204,"../../util/window":184}],172:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=.25,s=o.bezier(0,0,a,1),l=180,u=720,c=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._bearingSnap=t.bearingSnap,this._pitchWithRotate=t.pitchWithRotate!==!1,o.bindAll(["_onDown","_onMove","_onUp"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.isActive=function(){return!!this._active},c.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},c.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(i.document.addEventListener("mousemove",this._onMove),i.document.addEventListener("mouseup",this._onUp),i.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault())},c.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e));var t=this._map;t.stop();var n=this._pos,o=r.mousePos(this._el,e),i=.8*(n.x-o.x),a=(n.y-o.y)*-.5,s=t.getBearing()-i,l=t.getPitch()-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([Date.now(),t._normalizeBearing(s,c[1])]),t.transform.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.transform.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),this._pos=o}},c.prototype._onUp=function(e){var t=this;if(!this._ignoreEvent(e)&&(i.document.removeEventListener("mousemove",this._onMove),i.document.removeEventListener("mouseup",this._onUp),i.removeEventListener("blur",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),o=this._inertia,c=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(o.length<2)return void c();var p=o[0],d=o[o.length-1],f=o[o.length-2],h=n._normalizeBearing(r,f[1]),m=d[1]-p[1],y=m<0?-1:1,v=(d[0]-p[0])/1e3;if(0===m||0===v)return void c();var g=Math.abs(m*(a/v));g>l&&(g=l);var _=g/(u*a),b=y*g*(_/2);h+=b,Math.abs(n._normalizeBearing(h,0))<this._bearingSnap&&(h=n._normalizeBearing(0,h)),n.rotateTo(h,{duration:1e3*_,easing:s,noMoveStart:!0},{originalEvent:e})}},c.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},c.prototype._ignoreEvent=function(e){var t=this._map;if(t.boxZoom&&t.boxZoom.isActive())return!0;if(t.dragPan&&t.dragPan.isActive())return!0;if(e.touches)return e.touches.length>1;var n=e.ctrlKey?1:2,r=e.ctrlKey?0:2,o=e.button;return"undefined"!=typeof InstallTrigger&&2===e.button&&e.ctrlKey&&i.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(o=0),"mousemove"===e.type?e.buttons&0===n:!this.isActive()&&o!==r},c.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now(),n=160;e.length>0&&t-e[0][0]>n;)e.shift()},t.exports=c},{"../../util/dom":189,"../../util/util":204,"../../util/window":184}],173:[function(e,t,n){"use strict";function r(e){return e*(2-e)}var o=100,i=15,a=10,s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},s.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,s=0,l=0,u=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),l=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),l=1);break;case 38:e.shiftKey?s=1:(e.preventDefault(),u=-1);break;case 40:e.shiftKey?s=-1:(u=1,e.preventDefault());break;default:return}var c=this._map,p=c.getZoom(),d={duration:300,delayEndEvents:500,easing:r,zoom:t?Math.round(p)+t*(e.shiftKey?2:1):p,bearing:c.getBearing()+n*i,pitch:c.getPitch()+s*a,offset:[-l*o,-u*o],center:c.getCenter()};c.easeTo(d,{originalEvent:e})}},t.exports=s},{}],174:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/browser"),a=e("../../util/window"),s=a.navigator.userAgent.toLowerCase(),l=s.indexOf("firefox")!==-1,u=s.indexOf("safari")!==-1&&s.indexOf("chrom")===-1,c=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(e){var t;"wheel"===e.type?(t=e.deltaY,l&&e.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(t/=i.devicePixelRatio),e.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,u&&(t/=3));var n=i.now(),o=n-(this._time||0);this._pos=r.mousePos(this._el,e),this._time=n,0!==t&&t%4.000244140625===0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(o*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&this._zoom(-t,e),e.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(e,t){if(0!==e){var n=this._map;e*=3;var r=2/(1+Math.exp(-Math.abs(e/100)));e<0&&0!==r&&(r=1/r);var o=n.ease?n.ease.to:n.transform.scale,i=n.transform.scaleZoom(o*r);n.zoomTo(i,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:t})}},t.exports=c},{"../../util/browser":182,"../../util/dom":189,"../../util/util":204,"../../util/window":184}],175:[function(e,t,n){"use strict";var r=e("../../util/dom"),o=e("../../util/util"),i=e("../../util/window"),a=.15,s=o.bezier(0,0,a,1),l=12,u=2.5,c=.15,p=4,d=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onStart","_onMove","_onEnd"],this)};d.prototype.isEnabled=function(){return!!this._enabled},d.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},d.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},d.prototype.disableRotation=function(){this._rotationDisabled=!0},d.prototype.enableRotation=function(){this._rotationDisabled=!1},d.prototype._onStart=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],i.document.addEventListener("touchmove",this._onMove,!1),i.document.addEventListener("touchend",this._onEnd,!1)}},d.prototype._onMove=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),o=t.add(n).div(2),i=t.sub(n),a=i.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var u={duration:0,around:l.unproject(o)};"rotate"===this._gestureIntent&&(u.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(u.zoom=l.transform.scaleZoom(this._startScale*a)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,o]),l.easeTo(u,{originalEvent:e})}else{var d=Math.abs(1-a)>c,f=Math.abs(s)>p;f?this._gestureIntent="rotate":d&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=i,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}e.preventDefault()}},d.prototype._onEnd=function(e){i.document.removeEventListener("touchmove",this._onMove),i.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],o=t[0],c=n.transform.scaleZoom(this._startScale*r[1]),p=n.transform.scaleZoom(this._startScale*o[1]),d=c-p,f=(r[0]-o[0])/1e3,h=r[2];if(0===f||c===p)return void n.snapToNorth({},{originalEvent:e});var m=d*a/f;Math.abs(m)>u&&(m=m>0?u:-u);var y=1e3*Math.abs(m/(l*a)),v=c+m*y/2e3;v<0&&(v=0),n.easeTo({zoom:v,duration:y,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(h)},{originalEvent:e})},d.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now(),n=160;e.length>2&&t-e[0][0]>n;)e.shift()},t.exports=d},{"../../util/dom":189,"../../util/util":204,"../../util/window":184}],176:[function(e,t,n){"use strict";var r=e("../util/util"),o=e("../util/window"),i=function(){r.bindAll(["_onHashChange","_updateHash"],this)};i.prototype.addTo=function(e){return this._map=e,o.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},i.prototype.remove=function(){return o.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},i.prototype._onHashChange=function(){var e=o.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},i.prototype._updateHash=function(){var e=this._map.getCenter(),t=this._map.getZoom(),n=this._map.getBearing(),r=this._map.getPitch(),i=Math.max(0,Math.ceil(Math.log(t)/Math.LN2)),a="#"+Math.round(100*t)/100+"/"+e.lat.toFixed(i)+"/"+e.lng.toFixed(i);(n||r)&&(a+="/"+Math.round(10*n)/10),r&&(a+="/"+Math.round(r)),o.history.replaceState("","",a)},t.exports=i},{"../util/util":204,"../util/window":184}],177:[function(e,t,n){"use strict";function r(e){e.parentNode&&e.parentNode.removeChild(e)}var o=e("../util/util"),i=e("../util/browser"),a=e("../util/window"),s=e("../util/dom"),l=e("../util/ajax"),u=e("../style/style"),c=e("../style/animation_loop"),p=e("../render/painter"),d=e("../geo/transform"),f=e("./hash"),h=e("./bind_handlers"),m=e("../geo/coordinate"),y=e("./camera"),v=e("../geo/lng_lat"),g=e("../geo/lng_lat_bounds"),_=e("point-geometry"),b=e("./control/attribution_control"),x=e("./control/logo_control"),w=e("mapbox-gl-supported"),E=0,k=22,C={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:E,maxZoom:k,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0},S=function(e){function t(t){var n=this;if(t=o.extend({},C,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var r=new d(t.minZoom,t.maxZoom,t.renderWorldCopies);if(e.call(this,r,t),this._interactive=t.interactive,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,"string"==typeof t.container){if(this._container=a.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else this._container=t.container;this.animationLoop=new c,t.maxBounds&&this.setMaxBounds(t.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),"undefined"!=typeof a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),h(this,t),this._hash=t.hash&&(new f).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this._classes=[],this.resize(),t.classes&&this.setClasses(t.classes),t.style&&this.setStyle(t.style),t.attributionControl&&this.addControl(new b),this.addControl(new x,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={showTileBoundariesSource:{},showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return t.indexOf("bottom")!==-1?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.addClass=function(e,t){return o.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(e)>=0||""===e?this:(this._classes.push(e),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0))},t.prototype.removeClass=function(e,t){o.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");
var n=this._classes.indexOf(e);return n<0||""===e?this:(this._classes.splice(n,1),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0))},t.prototype.setClasses=function(e,t){o.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var n={},r=0;r<e.length;r++)""!==e[r]&&(n[e[r]]=!0);return this._classes=Object.keys(n),this._classOptions=t,this.style&&this.style.updateClasses(),this._update(!0)},t.prototype.hasClass=function(e){return o.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(e)>=0},t.prototype.getClasses=function(){return o.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],n=e[1];return this._resizeCanvas(t,n),this.transform.resize(t,n),this.painter.resize(t,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new g(this.transform.pointLocation(new _(0,this.transform.height)),this.transform.pointLocation(new _(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new _(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new _(0,this.transform.size.y)))),e},t.prototype.setMaxBounds=function(e){if(e){var t=g.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},t.prototype.setMinZoom=function(e){if(e=null===e||void 0===e?E:e,e>=E&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between "+E+" and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if(e=null===e||void 0===e?k:e,e>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(v.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(_.convert(e))},t.prototype.on=function(t,n,r){var i=this;if(void 0===r)return e.prototype.on.call(this,t,n);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1,a=function(a){var s=i.queryRenderedFeatures(a.point,{layers:[n]});s.length?e||(e=!0,r.call(i,o.extend({features:s},a,{type:t}))):e=!1},s=function(){e=!1};return{layer:n,listener:r,delegates:{mousemove:a,mouseout:s}}}if("mouseleave"===t||"mouseout"===t){var l=!1,u=function(e){var a=i.queryRenderedFeatures(e.point,{layers:[n]});a.length?l=!0:l&&(l=!1,r.call(i,o.extend({},e,{type:t})))},c=function(e){l&&(l=!1,r.call(i,o.extend({},e,{type:t})))};return{layer:n,listener:r,delegates:{mousemove:u,mouseout:c}}}var p=function(e){var t=i.queryRenderedFeatures(e.point,{layers:[n]});t.length&&r.call(i,o.extend({features:t},e))};return{layer:n,listener:r,delegates:(d={},d[t]=p,d)};var d}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a);for(var s in a.delegates)i.on(s,a.delegates[s]);return this},t.prototype.off=function(t,n,r){var o=this;if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var i=this._delegatedListeners[t],a=0;a<i.length;a++){var s=i[a];if(s.layer===n&&s.listener===r){for(var l in s.delegates)o.off(l,s.delegates[l]);return i.splice(a,1),o}}},t.prototype.queryRenderedFeatures=function(){function e(e){return e instanceof _||Array.isArray(e)}var t,n={};return 2===arguments.length?(t=arguments[0],n=arguments[1]):1===arguments.length&&e(arguments[0])?t=arguments[0]:1===arguments.length&&(n=arguments[0]),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(t,n),n,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e,t){var n=this;void 0===e&&(e=[_.convert([0,0]),_.convert([this.transform.width,this.transform.height])]);var r,o=e instanceof _||"number"==typeof e[0];if(o&&t.expanded){var i=_.convert(e),a=this.transform.pointCoordinate(i),s=this.transform.coordinatePoint(new m(a.column-.5,a.row-.5,a.zoom)),l=this.transform.coordinatePoint(new m(a.column+.5,a.row+.5,a.zoom));e=[[l.x,l.y],[s.x,s.y]],o=!1}if(o){var u=_.convert(e);r=[u]}else{var c=[_.convert(e[0]),_.convert(e[1])];r=[c[0],new _(c[1].x,c[0].y),c[1],new _(c[0].x,c[1].y),c[0]]}return r=r.map(function(e){return n.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){var n=(!t||t.diff!==!1)&&this.style&&e&&!(e instanceof u)&&"string"!=typeof e;if(n)try{return this.style.setState(e)&&this._update(!0),this}catch(r){o.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),e?(e instanceof u?this.style=e:this.style=new u(e,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t],r=n._tiles;for(var o in r){var i=r[o];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,n){this.style.spriteAtlas.addImage(e,t,n)},t.prototype.removeImage=function(e){this.style.spriteAtlas.removeImage(e)},t.prototype.loadImage=function(e,t){l.getImage(e,t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,n,r){return this.style.setPaintProperty(e,t,n,r),this._update(!0),this},t.prototype.getPaintProperty=function(e,t,n){return this.style.getPaintProperty(e,t,n)},t.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("dragonfly-map");var t=this._canvasContainer=s.create("div","dragonfly-canvas-container",e);this._interactive&&t.classList.add("dragonfly-interactive"),this._canvas=s.create("canvas","dragonfly-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",0),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=s.create("div","dragonfly-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){o[e]=s.create("div","dragonfly-ctrl-"+e,r)})},t.prototype._resizeCanvas=function(e,t){var n=a.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=o.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},w.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);return t?void(this.painter=new p(t,this.transform)):void this.fire("error",{error:new Error("Failed to initialize WebGL")})},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&i.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender(),this):this},t.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTileBoundariesSource:this.showTileBoundariesSource,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),i.cancelFrame(this._frameId),this.setStyle(null),"undefined"!=typeof a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),this._container.classList.remove("dragonfly-map"),this.fire("remove")},t.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=i.frame(this._render))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundariesSource.get=function(){return this._showTileBoundariesSource},n.showTileBoundariesSource.set=function(e){this._showTileBoundariesSource!==e&&(this._showTileBoundariesSource=e,this._update())},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint=e,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},Object.defineProperties(t.prototype,n),t}(y);t.exports=S},{"../geo/coordinate":38,"../geo/lng_lat":39,"../geo/lng_lat_bounds":40,"../geo/transform":41,"../render/painter":56,"../style/animation_loop":127,"../style/style":132,"../util/ajax":181,"../util/browser":182,"../util/dom":189,"../util/util":204,"../util/window":184,"./bind_handlers":159,"./camera":160,"./control/attribution_control":161,"./control/logo_control":164,"./hash":176,"mapbox-gl-supported":226,"point-geometry":230}],178:[function(e,t,n){"use strict";var r=e("../util/dom"),o=e("../geo/lng_lat"),i=e("point-geometry"),a=e("../util/smart_wrap"),s=function(e,t){this._offset=i.convert(t&&t.offset||[0,0]),this._update=this._update.bind(this),this._onMapClick=this._onMapClick.bind(this),e||(e=r.create("div")),e.classList.add("dragonfly-marker"),this._element=e,this._popup=null};s.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},s.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),r.remove(this._element),this._popup&&this._popup.remove(),this},s.prototype.getLngLat=function(){return this._lngLat},s.prototype.setLngLat=function(e){return this._lngLat=o.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},s.prototype.getElement=function(){return this._element},s.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&(this._popup=e,this._popup.setLngLat(this._lngLat)),this},s.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},s.prototype.getPopup=function(){return this._popup},s.prototype.togglePopup=function(){var e=this._popup;e&&(e.isOpen()?e.remove():e.addTo(this._map))},s.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate("+this._pos.x+"px, "+this._pos.y+"px)"))},t.exports=s},{"../geo/lng_lat":39,"../util/dom":189,"../util/smart_wrap":201,"point-geometry":230}],179:[function(e,t,n){"use strict";function r(e){for(var t=!0;t;){var n=e;if(t=!1,n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{top:new u(0,n),"top-left":new u(r,r),"top-right":new u((-r),r),bottom:new u(0,(-n)),"bottom-left":new u(r,(-r)),"bottom-right":new u((-r),(-r)),left:new u(n,0),right:new u((-n),0)}}if(o(n)){var i=u.convert(n);return{top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{top:u.convert(n.top||[0,0]),"top-left":u.convert(n["top-left"]||[0,0]),"top-right":u.convert(n["top-right"]||[0,0]),bottom:u.convert(n.bottom||[0,0]),"bottom-left":u.convert(n["bottom-left"]||[0,0]),"bottom-right":u.convert(n["bottom-right"]||[0,0]),left:u.convert(n.left||[0,0]),right:u.convert(n.right||[0,0])}}e=new u(0,0),t=!0}}function o(e){return e instanceof u||Array.isArray(e)}var i=e("../util/util"),a=e("../util/evented"),s=e("../util/dom"),l=e("../geo/lng_lat"),u=e("point-geometry"),c=e("../util/window"),p=e("../util/smart_wrap"),d={closeButton:!0,closeOnClick:!0},f=function(e){function t(t){e.call(this),this.options=i.extend(Object.create(d),t),i.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=l.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(c.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,n=c.document.createDocumentFragment(),r=c.document.createElement("body");for(r.innerHTML=e;t=r.firstChild,t;)n.appendChild(t);return this.setDOMContent(n)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=s.create("div","dragonfly-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","dragonfly-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=s.create("div","dragonfly-popup",this._map.getContainer()),this._tip=s.create("div","dragonfly-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=p(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat);var e=this.options.anchor,t=r(this.options.offset);if(!e){var n=this._container.offsetWidth,o=this._container.offsetHeight;e=this._pos.y+t.bottom.y<o?["top"]:this._pos.y>this._map.transform.height-o?["bottom"]:[],this._pos.x<n/2?e.push("left"):this._pos.x>this._map.transform.width-n/2&&e.push("right"),e=0===e.length?"bottom":e.join("-")}var i=this._pos.add(t[e]).round(),a={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},l=this._container.classList;for(var u in a)l.remove("dragonfly-popup-anchor-"+u);l.add("dragonfly-popup-anchor-"+e),s.setTransform(this._container,a[e]+" translate("+i.x+"px,"+i.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(a);t.exports=f},{"../geo/lng_lat":39,"../util/dom":189,"../util/evented":191,"../util/smart_wrap":201,"../util/util":204,"../util/window":184,"point-geometry":230}],180:[function(e,t,n){"use strict";var r=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)};r.prototype.send=function(e,t,n,r,o){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n),this.target.postMessage({targetMapId:o,sourceMapId:this.mapId,type:e,id:String(i),data:t},r)},r.prototype.receive=function(e){var t,n=this,r=e.data,o=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var i=function(e,t,r){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(o),error:e?String(e):null,data:t},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&t(r.error||null,r.data);else if("undefined"!=typeof r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,i);else if("undefined"!=typeof r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=this.parent.getWorkerSource(r.sourceMapId,a[0]);s[a[1]](r.data,i)}else this.parent[r.type](r.data)}},r.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=r},{}],181:[function(e,t,n){"use strict";function r(e){var t=o.document.createElement("a");return t.href=e,t.protocol===o.document.location.protocol&&t.host===o.document.location.host}var o=e("./window"),i=function(e){function t(t,n){e.call(this,t),this.status=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);n.getJSON=function(e,t){var n=new o.XMLHttpRequest;return n.open("GET",e,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(e){t(e)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(r){return t(r)}t(null,e)}else t(new i(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(e,t){var n=new o.XMLHttpRequest;return n.open("GET",e,!0),n.responseType="arraybuffer",n.onerror=function(e){t(e)},n.onload=function(){return 0===n.response.byteLength&&200===n.status?t(new Error("http status 200 returned without content.")):void(n.status>=200&&n.status<300&&n.response?t(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new i(n.statusText,n.status)))},n.send(),n};var a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)return t(e);var r=new o.Image,i=o.URL||o.webkitURL;r.onload=function(){t(null,r),i.revokeObjectURL(r.src)};var s=new o.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(s):a})},n.getVideo=function(e,t){var n=o.document.createElement("video");n.onloadstart=function(){t(null,n)};for(var i=0;i<e.length;i++){var a=o.document.createElement("source");r(e[i])||(n.crossOrigin="Anonymous"),a.src=e[i],n.appendChild(a)}return n}},{"./window":184}],182:[function(e,t,n){"use strict";var r=e("./window");t.exports.now=function(){return r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date)}();var o=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame;n.frame=function(e){return o(e)};var i=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;n.cancelFrame=function(e){i(e)},n.timed=function(e,r,o){function i(l){a||(l=t.exports.now(),l>=s+r?e.call(o,1):(e.call(o,(l-s)/r),n.frame(i)))}if(!r)return e.call(o,1),null;var a=!1,s=t.exports.now();return n.frame(i),function(){a=!0}},n.getImageData=function(e){var t=r.document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height).data},n.supported=e("mapbox-gl-supported"),n.hardwareConcurrency=r.navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return r.devicePixelRatio}}),n.supportsWebp=!1;var a=r.document.createElement("img");a.onload=function(){n.supportsWebp=!0},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":184,"mapbox-gl-supported":226}],183:[function(e,t,n){"use strict";var r=e("webworkify"),o=e("../window"),i=o.URL.createObjectURL(new r(e("../../source/worker"),{bare:!0}));t.exports=function(){return new o.Worker(i)}},{"../../source/worker":81,"../window":184,webworkify:242}],184:[function(e,t,n){"use strict";t.exports=self},{}],185:[function(e,t,n){"use strict";function r(e,t){return t.area-e.area}var o=e("quickselect"),i=e("./util").calculateSignedArea;t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var a,s,l=[],u=0;u<n;u++){var c=i(e[u]);0!==c&&(e[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&l.push(a),a=[e[u]]):a.push(e[u]))}if(a&&l.push(a),t>1)for(var p=0;p<l.length;p++)l[p].length<=t||(o(l[p],t,1,l[p].length-1,r),l[p]=l[p].slice(0,t));return l}},{"./util":204,quickselect:232}],186:[function(e,t,n){"use strict";var r={API_URL:"https://api.mapbox.com",SOCEX_API_URL:"https://s3.amazonaws.com/dev-mapstudio.socialexplorer.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=r},{}],187:[function(e,t,n){"use strict";var r=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];t._stringToNumber[r]=n,t._numberToString[n]=r}};r.prototype.encode=function(e){return this._stringToNumber[e]},r.prototype.decode=function(e){return this._numberToString[e]},t.exports=r},{}],188:[function(e,t,n){"use strict";var r=e("./util"),o=e("./actor"),i=function(e,t){var n=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var i=this.workerPool.acquire(this.id),a=0;a<i.length;a++){var s=i[a],l=new o(s,t,n.id);l.name="Worker "+a,n.actors.push(l)}};i.prototype.broadcast=function(e,t,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},i.prototype.send=function(e,t,n,r,o){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n,o),r},i.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=i},{"./actor":180,"./util":204}],189:[function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length;t++)if(e[t]in l)return e[t];return e[0]}function o(e){e.preventDefault(),e.stopPropagation(),a.removeEventListener("click",o,!0)}var i=e("point-geometry"),a=e("./window");n.create=function(e,t,n){var r=a.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r};var s,l=a.document.documentElement.style,u=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){u&&(s=l[u],l[u]="none")},n.enableDrag=function(){u&&(l[u]=s)};var c=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[c]=t},n.suppressClick=function(){a.addEventListener("click",o,!0),a.setTimeout(function(){a.removeEventListener("click",o,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new i(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],o="touchend"===t.type?t.changedTouches:t.touches,a=0;a<o.length;a++)r.push(new i(o[a].clientX-n.left-e.clientLeft,o[a].clientY-n.top-e.clientTop));return r},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":184,"point-geometry":230}],190:[function(e,t,n){"use strict";var r=e("./util").clamp,o=e("./js_expression_eval"),i=e("./token");n.blendColors=function(e,t){return 1===t[3]?[t[0],t[1],t[2],t[3]]:[r(t[0]+(1-t[3])*e[0],0,1),r(t[1]+(1-t[3])*e[1],0,1),r(t[2]+(1-t[3])*e[2],0,1),r(t[3]+(1-t[3])*e[3],0,1)]},n.evaluateExpression=function(e,t){if(void 0!=e){if("number"==typeof e)return e;try{var n=i(t,e),r=o.parse(n).evaluate();if("number"==typeof r&&!isFinite(r))return;return r}catch(a){}}},n.injectCustomFunctions=function(){self.injectedCustomFunctions||(self.scientificNotationRegExp=/[eE]/,self.trailingDecimalsZeroesRegExp=/\.?0+$/,self.numberToComparableString=function(e){if("number"!=typeof e)return e;if(e%1===0&&!String(e).match(scientificNotationRegExp))return String(e);var t=Number(e).toExponential(6),n=String(t).split(scientificNotationRegExp),r=e<0?n[0].slice(1):n[0],o=r.indexOf("."),i=Number(n[1]),a=r.slice(0,o)+r.slice(o+1),s=i;if(i>0)for(;s-- >0;)a+="0";else for(;s++<0;)a="0"+a;return o+=i,a=o>0?a.slice(0,o)+"."+a.slice(o):a.slice(0,1)+"."+a.slice(1),a=a.replace(trailingDecimalsZeroesRegExp,""),e<0&&(a="-"+a),a},self.injectedCustomFunctions=!0)}},{"./js_expression_eval":197,"./token":203,"./util":204}],191:[function(e,t,n){"use strict";function r(e,t,n){n[e]=n[e]||[],n[e].push(t)}function o(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);r!==-1&&n[e].splice(r,1)}}var i=e("./util"),a=function(){};a.prototype.on=function(e,t){return this._listeners=this._listeners||{},r(e,t,this._listeners),this},a.prototype.off=function(e,t){return o(e,t,this._listeners),o(e,t,this._oneTimeListeners),this},a.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},r(e,t,this._oneTimeListeners),this},a.prototype.fire=function(e,t){var n=this;if(this.listens(e)){t=i.extend({},t,{type:e,target:this});for(var r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],a=0;a<r.length;a++)r[a].call(n,t);for(var s=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],l=0;l<s.length;l++)s[l].call(n,t),o(e,s[l],n._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(e,i.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else i.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},a.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},a.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=a},{"./util":204}],192:[function(e,t,n){"use strict";function r(e,t){return t.max-e.max}function o(e,t,n,r){this.p=new l(e,t),this.h=n,this.d=i(this.p,r),this.max=this.d+this.h*Math.SQRT2}function i(e,t){for(var n=!1,r=1/0,o=0;o<t.length;o++)for(var i=t[o],a=0,s=i.length,l=s-1;a<s;l=a++){var c=i[a],p=i[l];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(n=!n),r=Math.min(r,u(e,c,p))}return(n?1:-1)*Math.sqrt(r)}function a(e){for(var t=0,n=0,r=0,i=e[0],a=0,s=i.length,l=s-1;a<s;l=a++){var u=i[a],c=i[l],p=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*p,r+=(u.y+c.y)*p,t+=3*p}return new o(n/t,r/t,0,e)}var s=e("tinyqueue"),l=e("point-geometry"),u=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,n){t=t||1;for(var i,l,u,c,p=e[0],d=0;d<p.length;d++){var f=p[d];(!d||f.x<i)&&(i=f.x),(!d||f.y<l)&&(l=f.y),(!d||f.x>u)&&(u=f.x),(!d||f.y>c)&&(c=f.y)}var h=u-i,m=c-l,y=Math.min(h,m),v=y/2,g=new s(null,r);if(0===y)return[i,l];for(var _=i;_<u;_+=y)for(var b=l;b<c;b+=y)g.push(new o(_+v,b+v,v,e));for(var x=a(e),w=g.length;g.length;){var E=g.pop();(E.d>x.d||!x.d)&&(x=E,n&&console.log("found best %d after %d probes",Math.round(1e4*E.d)/1e4,w)),E.max-x.d<=t||(v=E.h/2,g.push(new o(E.p.x-v,E.p.y-v,v,e)),g.push(new o(E.p.x+v,E.p.y-v,v,e)),g.push(new o(E.p.x-v,E.p.y+v,v,e)),g.push(new o(E.p.x+v,E.p.y+v,v,e)),w+=4)}return n&&(console.log("num probes: "+w),console.log("best distance: "+x.d)),x.p}},{"./intersection_tests":195,"point-geometry":230,tinyqueue:234}],193:[function(e,t,n){"use strict";var r,o=e("./worker_pool");t.exports=function(){return r||(r=new o),r}},{"./worker_pool":207}],194:[function(e,t,n){"use strict";function r(e,t){this.stacks=e.readFields(o,[],t)}function o(e,t,n){if(1===e){var r=n.readMessage(i,{glyphs:{}});t.push(r)}}function i(e,t,n){if(1===e)t.name=n.readString();else if(2===e)t.range=n.readString();else if(3===e){var r=n.readMessage(a,{});t.glyphs[r.id]=r}}function a(e,t,n){
1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}t.exports=r},{}],195:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)if(h(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(h(e,t[r]))return!0;return!!u(e,t)}function o(e,t,n){for(var r=0;r<e.length;r++)for(var o=e[r],i=0;i<t.length;i++)for(var a=t[i],s=0;s<a.length;s++){var l=a[s];if(h(o,l))return!0;if(p(l,o,n))return!0}return!1}function i(e,t,n){var r=e[0][0],o=t[0][0],i=n*n;return r.distSqr(o)<i}function a(e,t){if(1===e.length&&1===e[0].length)return f(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],o=0;o<r.length;o++)if(f(e,r[o]))return!0;for(var i=0;i<e.length;i++){for(var a=e[i],s=0;s<a.length;s++)if(f(t,a[s]))return!0;for(var l=0;l<t.length;l++)if(u(a,t[l]))return!0}return!1}function s(e,t,n){for(var r=0;r<t.length;r++)for(var o=t[r],i=0;i<e.length;i++){var a=e[i];if(a.length>=3)for(var s=0;s<o.length;s++)if(h(a,o[s]))return!0;if(l(a,o,n))return!0}return!1}function l(e,t,n){if(e.length>1){if(u(e,t))return!0;for(var r=0;r<t.length;r++)if(p(t[r],e,n))return!0}for(var o=0;o<e.length;o++)if(p(e[o],t,n))return!0;return!1}function u(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],o=e[n+1],i=0;i<t.length-1;i++){var a=t[i],s=t[i+1];if(c(r,o,a,s))return!0}return!1}function c(e,t,n,r){return m(e,n,r)!==m(t,n,r)&&m(e,t,n)!==m(e,t,r)}function p(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var o=1;o<t.length;o++){var i=t[o-1],a=t[o];if(d(e,i,a)<r)return!0}return!1}function d(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var o=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return o<0?e.distSqr(t):o>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(o)._add(t))}function f(e,t){for(var n,r,o,i=!1,a=0;a<e.length;a++){n=e[a];for(var s=0,l=n.length-1;s<n.length;l=s++)r=n[s],o=n[l],r.y>t.y!=o.y>t.y&&t.x<(o.x-r.x)*(t.y-r.y)/(o.y-r.y)+r.x&&(i=!i)}return i}function h(e,t){for(var n=!1,r=0,o=e.length-1;r<e.length;o=r++){var i=e[r],a=e[o];i.y>t.y!=a.y>t.y&&t.x<(a.x-i.x)*(t.y-i.y)/(a.y-i.y)+i.x&&(n=!n)}return n}var m=e("./util").isCounterClockwise;t.exports={circleIntersectsPoint:i,multiPolygonIntersectsBufferedMultiPoint:o,multiPolygonIntersectsMultiPolygon:a,multiPolygonIntersectsBufferedMultiLine:s,polygonIntersectsPolygon:r,distToSegmentSquared:d}},{"./util":204}],196:[function(e,t,n){"use strict";var r={"Latin-1 Supplement":function(e){return e>=128&&e<=255},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=r},{}],197:[function(e,t,n){"use strict";Array.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=this,r=t||0;r<this.length;r++)if(n[r]===e)return r;return-1});var r=function o(){function e(e){function t(){}return t.prototype=e,new t}function t(e,t,n,r){this.type_=e,this.index_=t||0,this.prio_=n||0,this.number_=void 0!==r&&null!==r?r:0,this.toString=function(){switch(this.type_){case L:return this.number_;case R:case A:case j:return this.index_;case z:return"CALL";default:return"Invalid Token"}}}function n(e,t,n,r){this.tokens=e,this.ops1=t,this.ops2=n,this.functions=r}function r(e){return"string"==typeof e?(V.lastIndex=0,V.test(e)?"'"+e.replace(V,function(e){var t=F[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+e+"'"):e}function i(e,t){return Number(e)+Number(t)}function a(e,t){return e-t}function s(e,t){return e*t}function l(e,t){return e/t}function u(e,t){return e%t}function c(e,t){return""+e+t}function p(e,t){return e==t}function d(e,t){return e!=t}function f(e,t){return e>t}function h(e,t){return e<t}function m(e,t){return e>=t}function y(e,t){return e<=t}function v(e,t){return Boolean(e&&t)}function g(e,t){return Boolean(e||t)}function _(e){return Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function b(e){return Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function w(e){return Math.tanh?Math.tanh(e):e===1/0?1:e===-(1/0)?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function E(e){return Math.asinh?Math.asinh(e):e===-(1/0)?e:Math.log(e+Math.sqrt(e*e+1))}function k(e){return Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function C(e){return Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function S(e){return Math.log(e)*Math.LOG10E}function P(e){return-e}function O(e){return Math.trunc?Math.trunc(e):x<0?Math.ceil(x):Math.floor(x)}function M(e){return Math.random()*(e||1)}function D(e){e=Math.floor(e);for(var t=e;e>1;)t*=--e;return t}function T(){var e=arguments;if(Math.hypot)return Math.hypot.apply(this,arguments);for(var t=0,n=arguments.length,r=0;r<n;r++){if(e[r]===1/0||e[r]===-(1/0))return 1/0;t+=e[r]*e[r]}return Math.sqrt(t)}function N(e,t,n){return e?t:n}function I(e,t){return"[object Array]"!=Object.prototype.toString.call(e)?[e,t]:(e=e.slice(),e.push(t),e)}function o(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:_,cosh:b,tanh:w,asinh:E,acosh:k,atanh:C,sqrt:Math.sqrt,log:Math.log,lg:S,log10:S,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:O,"-":P,exp:Math.exp},this.ops2={"+":i,"-":a,"*":s,"/":l,"%":u,"^":Math.pow,",":I,"||":c,"==":p,"!=":d,">":f,"<":h,">=":m,"<=":y,and:v,or:g},this.functions={random:M,fac:D,min:Math.min,max:Math.max,hypot:T,pyt:T,pow:Math.pow,atan2:Math.atan2,"if":N},this.consts={E:Math.E,PI:Math.PI}}var L=0,R=1,A=2,j=3,z=4,V=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,F={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};n.prototype={simplify:function(r){var o=this;r=r||{};var i,a,s,l,u=[],c=[],p=this.tokens.length,d=0;for(d=0;d<p;d++){l=o.tokens[d];var f=l.type_;if(f===L)u.push(l);else if(f===j&&l.index_ in r)l=new t(L,0,0,r[l.index_]),u.push(l);else if(f===A&&u.length>1)a=u.pop(),i=u.pop(),s=o.ops2[l.index_],l=new t(L,0,0,s(i.number_,a.number_)),u.push(l);else if(f===R&&u.length>0)i=u.pop(),s=o.ops1[l.index_],l=new t(L,0,0,s(i.number_)),u.push(l);else{for(;u.length>0;)c.push(u.shift());c.push(l)}}for(;u.length>0;)c.push(u.shift());return new n(c,e(this.ops1),e(this.ops2),e(this.functions))},substitute:function(r,i){var a=this;i instanceof n||(i=(new o).parse(String(i)));var s,l=[],u=this.tokens.length,c=0;for(c=0;c<u;c++){s=a.tokens[c];var p=s.type_;if(p===j&&s.index_===r)for(var d=0;d<i.tokens.length;d++){var f=i.tokens[d],h=new t(f.type_,f.index_,f.prio_,f.number_);l.push(h)}else l.push(s)}var m=new n(l,e(this.ops1),e(this.ops2),e(this.functions));return m},evaluate:function(e){var t=this;e=e||{};var n,r,o,i,a=[],s=this.tokens.length,l=0;for(l=0;l<s;l++){i=t.tokens[l];var u=i.type_;if(u===L)a.push(i.number_);else if(u===A)r=a.pop(),n=a.pop(),o=t.ops2[i.index_],a.push(o(n,r));else if(u===j)if(i.index_ in e)a.push(e[i.index_]);else{if(!(i.index_ in t.functions))throw new Error("undefined variable: "+i.index_);a.push(t.functions[i.index_])}else if(u===R)n=a.pop(),o=t.ops1[i.index_],a.push(o(n));else{if(u!==z)throw new Error("invalid Expression");if(n=a.pop(),o=a.pop(),!o.apply||!o.call)throw new Error(o+" is not a function");"[object Array]"==Object.prototype.toString.call(n)?a.push(o.apply(void 0,n)):a.push(o.call(void 0,n))}}if(a.length>1)throw new Error("invalid Expression (parity)");return a[0]},toString:function(e){var t,n,o,i,a=this,s=[],l=this.tokens.length,u=0;for(u=0;u<l;u++){i=a.tokens[u];var c=i.type_;if(c===L)s.push(r(i.number_));else if(c===A)n=s.pop(),t=s.pop(),o=i.index_,e&&"^"==o?s.push("Math.pow("+t+","+n+")"):s.push("("+t+o+n+")");else if(c===j)s.push(i.index_);else if(c===R)t=s.pop(),o=i.index_,"-"===o?s.push("("+o+t+")"):s.push(o+"("+t+")");else{if(c!==z)throw new Error("invalid Expression");t=s.pop(),o=s.pop(),s.push(o+"("+t+")")}}if(s.length>1)throw new Error("invalid Expression (parity)");return s[0]},variables:function(){for(var e=this,t=this.tokens.length,n=[],r=0;r<t;r++){var o=e.tokens[r];o.type_===j&&n.indexOf(o.index_)==-1&&n.push(o.index_)}return n},toJSFunction:function(e,t){var n=new Function(e,"with(Parser.values) { return "+this.simplify(t).toString(!0)+"; }");return n}},o.parse=function(e){return(new o).parse(e)},o.evaluate=function(e,t){return o.parse(e).evaluate(t)},o.Expression=n,o.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:_,cosh:b,tanh:w,asinh:E,acosh:k,atanh:C,sqrt:Math.sqrt,log:Math.log,lg:S,log10:S,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:O,random:M,fac:D,exp:Math.exp,min:Math.min,max:Math.max,hypot:T,pyt:T,pow:Math.pow,atan2:Math.atan2,"if":N,E:Math.E,PI:Math.PI};var B=1,U=2,W=4,q=8,H=16,Z=32,G=64,X=128,K=256;return o.prototype={parse:function(r){var o=this;this.errormsg="",this.success=!0;var i=[],a=[];this.tmpprio=0;var s=B|q|W|G,l=0;for(this.expression=r,this.pos=0;this.pos<this.expression.length;)if(o.isOperator())o.isSign()&&s&G?(o.isNegativeSign()&&(o.tokenprio=2,o.tokenindex="-",l++,o.addfunc(a,i,R)),s=B|q|W|G):o.isComment()||(0===(s&U)&&o.error_parsing(o.pos,"unexpected operator"),l+=2,o.addfunc(a,i,A),s=B|q|W|G);else if(o.isNumber()){0===(s&B)&&o.error_parsing(o.pos,"unexpected number");var u=new t(L,0,0,o.tokennumber);a.push(u),s=U|H|Z}else if(o.isString()){0===(s&B)&&o.error_parsing(o.pos,"unexpected string");var u=new t(L,0,0,o.tokennumber);a.push(u),s=U|H|Z}else if(o.isLeftParenth())0===(s&q)&&o.error_parsing(o.pos,'unexpected "("'),s&X&&(l+=2,o.tokenprio=-2,o.tokenindex=-1,o.addfunc(a,i,z)),s=B|q|W|G|K;else if(o.isRightParenth()){if(s&K){var u=new t(L,0,0,[]);a.push(u)}else 0===(s&H)&&o.error_parsing(o.pos,'unexpected ")"');s=U|H|Z|q|X}else if(o.isComma())0===(s&Z)&&o.error_parsing(o.pos,'unexpected ","'),o.addfunc(a,i,A),l+=2,s=B|q|W|G;else if(o.isConst()){0===(s&B)&&o.error_parsing(o.pos,"unexpected constant");var c=new t(L,0,0,o.tokennumber);a.push(c),s=U|H|Z}else if(o.isOp2())0===(s&W)&&o.error_parsing(o.pos,"unexpected function"),o.addfunc(a,i,A),l+=2,s=q;else if(o.isOp1())0===(s&W)&&o.error_parsing(o.pos,"unexpected function"),o.addfunc(a,i,R),l++,s=q;else if(o.isVar()){0===(s&B)&&o.error_parsing(o.pos,"unexpected variable");var p=new t(j,o.tokenindex,0,0);a.push(p),s=U|H|Z|q|X}else o.isWhite()||(""===o.errormsg?o.error_parsing(o.pos,"unknown character"):o.error_parsing(o.pos,o.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');i.length>0;){var d=i.pop();a.push(d)}return l+1!==a.length&&this.error_parsing(this.pos,"parity"),new n(a,e(this.ops1),e(this.ops2),e(this.functions))},evaluate:function(e,t){return this.parse(e).evaluate(t)},error_parsing:function(e,t){throw this.success=!1,this.errormsg="parse error [column "+e+"]: "+t,this.column=e,new Error(this.errormsg)},addfunc:function(e,n,r){for(var o=new t(r,this.tokenindex,this.tokenprio+this.tmpprio,0);n.length>0&&o.prio_<=n[n.length-1].prio_;)e.push(n.pop());n.push(o)},isNumber:function(){for(var e=this,t=!1,n="";this.pos<this.expression.length;){var r=e.expression.charCodeAt(e.pos);if(!(r>=48&&r<=57||46===r))break;n+=e.expression.charAt(e.pos),e.pos++,e.tokennumber=parseFloat(n),t=!0}return t},unescape:function(e,t){for(var n=this,r=[],o=!1,i=0;i<e.length;i++){var a=e.charAt(i);if(o){switch(a){case"'":r.push("'");break;case"\\":r.push("\\");break;case"/":r.push("/");break;case"b":r.push("\b");break;case"f":r.push("\f");break;case"n":r.push("\n");break;case"r":r.push("\r");break;case"t":r.push("\t");break;case"u":var s=parseInt(e.substring(i+1,i+5),16);r.push(String.fromCharCode(s)),i+=4;break;default:throw n.error_parsing(t+i,"Illegal escape sequence: '\\"+a+"'")}o=!1}else"\\"==a?o=!0:r.push(a)}return r.join("")},isString:function(){var e=this,t=!1,n="",r=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){var o=e.expression.charAt(e.pos);if("'"==o&&"\\"!=n.slice(-1)){e.pos++,e.tokennumber=e.unescape(n,r),t=!0;break}n+=e.expression.charAt(e.pos),e.pos++}return t},isConst:function(){var e,t=this;for(var n in t.consts){var r=n.length;if(e=t.expression.substr(t.pos,r),n===e)return t.tokennumber=t.consts[n],t.pos+=r,!0}return!1},isOperator:function(){var e=this.expression.charCodeAt(this.pos);if(43===e)this.tokenprio=2,this.tokenindex="+";else if(45===e)this.tokenprio=2,this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var e=this.expression.charCodeAt(this.pos-1);return 45===e||43===e},isPositiveSign:function(){var e=this.expression.charCodeAt(this.pos-1);return 43===e},isNegativeSign:function(){var e=this.expression.charCodeAt(this.pos-1);return 45===e},isLeftParenth:function(){var e=this.expression.charCodeAt(this.pos);return 40===e&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){var e=this.expression.charCodeAt(this.pos);return 41===e&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){var e=this.expression.charCodeAt(this.pos);return 44===e&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e=this.expression.charCodeAt(this.pos);return(32===e||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){for(var e=this,t="",n=this.pos;n<this.expression.length;n++){var r=e.expression.charAt(n);if(r.toUpperCase()===r.toLowerCase()&&(n===e.pos||"_"!=r&&(r<"0"||r>"9")))break;t+=r}return t.length>0&&t in this.ops1&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isOp2:function(){for(var e=this,t="",n=this.pos;n<this.expression.length;n++){var r=e.expression.charAt(n);if(r.toUpperCase()===r.toLowerCase()&&(n===e.pos||"_"!=r&&(r<"0"||r>"9")))break;t+=r}return t.length>0&&t in this.ops2&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isVar:function(){for(var e=this,t="",n=this.pos;n<this.expression.length;n++){var r=e.expression.charAt(n);if(r.toUpperCase()===r.toLowerCase()&&(n===e.pos||"_"!=r&&(r<"0"||r>"9")))break;t+=r}return t.length>0&&(this.tokenindex=t,this.tokenprio=4,this.pos+=t.length,!0)},isComment:function(){var e=this.expression.charCodeAt(this.pos-1);return 47===e&&42===this.expression.charCodeAt(this.pos)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)}},o};t.exports=r()},{}],198:[function(e,t,n){"use strict";var r=function(e,t){this.max=e,this.onRemove=t,this.reset()};r.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.getWithoutRemoving=function(e){if(!this.has(e))return null;var t=this.data[e];return t},r.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},r.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var n=t.get(t.order[0]);n&&t.onRemove(n)}return this},t.exports=r},{}],199:[function(e,t,n){"use strict";function r(e,t){var n=u(p.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,!p.REQUIRE_ACCESS_TOKEN)return c(e);if(t=t||p.ACCESS_TOKEN,!t)throw new Error("An API access token is required to use Mapbox GL. "+f);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+f);return e.params.push("access_token="+t),c(e)}function o(e){var t=u(p.SOCEX_API_URL);return e.protocol=t.protocol,e.authority=t.authority,e.path=""+t.path+e.path,c(e)}function i(e){return 0===e.indexOf("mapbox:")}function a(e){return 0===e.indexOf("socex:")}function s(e){return 0===e.indexOf("mapstudio:")}function l(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(p.ACCESS_TOKEN||""))}function u(e){var t=e.match(m);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function c(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var p=e("./config"),d=e("./browser"),f="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(e,t){if(!i(e))return e;var n=u(e);return n.path="/styles/v1"+n.path,r(n,t)},n.normalizeGlyphsURL=function(e,t){if(!i(e)&&!a(e)&&!s(e))return e;var n=u(e);return"socex"===n.protocol?(n.path="/socex-fonts"+n.path,o(n,t)):"mapstudio"===n.protocol?(n.path="/fonts-store"+n.path,o(n,t)):(n.path="/fonts/v1"+n.path,r(n,t))},n.normalizeSourceURL=function(e,t){if(!i(e))return e;var n=u(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,t)},n.normalizeSpriteURL=function(e,t,n,o){if(!e.match(/^mapbox:\/\/sprites\//))return e+t+n;var a=u(e);return i(e)?(a.path="/styles/v1"+a.path+"/sprite"+t+n,r(a,o)):(a.path+=""+t+n,c(a))};var h=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(e,t,n){if(!t||!i(t))return e;var r=u(e),o=d.devicePixelRatio>=2||512===n?"@2x":"",a=d.supportsWebp?".webp":"$1";return r.path=r.path.replace(h,""+o+a),l(r.params),c(r)};var m=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":182,"./config":186}],200:[function(e,t,n){"use strict";var r=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,r=e;t<r.length;t+=1){var o=r[t];if(!n.charAllowsIdeographicBreaking(o.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,r=e;t<r.length;t+=1){var o=r[t];if(n.charHasUprightVerticalOrientation(o.charCodeAt(0)))return!0}return!1},t.exports.charAllowsIdeographicBreaking=function(e){return!!(!(e<11904)&&(r["Bopomofo Extended"](e)||r.Bopomofo(e)||r["CJK Compatibility Forms"](e)||r["CJK Compatibility Ideographs"](e)||r["CJK Compatibility"](e)||r["CJK Radicals Supplement"](e)||r["CJK Strokes"](e)||r["CJK Symbols and Punctuation"](e)||r["CJK Unified Ideographs Extension A"](e)||r["CJK Unified Ideographs"](e)||r["Enclosed CJK Letters and Months"](e)||r["Halfwidth and Fullwidth Forms"](e)||r.Hiragana(e)||r["Ideographic Description Characters"](e)||r["Kangxi Radicals"](e)||r["Katakana Phonetic Extensions"](e)||r.Katakana(e)||r["Vertical Forms"](e)||r["Yi Radicals"](e)||r["Yi Syllables"](e)))},n.charHasUprightVerticalOrientation=function(e){return!!(746===e||747===e||!(e<4352)&&(r["Bopomofo Extended"](e)||r.Bopomofo(e)||r["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||r["CJK Compatibility Ideographs"](e)||r["CJK Compatibility"](e)||r["CJK Radicals Supplement"](e)||r["CJK Strokes"](e)||!(!r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||r["CJK Unified Ideographs Extension A"](e)||r["CJK Unified Ideographs"](e)||r["Enclosed CJK Letters and Months"](e)||r["Hangul Compatibility Jamo"](e)||r["Hangul Jamo Extended-A"](e)||r["Hangul Jamo Extended-B"](e)||r["Hangul Jamo"](e)||r["Hangul Syllables"](e)||r.Hiragana(e)||r["Ideographic Description Characters"](e)||r.Kanbun(e)||r["Kangxi Radicals"](e)||r["Katakana Phonetic Extensions"](e)||r.Katakana(e)&&12540!==e||!(!r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||r["Unified Canadian Aboriginal Syllabics"](e)||r["Unified Canadian Aboriginal Syllabics Extended"](e)||r["Vertical Forms"](e)||r["Yijing Hexagram Symbols"](e)||r["Yi Syllables"](e)||r["Yi Radicals"](e)))},n.charHasNeutralVerticalOrientation=function(e){return!!(r["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||r["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||r["Letterlike Symbols"](e)||r["Number Forms"](e)||r["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||r["Control Pictures"](e)&&9251!==e||r["Optical Character Recognition"](e)||r["Enclosed Alphanumerics"](e)||r["Geometric Shapes"](e)||r["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||r["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||r["CJK Symbols and Punctuation"](e)||r.Katakana(e)||r["Private Use Area"](e)||r["CJK Compatibility Forms"](e)||r["Small Form Variants"](e)||r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)},n.charHasRotatedVerticalOrientation=function(e){return!(n.charHasUprightVerticalOrientation(e)||n.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":196}],201:[function(e,t,n){"use strict";var r=e("../geo/lng_lat");t.exports=function(e,t,n){if(e=new r(e.lng,e.lat),t){var o=new r(e.lng-360,e.lat),i=new r(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(t);n.locationPoint(o).distSqr(t)<a?e=o:n.locationPoint(i).distSqr(t)<a&&(e=i)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":39}],202:[function(e,t,n){"use strict";function r(e){var t=JSON.stringify(e);if(y[t])return y[t];var n=void 0===e.alignment?1:e.alignment,r=0,a=0,l=["Uint8"],p=e.members.map(function(e){l.indexOf(e.type)<0&&l.push(e.type);var t=i(e.type),s=r=o(r,Math.max(n,t)),u=e.components||1;return a=Math.max(a,t),r+=t*u,{name:e.name,type:e.type,components:u,offset:s}}),f=o(r,Math.max(a,n)),h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(d);h.prototype.alignment=n,h.prototype.size=f;for(var v=0,g=p;v<g.length;v+=1)for(var _=g[v],b=0;b<_.components;b++){var x=_.name+(1===_.components?"":b);Object.defineProperty(h.prototype,x,{get:u(_,b),set:c(_,b)})}var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(m);return w.prototype.members=p,w.prototype.StructType=h,w.prototype.bytesPerElement=f,w.prototype.emplaceBack=s(p,f),w.prototype._usedTypes=l,y[t]=w,w}function o(e,t){return Math.ceil(e/t)*t}function i(e){return p[e].BYTES_PER_ELEMENT}function a(e){return e.toLowerCase()}function s(e,t){for(var n=[],r=[],o="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,l=e;s<l.length;s+=1){var u=l[s],c=i(u.type);n.indexOf(c)<0&&(n.push(c),o+="var o"+c.toFixed(0)+" = i * "+(t/c).toFixed(0)+";\n");for(var p=0;p<u.components;p++){var d="v"+r.length,f="o"+c.toFixed(0)+" + "+(u.offset/c+p).toFixed(0);o+="this."+a(u.type)+"["+f+"] = "+d+";\n",r.push(d)}}return o+="return i;",new Function(r.toString(),o)}function l(e,t){var n="this._pos"+i(e.type).toFixed(0),r=(e.offset/i(e.type)+t).toFixed(0),o=n+" + "+r;return"this._structArray."+a(e.type)+"["+o+"]"}function u(e,t){return new Function("return "+l(e,t)+";")}function c(e,t){return new Function("x",l(e,t)+" = x;")}t.exports=r;var p={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},d=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},f=128,h=5,m=function(e){this.isTransferred=!1,void 0!==e?(this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};m.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}},m.prototype.serialize=function(e){return this._trim(),e&&(this.isTransferred=!0,e.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},m.prototype.get=function(e){return new this.StructType(this,e)},m.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},m.prototype.resize=function(e){if(this.length=e,e>this.capacity){this.capacity=Math.max(e,Math.floor(this.capacity*h),f),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},m.prototype._refreshViews=function(){for(var e=this,t=0,n=e._usedTypes;t<n.length;t+=1){var r=n[t];e[a(r)]=new p[r](e.arrayBuffer)}},m.prototype.toArray=function(e,t){for(var n=this,r=[],o=e;o<t;o++){var i=n.get(o);r.push(i)}return r};var y={}},{}],203:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?e[n]:""})}t.exports=r},{}],204:[function(e,t,n){"use strict";var r=e("@mapbox/unitbezier"),o=e("../geo/coordinate");e("point-geometry"),n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,o){var i=new r(e,t,n,o);return function(e){return i.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,o=((e-t)%r+r)%r+t;return o===t?n:o},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,o=new Array(e.length),i=null;e.forEach(function(e,a){t(e,function(e,t){e&&(i=e),o[a]=t,0===--r&&n(i,o)})})},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e,t,n,r){for(var o=arguments,i=1;i<arguments.length;i++){var a=o[i];for(var s in a)e[s]=a[s]}return e},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var o=t[r];o in e&&(n[o]=e[o])}return n};var i=1;n.uniqueId=function(){return i++},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-(1/0),i=-(1/0),a=0;a<e.length;a++)t=Math.min(t,e[a].column),n=Math.min(n,e[a].row),r=Math.max(r,e[a].column),i=Math.max(i,e[a].row);var s=r-t,l=i-n,u=Math.max(s,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new o((t+r)/2,(n+i)/2,0).zoomTo(c)},n.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},n.mapObject=function(e,t,n){var r=this,o={};for(var i in e)o[i]=t.call(n||r,e[i],i,e);return o},n.filterObject=function(e,t,n){var r=this,o={};for(var i in e)t.call(n||r,e[i],i,e)&&(o[i]=e[i]);return o},n.deepEqual=function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n.deepEqual(e[r],t[r]))return!1;return!0}if(e instanceof RegExp&&t instanceof RegExp)return e.toString()===t.toString();if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;var o=Object.keys(e);if(o.length!==Object.keys(t).length)return!1;for(var i in e)if(!n.deepEqual(e[i],t[i]))return!1;return!0}return e===t},n.clone=function(e){return Array.isArray(e)?e.map(n.clone):e instanceof RegExp&&e?n.cloneRegExp(e):"object"==typeof e&&e?n.mapObject(e,n.clone):e},n.cloneRegExp=function(e){var t={global:"g",ignoreCase:"i",multiline:"m"},n=Object.keys(t).map(function(n){return e[n]?t[n]:""}).join("");return new RegExp(e.source,n)},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var a={};n.warnOnce=function(e){a[e]||("undefined"!=typeof console&&console.warn(e),a[e]=!0)},n.isCounterClockwise=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},n.calculateSignedArea=function(e){for(var t=0,n=0,r=e.length,o=r-1,i=void 0,a=void 0;n<r;o=n++)i=e[n],
a=e[o],t+=(a.x-i.x)*(i.y+a.y);return t},n.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],r=e[e.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(n.calculateSignedArea(e))>.01},n.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,[t*Math.cos(n)*Math.sin(r),t*Math.sin(n)*Math.sin(r),t*Math.cos(r)]},n.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(e.replace(t,function(e,t,r,o){var i=r||o;return n[t]=!i||i.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":38,"@mapbox/unitbezier":3,"point-geometry":230}],205:[function(e,t,n){"use strict";var r=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},o={geometry:{}};o.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},o.geometry.set=function(e){this._geometry=e},r.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var n in e)"_geometry"!==n&&"_vectorTileFeature"!==n&&(t[n]=e[n]);return t},Object.defineProperties(r.prototype,o),t.exports=r},{}],206:[function(e,t,n){"use strict";var r=e("./script_detection");t.exports=function(e){for(var n="",o=0;o<e.length;o++){var i=e.charCodeAt(o+1)||null,a=e.charCodeAt(o-1)||null,s=(!i||!r.charHasRotatedVerticalOrientation(i)||t.exports.lookup[e[o+1]])&&(!a||!r.charHasRotatedVerticalOrientation(a)||t.exports.lookup[e[o-1]]);n+=s&&t.exports.lookup[e[o]]?t.exports.lookup[e[o]]:e[o]}return n},t.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":200}],207:[function(e,t,n){"use strict";var r=e("./web_worker"),o=function(){this.active={}};o.prototype.acquire=function(t){var n=this;if(!this.workers){var o=e("../").workerCount;for(this.workers=[];this.workers.length<o;)n.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},o.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=o},{"../":42,"./web_worker":183}],208:[function(e,t,n){"use strict";function r(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,s=o(e,0,i,n,!0),l=[];if(!s)return l;var u,c,d,f,h,m,y;if(r&&(s=p(e,t,s,n)),e.length>80*n){u=d=e[0],c=f=e[1];for(var v=n;v<i;v+=n)h=e[v],m=e[v+1],h<u&&(u=h),m<c&&(c=m),h>d&&(d=h),m>f&&(f=m);y=Math.max(d-u,f-c)}return a(s,l,n,u,c,y),l}function o(e,t,n,r,o){var i,a;if(o===T(e,t,n,r)>0)for(i=t;i<n;i+=r)a=O(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=O(i,e[i],e[i+1],a);return a&&w(a,a.next)&&(M(a),a=a.next),a}function i(e,t){if(!e)return e;t||(t=e);var n,r=e;do if(n=!1,r.steiner||!w(r,r.next)&&0!==x(r.prev,r,r.next))r=r.next;else{if(M(r),r=t=r.prev,r===r.next)return null;n=!0}while(n||r!==t);return t}function a(e,t,n,r,o,p,d){if(e){!d&&p&&m(e,r,o,p);for(var f,h,y=e;e.prev!==e.next;)if(f=e.prev,h=e.next,p?l(e,r,o,p):s(e))t.push(f.i/n),t.push(e.i/n),t.push(h.i/n),M(e),e=h.next,y=h.next;else if(e=h,e===y){d?1===d?(e=u(e,t,n),a(e,t,n,r,o,p,2)):2===d&&c(e,t,n,r,o,p):a(i(e),t,n,r,o,p,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,o.x,o.y)&&x(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function l(e,t,n,r){var o=e.prev,i=e,a=e.next;if(x(o,i,a)>=0)return!1;for(var s=o.x<i.x?o.x<a.x?o.x:a.x:i.x<a.x?i.x:a.x,l=o.y<i.y?o.y<a.y?o.y:a.y:i.y<a.y?i.y:a.y,u=o.x>i.x?o.x>a.x?o.x:a.x:i.x>a.x?i.x:a.x,c=o.y>i.y?o.y>a.y?o.y:a.y:i.y>a.y?i.y:a.y,p=v(s,l,t,n,r),d=v(u,c,t,n,r),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&_(o.x,o.y,i.x,i.y,a.x,a.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=p;){if(f!==e.prev&&f!==e.next&&_(o.x,o.y,i.x,i.y,a.x,a.y,f.x,f.y)&&x(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function u(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!w(o,i)&&E(o,r,r.next,i)&&C(o,i)&&C(i,o)&&(t.push(o.i/n),t.push(r.i/n),t.push(i.i/n),M(r),M(r.next),r=e=i),r=r.next}while(r!==e);return r}function c(e,t,n,r,o,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&b(l,u)){var c=P(l,u);return l=i(l,l.next),c=i(c,c.next),a(l,t,n,r,o,s),void a(c,t,n,r,o,s)}u=u.next}l=l.next}while(l!==e)}function p(e,t,n,r){var a,s,l,u,c,p=[];for(a=0,s=t.length;a<s;a++)l=t[a]*r,u=a<s-1?t[a+1]*r:e.length,c=o(e,l,u,r,!1),c===c.next&&(c.steiner=!0),p.push(g(c));for(p.sort(d),a=0;a<p.length;a++)f(p[a],n),n=i(n,n.next);return n}function d(e,t){return e.x-t.x}function f(e,t){if(t=h(e,t)){var n=P(t,e);i(n,n.next)}}function h(e,t){var n,r=t,o=e.x,i=e.y,a=-(1/0);do{if(i<=r.y&&i>=r.next.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a){if(a=s,s===o){if(i===r.y)return r;if(i===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(o===a)return n.prev;var l,u=n,c=n.x,p=n.y,d=1/0;for(r=n.next;r!==u;)o>=r.x&&r.x>=c&&_(i<p?o:a,i,c,p,i<p?a:o,i,r.x,r.y)&&(l=Math.abs(i-r.y)/(o-r.x),(l<d||l===d&&r.x>n.x)&&C(r,e)&&(n=r,d=l)),r=r.next;return n}function m(e,t,n,r){var o=e;do null===o.z&&(o.z=v(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,y(o)}function y(e){var t,n,r,o,i,a,s,l,u=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0===s?(o=r,r=r.nextZ,l--):0!==l&&r?n.z<=r.z?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,l--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,u*=2}while(a>1);return e}function v(e,t,n,r,o){return e=32767*(e-n)/o,t=32767*(t-r)/o,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function g(e){var t=e,n=e;do t.x<n.x&&(n=t),t=t.next;while(t!==e);return n}function _(e,t,n,r,o,i,a,s){return(o-a)*(t-s)-(e-a)*(i-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(i-s)-(o-a)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!k(e,t)&&C(e,t)&&C(t,e)&&S(e,t)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function E(e,t,n,r){return!!(w(e,t)&&w(n,r)||w(e,r)&&w(n,t))||x(e,t,n)>0!=x(e,t,r)>0&&x(n,r,e)>0!=x(n,r,t)>0}function k(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&E(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function C(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function S(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do n.y>i!=n.next.y>i&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function P(e,t){var n=new D(e.i,e.x,e.y),r=new D(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function O(e,t,n,r){var o=new D(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function M(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function D(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}t.exports=r,r.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(T(e,0,i,n));if(o)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(T(e,u,c,n))}var p=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,h=r[s+2]*n;p+=Math.abs((e[d]-e[h])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[h+1]-e[d+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n}},{}],209:[function(e,t,n){"use strict";function r(e){if("Polygon"===e.type)return o(e.coordinates);if("MultiPolygon"===e.type){for(var t=0,n=0;n<e.coordinates.length;n++)t+=o(e.coordinates[n]);return t}return null}function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(i(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(i(e[n]))}return t}function i(e){var t=0;if(e.length>2){for(var n,r,o=0;o<e.length-1;o++)n=e[o],r=e[o+1],t+=a(r[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(r[1])));t=t*s.RADIUS*s.RADIUS/2}return t}function a(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=i},{wgs84:243}],210:[function(e,t,n){"use strict";function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(o(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return i(e,t);default:return e}}function o(e,t){return function(n){return e(n,t)}}function i(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(o(a,t))),e}function a(e,t){t=!!t,e[0]=s(e[0],!t);for(var n=1;n<e.length;n++)e[n]=s(e[n],t);return e}function s(e,t){return l(e)===t?e:e.reverse()}function l(e){return u.ring(e)>=0}var u=e("geojson-area");t.exports=r},{"geojson-area":209}],211:[function(e,t,n){"use strict";function r(e,t,n,r,a,l,u,c){if(n/=t,r/=t,u>=n&&c<=r)return e;if(u>r||c<n)return null;for(var p=[],d=0;d<e.length;d++){var f,h,m=e[d],y=m.geometry,v=m.type;if(f=m.min[a],h=m.max[a],f>=n&&h<=r)p.push(m);else if(!(f>r||h<n)){var g=1===v?o(y,n,r,a):i(y,n,r,a,l,3===v);g.length&&p.push(s(m.tags,v,g,m.id))}}return p.length?p:null}function o(e,t,n,r){for(var o=[],i=0;i<e.length;i++){var a=e[i],s=a[r];s>=t&&s<=n&&o.push(a)}return o}function i(e,t,n,r,o,i){for(var s=[],l=0;l<e.length;l++){var u,c,p,d=0,f=0,h=null,m=e[l],y=m.area,v=m.dist,g=m.outer,_=m.length,b=[];for(c=0;c<_-1;c++)u=h||m[c],h=m[c+1],d=f||u[r],f=h[r],d<t?f>n?(b.push(o(u,h,t),o(u,h,n)),i||(b=a(s,b,y,v,g))):f>=t&&b.push(o(u,h,t)):d>n?f<t?(b.push(o(u,h,n),o(u,h,t)),i||(b=a(s,b,y,v,g))):f<=n&&b.push(o(u,h,n)):(b.push(u),f<t?(b.push(o(u,h,t)),i||(b=a(s,b,y,v,g))):f>n&&(b.push(o(u,h,n)),i||(b=a(s,b,y,v,g))));u=m[_-1],d=u[r],d>=t&&d<=n&&b.push(u),p=b[b.length-1],i&&p&&(b[0][0]!==p[0]||b[0][1]!==p[1])&&b.push(b[0]),a(s,b,y,v,g)}return s}function a(e,t,n,r,o){return t.length&&(t.area=n,t.dist=r,void 0!==o&&(t.outer=o),e.push(t)),[]}t.exports=r;var s=e("./feature")},{"./feature":213}],212:[function(e,t,n){"use strict";function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)o(n,e.features[r],t);else"Feature"===e.type?o(n,e,t):o(n,{geometry:e},t);return n}function o(e,t,n){if(null!==t.geometry){var r,s,l,c,p=t.geometry,d=p.type,f=p.coordinates,h=t.properties,m=t.id;if("Point"===d)e.push(u(h,1,[a(f)],m));else if("MultiPoint"===d)e.push(u(h,1,i(f),m));else if("LineString"===d)e.push(u(h,2,[i(f,n)],m));else if("MultiLineString"===d||"Polygon"===d){for(l=[],r=0;r<f.length;r++)c=i(f[r],n),"Polygon"===d&&(c.outer=0===r),l.push(c);e.push(u(h,"Polygon"===d?3:2,l,m))}else if("MultiPolygon"===d){for(l=[],r=0;r<f.length;r++)for(s=0;s<f[r].length;s++)c=i(f[r][s],n),c.outer=0===s,l.push(c);e.push(u(h,3,l,m))}else{if("GeometryCollection"!==d)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<p.geometries.length;r++)o(e,{geometry:p.geometries[r],properties:h},n)}}}function i(e,t){for(var n=[],r=0;r<e.length;r++)n.push(a(e[r]));return t&&(l(n,t),s(n)),n}function a(e){var t=Math.sin(e[1]*Math.PI/180),n=e[0]/360+.5,r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r=r<0?0:r>1?1:r,[n,r,0]}function s(e){for(var t,n,r=0,o=0,i=0;i<e.length-1;i++)t=n||e[i],n=e[i+1],r+=t[0]*n[1]-n[0]*t[1],o+=Math.abs(n[0]-t[0])+Math.abs(n[1]-t[1]);e.area=Math.abs(r/2),e.dist=o}t.exports=r;var l=e("./simplify"),u=e("./feature")},{"./feature":213,"./simplify":215}],213:[function(e,t,n){"use strict";function r(e,t,n,r){var i={id:r||null,type:t,geometry:n,tags:e||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return o(i),i}function o(e){var t=e.geometry,n=e.min,r=e.max;if(1===e.type)i(n,r,t);else for(var o=0;o<t.length;o++)i(n,r,t[o]);return e}function i(e,t,n){for(var r,o=0;o<n.length;o++)r=n[o],e[0]=Math.min(r[0],e[0]),t[0]=Math.max(r[0],t[0]),e[1]=Math.min(r[1],e[1]),t[1]=Math.max(r[1],t[1])}t.exports=r},{}],214:[function(e,t,n){"use strict";function r(e,t){return new o(e,t)}function o(e,t){t=this.options=l(Object.create(this.options),t);var n=t.debug;n&&console.time("preprocess data");var r=1<<t.maxZoom,o=c(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=f(o,t.buffer/t.extent,a),o.length&&this.splitTile(o,0,0,0),n&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function i(e,t,n){return 32*((1<<e)*n+t)+e}function a(e,t,n){return[n,(n-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function s(e,t,n){return[(n-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],n,1]}function l(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t,n){var r=e.source;if(1!==r.length)return!1;var o=r[0];if(3!==o.type||o.geometry.length>1)return!1;var i=o.geometry[0].length;if(5!==i)return!1;for(var a=0;a<i;a++){var s=p.point(o.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-n&&s[0]!==t+n||s[1]!==-n&&s[1]!==t+n)return!1}return!0}t.exports=r;var c=e("./convert"),p=e("./transform"),d=e("./clip"),f=e("./wrap"),h=e("./tile");o.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},o.prototype.splitTile=function(e,t,n,r,o,l,c){for(var p=[e,t,n,r],f=this.options,m=f.debug,y=null;p.length;){r=p.pop(),n=p.pop(),t=p.pop(),e=p.pop();var v=1<<t,g=i(t,n,r),_=this.tiles[g],b=t===f.maxZoom?0:f.tolerance/(v*f.extent);if(!_&&(m>1&&console.time("creation"),_=this.tiles[g]=h(e,v,n,r,b,t===f.maxZoom),this.tileCoords.push({z:t,x:n,y:r}),m)){m>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var x="z"+t;this.stats[x]=(this.stats[x]||0)+1,this.total++}if(_.source=e,o){if(t===f.maxZoom||t===o)continue;var w=1<<o-t;if(n!==Math.floor(l/w)||r!==Math.floor(c/w))continue}else if(t===f.indexMaxZoom||_.numPoints<=f.indexMaxPoints)continue;if(f.solidChildren||!u(_,f.extent,f.buffer)){_.source=null,m>1&&console.time("clipping");var E,k,C,S,P,O,M=.5*f.buffer/f.extent,D=.5-M,T=.5+M,N=1+M;E=k=C=S=null,P=d(e,v,n-M,n+T,0,a,_.min[0],_.max[0]),O=d(e,v,n+D,n+N,0,a,_.min[0],_.max[0]),P&&(E=d(P,v,r-M,r+T,1,s,_.min[1],_.max[1]),k=d(P,v,r+D,r+N,1,s,_.min[1],_.max[1])),O&&(C=d(O,v,r-M,r+T,1,s,_.min[1],_.max[1]),S=d(O,v,r+D,r+N,1,s,_.min[1],_.max[1])),m>1&&console.timeEnd("clipping"),e.length&&(p.push(E||[],t+1,2*n,2*r),p.push(k||[],t+1,2*n,2*r+1),p.push(C||[],t+1,2*n+1,2*r),p.push(S||[],t+1,2*n+1,2*r+1))}else o&&(y=t)}return y},o.prototype.getTile=function(e,t,n){var r=this.options,o=r.extent,a=r.debug,s=1<<e;t=(t%s+s)%s;var l=i(e,t,n);if(this.tiles[l])return p.tile(this.tiles[l],o);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var c,d=e,f=t,h=n;!c&&d>0;)d--,f=Math.floor(f/2),h=Math.floor(h/2),c=this.tiles[i(d,f,h)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",d,f,h),u(c,o,r.buffer))return p.tile(c,o);a>1&&console.time("drilling down");var m=this.splitTile(c.source,d,f,h,e,t,n);if(a>1&&console.timeEnd("drilling down"),null!==m){var y=1<<e-m;l=i(m,Math.floor(t/y),Math.floor(n/y))}return this.tiles[l]?p.tile(this.tiles[l],o):null}},{"./clip":211,"./convert":212,"./tile":216,"./transform":217,"./wrap":218}],215:[function(e,t,n){"use strict";function r(e,t){var n,r,i,a,s=t*t,l=e.length,u=0,c=l-1,p=[];for(e[u][2]=1,e[c][2]=1;c;){for(r=0,n=u+1;n<c;n++)i=o(e[n],e[u],e[c]),i>r&&(a=n,r=i);r>s?(e[a][2]=r,p.push(u),p.push(a),u=a):(c=p.pop(),u=p.pop())}}function o(e,t,n){var r=t[0],o=t[1],i=n[0],a=n[1],s=e[0],l=e[1],u=i-r,c=a-o;if(0!==u||0!==c){var p=((s-r)*u+(l-o)*c)/(u*u+c*c);p>1?(r=i,o=a):p>0&&(r+=u*p,o+=c*p)}return u=s-r,c=l-o,u*u+c*c}t.exports=r},{}],216:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,min:[2,1],max:[-1,0]},l=0;l<e.length;l++){s.numFeatures++,o(s,e[l],i,a);var u=e[l].min,c=e[l].max;u[0]<s.min[0]&&(s.min[0]=u[0]),u[1]<s.min[1]&&(s.min[1]=u[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function o(e,t,n,r){var o,a,s,l,u=t.geometry,c=t.type,p=[],d=n*n;if(1===c)for(o=0;o<u.length;o++)p.push(u[o]),e.numPoints++,e.numSimplified++;else for(o=0;o<u.length;o++)if(s=u[o],r||!(2===c&&s.dist<n||3===c&&s.area<d)){var f=[];for(a=0;a<s.length;a++)l=s[a],(r||l[2]>d)&&(f.push(l),e.numSimplified++),e.numPoints++;3===c&&i(f,s.outer),p.push(f)}else e.numPoints+=s.length;if(p.length){var h={geometry:p,type:c,tags:t.tags||null};null!==t.id&&(h.id=t.id),e.features.push(h)}}function i(e,t){var n=a(e);n<0===t&&e.reverse()}function a(e){for(var t,n,r=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n=e[a],r+=(n[0]-t[0])*(t[1]+n[1]);return r}t.exports=r},{}],217:[function(e,t,n){"use strict";function r(e,t){if(e.transformed)return e;var n,r,i,a=e.z2,s=e.x,l=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],c=u.geometry,p=u.type;if(1===p)for(r=0;r<c.length;r++)c[r]=o(c[r],t,a,s,l);else for(r=0;r<c.length;r++){var d=c[r];for(i=0;i<d.length;i++)d[i]=o(d[i],t,a,s,l)}}return e.transformed=!0,e}function o(e,t,n,r,o){var i=Math.round(t*(e[0]*n-r)),a=Math.round(t*(e[1]*n-o));return[i,a]}n.tile=r,n.point=o},{}],218:[function(e,t,n){"use strict";function r(e,t,n){var r=e,i=a(e,1,-1-t,t,0,n,-1,2),s=a(e,1,1-t,2+t,0,n,-1,2);return(i||s)&&(r=a(e,1,-t,1+t,0,n,-1,2)||[],i&&(r=o(i,1).concat(r)),s&&(r=r.concat(o(s,-1)))),r}function o(e,t){for(var n=[],r=0;r<e.length;r++){var o,a=e[r],l=a.type;if(1===l)o=i(a.geometry,t);else{o=[];for(var u=0;u<a.geometry.length;u++)o.push(i(a.geometry[u],t))}n.push(s(a.tags,l,o,a.id))}return n}function i(e,t){var n=[];n.area=e.area,n.dist=e.dist;for(var r=0;r<e.length;r++)n.push([e[r][0]+t,e[r][1],e[r][2]]);return n}var a=e("./clip"),s=e("./feature");t.exports=r},{"./clip":211,"./feature":213}],219:[function(e,t,n){"use strict";function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var a=0;a<this.d*this.d;a++){var s=i[o+a],l=i[o+a+1];r.push(s===l?null:i.subarray(s,l))}var u=i[o+r.length],c=i[o+r.length+1];this.keys=i.subarray(u,c),this.bboxes=i.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var p=0;p<this.d*this.d;p++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var d=n/t*e;this.min=-d,this.max=e+d}t.exports=r;var o=3;r.prototype.insert=function(e,t,n,r,o){this._forEachCell(t,n,r,o,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(o)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,o,i){this.cells[o].push(i)},r.prototype.query=function(e,t,n,r){var o=this.min,i=this.max;if(e<=o&&t<=o&&i<=n&&i<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(e,t,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(e,t,n,r,o,i,a){var s=this.cells[o];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var d=4*p;e<=u[d+2]&&t<=u[d+3]&&n>=u[d+0]&&r>=u[d+1]?(a[p]=!0,i.push(l[p])):a[p]=!1}}},r.prototype._forEachCell=function(e,t,n,r,o,i,a){for(var s=this._convertToCellCoord(e),l=this._convertToCellCoord(t),u=this._convertToCellCoord(n),c=this._convertToCellCoord(r),p=s;p<=u;p++)for(var d=l;d<=c;d++){var f=this.d*d+p;if(o.call(this,e,t,n,r,f,i,a))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=o+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var l=e[s];i[o+s]=a,i.set(l,a),a+=l.length}return i[o+e.length]=a,i.set(this.keys,a),a+=this.keys.length,i[o+e.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer}},{}],220:[function(e,t,n){"use strict";n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?o-1:0,d=n?-1:1,f=e[t+p];for(p+=d,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+e[t+p],p+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:(f?-1:1)*(1/0);a+=Math.pow(2,r),i-=u}return(f?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,p=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+p>=1?d/l:d*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[n+f]=255&s,f+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+f]=255&a,f+=h,a/=256,u-=8);e[n+f-h]|=128*m}},{}],221:[function(e,t,n){"use strict";function r(e,t,n,r,i){return new o(e,t,n,r,i)}function o(e,t,n,r,o){t=t||i,n=n||a,o=o||Array,this.nodeSize=r||64,this.points=e,this.ids=new o(e.length),this.coords=new o(2*e.length);for(var l=0;l<e.length;l++)this.ids[l]=l,this.coords[2*l]=t(e[l]),this.coords[2*l+1]=n(e[l]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function i(e){return e[0]}function a(e){return e[1]}var s=e("./sort"),l=e("./range"),u=e("./within");t.exports=r,o.prototype={range:function(e,t,n,r){return l(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return u(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":222,"./sort":223,"./within":224}],222:[function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),d=u.pop(),f=u.pop();if(d-f<=a)for(var h=f;h<=d;h++)s=t[2*h],l=t[2*h+1],s>=n&&s<=o&&l>=r&&l<=i&&c.push(e[h]);else{var m=Math.floor((f+d)/2);s=t[2*m],l=t[2*m+1],s>=n&&s<=o&&l>=r&&l<=i&&c.push(e[m]);var y=(p+1)%2;(0===p?n<=s:r<=l)&&(u.push(f),u.push(m-1),u.push(y)),(0===p?o>=s:i>=l)&&(u.push(m+1),u.push(d),u.push(y))}}return c}t.exports=r},{}],223:[function(e,t,n){"use strict";function r(e,t,n,i,a,s){if(!(a-i<=n)){var l=Math.floor((i+a)/2);o(e,t,l,i,a,s%2),r(e,t,n,i,l-1,s+1),r(e,t,n,l+1,a,s+1)}}function o(e,t,n,r,a,s){for(;a>r;){if(a-r>600){var l=a-r+1,u=n-r+1,c=Math.log(l),p=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1),f=Math.max(r,Math.floor(n-u*p/l+d)),h=Math.min(a,Math.floor(n+(l-u)*p/l+d));o(e,t,n,f,h,s)}var m=t[2*n+s],y=r,v=a;for(i(e,t,r,n),t[2*a+s]>m&&i(e,t,r,a);y<v;){for(i(e,t,y,v),y++,v--;t[2*y+s]<m;)y++;for(;t[2*v+s]>m;)v--}t[2*r+s]===m?i(e,t,r,v):(v++,i(e,t,v,a)),v<=n&&(r=v+1),n<=v&&(a=v-1)}}function i(e,t,n,r){a(e,n,r),a(t,2*n,2*r),a(t,2*n+1,2*r+1)}function a(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],224:[function(e,t,n){"use strict";function r(e,t,n,r,i,a){for(var s=[0,e.length-1,0],l=[],u=i*i;s.length;){var c=s.pop(),p=s.pop(),d=s.pop();if(p-d<=a)for(var f=d;f<=p;f++)o(t[2*f],t[2*f+1],n,r)<=u&&l.push(e[f]);else{var h=Math.floor((d+p)/2),m=t[2*h],y=t[2*h+1];o(m,y,n,r)<=u&&l.push(e[h]);var v=(c+1)%2;(0===c?n-i<=m:r-i<=y)&&(s.push(d),s.push(h-1),s.push(v)),(0===c?n+i>=m:r+i>=y)&&(s.push(h+1),s.push(p),s.push(v))}}return l}function o(e,t,n,r){var o=e-n,i=t-r;return o*o+i*i}t.exports=r},{}],225:[function(e,t,n){(function(e){"use strict";function n(e,t,n){function o(t){var n=m,r=y;return m=y=void 0,k=t,g=e.apply(r,n)}function i(e){return k=e,_=setTimeout(c,t),C?o(e):g}function l(e){var n=e-E,r=e-k,o=t-n;return S?x(o,v-r):o}function u(e){var n=e-E,r=e-k;return void 0===E||n>=t||n<0||S&&r>=v}function c(){var e=w();return u(e)?p(e):void(_=setTimeout(c,l(e)))}function p(e){return _=void 0,P&&m?o(e):(m=y=void 0,g)}function d(){void 0!==_&&clearTimeout(_),k=0,m=E=y=_=void 0}function f(){return void 0===_?g:p(w())}function h(){var e=w(),n=u(e);if(m=arguments,y=this,E=e,n){if(void 0===_)return i(E);if(S)return _=setTimeout(c,t),o(E)}return void 0===_&&(_=setTimeout(c,t)),g}var m,y,v,g,_,E,k=0,C=!1,S=!1,P=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(C=!!n.leading,S="maxWait"in n,v=S?b(a(n.maxWait)||0,t):v,P="trailing"in n?!!n.trailing:P),h.cancel=d,h.flush=f,h}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==typeof e}function i(e){return"symbol"==typeof e||o(e)&&_.call(e)==u}function a(e){if("number"==typeof e)return e;if(i(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=d.test(e);return n||f.test(e)?h(e.slice(2),n?2:8):p.test(e)?l:+e}var s="Expected a function",l=NaN,u="[object Symbol]",c=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,f=/^0o[0-7]+$/i,h=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,v=m||y||Function("return this")(),g=Object.prototype,_=g.toString,b=Math.max,x=Math.min,w=function(){return v.Date.now()};t.exports=n}).call(this,"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],226:[function(e,t,n){"use strict";function r(e){return!!(o()&&i()&&a()&&s()&&l()&&u()&&c()&&p(e&&e.failIfMajorPerformanceCaveat))}function o(){return"undefined"!=typeof window&&"undefined"!=typeof document}function i(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function l(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function u(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function p(e){return void 0===f[e]&&(f[e]=d(e)),f[e]}function d(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}"undefined"!=typeof t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var f={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],227:[function(e,t,n){(function(e){"use strict";function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};n.resolve=function(){for(var n="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,o="/"===a.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var o=n.isAbsolute(e),i="/"===a(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var o=r(e.split("/")),i=r(t.split("/")),a=Math.min(o.length,i.length),s=a,l=0;l<a;l++)if(o[l]!==i[l]){s=l;break}for(var u=[],l=s;l<o.length;l++)u.push("..");return u=u.concat(i.slice(s)),u.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:231}],228:[function(e,t,n){"use strict";function r(e){var t;e&&e.length&&(t=e,e=t.length);var n=new Uint8Array(e||0);return t&&n.set(t),n.readUInt32LE=i.readUInt32LE,n.writeUInt32LE=i.writeUInt32LE,n.readInt32LE=i.readInt32LE,n.writeInt32LE=i.writeInt32LE,n.readFloatLE=i.readFloatLE,n.writeFloatLE=i.writeFloatLE,n.readDoubleLE=i.readDoubleLE,n.writeDoubleLE=i.writeDoubleLE,n.toString=i.toString,n.write=i.write,n.slice=i.slice,n.copy=i.copy,n._isBuffer=!0,n}function o(e){for(var t,n,r=e.length,o=[],i=0;i<r;i++){if(t=e.charCodeAt(i),t>55295&&t<57344){if(!n){t>56319||i+1===r?o.push(239,191,189):n=t;continue}if(t<56320){o.push(239,191,189),n=t;continue}t=n-55296<<10|t-56320|65536,n=null}else n&&(o.push(239,191,189),n=null);t<128?o.push(t):t<2048?o.push(t>>6|192,63&t|128):t<65536?o.push(t>>12|224,t>>6&63|128,63&t|128):o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}return o}t.exports=r;var i,a,s,l=e("ieee754");i={readUInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},writeUInt32LE:function(e,t){this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24},readInt32LE:function(e){return(this[e]|this[e+1]<<8|this[e+2]<<16)+(this[e+3]<<24)},readFloatLE:function(e){return l.read(this,e,!0,23,4)},readDoubleLE:function(e){return l.read(this,e,!0,52,8)},writeFloatLE:function(e,t){return l.write(this,e,t,!0,23,4)},writeDoubleLE:function(e,t){return l.write(this,e,t,!0,52,8)},toString:function(e,t,n){var r="",o="";t=t||0,n=Math.min(this.length,n||this.length);for(var i=t;i<n;i++){var a=this[i];a<=127?(r+=decodeURIComponent(o)+String.fromCharCode(a),o=""):o+="%"+a.toString(16);
}return r+=decodeURIComponent(o)},write:function(e,t){for(var n=e===a?s:o(e),r=0;r<n.length;r++)this[t+r]=n[r]},slice:function(e,t){return this.subarray(e,t)},copy:function(e,t){t=t||0;for(var n=0;n<this.length;n++)e[t+n]=this[n]}},i.writeInt32LE=i.writeUInt32LE,r.byteLength=function(e){return a=e,s=o(e),s.length},r.isBuffer=function(e){return!(!e||!e._isBuffer)}},{ieee754:220}],229:[function(e,t,n){(function(n){"use strict";function r(e){this.buf=y.isBuffer(e)?e:new y(e||0),this.pos=0,this.length=this.buf.length}function o(e,t){var n,r=t.buf;if(n=r[t.pos++],e+=268435456*(127&n),n<128)return e;if(n=r[t.pos++],e+=34359738368*(127&n),n<128)return e;if(n=r[t.pos++],e+=4398046511104*(127&n),n<128)return e;if(n=r[t.pos++],e+=562949953421312*(127&n),n<128)return e;if(n=r[t.pos++],e+=72057594037927940*(127&n),n<128)return e;if(n=r[t.pos++],e+=0x8000000000000000*(127&n),n<128)return e;throw new Error("Expected varint not more than 10 bytes")}function i(e,t){t.realloc(10);for(var n=t.pos+10;e>=1;){if(t.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var r=255&e;t.buf[t.pos++]=r|(e>=128?128:0),e/=128}}function a(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var o=n.pos-1;o>=e;o--)n.buf[o+r]=n.buf[o]}function s(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function l(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function u(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function c(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}t.exports=r;var y=n.Buffer||e("./buffer");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var v=4294967296,g=1/v,_=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),o=r>>3,i=this.pos;e(o,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=this.buf.readUInt32LE(this.pos);return this.pos+=4,e},readSFixed32:function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e},readFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readUInt32LE(this.pos+4)*v;return this.pos+=8,e},readSFixed64:function(){var e=this.buf.readUInt32LE(this.pos)+this.buf.readInt32LE(this.pos+4)*v;return this.pos+=8,e},readFloat:function(){var e=this.buf.readFloatLE(this.pos);return this.pos+=4,e},readDouble:function(){var e=this.buf.readDoubleLE(this.pos);return this.pos+=8,e},readVarint:function(){var e,t,n=this.buf;return t=n[this.pos++],e=127&t,t<128?e:(t=n[this.pos++],e|=(127&t)<<7,t<128?e:(t=n[this.pos++],e|=(127&t)<<14,t<128?e:(t=n[this.pos++],e|=(127&t)<<21,t<128?e:o(e,this))))},readVarint64:function(){var e=this.pos,t=this.readVarint();if(t<_)return t;for(var n=this.pos-2;255===this.buf[n];)n--;n<e&&(n=e),t=0;for(var r=0;r<n-e+1;r++){var o=127&~this.buf[e+r];t+=r<4?o<<7*r:o*Math.pow(2,7*r)}return-t-1},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.buf.toString("utf8",this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.slice(this.pos,e);return this.pos=e,t},readPackedVarint:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readVarint());return t},readPackedSVarint:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(){for(var e=this.readVarint()+this.pos,t=[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new y(t);this.buf.copy(n),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(e){this.realloc(4),this.buf.writeUInt32LE(e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),this.buf.writeInt32LE(e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),this.buf.writeInt32LE(e&-1,this.pos),this.buf.writeUInt32LE(Math.floor(e*g),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),this.buf.writeInt32LE(e&-1,this.pos),this.buf.writeInt32LE(Math.floor(e*g),this.pos+4),this.pos+=8},writeVarint:function(e){return e=+e,e>268435455?void i(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),void(e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e);var t=y.byteLength(e);this.writeVarint(t),this.realloc(t),this.buf.write(e,this.pos),this.pos+=t},writeFloat:function(e){this.realloc(4),this.buf.writeFloatLE(e,this.pos),this.pos+=4},writeDouble:function(e){this.realloc(8),this.buf.writeDoubleLE(e,this.pos),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&a(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,s,t)},writePackedSVarint:function(e,t){this.writeMessage(e,l,t)},writePackedBoolean:function(e,t){this.writeMessage(e,p,t)},writePackedFloat:function(e,t){this.writeMessage(e,u,t)},writePackedDouble:function(e,t){this.writeMessage(e,c,t)},writePackedFixed32:function(e,t){this.writeMessage(e,d,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,f,t)},writePackedFixed64:function(e,t){this.writeMessage(e,h,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,m,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}}).call(this,"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":228}],230:[function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],231:[function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(p===setTimeout)return setTimeout(e,0);if((p===r||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){y&&h&&(y=!1,h.length?m=h.concat(m):v=-1,m.length&&l())}function l(){if(!y){var e=i(s);y=!0;for(var t=m.length;t;){for(h=m,m=[];++v<t;)h&&h[v].run();v=-1,t=m.length}h=null,y=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var p,d,f=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:r}catch(e){p=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,m=[],y=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new u(e,t)),1!==m.length||y||i(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],232:[function(e,t,n){"use strict";function r(e,t,n,a,s){for(n=n||0,a=a||e.length-1,s=s||i;a>n;){if(a-n>600){var l=a-n+1,u=t-n+1,c=Math.log(l),p=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1),f=Math.max(n,Math.floor(t-u*p/l+d)),h=Math.min(a,Math.floor(t+(l-u)*p/l+d));r(e,t,f,h,s)}var m=e[t],y=n,v=a;for(o(e,n,t),s(e[a],m)>0&&o(e,n,a);y<v;){for(o(e,y,v),y++,v--;s(e[y],m)<0;)y++;for(;s(e[v],m)>0;)v--}0===s(e[n],m)?o(e,n,v):(v++,o(e,v,a)),v<=t&&(n=v+1),t<=v&&(a=v-1)}}function o(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function i(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],233:[function(e,t,n){"use strict";function r(e){return new o(e)}function o(e){this.options=f(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function i(e,t,n,r,o){return{x:e,y:t,zoom:1/0,id:r,properties:o,parentId:-1,numPoints:n}}function a(e,t){var n=e.geometry.coordinates;return{x:u(n[0]),y:c(n[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:l(e),geometry:{type:"Point",coordinates:[p(e.x),d(e.y)]}}}function l(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return f(f({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function u(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function p(e){return 360*(e-.5)}function d(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function f(e,t){for(var n in t)e[n]=t[n];return e}function h(e){return e.x}function m(e){return e.y}var y=e("kdbush");t.exports=r,o.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var n="prepare "+e.length+" points";t&&console.time(n),this.points=e;var r=e.map(a);t&&console.timeEnd(n);for(var o=this.options.maxZoom;o>=this.options.minZoom;o--){var i=+Date.now();this.trees[o+1]=y(r,h,m,this.options.nodeSize,Float32Array),r=this._cluster(r,o),t&&console.log("z%d: %d clusters in %dms",o,r.length,+Date.now()-i)}return this.trees[this.options.minZoom]=y(r,h,m,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this.trees[this._limitZoom(t)],r=n.range(u(e[0]),c(e[3]),u(e[2]),c(e[1])),o=[],i=0;i<r.length;i++){var a=n.points[r[i]];o.push(a.numPoints?s(a):this.points[a.id])}return o},getChildren:function(e,t){for(var n=this.trees[t+1].points[e],r=this.options.radius/(this.options.extent*Math.pow(2,t)),o=this.trees[t+1].within(n.x,n.y,r),i=[],a=0;a<o.length;a++){var l=this.trees[t+1].points[o[a]];l.parentId===e&&i.push(l.numPoints?s(l):this.points[l.id])}return i},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var o=[];return this._appendLeaves(o,e,t,n,r,0),o},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],o=Math.pow(2,e),i=this.options.extent,a=this.options.radius,s=a/i,l=(n-s)/o,u=(n+1+s)/o,c={features:[]};return this._addTileFeatures(r.range((t-s)/o,l,(t+1+s)/o,u),r.points,t,n,o,c),0===t&&this._addTileFeatures(r.range(1-s/o,l,1,u),r.points,o,n,o,c),t===o-1&&this._addTileFeatures(r.range(0,l,s/o,u),r.points,-1,n,o,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var n=this.getChildren(e,t);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,o,i){for(var a=this.getChildren(t,n),s=0;s<a.length;s++){var l=a[s].properties;if(l.cluster?i+l.point_count<=o?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,n+1,r,o,i):i<o?i++:e.push(a[s]),e.length===r)break}return i},_addTileFeatures:function(e,t,n,r,o,i){for(var a=0;a<e.length;a++){var s=t[e[a]];i.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*o-n)),Math.round(this.options.extent*(s.y*o-r))]],tags:s.numPoints?l(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,t)),o=0;o<e.length;o++){var a=e[o];if(!(a.zoom<=t)){a.zoom=t;var s=this.trees[t+1],l=s.within(a.x,a.y,r),u=a.numPoints||1,c=a.x*u,p=a.y*u,d=null;this.options.reduce&&(d=this.options.initial(),this._accumulate(d,a));for(var f=0;f<l.length;f++){var h=s.points[l[f]];if(t<h.zoom){var m=h.numPoints||1;h.zoom=t,c+=h.x*m,p+=h.y*m,u+=m,h.parentId=o,this.options.reduce&&this._accumulate(d,h)}}1===u?n.push(a):(a.parentId=o,n.push(i(c/u,p/u,u,o,d)))}}return n},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}}},{kdbush:221}],234:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||o,this.length>0)for(var n=this.length>>1;n>=0;n--)this._down(n)}function o(e,t){return e<t?-1:e>t?1:0}t.exports=r,r.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var o=e-1>>1,i=t[o];if(n(r,i)>=0)break;t[e]=i,e=o}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length,o=r>>1,i=t[e];e<o;){var a=(e<<1)+1,s=a+1,l=t[a];if(s<r&&n(t[s],l)<0&&(a=s,l=t[s]),n(l,i)>=0)break;t[e]=l,e=a}t[e]=i}}},{}],235:[function(e,t,n){"use strict";"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],236:[function(e,t,n){"use strict";t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],237:[function(e,t,n){(function(t,r){"use strict";function o(e,t){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),l(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,t,r){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(r,e);return _(o)||(o=l(e,o,r)),o}var i=u(e,t);if(i)return i;var a=Object.keys(t),m=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return c(t)}var v="",g=!1,b=["{","}"];if(h(t)&&(g=!0,b=["[","]"]),S(t)){var x=t.name?": "+t.name:"";v=" [Function"+x+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),k(t)&&(v=" "+Date.prototype.toUTCString.call(t)),C(t)&&(v=" "+c(t)),0===a.length&&(!g||0==t.length))return b[0]+v+b[1];if(r<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return E=g?p(e,t,r,m,a):a.map(function(n){return d(e,t,r,m,n,g)}),e.seen.pop(),f(E,v,b)}function u(e,t){if(x(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)T(t,String(a))?i.push(d(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(e,t,n,r,o,!0))}),i}function d(e,t,n,r,o,i){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),T(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=y(n)?l(e,u.value,null):l(e,u.value,n-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),x(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function f(e,t,n){var r=0,o=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return null==e}function g(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function x(e){return void 0===e}function w(e){return E(e)&&"[object RegExp]"===O(e)}function E(e){return"object"==typeof e&&null!==e}function k(e){return E(e)&&"[object Date]"===O(e)}function C(e){return E(e)&&("[object Error]"===O(e)||e instanceof Error)}function S(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function M(e){return e<10?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[M(e.getHours()),M(e.getMinutes()),M(e.getSeconds())].join(":");return[e.getDate(),R[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(N,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])a+=y(s)||!E(s)?" "+s:" "+o(s);return a},n.deprecate=function(e,o){function i(){if(!a){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),a=!0}return e.apply(this,arguments)}if(x(r.process))return function(){return n.deprecate(e,o).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return i};var I,L={};n.debuglog=function(e){if(x(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var r=t.pid;L[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else L[e]=function(){};return L[e]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=m,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=g,n.isString=_,n.isSymbol=b,n.isUndefined=x,n.isRegExp=w,n.isObject=E,n.isDate=k,n.isError=C,n.isFunction=S,n.isPrimitive=P,n.isBuffer=e("./support/isBuffer");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof o?o:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":236,_process:231,inherits:235}],238:[function(e,t,n){"use strict";t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":239,"./lib/vectortilefeature.js":240,"./lib/vectortilelayer.js":241}],239:[function(e,t,n){"use strict";function r(e,t){this.layers=e.readFields(o,{},t)}function o(e,t,n){if(3===e){var r=new i(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var i=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":241}],240:[function(e,t,n){"use strict";function r(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?i(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function i(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[r]=o}}function a(e){var t=e.length;if(t<=1)return[e];for(var n,r,o=[],i=0;i<t;i++){var a=s(e[i]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&o.push(n),n=[e[i]]):n.push(e[i]))}return n&&o.push(n),o}function s(e){for(var t,n,r=0,o=0,i=e.length,a=i-1;o<i;a=o++)t=e[o],n=e[a],r+=(n.x-t.x)*(t.y+n.y);return r}var l=e("point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,o=0,i=0,a=0,s=[];e.pos<n;){if(!o){var u=e.readVarint();r=7&u,o=u>>3}if(o--,1===r||2===r)i+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new l(i,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,o=0,i=0,a=1/0,s=-(1/0),l=1/0,u=-(1/0);e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)o+=e.readSVarint(),i+=e.readSVarint(),o<a&&(a=o),o>s&&(s=o),i<l&&(l=i),i>u&&(u=i);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},r.prototype.toGeoJSON=function(e,t,n){function o(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/l;e[t]=[360*(n.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var i,s,l=this.extent*Math.pow(2,n),u=this.extent*e,c=this.extent*t,p=this.loadGeometry(),d=r.types[this.type];switch(this.type){case 1:var f=[];for(i=0;i<p.length;i++)f[i]=p[i][0];p=f,o(p);break;case 2:for(i=0;i<p.length;i++)o(p[i]);break;case 3:for(p=a(p),i=0;i<p.length;i++)for(s=0;s<p[i].length;s++)o(p[i][s])}1===p.length?p=p[0]:d="Multi"+d;var h={type:"Feature",geometry:{type:d,coordinates:p},properties:this.properties};return"id"in this&&(h.id=this.id),h}},{"point-geometry":230}],241:[function(e,t,n){"use strict";function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(i(n))}function i(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":240}],242:[function(e,t,n){"use strict";var r=arguments[3],o=arguments[4],i=arguments[5],a=JSON.stringify;t.exports=function(e,t){function n(e){y[e]=!0;for(var t in o[e][1]){var r=o[e][1][t];y[r]||n(r)}}for(var s,l=Object.keys(i),u=0,c=l.length;u<c;u++){var p=l[u],d=i[p].exports;if(d===e||d&&d["default"]===e){s=p;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var f={},u=0,c=l.length;u<c;u++){var p=l[u];f[p]=p}o[s]=[Function(["require","module","exports"],"("+e+")(self)"),f]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,o[h]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),m];var y={};n(h);var v="("+r+")({"+Object.keys(y).map(function(e){return a(e)+":["+o[e][0]+","+a(o[e][1])+"]"}).join(",")+"},{},["+a(h)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([v],{type:"text/javascript"});if(t&&t.bare)return _;var b=g.createObjectURL(_),x=new Worker(b);return x.objectURL=b,x}},{}],243:[function(e,t,n){"use strict";t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],244:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("chroma-js"),s=r(a),l=function(){function e(t){switch(o(this,e),this._id=t.id,this._type=t.type,this._colors=t.colors,this._patterns=t.patterns,this._colorsAndPatterns=t.colorsAndPatterns,this._name=t.name,this._type){case"gradient":this._domain=t.bias||[0,1],this._scale=s["default"].scale(this._colors).domain(this._domain);break;case"color-array":this._flippedColors=JSON.parse(JSON.stringify(t.colors)).reverse();break;case"pattern-array":this._flippedPatterns=JSON.parse(JSON.stringify(t.patterns)).reverse();break;case"color-and-pattern-array":this._flippedColorsAndPatterns=JSON.parse(JSON.stringify(t.colorsAndPatterns)).reverse()}}return i(e,[{key:"getPatterns",value:function(e,t){var n=[];switch(this._type){case"color-array":case"gradient":for(var r=0;r<e;r++)n.push("mapspice-internal:transparent-pattern");break;case"pattern-array":for(var o=t?this._flippedPatterns:this._patterns,r=0;r<e;r++){var i=o[r%o.length];""===i||null===i?n.push("mapspice-internal:transparent-pattern"):n.push(i)}break;case"color-and-pattern-array":for(var a=t?this._flippedColorsAndPatterns:this._colorsAndPatterns,r=0;r<e;r++){var i=a[r%a.length][1];""===i||null===i?n.push("mapspice-internal:transparent-pattern"):n.push(i)}}return n}},{key:"interpolateColors",value:function(e,t){var n=void 0;switch(this._type){case"color-array":n=[];for(var r=t?this._flippedColors:this._colors,o=0;o<e;o++)n.push(r[o%r.length]);break;case"gradient":n=1===e?this._scale.colors(2):this._scale.colors(e),t&&n.reverse(),1===e&&(n=[n[0]]);break;case"pattern-array":n=[];for(var o=0;o<e;o++)n.push("rgba(255, 0, 0, 0)");break;case"color-and-pattern-array":n=[];for(var i=t?this._flippedColorsAndPatterns:this._colorsAndPatterns,o=0;o<e;o++)n.push(i[o%i.length][0])}return n}},{key:"id",get:function(){return this._id}},{key:"type",get:function(){return this._type}},{key:"name",get:function(){return this._name}}],[{key:"ALL_TYPES",get:function(){return["array","color-array","pattern-array","color-and-pattern-array","gradient"]}}]),e}();n["default"]=l,t.exports=n["default"]},{"chroma-js":5}],245:[function(e,t,n){"use strict";function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?e[n]:""})}Object.defineProperty(n,"__esModule",{value:!0}),Array.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0;n<this.length;n++)if(this[n]===e)return n;return-1});var o=function s(){function e(e){function t(){}return t.prototype=e,
new t}function t(e,t,n,r){this.type_=e,this.index_=t||0,this.prio_=n||0,this.number_=void 0!==r&&null!==r?r:0,this.toString=function(){switch(this.type_){case L:return this.number_;case R:case A:case j:return this.index_;case z:return"CALL";default:return"Invalid Token"}}}function n(e,t,n,r){this.tokens=e,this.ops1=t,this.ops2=n,this.functions=r}function r(e){return"string"==typeof e?(V.lastIndex=0,V.test(e)?"'"+e.replace(V,function(e){var t=F[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+e+"'"):e}function o(e,t){return Number(e)+Number(t)}function i(e,t){return e-t}function a(e,t){return e*t}function l(e,t){return e/t}function u(e,t){return e%t}function c(e,t){return""+e+t}function p(e,t){return e==t}function d(e,t){return e!=t}function f(e,t){return e>t}function h(e,t){return e<t}function m(e,t){return e>=t}function y(e,t){return e<=t}function v(e,t){return Boolean(e&&t)}function g(e,t){return Boolean(e||t)}function _(e){return Math.sinh?Math.sinh(e):(Math.exp(e)-Math.exp(-e))/2}function b(e){return Math.cosh?Math.cosh(e):(Math.exp(e)+Math.exp(-e))/2}function w(e){return Math.tanh?Math.tanh(e):e===1/0?1:e===-(1/0)?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function E(e){return Math.asinh?Math.asinh(e):e===-(1/0)?e:Math.log(e+Math.sqrt(e*e+1))}function k(e){return Math.acosh?Math.acosh(e):Math.log(e+Math.sqrt(e*e-1))}function C(e){return Math.atanh?Math.atanh(e):Math.log((1+e)/(1-e))/2}function S(e){return Math.log(e)*Math.LOG10E}function P(e){return-e}function O(e){return Math.trunc?Math.trunc(e):x<0?Math.ceil(x):Math.floor(x)}function M(e){return Math.random()*(e||1)}function D(e){e=Math.floor(e);for(var t=e;e>1;)t*=--e;return t}function T(){if(Math.hypot)return Math.hypot.apply(this,arguments);for(var e=0,t=arguments.length,n=0;n<t;n++){if(arguments[n]===1/0||arguments[n]===-(1/0))return 1/0;e+=arguments[n]*arguments[n]}return Math.sqrt(e)}function N(e,t,n){return e?t:n}function I(e,t){return"[object Array]"!=Object.prototype.toString.call(e)?[e,t]:(e=e.slice(),e.push(t),e)}function s(){this.success=!1,this.errormsg="",this.expression="",this.pos=0,this.tokennumber=0,this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:_,cosh:b,tanh:w,asinh:E,acosh:k,atanh:C,sqrt:Math.sqrt,log:Math.log,lg:S,log10:S,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:O,"-":P,exp:Math.exp},this.ops2={"+":o,"-":i,"*":a,"/":l,"%":u,"^":Math.pow,",":I,"||":c,"==":p,"!=":d,">":f,"<":h,">=":m,"<=":y,and:v,or:g},this.functions={random:M,fac:D,min:Math.min,max:Math.max,hypot:T,pyt:T,pow:Math.pow,atan2:Math.atan2,"if":N},this.consts={E:Math.E,PI:Math.PI}}var L=0,R=1,A=2,j=3,z=4,V=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,F={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};n.prototype={simplify:function(r){r=r||{};var o,i,a,s,l=[],u=[],c=this.tokens.length,p=0;for(p=0;p<c;p++){s=this.tokens[p];var d=s.type_;if(d===L)l.push(s);else if(d===j&&s.index_ in r)s=new t(L,0,0,r[s.index_]),l.push(s);else if(d===A&&l.length>1)i=l.pop(),o=l.pop(),a=this.ops2[s.index_],s=new t(L,0,0,a(o.number_,i.number_)),l.push(s);else if(d===R&&l.length>0)o=l.pop(),a=this.ops1[s.index_],s=new t(L,0,0,a(o.number_)),l.push(s);else{for(;l.length>0;)u.push(l.shift());u.push(s)}}for(;l.length>0;)u.push(l.shift());return new n(u,e(this.ops1),e(this.ops2),e(this.functions))},substitute:function(r,o){o instanceof n||(o=(new s).parse(String(o)));var i,a=[],l=this.tokens.length,u=0;for(u=0;u<l;u++){i=this.tokens[u];var c=i.type_;if(c===j&&i.index_===r)for(var p=0;p<o.tokens.length;p++){var d=o.tokens[p],f=new t(d.type_,d.index_,d.prio_,d.number_);a.push(f)}else a.push(i)}var h=new n(a,e(this.ops1),e(this.ops2),e(this.functions));return h},evaluate:function(e){e=e||{};var t,n,r,o,i=[],a=this.tokens.length,s=0;for(s=0;s<a;s++){o=this.tokens[s];var l=o.type_;if(l===L)i.push(o.number_);else if(l===A)n=i.pop(),t=i.pop(),r=this.ops2[o.index_],i.push(r(t,n));else if(l===j)if(o.index_ in e)i.push(e[o.index_]);else{if(!(o.index_ in this.functions))throw new Error("undefined variable: "+o.index_);i.push(this.functions[o.index_])}else if(l===R)t=i.pop(),r=this.ops1[o.index_],i.push(r(t));else{if(l!==z)throw new Error("invalid Expression");if(t=i.pop(),r=i.pop(),!r.apply||!r.call)throw new Error(r+" is not a function");"[object Array]"==Object.prototype.toString.call(t)?i.push(r.apply(void 0,t)):i.push(r.call(void 0,t))}}if(i.length>1)throw new Error("invalid Expression (parity)");return i[0]},toString:function(e){var t,n,o,i,a=[],s=this.tokens.length,l=0;for(l=0;l<s;l++){i=this.tokens[l];var u=i.type_;if(u===L)a.push(r(i.number_));else if(u===A)n=a.pop(),t=a.pop(),o=i.index_,e&&"^"==o?a.push("Math.pow("+t+","+n+")"):a.push("("+t+o+n+")");else if(u===j)a.push(i.index_);else if(u===R)t=a.pop(),o=i.index_,"-"===o?a.push("("+o+t+")"):a.push(o+"("+t+")");else{if(u!==z)throw new Error("invalid Expression");t=a.pop(),o=a.pop(),a.push(o+"("+t+")")}}if(a.length>1)throw new Error("invalid Expression (parity)");return a[0]},variables:function(){for(var e=this.tokens.length,t=[],n=0;n<e;n++){var r=this.tokens[n];r.type_===j&&t.indexOf(r.index_)==-1&&t.push(r.index_)}return t},toJSFunction:function(e,t){var n=new Function(e,"with(Parser.values) { return "+this.simplify(t).toString(!0)+"; }");return n}},s.parse=function(e){return(new s).parse(e)},s.evaluate=function(e,t){return s.parse(e).evaluate(t)},s.Expression=n,s.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:_,cosh:b,tanh:w,asinh:E,acosh:k,atanh:C,sqrt:Math.sqrt,log:Math.log,lg:S,log10:S,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:O,random:M,fac:D,exp:Math.exp,min:Math.min,max:Math.max,hypot:T,pyt:T,pow:Math.pow,atan2:Math.atan2,"if":N,E:Math.E,PI:Math.PI};var B=1,U=2,W=4,q=8,H=16,Z=32,G=64,X=128,K=256;return s.prototype={parse:function(r){this.errormsg="",this.success=!0;var o=[],i=[];this.tmpprio=0;var a=B|q|W|G,s=0;for(this.expression=r,this.pos=0;this.pos<this.expression.length;)if(this.isOperator())this.isSign()&&a&G?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",s++,this.addfunc(i,o,R)),a=B|q|W|G):this.isComment()||(0===(a&U)&&this.error_parsing(this.pos,"unexpected operator"),s+=2,this.addfunc(i,o,A),a=B|q|W|G);else if(this.isNumber()){0===(a&B)&&this.error_parsing(this.pos,"unexpected number");var l=new t(L,0,0,this.tokennumber);i.push(l),a=U|H|Z}else if(this.isString()){0===(a&B)&&this.error_parsing(this.pos,"unexpected string");var l=new t(L,0,0,this.tokennumber);i.push(l),a=U|H|Z}else if(this.isLeftParenth())0===(a&q)&&this.error_parsing(this.pos,'unexpected "("'),a&X&&(s+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(i,o,z)),a=B|q|W|G|K;else if(this.isRightParenth()){if(a&K){var l=new t(L,0,0,[]);i.push(l)}else 0===(a&H)&&this.error_parsing(this.pos,'unexpected ")"');a=U|H|Z|q|X}else if(this.isComma())0===(a&Z)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(i,o,A),s+=2,a=B|q|W|G;else if(this.isConst()){0===(a&B)&&this.error_parsing(this.pos,"unexpected constant");var u=new t(L,0,0,this.tokennumber);i.push(u),a=U|H|Z}else if(this.isOp2())0===(a&W)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,o,A),s+=2,a=q;else if(this.isOp1())0===(a&W)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,o,R),s++,a=q;else if(this.isVar()){0===(a&B)&&this.error_parsing(this.pos,"unexpected variable");var c=new t(j,this.tokenindex,0,0);i.push(c),a=U|H|Z|q|X}else this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');o.length>0;){var p=o.pop();i.push(p)}return s+1!==i.length&&this.error_parsing(this.pos,"parity"),new n(i,e(this.ops1),e(this.ops2),e(this.functions))},evaluate:function(e,t){return this.parse(e).evaluate(t)},error_parsing:function(e,t){throw this.success=!1,this.errormsg="parse error [column "+e+"]: "+t,this.column=e,new Error(this.errormsg)},addfunc:function(e,n,r){for(var o=new t(r,this.tokenindex,this.tokenprio+this.tmpprio,0);n.length>0&&o.prio_<=n[n.length-1].prio_;)e.push(n.pop());n.push(o)},isNumber:function(){for(var e=!1,t="";this.pos<this.expression.length;){var n=this.expression.charCodeAt(this.pos);if(!(n>=48&&n<=57||46===n))break;t+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(t),e=!0}return e},unescape:function(e,t){for(var n=[],r=!1,o=0;o<e.length;o++){var i=e.charAt(o);if(r){switch(i){case"'":n.push("'");break;case"\\":n.push("\\");break;case"/":n.push("/");break;case"b":n.push("\b");break;case"f":n.push("\f");break;case"n":n.push("\n");break;case"r":n.push("\r");break;case"t":n.push("\t");break;case"u":var a=parseInt(e.substring(o+1,o+5),16);n.push(String.fromCharCode(a)),o+=4;break;default:throw this.error_parsing(t+o,"Illegal escape sequence: '\\"+i+"'")}r=!1}else"\\"==i?r=!0:n.push(i)}return n.join("")},isString:function(){var e=!1,t="",n=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){var r=this.expression.charAt(this.pos);if("'"==r&&"\\"!=t.slice(-1)){this.pos++,this.tokennumber=this.unescape(t,n),e=!0;break}t+=this.expression.charAt(this.pos),this.pos++}return e},isConst:function(){var e;for(var t in this.consts){var n=t.length;if(e=this.expression.substr(this.pos,n),t===e)return this.tokennumber=this.consts[t],this.pos+=n,!0}return!1},isOperator:function(){var e=this.expression.charCodeAt(this.pos);if(43===e)this.tokenprio=2,this.tokenindex="+";else if(45===e)this.tokenprio=2,this.tokenindex="-";else if(62===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===e)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===e){if(124!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===e){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===e){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===e){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===e||8729===e||8226===e)this.tokenprio=3,this.tokenindex="*";else if(47===e)this.tokenprio=4,this.tokenindex="/";else if(37===e)this.tokenprio=4,this.tokenindex="%";else{if(94!==e)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var e=this.expression.charCodeAt(this.pos-1);return 45===e||43===e},isPositiveSign:function(){var e=this.expression.charCodeAt(this.pos-1);return 43===e},isNegativeSign:function(){var e=this.expression.charCodeAt(this.pos-1);return 45===e},isLeftParenth:function(){var e=this.expression.charCodeAt(this.pos);return 40===e&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){var e=this.expression.charCodeAt(this.pos);return 41===e&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){var e=this.expression.charCodeAt(this.pos);return 44===e&&(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0)},isWhite:function(){var e=this.expression.charCodeAt(this.pos);return(32===e||9===e||10===e||13===e)&&(this.pos++,!0)},isOp1:function(){for(var e="",t=this.pos;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!=n&&(n<"0"||n>"9")))break;e+=n}return e.length>0&&e in this.ops1&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isOp2:function(){for(var e="",t=this.pos;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!=n&&(n<"0"||n>"9")))break;e+=n}return e.length>0&&e in this.ops2&&(this.tokenindex=e,this.tokenprio=5,this.pos+=e.length,!0)},isVar:function(){for(var e="",t=this.pos;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()&&(t===this.pos||"_"!=n&&(n<"0"||n>"9")))break;e+=n}return e.length>0&&(this.tokenindex=e,this.tokenprio=4,this.pos+=e.length,!0)},isComment:function(){var e=this.expression.charCodeAt(this.pos-1);return 47===e&&42===this.expression.charCodeAt(this.pos)&&(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0)}},s},i=o(),a=function(e,t){if(void 0!=e){if("number"==typeof e)return e;try{var n=r(t,e),o=i.parse(n).evaluate();if("number"==typeof o&&!isFinite(o))return;return o}catch(a){}}};n["default"]=a,t.exports=n["default"]},{}],246:[function(e,t,n){"use strict";function r(e){return new Function("f","var p = (f && f.properties || {}); return "+o(e))}function o(e){if(!e)return"true";var t=e[0];if(e.length<=1)return"any"===t?"false":"true";var n="=="===t?a(e[1],e[2],"===",!1):"!="===t?a(e[1],e[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?a(e[1],e[2],t,!0):"any"===t?s(e.slice(1),"||"):"all"===t?s(e.slice(1),"&&"):"none"===t?c(s(e.slice(1),"||")):"in"===t?l(e[1],e.slice(2)):"!in"===t?c(l(e[1],e.slice(2))):"has"===t?u(e[1]):"!has"===t?c(u([e[1]])):"true";return"("+n+")"}function i(e){return"$type"===e?"f.type":"$id"===e?"f.id":"p["+JSON.stringify(e)+"]"}function a(e,t,n,r){var o=i(e),a="$type"===e?d.indexOf(t):JSON.stringify(t);return(r?"typeof "+o+"=== typeof "+a+"&&":"")+o+n+a}function s(e,t){return e.map(o).join(t)}function l(e,t){"$type"===e&&(t=t.map(function(e){return d.indexOf(e)}));var n=JSON.stringify(t.sort(p)),r=i(e);return t.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(t.length-1)+")"}function u(e){return JSON.stringify(e)+" in p"}function c(e){return"!("+e+")"}function p(e,t){return e<t?-1:e>t?1:0}Object.defineProperty(n,"__esModule",{value:!0});var d=["Unknown","Point","LineString","Polygon"];n["default"]=r,t.exports=n["default"]},{}],247:[function(e,t,n){"use strict";function r(){console.warn?console.warn.apply(this,arguments):console.log&&console.log.apply(this,arguments)}function o(e,t){if("function"!=typeof Object.assign){if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!==o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n}return Object.assign.apply(this,arguments)}function i(e,t){var n=void 0;if(void 0!==t&&(n=document.querySelector("style#"+t))){var o=!1;if(n.styleSheet){if(n.styleSheet.cssText===e)return n;o=!0}else{if(n.firstChild.textContent===e)return n;o=!0}o&&console&&r("Different style was already injected using the same style id: "+t+", this may cause unexpected behavior.")}var i=document.head||document.getElementsByTagName("head")[0];if(!i){i=document.createElement("head");var a=document.body||document.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):document.documentElement.appendChild(i)}return n=n||document.createElement("style"),n.id=t||null,n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),i.appendChild(n),n}Object.defineProperty(n,"__esModule",{value:!0}),n.warn=r,n._extends=o,n.loadStyles=i},{}],248:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={map_marker_parking:"",map_marker_picnic:"",map_marker_place:"",map_marker_police:"",map_marker_pool:"",map_marker_post:"",map_marker_power_plant:"",map_marker_power_station:"",map_marker_preschool:"",map_marker_pub:"",map_marker_truck:"",map_marker_water_tower:"",map_marker_windsurfing:"",map_marker_wine_bar:"",map_marker_winter_resort:"",map_marker_workshop:"",map_marker_ski_lift:"",map_marker_ski_touring:"",map_marker_small_city:"",map_marker_standpipe:"",map_marker_swimming:"",map_marker_synagogue:"",map_marker_tenisball:"",map_marker_tent:"",map_marker_train:"",map_marker_tram:"",map_marker_restaurant:"",map_marker_retirement_home:"",map_marker_school:"",map_marker_seal:"",map_marker_seaplane:"",map_marker_searchmarker:"",map_marker_ship:"",map_marker_shoping_center:"",map_marker_skating:"",map_marker_ski_jump:"",map_marker_library:"",map_marker_major_city:"",map_marker_medium_city:"",map_marker_metro:"",map_marker_mosque:"",map_marker_motorboat:"",map_marker_motorcycle:"",map_marker_mountain_climbing:"",map_marker_museum:"",map_marker_nature_watching:"",map_marker_forest:"",map_marker_gas_station:"",map_marker_golf_course:"",map_marker_horse_riding:"",map_marker_hospital:"",map_marker_hotel:"",map_marker_ice_cream_shop:"",map_marker_jet_ski:"",map_marker_kayaking:"",map_marker_laundry:"",map_marker_cocktail_bar:"",map_marker_coffeehouse:"",map_marker_construction_site:"",map_marker_dear:"",map_marker_default_poi:"",map_marker_diving:"",map_marker_dock:"",map_marker_factory:"",map_marker_fish:"",map_marker_football:"",map_marker_bonfire:"",map_marker_bus:"",map_marker_campsite:"",map_marker_capital_city:"",map_marker_car:"",map_marker_caravan:"",map_marker_cemetery:"",map_marker_church:"",map_marker_cinema:"",map_marker_city:"",map_marker_aerial_lift:"",map_marker_airplane:"",map_marker_archery:"",map_marker_art:"",map_marker_bank:"",map_marker_baseball:"",map_marker_baseballer:"",map_marker_basketball:"",map_marker_bear:"",map_marker_bicycle:"",map_annotation_marker_wetland:"",map_annotation_marker_water:"",map_annotation_marker_waste_basket:"",map_annotation_marker_warehouse:"",map_annotation_marker_village:"",map_annotation_marker_triangle_stroked:"",map_annotation_marker_triangle:"",map_annotation_marker_town_hall:"",map_annotation_marker_town:"",map_annotation_marker_toilets:"",map_annotation_marker_theatre:"",map_annotation_marker_tennis:"",map_annotation_marker_telephone:"",map_annotation_marker_swimming:"",map_annotation_marker_suitcase:"",map_annotation_marker_star_stroked:"",map_annotation_marker_star:"",map_annotation_marker_square_stroked:"",map_annotation_marker_square:"",map_annotation_marker_soccer:"",map_annotation_marker_slaughterhouse:"",map_annotation_marker_skins:"",map_annotation_marker_skiing:"",map_annotation_marker_shop:"",map_annotation_marker_shells:"",map_annotation_marker_scooter:"",map_annotation_marker_school:"",map_annotation_marker_rocket:"",map_annotation_marker_road_block:"",map_annotation_marker_restaurant:"",map_annotation_marker_religious_muslim:"",map_annotation_marker_religious_jewish:"",map_annotation_marker_religious_christian:"",map_annotation_marker_rail:"",map_annotation_marker_prison:"",map_annotation_marker_post:"",map_annotation_marker_polling_place:"",map_annotation_marker_police:"",map_annotation_marker_point:"",map_annotation_marker_playground:"",map_annotation_marker_place_of_workship:"",map_annotation_marker_pitch:"",map_annotation_marker_pharmacy:"",map_annotation_marker_parking_garage:"",map_annotation_marker_parking:"",map_annotation_marker_park:"",map_annotation_marker_oil_well:"",map_annotation_marker_music:"",map_annotation_marker_museum:"",map_annotation_marker_monument:"",map_annotation_marker_mobile_phone:"",map_annotation_marker_minerals:"",map_annotation_marker_minefield:"",map_annotation_marker_marker_default:"",map_annotation_marker_logging:"",map_annotation_marker_lodging:"",map_annotation_marker_liquor_store:"",map_annotation_marker_lighthouse:"",map_annotation_marker_library:"",map_annotation_marker_land_use:"",map_annotation_marker_industrial:"",map_annotation_marker_hospital:"",map_annotation_marker_helioport:"",map_annotation_marker_heart:"",map_annotation_marker_harbor:"",map_annotation_marker_hairdresser:"",map_annotation_marker_grocery:"",map_annotation_marker_grapes:"",map_annotation_marker_golf:"",map_annotation_marker_garden:"",map_annotation_marker_cemetery:"",map_annotation_marker_car:"",map_annotation_marker_campsite:"",map_annotation_marker_camera:"",map_annotation_marker_cafe:"",map_annotation_marker_fuel:"",map_annotation_marker_fish:"",map_annotation_marker_fire_station:"",map_annotation_marker_ferry:"",map_annotation_marker_feathers:"",map_annotation_marker_fast_food:"",map_annotation_marker_farm:"",map_annotation_marker_explosion:"",map_annotation_marker_entrance:"",map_annotation_marker_emergency_telephone:"",map_annotation_marker_embassy:"",map_annotation_marker_dog_park:"",map_annotation_marker_disability:"",map_annotation_marker_danger:"",map_annotation_marker_dam:"",map_annotation_marker_cross:"",map_annotation_marker_corn:"",map_annotation_marker_commercial:"",map_annotation_marker_college:"",map_annotation_marker_clothing_store:"",map_annotation_marker_city:"",map_annotation_marker_chemist:"",map_annotation_marker_bus:"",map_annotation_marker_building:"",map_annotation_marker_boom:"",map_annotation_marker_bicycle:"",map_annotation_marker_beer:"",map_annotation_marker_basketball:"",map_annotation_marker_baseball:"",map_annotation_marker_bar:"",map_annotation_marker_bank:"",map_annotation_marker_bakery:"",map_annotation_marker_art_gallery:"",map_annotation_marker_america_football:"",map_annotation_marker_airport:"",map_annotation_marker_airfield:"",map_annotation_marker_annotation:""};n["default"]=r,t.exports=n["default"]},{}],249:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("dragonfly-v2"),u=r(l),c=e("chroma-js"),p=r(c),d=e("lodash.debounce"),f=r(d),h=e("./iconFontMapping"),m=r(h),y=e("./featureFilter"),v=r(y),g=e("./evaluateExpression"),_=r(g),b=e("./colorPalette"),x=r(b),w=e("./helpers"),E=function(e){function t(e){o(this,t);var n=t._transpileMapDefinition(e),r=n.dragonflyConfig;s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,r),this._highlightedFeaturesWithStyles=[],this._selectedFeaturesWithStyles=[],this._initialCenter=r.center||[0,0],this._initialZoom=r.zoom||0,this._initialViewBoundingBox=n.initialViewBoundingBox,this._maximumBoundingBox=n.maximumBoundingBox,this._maximumBoundingBox&&this.setMaxBounds(this._maximumBoundingBox),this._initialViewBoundingBox&&this.fitBounds(this._initialViewBoundingBox,{duration:0}),this._highlightLayers=n.highlightLayers,this._selectionLayers=n.selectionLayers,this._dataLayers=n.dataLayers,this._alwaysVisibleLayersIds=n.alwaysVisibleLayersIds,this._summaryLevels=n.summaryLevels,this._preferredSummaryLevelId=n.preferredSummaryLevelId,this._colorPalettes=n.colorPalettes,this._variables=n.variables,this._currentVariableId=n.preferredVariableId,this._allowMultiFeatureSelection=!1,this._useSeamlessVariableTransitions=n.useSeamlessVariableTransitions,this._debouncedOnMouseMove=(0,f["default"])(this._onMouseMove,1),this.on("mousemove",this._debouncedOnMouseMove),this.on("click",this._onMouseClick),this.on("load",this._onLoad),this.on("zoom",this._onZoom),this.on("summarylevelchanged",this._onSummaryLevelChanged),this._boundOnLinkedMapMove=this._onLinkedMapMove.bind(this),this._debouncedBoundOnLinkedMapMouseMove=(0,f["default"])(this._onLinkedMapMouseMove.bind(this),1),this._boundOnLinkedMapMouseClick=this._onLinkedMapMouseClick.bind(this);var i=".dragonfly-marker,.dragonfly-popup{will-change:transform;top:0;left:0}.dragonfly-map{font:12px/20px 'Helvetica Neue',Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:transparent}.dragonfly-ctrl-bottom-left,.dragonfly-ctrl-bottom-right,.dragonfly-ctrl-top-left,.dragonfly-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.dragonfly-ctrl-top-left{top:0;left:0}.dragonfly-ctrl-top-right{top:0;right:0}.dragonfly-ctrl-bottom-left{bottom:0;left:0}.dragonfly-ctrl-bottom-right{right:0;bottom:0}.dragonfly-ctrl{clear:both;pointer-events:auto}.dragonfly-ctrl-top-left .dragonfly-ctrl{margin:10px 0 0 10px;float:left}.dragonfly-ctrl-top-right .dragonfly-ctrl{margin:10px 10px 0 0;float:right}.dragonfly-ctrl-bottom-left .dragonfly-ctrl{margin:0 0 10px 10px;float:left}.dragonfly-ctrl-bottom-right .dragonfly-ctrl{margin:0 10px 10px 0;float:right}.dragonfly-ctrl-group{border-radius:4px;box-shadow:0 0 0 2px rgba(0,0,0,.1);overflow:hidden;background:#fff}.dragonfly-ctrl-group>button{width:30px;height:30px;display:block;padding:0;outline:0;border:none;border-bottom:1px solid #ddd;box-sizing:border-box;background-color:rgba(0,0,0,0);cursor:pointer}.dragonfly-ctrl>button::-moz-focus-inner{border:0;padding:0}.dragonfly-ctrl>button:last-child{border-bottom:0}.dragonfly-ctrl>button:hover{background-color:rgba(0,0,0,.05)}.dragonfly-ctrl-icon,.dragonfly-ctrl-icon>span.arrow{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.dragonfly-ctrl-icon.dragonfly-ctrl-zoom-out{padding:5px;background-image:url(data:image/svg+xml;charset=utf8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0A%20%20%3Cpath%20style%3D%27fill%3A%23333333%3B%27%20d%3D%27m%207%2C9%20c%20-0.554%2C0%20-1%2C0.446%20-1%2C1%200%2C0.554%200.446%2C1%201%2C1%20l%206%2C0%20c%200.554%2C0%201%2C-0.446%201%2C-1%200%2C-0.554%20-0.446%2C-1%20-1%2C-1%20z%27%20%2F%3E%0A%3C%2Fsvg%3E%0A)}.dragonfly-ctrl-icon.dragonfly-ctrl-zoom-in{padding:5px;background-image:url(data:image/svg+xml;charset=utf8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0A%20%20%3Cpath%20style%3D%27fill%3A%23333333%3B%27%20d%3D%27M%2010%206%20C%209.446%206%209%206.4459904%209%207%20L%209%209%20L%207%209%20C%206.446%209%206%209.446%206%2010%20C%206%2010.554%206.446%2011%207%2011%20L%209%2011%20L%209%2013%20C%209%2013.55401%209.446%2014%2010%2014%20C%2010.554%2014%2011%2013.55401%2011%2013%20L%2011%2011%20L%2013%2011%20C%2013.554%2011%2014%2010.554%2014%2010%20C%2014%209.446%2013.554%209%2013%209%20L%2011%209%20L%2011%207%20C%2011%206.4459904%2010.554%206%2010%206%20z%27%20%2F%3E%0A%3C%2Fsvg%3E%0A)}.dragonfly-ctrl-icon.dragonfly-ctrl-geolocate{padding:5px;background-image:url(data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%20%20%3Cpath%20style%3D%27fill%3A%23333%3B%27%20d%3D%27M10%204C9%204%209%205%209%205L9%205.1A5%205%200%200%200%205.1%209L5%209C5%209%204%209%204%2010%204%2011%205%2011%205%2011L5.1%2011A5%205%200%200%200%209%2014.9L9%2015C9%2015%209%2016%2010%2016%2011%2016%2011%2015%2011%2015L11%2014.9A5%205%200%200%200%2014.9%2011L15%2011C15%2011%2016%2011%2016%2010%2016%209%2015%209%2015%209L14.9%209A5%205%200%200%200%2011%205.1L11%205C11%205%2011%204%2010%204zM10%206.5A3.5%203.5%200%200%201%2013.5%2010%203.5%203.5%200%200%201%2010%2013.5%203.5%203.5%200%200%201%206.5%2010%203.5%203.5%200%200%201%2010%206.5zM10%208.3A1.8%201.8%200%200%200%208.3%2010%201.8%201.8%200%200%200%2010%2011.8%201.8%201.8%200%200%200%2011.8%2010%201.8%201.8%200%200%200%2010%208.3z%27%20%2F%3E%0D%0A%3C%2Fsvg%3E)}.dragonfly-ctrl-icon.dragonfly-ctrl-geolocate.watching{background-image:url(data:image/svg+xml;charset=utf-8,%3Csvg%20viewBox%3D%270%200%2020%2020%27%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%3E%0D%0A%20%20%3Cpath%20style%3D%27fill%3A%2300f%3B%27%20d%3D%27M10%204C9%204%209%205%209%205L9%205.1A5%205%200%200%200%205.1%209L5%209C5%209%204%209%204%2010%204%2011%205%2011%205%2011L5.1%2011A5%205%200%200%200%209%2014.9L9%2015C9%2015%209%2016%2010%2016%2011%2016%2011%2015%2011%2015L11%2014.9A5%205%200%200%200%2014.9%2011L15%2011C15%2011%2016%2011%2016%2010%2016%209%2015%209%2015%209L14.9%209A5%205%200%200%200%2011%205.1L11%205C11%205%2011%204%2010%204zM10%206.5A3.5%203.5%200%200%201%2013.5%2010%203.5%203.5%200%200%201%2010%2013.5%203.5%203.5%200%200%201%206.5%2010%203.5%203.5%200%200%201%2010%206.5zM10%208.3A1.8%201.8%200%200%200%208.3%2010%201.8%201.8%200%200%200%2010%2011.8%201.8%201.8%200%200%200%2011.8%2010%201.8%201.8%200%200%200%2010%208.3z%27%20%2F%3E%0D%0A%3C%2Fsvg%3E)}.dragonfly-ctrl-icon.dragonfly-ctrl-compass>span.arrow{width:20px;height:20px;margin:5px;background-image:url(data:image/svg+xml;charset=utf8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20viewBox%3D%270%200%2020%2020%27%3E%0A%09%3Cpolygon%20fill%3D%27%23333333%27%20points%3D%276%2C9%2010%2C1%2014%2C9%27%2F%3E%0A%09%3Cpolygon%20fill%3D%27%23CCCCCC%27%20points%3D%276%2C11%2010%2C19%2014%2C11%20%27%2F%3E%0A%3C%2Fsvg%3E);background-repeat:no-repeat;display:inline-block}.dragonfly-ctrl.dragonfly-ctrl-attrib{padding:0 5px;background-color:rgba(255,255,255,.5);margin:0}.dragonfly-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.dragonfly-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.dragonfly-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.dragonfly-ctrl-scale{background-color:rgba(255,255,255,.75);font-size:10px;border-width:medium 2px 2px;border-style:none solid solid;border-color:#333;padding:0 5px;color:#333}.dragonfly-popup{position:absolute;display:-webkit-flex;display:-webkit-box;display:flex;pointer-events:none}.dragonfly-popup-anchor-top,.dragonfly-popup-anchor-top-left,.dragonfly-popup-anchor-top-right{-webkit-flex-direction:column;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.dragonfly-popup-anchor-bottom,.dragonfly-popup-anchor-bottom-left,.dragonfly-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;-webkit-box-orient:vertical;-webkit-box-direction:reverse;flex-direction:column-reverse}.dragonfly-popup-anchor-left{-webkit-flex-direction:row;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.dragonfly-popup-anchor-right{-webkit-flex-direction:row-reverse;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}.dragonfly-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.dragonfly-popup-anchor-top .dragonfly-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.dragonfly-popup-anchor-top-left .dragonfly-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.dragonfly-popup-anchor-top-right .dragonfly-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.dragonfly-popup-anchor-bottom .dragonfly-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.dragonfly-popup-anchor-bottom-left .dragonfly-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.dragonfly-popup-anchor-bottom-right .dragonfly-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.dragonfly-popup-anchor-left .dragonfly-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.dragonfly-popup-anchor-right .dragonfly-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.dragonfly-popup-close-button{position:absolute;right:0;top:0;border:none;border-radius:0 3px 0 0;cursor:pointer;background-color:rgba(0,0,0,0)}.dragonfly-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.dragonfly-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.dragonfly-popup-anchor-top-left .dragonfly-popup-content{border-top-left-radius:0}.dragonfly-popup-anchor-top-right .dragonfly-popup-content{border-top-right-radius:0}.dragonfly-popup-anchor-bottom-left .dragonfly-popup-content{border-bottom-left-radius:0}.dragonfly-popup-anchor-bottom-right .dragonfly-popup-content{border-bottom-right-radius:0}.dragonfly-canvas{user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-drag:none;-webkit-user-select:none;-ms-user-select:none}.dragonfly-marker{position:absolute}.dragonfly-crosshair,.dragonfly-crosshair .dragonfly-interactive,.dragonfly-crosshair .dragonfly-interactive:active{cursor:crosshair}.dragonfly-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}.dragonfly-canvas-container.dragonfly-interactive,.dragonfly-canvas-container.dragonfly-interactive:active,.dragonfly-ctrl-nav-compass,.dragonfly-ctrl-nav-compass:active{cursor:default!important}";
(0,w.loadStyles)(i,"MapSpice_Map_v2_1_0"),s(Object.getPrototypeOf(t.prototype),"addImage",this).call(this,"mapspice-internal:transparent-pattern",Uint8Array.from([255,0,0,0]),{width:1,height:1})}return i(t,e),a(t,[{key:"_isDataLayer",value:function(e){return Object.keys(this._dataLayers).some(function(t){return t===e})}},{key:"_resolveOriginLayerFromInternalLayer",value:function(e){return e.metadata&&e.metadata["mapspice:origin-layer-id"]?this.getStyle().layers.find(function(t){return t.id===e.metadata["mapspice:origin-layer-id"]}):e}},{key:"_onLinkedMapMove",value:function(e){e.link||this.jumpTo({center:e.target.getCenter(),zoom:e.target.getZoom(),bearing:e.target.getBearing(),pitch:e.target.getPitch()},{link:!0})}},{key:"_onLinkedMapMouseMove",value:function(e){e.link||this._onMouseMove({point:e.point.clone(),lngLat:e.point.lngLat},!0)}},{key:"_onLinkedMapMouseClick",value:function(e){e.link||this._onMouseClick({point:e.point.clone(),lngLat:e.point.lngLat},!0)}},{key:"_forceLayerRefresh",value:function(e){this.style._checkLoaded();var n=s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,e);this.style._updatedLayers[n.id]=!0,n.source&&(this.style._updatedSources[n.source]="reload"),this.style._changed=!0,this._update(!0)}},{key:"_onSummaryLevelChanged",value:function(){var e=this,t=this._highlightedFeaturesWithStyles.reduce(function(e,t){return e.find(function(e){return e.id===t.feature.id})||e.push(t.feature),e},[]),n=this._selectedFeaturesWithStyles.reduce(function(e,t){return e.find(function(e){return e.id===t.feature.id})||e.push(t.feature),e},[]);this._selectedFeaturesWithStyles=[],this._highlightedFeaturesWithStyles=[],this._highlightFeatures(),t.forEach(function(t){e.fire("featurehoverend",{point:void 0,lngLat:void 0,oldFeatureData:t.properties,layer:e._resolveOriginLayerFromInternalLayer(t.layer),link:void 0})}),n.forEach(function(t){e.fire("featuredeselected",{point:void 0,lngLat:void 0,oldFeatureData:t.properties,layer:e._resolveOriginLayerFromInternalLayer(t.layer),link:void 0})})}},{key:"_onLoad",value:function(){this._currentSummaryLevelId=this.currentSummaryLevelId}},{key:"_onZoom",value:function(){var e=this;this._preferredSummaryLevelId||!function(){var t=e.getZoom(),n=Object.keys(e._summaryLevels).find(function(n){return e._summaryLevels[n].minzoom<=t&&e._summaryLevels[n].maxzoom>t});if(e._currentSummaryLevelId!==n){var r=e._currentSummaryLevelId;e._currentSummaryLevelId=n,e.fire("summarylevelchanged",{oldSummaryLevelId:r,newSummaryLevelId:n})}}()}},{key:"_onMouseMove",value:function(e,t){var n=this;if(this._searchMarkers){var r=this.queryRenderedFeatures(e.point,{layers:this._searchMarkers.markers.map(function(e,t){return"mapspice-internal:search-markers-"+t})});r.length>0?(this._searchMarkerUnderMouse?this._searchMarkerUnderMouse.properties["mapspice-internal:marker-index"]!==r[0].properties["mapspice-internal:marker-index"]&&(this.fire("searchmarkerhoverend",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(this._searchMarkerUnderMouse.properties["mapspice-internal:marker-longitude"],this._searchMarkerUnderMouse.properties["mapspice-internal:marker-latitude"]),oldFeatureData:this._searchMarkerUnderMouse.properties,link:t}),this.fire("searchmarkerhoverstart",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(r[0].properties["mapspice-internal:marker-longitude"],r[0].properties["mapspice-internal:marker-latitude"]),featureData:r[0].properties,link:t})):this.fire("searchmarkerhoverstart",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(r[0].properties["mapspice-internal:marker-longitude"],r[0].properties["mapspice-internal:marker-latitude"]),featureData:r[0].properties,link:t}),this._searchMarkerUnderMouse=r[0]):this._searchMarkerUnderMouse&&(this.fire("searchmarkerhoverend",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(this._searchMarkerUnderMouse.properties["mapspice-internal:marker-longitude"],this._searchMarkerUnderMouse.properties["mapspice-internal:marker-latitude"]),oldFeatureData:this._searchMarkerUnderMouse.properties,link:t}),delete this._searchMarkerUnderMouse)}if(this._customMarkers){var o=this.queryRenderedFeatures(e.point,{layers:this._customMarkers.markers.map(function(e,t){return"mapspice-internal:custom-markers-"+t})});o.length>0?(this._customMarkerUnderMouse?this._customMarkerUnderMouse.properties["mapspice-internal:marker-index"]!==o[0].properties["mapspice-internal:marker-index"]&&(this.fire("custommarkerhoverend",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(this._customMarkerUnderMouse.properties["mapspice-internal:marker-longitude"],this._customMarkerUnderMouse.properties["mapspice-internal:marker-latitude"]),oldFeatureData:this._customMarkerUnderMouse.properties,link:t}),this.fire("custommarkerhoverstart",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(o[0].properties["mapspice-internal:marker-longitude"],o[0].properties["mapspice-internal:marker-latitude"]),featureData:o[0].properties,link:t})):this.fire("custommarkerhoverstart",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(o[0].properties["mapspice-internal:marker-longitude"],o[0].properties["mapspice-internal:marker-latitude"]),featureData:o[0].properties,link:t}),this._customMarkerUnderMouse=o[0]):this._customMarkerUnderMouse&&(this.fire("custommarkerhoverend",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(this._customMarkerUnderMouse.properties["mapspice-internal:marker-longitude"],this._customMarkerUnderMouse.properties["mapspice-internal:marker-latitude"]),oldFeatureData:this._customMarkerUnderMouse.properties,link:t}),delete this._customMarkerUnderMouse)}var i=Object.keys(this._highlightLayers).reduce(function(e,t){return e.concat(n._highlightLayers[t])},[]).filter(function(e){return n._shouldLayerCurrentlyBeVisible(e.metadata["mapspice:origin-layer-id"])}).map(function(e){return e.id}),a=this.getStyle().layers,s=this.queryRenderedFeatures(e.point,{layers:i}).filter(function(e){return e.layer.metadata&&void 0!==e.layer.metadata["mapspice:highlight-styles"]}).sort(function(e,t){if("bubble"===e.layer.type&&"bubble"!==t.layer.type)return-1;if("bubble"!==e.layer.type&&"bubble"===t.layer.type)return 1;if("bubble"===e.layer.type&&"bubble"===t.layer.type){var n=(0,_["default"])(e.layer.layout["bubble-radius"],e.properties),r=(0,_["default"])(t.layer.layout["bubble-radius"],t.properties);if(n===r)return 0;if(n<r)return-1;if(n>r)return 1}return 0}).sort(function(e,t){for(var n=-1,r=-1,o=a.length-1;n===-1&&r===-1&&o>=0;o--)a[o].id===e.layer.id&&(n=o),a[o].id===t.layer.id&&(r=o);return n<r?1:n>r?-1:0});if(s.length>0){var l=function(){var r=s[0].id,o=s[0].layer,i=o.metadata["mapspice:origin-layer-id"],a=s.filter(function(e){var t=e.layer.id===o.id,n=e.id===r;return t&&n});if(a.length!==n._highlightLayers[i].length||!n._shouldLayerCurrentlyBeVisible(i)){if(n._highlightedFeaturesWithStyles.length>0){var l=n._highlightedFeaturesWithStyles[0].feature.properties;n.fire("featurehoverend",{point:e.point.clone(),lngLat:e.lngLat,oldFeatureData:l,layer:n._resolveOriginLayerFromInternalLayer(n._highlightedFeaturesWithStyles[0].feature.layer),link:t})}return n._highlightedFeaturesWithStyles=[],{v:void 0}}if(n._highlightedFeaturesWithStyles.length>0){var u=n._highlightedFeaturesWithStyles[0].feature.id,c=n._highlightedFeaturesWithStyles[0].feature.layer,p=n._highlightedFeaturesWithStyles[0].feature.layer.id,l=n._highlightedFeaturesWithStyles[0].feature.properties;u===r&&p===o.id||(n.fire("featurehoverend",{point:e.point.clone(),oldFeatureData:l,layer:n._resolveOriginLayerFromInternalLayer(c),link:t}),n.fire("featurehoverstart",{point:e.point.clone(),lngLat:e.lngLat,featureData:a[0].properties,layer:n._resolveOriginLayerFromInternalLayer(a[0].layer),link:t}))}else n.fire("featurehoverstart",{point:e.point.clone(),lngLat:e.lngLat,featureData:a[0].properties,layer:n._resolveOriginLayerFromInternalLayer(a[0].layer),link:t});n._highlightedFeaturesWithStyles=[],a.forEach(function(e){e.layer.metadata["mapspice:highlight-styles"].forEach(function(t){n._highlightedFeaturesWithStyles.push({feature:e,style:t})})})}();if("object"==typeof l)return l.v}else{if(this._highlightedFeaturesWithStyles.length>0){var c=this._highlightedFeaturesWithStyles[0].feature.properties,p=this._highlightedFeaturesWithStyles[0].feature.layer;this.fire("featurehoverend",{point:e.point.clone(),lngLat:e.lngLat,oldFeatureData:c,layer:this._resolveOriginLayerFromInternalLayer(p),link:t})}this._highlightedFeaturesWithStyles=[]}this._highlightFeatures()}},{key:"_dataLayersForVariableId",value:function(e){var t=this;return Object.keys(this._dataLayers).reduce(function(n,r){return n.concat(t._dataLayers[r].filter(function(t){return t.metadata["mapspice:variable-id"]===e}))},[])}},{key:"_shouldLayerCurrentlyBeVisible",value:function(e){var t=[/^mapspice-internal:.*/],n=t.some(function(t){return t instanceof RegExp?t.test(e):t===e});if(n)return!0;var r=this._dataLayersForVariableId(this._currentVariableId).map(function(e){return e.id}),o=[];return this._variables[this._currentVariableId]&&this._variables[this._currentVariableId]["layers-ids"]&&(o=this._variables[this._currentVariableId]["layers-ids"]),o.concat(this._alwaysVisibleLayersIds).concat(r).some(function(t){return e===t})}},{key:"_onMouseClick",value:function(e,t){var n=this;if(this._searchMarkers){var r=this.queryRenderedFeatures(e.point,{layers:this._searchMarkers.markers.map(function(e,t){return"mapspice-internal:search-markers-"+t})});if(r.length>0)return void this.fire("searchmarkerclicked",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(r[0].properties["mapspice-internal:marker-longitude"],r[0].properties["mapspice-internal:marker-latitude"]),featureData:r[0].properties,link:t})}if(this._customMarkers){var o=this.queryRenderedFeatures(e.point,{layers:this._customMarkers.markers.map(function(e,t){return"mapspice-internal:custom-markers-"+t})});if(o.length>0)return void this.fire("custommarkerclicked",{point:e.point.clone(),lngLat:e.lngLat,markerLngLat:new u["default"].LngLat(o[0].properties["mapspice-internal:marker-longitude"],o[0].properties["mapspice-internal:marker-latitude"]),featureData:o[0].properties,link:t})}var i=Object.keys(this._selectionLayers).reduce(function(e,t){return e.concat(n._selectionLayers[t])},[]).filter(function(e){return n._shouldLayerCurrentlyBeVisible(e.metadata["mapspice:origin-layer-id"])}).map(function(e){return e.id}),a=this.getStyle().layers,s=this.queryRenderedFeatures(e.point,{layers:i}).filter(function(e){return e.layer.metadata&&void 0!==e.layer.metadata["mapspice:selection-styles"]}).sort(function(e,t){if("bubble"===e.layer.type&&"bubble"!==t.layer.type)return-1;if("bubble"!==e.layer.type&&"bubble"===t.layer.type)return 1;if("bubble"===e.layer.type&&"bubble"===t.layer.type){var n=(0,_["default"])(e.layer.layout["bubble-radius"],e.properties),r=(0,_["default"])(t.layer.layout["bubble-radius"],t.properties);if(n===r)return 0;if(n<r)return-1;if(n>r)return 1}return 0}).sort(function(e,t){for(var n=-1,r=-1,o=a.length-1;n===-1&&r===-1&&o>=0;o--)a[o].id===e.layer.id&&(n=o),a[o].id===t.layer.id&&(r=o);return n<r?1:n>r?-1:0});if(0!==s.length){var l=s[0].id,c=s[0].layer,p=c.metadata["mapspice:origin-layer-id"],d=s.filter(function(e){var t=e.layer.id===c.id,n=e.id===l;return t&&n});if(d.length===this._selectionLayers[p].length&&this._shouldLayerCurrentlyBeVisible(p)){var f=this._selectedFeaturesWithStyles.some(function(e){var t=e.feature.layer.id===c.id,n=e.feature.id===l;return t&&n});if(this._allowMultiFeatureSelection)this._selectedFeaturesWithStyles=this._selectedFeaturesWithStyles.filter(function(e){var t=e.feature.layer.id===c.id,n=e.feature.id===l,r=!t||!n;return r});else{if(this._selectedFeaturesWithStyles.length>0&&!f){var h=this._selectedFeaturesWithStyles[0].feature;this.fire("featuredeselected",{point:e.point.clone(),lngLat:e.lngLat,oldFeatureData:h.properties,layer:this._resolveOriginLayerFromInternalLayer(h.layer),link:t})}this._selectedFeaturesWithStyles=[]}f?this.fire("featuredeselected",{point:e.point.clone(),lngLat:e.lngLat,oldFeatureData:d[0].properties,layer:this._resolveOriginLayerFromInternalLayer(d[0].layer),link:t}):(d.forEach(function(e){e.layer.metadata["mapspice:selection-styles"].forEach(function(t){n._selectedFeaturesWithStyles.push({feature:e,style:t})})}),this.fire("featureselected",{point:e.point.clone(),lngLat:e.lngLat,featureData:d[0].properties,layer:this._resolveOriginLayerFromInternalLayer(d[0].layer),link:t})),this._highlightFeatures()}}}},{key:"_highlightFeatures",value:function(){var e=[],t=[];this._highlightedFeaturesWithStyles.concat(this._selectedFeaturesWithStyles).forEach(function(n){e.push(n.feature),t.push(n.style)}),this.painter.clearFeaturesStyles(),this.painter.setFeaturesStyles(e,t)}},{key:"_recalculateLayerVisibility",value:function(){var e=this,n=[],r=[];this.getStyle().layers.forEach(function(o){var i=Object.keys(e._highlightLayers).reduce(function(t,n){return t.concat(e._highlightLayers[n])},[]),a=Object.keys(e._selectionLayers).reduce(function(t,n){return t.concat(e._selectionLayers[n])},[]);if(i.some(function(e){return e.id===o.id})||a.some(function(e){return e.id===o.id})){var l=e._shouldLayerCurrentlyBeVisible(o.metadata["mapspice:origin-layer-id"]);e._useSeamlessVariableTransitions||(l?s(Object.getPrototypeOf(t.prototype),"setLayoutProperty",e).call(e,o.id,"visibility","visible"):s(Object.getPrototypeOf(t.prototype),"setLayoutProperty",e).call(e,o.id,"visibility","none"))}else{var l=e._shouldLayerCurrentlyBeVisible(o.id);l?r.push(o):n.push(o)}}),r.forEach(function(n){if(e._useSeamlessVariableTransitions)t._getVisibilityStylePropertiesByType(n.type).forEach(function(r){var o=void 0;o=n.metadata&&n.metadata["mapspice-internal:paint"]&&n.metadata["mapspice-internal:paint"].hasOwnProperty(r)?n.metadata["mapspice-internal:paint"][r]:1,s(Object.getPrototypeOf(t.prototype),"setPaintProperty",e).call(e,n.id,r,o)});else{var r=void 0;r=n.metadata&&n.metadata["mapspice-internal:layout"]&&n.metadata["mapspice-internal:layout"].hasOwnProperty("visibility")?n.metadata["mapspice-internal:layout"].visibility:"visible",s(Object.getPrototypeOf(t.prototype),"setLayoutProperty",e).call(e,n.id,"visibility",r)}}),n.forEach(function(n){e._useSeamlessVariableTransitions?t._getVisibilityStylePropertiesByType(n.type).forEach(function(r){s(Object.getPrototypeOf(t.prototype),"setPaintProperty",e).call(e,n.id,r,0)}):s(Object.getPrototypeOf(t.prototype),"setLayoutProperty",e).call(e,n.id,"visibility","none"),e._selectedFeaturesWithStyles=e._selectedFeaturesWithStyles.filter(function(e){var t=e.feature.layer.id===n.id,r=e.feature.layer.id===n.metadata["mapspice:origin-layer-id"],o=e.feature.layer.metadata["mapspice:origin-layer-id"]===n.id,i=e.feature.layer.metadata["mapspice:origin-layer-id"]===n.metadata["mapspice:origin-layer-id"],a=!(t||r||o||i);return a}),e._highlightedFeaturesWithStyles=e._highlightedFeaturesWithStyles.filter(function(e){var t=e.feature.layer.id===n.id,r=e.feature.layer.id===n.metadata["mapspice:origin-layer-id"],o=e.feature.layer.metadata["mapspice:origin-layer-id"]===n.id,i=e.feature.layer.metadata["mapspice:origin-layer-id"]===n.metadata["mapspice:origin-layer-id"],a=!(t||r||o||i);return a})}),this._highlightFeatures()}},{key:"clearGeolocationMarker",value:function(){s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,"mapspice-internal:geolocation-marker")&&s(Object.getPrototypeOf(t.prototype),"removeLayer",this).call(this,"mapspice-internal:geolocation-marker"),s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,"mapspice-internal:geolocation-marker-accuracy")&&s(Object.getPrototypeOf(t.prototype),"removeLayer",this).call(this,"mapspice-internal:geolocation-marker-accuracy"),s(Object.getPrototypeOf(t.prototype),"getSource",this).call(this,"mapspice-internal:geolocation-marker")&&s(Object.getPrototypeOf(t.prototype),"removeSource",this).call(this,"mapspice-internal:geolocation-marker"),delete this._geolocationMarker}},{key:"displayGeolocationMarker",value:function(e,n){var r=this,o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];this._geolocationMarker&&this.clearGeolocationMarker();var i=(0,w._extends)({"mapspice-internal:marker-longitude":e,"mapspice-internal:marker-latitude":n},o.featureData),a={type:"geojson",data:{type:"Feature",geometry:{type:"Point",coordinates:[e,n]},properties:i}};s(Object.getPrototypeOf(t.prototype),"addSource",this).call(this,"mapspice-internal:geolocation-marker",a),o.hasOwnProperty("accuracy")&&!function(){for(var e=function(e,t){var n=40075017,r=e*(Math.PI/180);return n*Math.cos(r)/Math.pow(2,t+8)},i=function(t,n,r){return n/e(t,r)},a=[],l=0;l<22;l++)a.push([l,i(n,o.accuracy,l)]);var u={"bubble-color":"#A7DBD8","bubble-opacity":.25,"bubble-outline-width":2,"bubble-outline-color":"#ffffff","bubble-radius-multiplier":{base:1,stops:a}};o.hasOwnProperty("accuracyBubbleColor")&&(u["bubble-color"]=o.accuracyBubbleColor),o.hasOwnProperty("accuracyBubbleOpacity")&&(u["bubble-opacity"]=o.accuracyBubbleOpacity),o.hasOwnProperty("accuracyBubbleOutlineWidth")&&(u["bubble-outline-width"]=o.accuracyBubbleOutlineWidth),o.hasOwnProperty("accuracyBubbleOutlineColor")&&(u["bubble-outline-color"]=o.accuracyBubbleOutlineColor),s(Object.getPrototypeOf(t.prototype),"addLayer",r).call(r,{id:"mapspice-internal:geolocation-marker-accuracy",type:"bubble",paint:u,layout:{"bubble-radius":"1"},source:"mapspice-internal:geolocation-marker"})}();var l={"text-color":"#69D2E7","text-halo-color":"white","text-halo-width":3,"text-halo-blur":1};o.hasOwnProperty("markerColor")&&(l["text-color"]=o.markerColor),o.hasOwnProperty("markerOutlineColor")&&(l["text-halo-color"]=o.markerOutlineColor),o.hasOwnProperty("markerOutlineWidth")&&(l["text-halo-width"]=o.markerOutlineWidth),o.hasOwnProperty("markerOutlineBlur")&&(l["text-halo-blur"]=o.markerOutlineBlur);var c={"text-size":32,"text-field":m["default"].map_marker_city};o.hasOwnProperty("markerSize")&&(c["text-size"]=o.markerSize),s(Object.getPrototypeOf(t.prototype),"addLayer",this).call(this,{id:"mapspice-internal:geolocation-marker",type:"symbol",paint:l,layout:c,source:"mapspice-internal:geolocation-marker"}),this._geolocationMarker={lngLat:new u["default"].LngLat(e,n),metadata:o}}},{key:"clearSearchMarkers",value:function(){var e=this;this._searchMarkers&&(this._searchMarkers.markers.forEach(function(n,r){s(Object.getPrototypeOf(t.prototype),"getLayer",e).call(e,"mapspice-internal:search-markers-"+r)&&s(Object.getPrototypeOf(t.prototype),"removeLayer",e).call(e,"mapspice-internal:search-markers-"+r)}),s(Object.getPrototypeOf(t.prototype),"getSource",this).call(this,"mapspice-internal:search-markers")&&s(Object.getPrototypeOf(t.prototype),"removeSource",this).call(this,"mapspice-internal:search-markers"),delete this._searchMarkers)}},{key:"displaySearchMarkers",value:function(e){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this._searchMarkers&&this.clearSearchMarkers();var o=e.map(function(e,t){return{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:(0,w._extends)({"mapspice-internal:marker-index":t,"mapspice-internal:marker-longitude":e.lng,"mapspice-internal:marker-latitude":e.lat},e.featureData)}}),i={type:"geojson",data:{type:"FeatureCollection",features:o}};s(Object.getPrototypeOf(t.prototype),"addSource",this).call(this,"mapspice-internal:search-markers",i);var a={"text-color":"#eee","text-halo-color":"#666","text-halo-width":2,"text-halo-blur":0};r.hasOwnProperty("markerColor")&&(a["text-color"]=r.markerColor),r.hasOwnProperty("markerOutlineColor")&&(a["text-halo-color"]=r.markerOutlineColor),r.hasOwnProperty("markerOutlineWidth")&&(a["text-halo-width"]=r.markerOutlineWidth),r.hasOwnProperty("markerOutlineBlur")&&(a["text-halo-blur"]=r.markerOutlineBlur);var l={"text-size":64,"text-field":m["default"].map_annotation_marker_annotation,"text-allow-overlap":!0,"text-ignore-placement":!0,"text-padding":0,"text-line-height":.6};r.hasOwnProperty("markerSize")&&(l["text-size"]=r.markerSize),e.forEach(function(e,r){s(Object.getPrototypeOf(t.prototype),"addLayer",n).call(n,{id:"mapspice-internal:search-markers-"+r,type:"symbol",paint:a,layout:l,filter:["==","mapspice-internal:marker-index",r],source:"mapspice-internal:search-markers"})}),this._searchMarkers={markers:e,markerStyle:r}}},{key:"clearCustomMarkers",value:function(){var e=this;this._customMarkers&&(this._customMarkers.markers.forEach(function(n,r){s(Object.getPrototypeOf(t.prototype),"getLayer",e).call(e,"mapspice-internal:custom-markers-"+r)&&s(Object.getPrototypeOf(t.prototype),"removeLayer",e).call(e,"mapspice-internal:custom-markers-"+r)}),s(Object.getPrototypeOf(t.prototype),"getSource",this).call(this,"mapspice-internal:custom-markers")&&s(Object.getPrototypeOf(t.prototype),"removeSource",this).call(this,"mapspice-internal:custom-markers"),delete this._customMarkers)}},{key:"displayCustomMarkers",value:function(e){var n=this;this._customMarkers&&this.clearCustomMarkers();var r=e.map(function(e,t){return{type:"Feature",geometry:{type:"Point",coordinates:[e.lng,e.lat]},properties:(0,w._extends)({"mapspice-internal:marker-index":t,"mapspice-internal:marker-longitude":e.lng,"mapspice-internal:marker-latitude":e.lat},e.featureData)}}),o={type:"geojson",data:{type:"FeatureCollection",features:r}};s(Object.getPrototypeOf(t.prototype),"addSource",this).call(this,"mapspice-internal:custom-markers",o),e.forEach(function(e,r){var o=(0,w._extends)({},e.style),i={"text-color":"#eee","text-halo-color":"#666","text-halo-width":2,"text-halo-blur":0};o.hasOwnProperty("markerColor")&&(i["text-color"]=o.markerColor),o.hasOwnProperty("markerOutlineColor")&&(i["text-halo-color"]=o.markerOutlineColor),o.hasOwnProperty("markerOutlineWidth")&&(i["text-halo-width"]=o.markerOutlineWidth),o.hasOwnProperty("markerOutlineBlur")&&(i["text-halo-blur"]=o.markerOutlineBlur);var a={"text-size":64,"text-field":m["default"].map_annotation_marker_bank,"text-allow-overlap":!0,"text-ignore-placement":!0,"text-padding":0,"text-line-height":.6};o.hasOwnProperty("markerSize")&&(a["text-size"]=o.markerSize),o.hasOwnProperty("markerIcon")&&(a["text-field"]=o.markerIcon),s(Object.getPrototypeOf(t.prototype),"addLayer",n).call(n,{id:"mapspice-internal:custom-markers-"+r,type:"symbol",paint:i,layout:a,filter:["==","mapspice-internal:marker-index",r],source:"mapspice-internal:custom-markers"})}),this._customMarkers={markers:e}}},{key:"clearSelectedFeatures",value:function(){this._selectedFeaturesWithStyles=[],this._highlightFeatures()}},{key:"applyColorPaletteToDataLayer",value:function(e,n){var r=this,o=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!this._isDataLayer(e))throw new Error(e+" is not a data layer.");!function(){if(!r._colorPalettes.hasOwnProperty(n))throw new Error("Color palette id: "+n+" does not exist.");var i=r._colorPalettes[n].interpolateColors(r._dataLayers[e].length,o),a=r._colorPalettes[n].getPatterns(r._dataLayers[e].length,o),s=r._dataLayers[e],l=s.filter(function(e){return e.metadata["mapspice-internal:is-color-layer"]}),u=s.filter(function(e){return e.metadata["mapspice-internal:is-pattern-layer"]});l.forEach(function(a,s){t._getColorPropertiesByLayerType(a.type).forEach(function(t){r.setRulePaintProperty(e,s,t,i[s])}),a.metadata["mapspice-internal:color-palette-id"]=n,a.metadata["mapspice-internal:is-color-palette-flipped"]=o}),u.forEach(function(i,s){t._getPatternPropertiesByLayerType(i.type).forEach(function(t){r.setRulePaintProperty(e,s,t,a[s])}),i.metadata["mapspice-internal:color-palette-id"]=n,i.metadata["mapspice-internal:is-color-palette-flipped"]=o}),r.fire("colorpaletteappliedtodatalayer",{dataLayerId:e,colorPaletteId:n,isColorPaletteFlipped:o})}()}},{key:"applyColorPaletteToAllDataLayers",value:function(e){var t=this,n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];Object.keys(this._dataLayers).forEach(function(r){t.applyColorPaletteToDataLayer(r,e,n)})}},{key:"addLayer",value:function(){throw new Error("Programmatic addition of new layers is not yet supported.")}},{key:"removeLayer",value:function(){throw new Error("Programmatic removal of layers is not yet supported.")}},{key:"getLayer",value:function(){throw new Error("Programmatic retrieval of layers is not yet supported.")}},{key:"moveLayer",value:function(){throw new Error("Programmatic moving of layers is not yet supported.")}},{key:"setFilter",value:function(e,n){if(this._isDataLayer(e))throw new Error(e+" is a data layer.");return s(Object.getPrototypeOf(t.prototype),"setFilter",this).call(this,e,n),this.fire("filterchanged",{layerId:e,filter:n,filterEvaluator:(0,v["default"])(n)}),this}},{key:"getFilter",value:function(e){if(this._isDataLayer(e))throw new Error(e+" is a data layer.");return s(Object.getPrototypeOf(t.prototype),"getFilter",this).call(this,e)}},{key:"setRuleFilter",value:function(e,n,r){if(!this._isDataLayer(e))throw new Error(e+" is not a data layer.");if(n>this._dataLayers[e].length||n<0)throw new Error("Rule index is out of bounds.");this._dataLayers[e][n].filter=r,s(Object.getPrototypeOf(t.prototype),"setFilter",this).call(this,this._dataLayers[e][n].id,r),this.fire("rulefilterchanged",{layerId:e,ruleIndex:n,filter:r,filterEvaluator:(0,v["default"])(r)})}},{key:"setLayerZoomRange",value:function(e,n,r){var o=this;return this._isDataLayer(e)?this._dataLayers[e].forEach(function(e){s(Object.getPrototypeOf(t.prototype),"setLayerZoomRange",o).call(o,e.id,n,r)}):s(Object.getPrototypeOf(t.prototype),"setLayerZoomRange",this).call(this,e,n,r),this.fire("layerzoomrangechanged",{layerId:e,minZoom:n,maxZoom:r}),this}},{key:"setPaintProperty",value:function(e,n,r,o){var i=this;if(this._isDataLayer(e))this._dataLayers[e].forEach(function(t,a){i.setRulePaintProperty(e,a,n,r,o)});else{var a=s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,e),l=a?t._getVisibilityStylePropertiesByType(a.type).some(function(e){return e===n})&&this._useSeamlessVariableTransitions:void 0;!this._shouldLayerCurrentlyBeVisible(e)&&l||s(Object.getPrototypeOf(t.prototype),"setPaintProperty",this).call(this,e,n,r,o)}return this.fire("paintpropertychanged",{layerId:e,propertyName:n,propertyValue:r,paintClass:o}),this}},{key:"getPaintProperty",value:function(e,n,r){if(this._isDataLayer(e))throw new Error(e+" is a data layer.");var o=void 0;if(this._shouldLayerCurrentlyBeVisible(e))o=s(Object.getPrototypeOf(t.prototype),"getPaintProperty",this).call(this,e,n,r);else{var i=s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,e);o=i.metadata["mapspice-internal:paint"].hasOwnProperty(n)?i.metadata["mapspice-internal:paint"][n]:s(Object.getPrototypeOf(t.prototype),"getPaintProperty",this).call(this,e,n,r)}return o}},{key:"setRulePaintProperty",value:function(e,n,r,o,i){var a=this;if(!this._isDataLayer(e))throw new Error(e+" is not a data layer.");return!function(){if(n>a._dataLayers[e].length||n<0)throw new Error("Rule index is out of bounds.");var l=void 0!==a._dataLayers[e].find(function(e){return e.metadata["mapspice-internal:is-pattern-layer"]}),u=l?2:1,c=[],p=[],d=void 0===o?"mapspice-internal:transparent-pattern":o;c.push(s(Object.getPrototypeOf(t.prototype),"getLayer",a).call(a,a._dataLayers[e][n*u].id)),p.push(a._dataLayers[e][n*u]),l&&(c.push(s(Object.getPrototypeOf(t.prototype),"getLayer",a).call(a,a._dataLayers[e][n*u+1].id)),p.push(a._dataLayers[e][n*u+1])),c.forEach(function(l,u){var f=c[u],h=p[u],m=void 0;i?(m="mapspice-internal:paint."+i,h["paint."+i][r]=d):(m="mapspice-internal:paint",h.paint[r]=d),f.metadata[m][r]=d,h.metadata[m][r]=d;var y=t._getVisibilityStylePropertiesByType(f.type).some(function(e){return e===r})&&a._useSeamlessVariableTransitions;!a._shouldLayerCurrentlyBeVisible(e)&&y||s(Object.getPrototypeOf(t.prototype),"setPaintProperty",a).call(a,f.id,r,d,i),a.fire("rulepaintpropertychanged",{layerId:e,ruleIndex:n,propertyName:r,propertyValue:o,paintClass:i})})}(),this}},{key:"getRulePaintProperty",value:function(e,t,n,r){if(this._isDataLayer(e)){if(t>this._dataLayers[e].length||t<0)throw new Error("Rule index is out of bounds.");return this.getPaintProperty(this._dataLayers[e][t].id,n,r)}throw new Error(e+" is not a data layer.")}},{key:"setLayoutProperty",value:function(e,n,r){var o=this;if(this._isDataLayer(e))this._dataLayers[e].forEach(function(t,i){o.setRuleLayoutProperty(e,i,n,r)});else{var i="visibility"===n&&!this._useSeamlessVariableTransitions;this._shouldLayerCurrentlyBeVisible(e)&&!i&&s(Object.getPrototypeOf(t.prototype),"setLayoutProperty",this).call(this,e,n,r)}return this.fire("layoutpropertychanged",{layerId:e,propertyName:n,propertyValue:r}),this}},{key:"getLayoutProperty",value:function(e,n){if(this._isDataLayer(e))throw new Error(e+" is a data layer.");var r=void 0;if(this._shouldLayerCurrentlyBeVisible(e))r=s(Object.getPrototypeOf(t.prototype),"getLayoutProperty",this).call(this,e,n);else{var o=s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,e);r=o.metadata["mapspice-internal:layout"].hasOwnProperty(n)?o.metadata["mapspice-internal:layout"][n]:s(Object.getPrototypeOf(t.prototype),"getLayoutProperty",this).call(this,e,n)}return r}},{key:"setRuleLayoutProperty",value:function(e,n,r,o){if(!this._isDataLayer(e))throw new Error(e+" is not a data layer.");if(n>this._dataLayers[e].length||n<0)throw new Error("Rule index is out of bounds.");var i=s(Object.getPrototypeOf(t.prototype),"getLayer",this).call(this,this._dataLayers[e][n].id);i.metadata["mapspice-internal:layout"][r]=o,this._dataLayers[e][n].layout[r]=o,this._dataLayers[e][n].metadata["mapspice-internal:layout"][r]=o;var a="visibility"===r&&!this._useSeamlessVariableTransitions;return this._shouldLayerCurrentlyBeVisible(e)&&!a&&s(Object.getPrototypeOf(t.prototype),"setLayoutProperty",this).call(this,i.id,r,o),this.fire("rulelayoutpropertychanged",{layerId:e,ruleIndex:n,propertyName:r,propertyValue:o}),this}},{key:"getRuleLayoutProperty",value:function(e,t,n){if(this._isDataLayer(e)){if(t>this._dataLayers[e].length||t<0)throw new Error("Rule index is out of bounds.");return this.getLayoutProperty(this._dataLayers[e][t].id,n)}throw new Error(e+" is not a data layer.")}},{key:"resetToInitialView",value:function(e){return this._initialViewBoundingBox?this.fitBounds(this._initialViewBoundingBox,(0,w._extends)({},e)):this.flyTo((0,w._extends)({},e,{zoom:this._initialZoom,center:this._initialCenter})),this.fire("initialviewreset"),this}},{key:"linkMapMovementsFrom",value:function(e){e.on("move",this._boundOnLinkedMapMove)}},{key:"unlinkMapMovementsFrom",value:function(e){e.off("move",this._boundOnLinkedMapMove)}},{key:"mimickMapMouseEvents",value:function(e){e.on("mousemove",this._debouncedBoundOnLinkedMapMouseMove),e.on("click",this._boundOnLinkedMapMouseClick)}},{key:"stopMimickingMapMouseEvents",value:function(e){e.off("mousemove",this._debouncedBoundOnLinkedMapMouseMove),e.off("click",this._boundOnLinkedMapMouseClick)}},{key:"multiFeatureSelectionEnabled",get:function(){return this._allowMultiFeatureSelection},set:function(e){var t=this;if(this._allowMultiFeatureSelection=e,!e){var n=this._selectedFeaturesWithStyles.reduce(function(e,t){return e.find(function(e){return e.id===t.feature.id})||e.push(t.feature),e},[]);this._selectedFeaturesWithStyles=[],this._highlightFeatures(),n.forEach(function(e){t.fire("featuredeselected",{point:void 0,lngLat:void 0,oldFeatureData:e.properties,layer:t._resolveOriginLayerFromInternalLayer(e.layer),link:void 0})})}}},{key:"variables",get:function(){return this._variables}},{key:"summaryLevels",get:function(){return this._summaryLevels}},{key:"colorPalettes",get:function(){return this._colorPalettes}},{key:"currentColorPaletteId",get:function(){return this._dataLayersForVariableId(this.currentVariableId)[0].metadata["mapspice-internal:color-palette-id"];
}},{key:"isCurrentColorPaletteFlipped",get:function(){return this._dataLayersForVariableId(this.currentVariableId)[0].metadata["mapspice-internal:is-color-palette-flipped"]}},{key:"currentVariableId",get:function(){return this._currentVariableId},set:function(e){this._currentVariableId=e,this._recalculateLayerVisibility(),this.fire("variablechanged",{variableId:e})}},{key:"preferredSummaryLevelId",get:function(){return this._preferredSummaryLevelId},set:function(e){var n=this;this._preferredSummaryLevelId!==e&&!function(){var r=n._preferredSummaryLevelId;n._preferredSummaryLevelId=e,s(Object.getPrototypeOf(t.prototype),"getStyle",n).call(n).layers.forEach(function(r){var o=s(Object.getPrototypeOf(t.prototype),"getLayer",n).call(n,r.id);if(r.metadata&&r.metadata["mapspice:auto-source"]){if(void 0===e)o.autoSource=t._autoSourceFromMapspiceAutoSourceDefinition(r.metadata["mapspice:auto-source"],n._summaryLevels,r),o.sourceLayer=o.autoSource[0]["source-layer"];else{var i=t._autoSourceFromMapspiceAutoSourceDefinition(r.metadata["mapspice:auto-source"].filter(function(t){return t["summary-level"]===e}),n._summaryLevels,r);o.autoSource=i,o.sourceLayer=i[0]["source-layer"]}n._forceLayerRefresh(r.id)}}),n._highlightFeatures();var o=n.getZoom(),i=Object.keys(n._summaryLevels).find(function(e){return n._summaryLevels[e].minzoom<=o&&n._summaryLevels[e].maxzoom>o});void 0===r&&e!==i?n.fire("summarylevelchanged",{oldSummaryLevelId:r,newSummaryLevelId:e}):void 0===e&&r!==i?n.fire("summarylevelchanged",{oldSummaryLevelId:r,newSummaryLevelId:e}):void 0!==e&&e!==r?n.fire("summarylevelchanged",{oldSummaryLevelId:r,newSummaryLevelId:e}):void 0!==e&&e!==i&&n.fire("summarylevelchanged",{oldSummaryLevelId:r,newSummaryLevelId:e}),n.fire("preferredsummarylevelchanged",{oldSummaryLevelId:r,newSummaryLevelId:e})}(),this._preferredSummaryLevelId=e}},{key:"currentDataLayerType",get:function(){return this._dataLayersForVariableId(this.currentVariableId)[0].type}},{key:"currentSummaryLevelId",get:function(){var e=this;if(this._preferredSummaryLevelId)return this._preferredSummaryLevelId;var t=this.getZoom();return Object.keys(this._summaryLevels).find(function(n){return e._summaryLevels[n].minzoom<=t&&e._summaryLevels[n].maxzoom>t})}},{key:"currentVariableRules",get:function(){var e=this,n=this._dataLayersForVariableId(this._currentVariableId),r=n.filter(function(e){return e.metadata["mapspice-internal:is-color-layer"]}),o=n.filter(function(e){return e.metadata["mapspice-internal:is-pattern-layer"]});return r.map(function(n){var r=t._getColorPropertiesByLayerType(n.type),i=t._getPatternPropertiesByLayerType(n.type),a=o.find(function(e){return e.metadata["mapspice-internal:rule-index"]===n.metadata["mapspice-internal:rule-index"]}),s=e._colorPalettes[n.metadata["mapspice-internal:color-palette-id"]],l=void 0;l="pattern-array"===s.type?r.map(function(){}):r.map(function(e){return(0,p["default"])(n.paint[e]).css()});var u=i.map(function(e){var t=a&&a.paint?a.paint[e]:void 0;if("mapspice-internal:transparent-pattern"!==t)return t});return{layerId:n.metadata["mapspice:origin-layer-id"],layerType:n.type,layerFilter:n.filter,colorProperties:r,patternProperties:i,colors:l,patterns:u,label:n.metadata["mapspice:rule-label"],description:n.metadata["mapspice:rule-description"],controledLayerIDs:n.metadata["mapspice:controled-layer-IDs"],filter:(0,v["default"])(n.filter)}})}}],[{key:"_getDefaultInvisibleStyleByType",value:function(e){switch(e){case"fill":return{"fill-color":"rgba(0, 0, 0, 0)","fill-outline-color":"rgba(0, 0, 0, 0)"};case"line":return{"line-color":"rgba(0, 0, 0, 0)"};case"circle":return{"circle-color":"rgba(0, 0, 0 ,0)","circle-stroke-color":"rgba(0, 0, 0, 0)"};case"bubble":return{"bubble-color":"rgba(0, 0, 0, 0)","bubble-outline-color":"rgba(0, 0, 0, 0)","bubble-max-radius-outline-color":"rgba(0, 0, 0, 0)"}}}},{key:"_getVisibilityStylePropertiesByType",value:function(e){switch(e){case"fill":return["fill-opacity"];case"fill-extrusion":return["fill-extrusion-opacity"];case"line":return["line-opacity"];case"raster":return["raster-opacity"];case"background":return["background-opacity"];case"circle":return["circle-opacity"];case"symbol":return["icon-opacity","text-opacity"];case"bubble":return["bubble-opacity"];case"dotdensity":return["dotdensity-opacity"];default:return[]}}},{key:"_getColorPropertiesByLayerType",value:function(e){switch(e){case"fill":return["fill-color"];case"fill-extrusion":return["fill-extrusion-color"];case"line":return["line-color"];case"background":return["background-color"];case"circle":return["circle-color"];case"symbol":return["icon-color","text-color"];case"bubble":return["bubble-color"];case"dotdensity":return["dotdensity-color"];default:return[]}}},{key:"_getPatternPropertiesByLayerType",value:function(e){switch(e){case"fill":return["fill-pattern"];case"fill-extrusion":return["fill-extrusion-pattern"];case"line":return["line-pattern"];case"background":return["background-pattern"];case"symbol":return["icon-image"];default:return[]}}},{key:"_autoSourceFromMapspiceAutoSourceDefinition",value:function(e,t,n){return e.map(function(e){return{id:n.id,type:n.type,source:e.source,minzoom:t[e["summary-level"]].minzoom,maxzoom:t[e["summary-level"]].maxzoom,"source-layer":e["source-layer"],metadata:{"mapspice-internal:summary-level":e["summary-level"]}}})}},{key:"_interpolateFilter",value:function(e,n){e.forEach(function(r,o){Array.isArray(r)?t._interpolateFilter(r,n):"string"==typeof r&&Object.keys(n).forEach(function(t){e[o]=r.replace(t,n[t])})})}},{key:"_interpolateRulesetRulesVariables",value:function(e,n){return e.forEach(function(e){t._interpolateFilter(e.filter,n)}),e}},{key:"_columnExistsInSourceLayerDatasets",value:function(e,t,n,r){if(!e[t]||!e[t].layers)return!1;var o=e[t].layers.find(function(e){return e.layerId===n});return!!(o&&o.datasets&&Array.isArray(o.datasets)&&0!==o.datasets.length)&&o.datasets.some(function(e){return e.columns.some(function(e){var t=e.split("->")[0];return t===r})})}},{key:"_transpileMapDefinition",value:function(e){var n=JSON.parse(JSON.stringify(e)),r={},o={},i={},a={},s={},l=[],c={},p={},d=void 0,f=void 0,h=void 0,m=void 0,y=!1;n.style.metadata&&(n.style.metadata.hasOwnProperty("mapspice:use-seamless-variable-transitions")&&(y=n.style.metadata["mapspice:use-seamless-variable-transitions"]===!0),n.style.metadata.hasOwnProperty("mapspice:preferred-summary-level-id")&&(h=n.style.metadata["mapspice:preferred-summary-level-id"]),n.style.metadata.hasOwnProperty("mapspice:summary-levels")&&Object.keys(n.style.metadata["mapspice:summary-levels"]).forEach(function(e){s[e]=JSON.parse(JSON.stringify(n.style.metadata["mapspice:summary-levels"][e]))}),n.style.metadata.hasOwnProperty("mapspice:rulesets")&&Object.keys(n.style.metadata["mapspice:rulesets"]).forEach(function(e){p[e]=JSON.parse(JSON.stringify(n.style.metadata["mapspice:rulesets"][e]))}),n.style.metadata.hasOwnProperty("mapspice:maximum-bounding-box")&&(f=new u["default"].LngLatBounds(n.style.metadata["mapspice:maximum-bounding-box"]["top-right"],n.style.metadata["mapspice:maximum-bounding-box"]["bottom-left"])),n.style.metadata.hasOwnProperty("mapspice:initial-view-bounding-box")&&(d=new u["default"].LngLatBounds(n.style.metadata["mapspice:initial-view-bounding-box"]["top-right"],n.style.metadata["mapspice:initial-view-bounding-box"]["bottom-left"])),n.style.metadata.hasOwnProperty("mapspice:always-visible-layers-ids")&&!function(){var e=n.style.layers.map(function(e){return e.id});n.style.metadata["mapspice:always-visible-layers-ids"].forEach(function(t){if(!e.some(function(e){return e===t}))throw new Error("Specified non existent layer id: "+t+" in always visible layers ids");l.push(t)})}(),n.style.metadata.hasOwnProperty("mapspice:color-palettes")&&Object.keys(n.style.metadata["mapspice:color-palettes"]).forEach(function(e){var t=(0,w._extends)({id:e},n.style.metadata["mapspice:color-palettes"][e]);if(!t.name)throw new Error('Color palette id:"'+e+'" has no "name" specified!');if(!t.type)throw new Error('Color palette id:"'+e+'" has no "type" specified!');switch(t.colorsAndPatterns=t["colors-and-patterns"],"array"===t.type&&((0,w.warn)('[DEPRECATION NOTICE] Color palette id:"'+e+'": "color" type has been deprecated and will be removed in future releases of MapSpice-Map. Please use "color-array" instead.'),t.type="color-array"),t.type){case"gradient":if(!t.colors||!Array.isArray(t.colors))throw new Error('Color palette id:"'+e+'": "colors" array property is required for palette type:"gradient"!');if(t.colors.length<2)throw new Error('Color palette id:"'+e+'": at least two colors have to be defined for gradient palette!');break;case"color-array":if(!t.colors||!Array.isArray(t.colors))throw new Error('Color palette id:"'+e+'": "colors" array property is required for palette type:"color-array"!');if(0===t.colors.length)throw new Error('Color palette id:"'+e+'": no colors defined!');break;case"pattern-array":if(!t.patterns||!Array.isArray(t.patterns))throw new Error('Color palette id:"'+e+'": "patterns" array property is required for palette type:"pattern-array"');if(0===t.patterns.length)throw new Error('Color palette id:"'+e+'": no patterns specified!');break;case"color-and-pattern-array":if(!t.colorsAndPatterns||!Array.isArray(t.colorsAndPatterns))throw new Error('Color palette id:"'+e+'": "colors-and-patterns" array property is required for palette type:"color-and-pattern-array"');if(0===t.colorsAndPatterns.length)throw new Error('Color palette id:"'+e+'": no colors and patterns specified!');t.colorsAndPatterns.forEach(function(t,n){if(!Array.isArray(t))throw new Error('Color palette id:"'+e+'": each palette element for palette type "color-and-pattern-array" has to be an array! (at index '+n+")");if(2!==t.length)throw new Error('Color palette id:"'+e+'": each palette element for palette type "color-and-pattern-array" has to be an array of two elements, color and pattern (at index '+n+")")});break;default:throw new Error('Color palette id:"'+e+'": type "'+t.type+'" is not supported. Expected one of ['+x["default"].ALL_TYPES.join(", ")+"]")}c[e]=new x["default"](t)}),n.style.metadata.hasOwnProperty("mapspice:variables")&&!function(){var e=n.style.layers.map(function(e){return e.id});Object.keys(n.style.metadata["mapspice:variables"]).forEach(function(t){if(a[t]=JSON.parse(JSON.stringify(n.style.metadata["mapspice:variables"][t])),!a[t].hasOwnProperty("layers-ids"))throw new Error("Layers ids missing in variable definition for variable id: "+t);var r=a[t]["layers-ids"];if(!Array.isArray(r))throw new Error("Layers ids property not an array of layers ids for variable id: "+t);r.forEach(function(n){if(!e.some(function(e){return e===n}))throw new Error("Specified non existent layer id: "+n+" in variable id: "+t)})})}(),n.style.metadata.hasOwnProperty("mapspice:preferred-variable-id")&&(m=n.style.metadata["mapspice:preferred-variable-id"])),n.style.layers.length>0&&!function(){var e={};l.forEach(function(t){return e[t]=!0}),Object.keys(a).forEach(function(t){a[t]["layers-ids"].forEach(function(t){return e[t]=!0})});var t=n.style.layers.map(function(e){return e.id});t.forEach(function(t){if(!e.hasOwnProperty(t))throw new Error("Unused layer id: "+t+" (will never be visible because not specified in always visible layers ids or variable's layers ids)")})}();var v=[];if(m){if(!a.hasOwnProperty(m))throw new Error("Non existing variable id: "+m+" specified as preferred variable id");v=a[m]["layers-ids"]}else if(0!==Object.keys(a).length)throw new Error("Variables defined but no preferred variable id specified");var g=v.concat(l);return n.style.layers=e.style.layers.reduce(function(e,l){var u=g.indexOf(l.id)!==-1,d=["fill","line","symbol","circle","bubble"];if(l.metadata)if(l.metadata.hasOwnProperty("mapspice:highlight")&&l.metadata["mapspice:highlight"].forEach(function(e,n){if(d.some(function(t){return t===e.type})){r[l.id]||(r[l.id]=[]);var o={};switch(l.type){case"fill":switch(e.type){case"fill":break;case"line":o["line-query-as-fill"]=!0;break;case"symbol":case"circle":case"bubble":throw new Error(l.id+" - cannot set point highlight for fill layer type")}break;case"line":switch(e.type){case"line":break;case"fill":case"symbol":case"circle":case"bubble":throw new Error(l.id+" - cannot set "+e.type+" highlight for line layer type")}break;case"symbol":case"circle":switch(e.type){case"fill":case"line":case"symbol":case"bubble":throw new Error(l.id+" - cannot set "+e.type+" highlight for point layer type");case"circle":}break;case"bubble":switch(e.type){case"fill":case"line":case"symbol":case"circle":throw new Error(l.id+" - cannot set "+e.type+" highlight for point layer type");case"bubble":o=(0,w._extends)(o,l.paint)}}var i={};e.type===l.type&&l.layout&&(i=(0,w._extends)(i,JSON.parse(JSON.stringify(l.layout))));var a={id:l.id+"-mapspice-highlight-"+n,metadata:{"mapspice:origin-layer-id":l.id,"mapspice:highlight-styles":e.paint},layout:i,paint:(0,w._extends)(o,t._getDefaultInvisibleStyleByType(e.type)),"source-layer":l["source-layer"],source:l.source,type:e.type};if(l.metadata["mapspice:auto-source"]){if(!Array.isArray(l.metadata["mapspice:auto-source"]))throw new Error("auto-source specification not provided as an array. layer id: "+l.id);var u=l.metadata["mapspice:auto-source"].map(function(e){return e["summary-level"]});u.forEach(function(e){if(!Object.keys(s).some(function(t){return t===e}))throw new Error("non-existing summary level id: "+e+" referenced in auto-source for layer id: "+l.id)}),a.metadata["mapspice:auto-source"]=l.metadata["mapspice:auto-source"];var c=void 0;c=h?l.metadata["mapspice:auto-source"].filter(function(e){return e["summary-level"]===h}):l.metadata["mapspice:auto-source"],a["auto-source"]=t._autoSourceFromMapspiceAutoSourceDefinition(c,s,a),h&&(a["auto-source"][0].minzoom=0,a["auto-source"][0].maxzoom=22)}r[l.id].push(a)}}),l.metadata.hasOwnProperty("mapspice:selection")&&l.metadata["mapspice:selection"].forEach(function(e,n){if(d.some(function(t){return t===e.type})){o[l.id]||(o[l.id]=[]);var r={};switch(l.type){case"fill":switch(e.type){case"fill":break;case"line":r["line-query-as-fill"]=!0;break;case"symbol":case"circle":case"bubble":throw new Error(l.id+" - cannot set point selection for fill layer type")}break;case"line":switch(e.type){case"line":break;case"fill":case"symbol":case"circle":case"bubble":throw new Error(l.id+" - cannot set "+e.type+" selection for line layer type")}break;case"symbol":case"circle":switch(e.type){case"fill":case"line":case"symbol":case"bubble":throw new Error(l.id+" - cannot set "+e.type+" selection for point layer type");case"circle":}break;case"bubble":switch(e.type){case"fill":case"line":case"symbol":case"circle":throw new Error(l.id+" - cannot set "+e.type+" selection for point layer type");case"bubble":r=(0,w._extends)(r,l.paint)}}var i={};e.type===l.type&&l.layout&&(i=(0,w._extends)(i,JSON.parse(JSON.stringify(l.layout))));var a={id:l.id+"-mapspice-selection-"+n,metadata:{"mapspice:origin-layer-id":l.id,"mapspice:selection-styles":e.paint},layout:i,paint:(0,w._extends)(r,t._getDefaultInvisibleStyleByType(e.type)),source:l.source,"source-layer":l["source-layer"],type:e.type};if(l.metadata["mapspice:auto-source"]){if(!Array.isArray(l.metadata["mapspice:auto-source"]))throw new Error("auto-source specification not provided as an array. layer id: "+l.id);var u=l.metadata["mapspice:auto-source"].map(function(e){return e["summary-level"]});u.forEach(function(e){if(!Object.keys(s).some(function(t){return t===e}))throw new Error("non-existing summary level id: "+e+" referenced in auto-source for layer id: "+l.id)}),a.metadata["mapspice:auto-source"]=l.metadata["mapspice:auto-source"];var c=void 0;h?(c=l.metadata["mapspice:auto-source"].filter(function(e){return e["summary-level"]===h}),c[0].minzoom=0,c[0].maxzoom=22):c=l.metadata["mapspice:auto-source"],a["auto-source"]=t._autoSourceFromMapspiceAutoSourceDefinition(c,s,a),h&&(a["auto-source"][0].minzoom=0,a["auto-source"][0].maxzoom=22)}o[l.id].push(a)}}),l.metadata.hasOwnProperty("mapspice:ruleset-id")&&!function(){var e=l.metadata["mapspice:ruleset-id"];if(!p.hasOwnProperty(e))throw new Error("Reference of non existing ruleset id "+e+" in layer id: "+l.id);if(!l.metadata.hasOwnProperty("mapspice:ruleset-variables"))throw new Error("Ruleset defined but no ruleset variables specified in layer id: "+l.id);if(l.metadata.hasOwnProperty("mapspice:rules"))throw new Error("Ruleset and rules both defined on the same layer id: "+l.id);var r=JSON.parse(JSON.stringify(p[e].rules)),o=l.metadata["mapspice:ruleset-variables"];Object.keys(o).forEach(function(r){var i=o[r];if(!p[e].variables.some(function(e){return e===r}))throw new Error("Unknown ruleset variable: "+r+" for ruleset: "+e+" in layer: "+l.id);if(l.metadata["mapspice:auto-source"]){var a=l.metadata["mapspice:auto-source"];if(!Array.isArray(a))throw new Error("auto-source specification not provided as an array. layer id: "+l.id);var u=a.map(function(e){return e["summary-level"]});u.forEach(function(e){if(!Object.keys(s).some(function(t){return t===e}))throw new Error("non-existing summary level id: "+e+" referenced in auto-source for layer id: "+l.id)}),a.forEach(function(e){if(!t._columnExistsInSourceLayerDatasets(n.style.sources,e.source,e["source-layer"],i))throw new Error("bound dataset column name: "+i+" does not exist in source: "+e.source+", source layer id: "+e["source-layer"]+" (in layer: "+l.id+")")})}else if(!t._columnExistsInSourceLayerDatasets(n.style.sources,l.source,l["source-layer"],i))throw new Error("bound dataset column name: "+i+" does not exist in source: "+l.source+", source layer id: "+l["source-layer"]+" (in layer: "+l.id+")")}),t._interpolateRulesetRulesVariables(r,o),l.metadata["mapspice:rules"]=r}(),l.metadata.hasOwnProperty("mapspice:rules"))!function(){var n=l.metadata["mapspice:color-palette-id"],r=l.metadata["mapspice:color-palette-is-flipped"]===!0,o=Object.keys(c).map(function(e){return c[e]}).some(function(e){return e.type.indexOf("pattern")!==-1}),p=void 0,d=void 0;if(n){if(!c.hasOwnProperty(n))throw new Error("Reference of non existing color palette id: "+n+" in layer id: "+l.id);p=c[n].interpolateColors(l.metadata["mapspice:rules"].length,r),d=c[n].getPatterns(l.metadata["mapspice:rules"].length,r)}l.metadata["mapspice:rules"].forEach(function(r,c){i[l.id]||(i[l.id]=[]);var f=Object.keys(a).find(function(e){return a[e]["layers-ids"].indexOf(l.id)!==-1}),m=JSON.parse(JSON.stringify(r)),v=JSON.parse(JSON.stringify(l)),g=m.metadata;g["mapspice:origin-layer-id"]=l.id,f&&(g["mapspice:variable-id"]=f),v.id=l.id+"-mapspice-data-"+c,m.filter&&(v.filter=m.filter);var _=void 0;_=l.paint?JSON.parse(JSON.stringify(l.paint)):{},m.paint&&Object.keys(m.paint).forEach(function(e){_[e]=m.paint[e]}),n&&(t._getColorPropertiesByLayerType(l.type).forEach(function(e){return _[e]=p[c]}),g["mapspice-internal:color-palette-id"]=n),g["mapspice-internal:is-color-layer"]=!0,g["mapspice-internal:is-pattern-layer"]=!1,g["mapspice-internal:paint"]=JSON.parse(JSON.stringify(_)),g["mapspice-internal:rule-index"]=c,v.metadata=g;var b=void 0;if(b=l.layout?JSON.parse(JSON.stringify(l.layout)):{},m.layout&&Object.keys(m.layout).forEach(function(e){b[e]=m.layout[e]}),g["mapspice-internal:layout"]=JSON.parse(JSON.stringify(b)),u||(y?t._getVisibilityStylePropertiesByType(l.type).forEach(function(e){_[e]=0}):b.visibility="none"),l.metadata["mapspice:auto-source"]){if(!Array.isArray(l.metadata["mapspice:auto-source"]))throw new Error("auto-source specification not provided as an array. layer id: "+l.id);var x=l.metadata["mapspice:auto-source"].map(function(e){return e["summary-level"]});x.forEach(function(e){if(!Object.keys(s).some(function(t){return t===e}))throw new Error("non-existing summary level id: "+e+" referenced in auto-source for layer id: "+l.id)}),v.metadata["mapspice:auto-source"]=l.metadata["mapspice:auto-source"];var w=void 0;h?(w=l.metadata["mapspice:auto-source"].filter(function(e){return e["summary-level"]===h}),w[0].minzoom=0,w[0].maxzoom=22):w=l.metadata["mapspice:auto-source"],v["auto-source"]=t._autoSourceFromMapspiceAutoSourceDefinition(w,s,v),h&&(v["auto-source"][0].minzoom=0,v["auto-source"][0].maxzoom=22)}v.paint=_,v.layout=b,i[l.id].push(v),e.push(v),o&&!function(){var r=JSON.parse(JSON.stringify(v));r.id=l.id+"-mapspice-data-pattern-"+c,n&&(t._getPatternPropertiesByLayerType(l.type).forEach(function(e){void 0!==d[c]&&(r.paint[e]=d[c])}),t._getColorPropertiesByLayerType(l.type).forEach(function(e){r.paint[e]="rgba(255, 0, 0, 0)"})),r.metadata["mapspice-internal:is-color-layer"]=!1,r.metadata["mapspice-internal:is-pattern-layer"]=!0,r.metadata["mapspice-internal:paint"]=JSON.parse(JSON.stringify(r.paint)),t._getVisibilityStylePropertiesByType(l.type).forEach(function(e){r.metadata["mapspice-internal:paint"][e]=v.metadata["mapspice-internal:paint"][e]}),i[l.id].push(r),e.push(r)}()})}();else{if(l.paint||(l.paint={}),l.layout||(l.layout={}),l.metadata["mapspice-internal:paint"]=JSON.parse(JSON.stringify(l.paint)),l.metadata["mapspice-internal:layout"]=JSON.parse(JSON.stringify(l.layout)),u||(y?t._getVisibilityStylePropertiesByType(l.type).forEach(function(e){l.paint[e]=0}):l.layout.visibility="none"),l.metadata["mapspice:auto-source"]){if(!Array.isArray(l.metadata["mapspice:auto-source"]))throw new Error("auto-source specification not provided as an array. layer id: "+l.id);var f=l.metadata["mapspice:auto-source"].map(function(e){return e["summary-level"]});f.forEach(function(e){if(!Object.keys(s).some(function(t){return t===e}))throw new Error("non-existing summary level id: "+e+" referenced in auto-source for layer id: "+l.id)});var m=void 0;h?(m=l.metadata["mapspice:auto-source"].filter(function(e){return e["summary-level"]===h}),m[0].minzoom=0,m[0].maxzoom=22):m=l.metadata["mapspice:auto-source"],l["auto-source"]=t._autoSourceFromMapspiceAutoSourceDefinition(m,s,l),h&&(l["auto-source"][0].minzoom=0,l["auto-source"][0].maxzoom=22)}e.push(l)}else l.paint||(l.paint={}),l.layout||(l.layout={}),l.metadata={"mapspice-internal:paint":JSON.parse(JSON.stringify(l.paint)),"mapspice-internal:layout":JSON.parse(JSON.stringify(l.layout))},u||(y?t._getVisibilityStylePropertiesByType(l.type).forEach(function(e){l.paint[e]=0}):l.layout.visibility="none"),e.push(l);return e},[]),Object.keys(r).map(function(e){return r[e]}).forEach(function(e){n.style.layers=n.style.layers.concat(e)}),Object.keys(o).map(function(e){return o[e]}).forEach(function(e){n.style.layers=n.style.layers.concat(e)}),{dragonflyConfig:n,highlightLayers:r,selectionLayers:o,variables:a,summaryLevels:s,rulesets:p,alwaysVisibleLayersIds:l,dataLayers:i,colorPalettes:c,initialViewBoundingBox:d,maximumBoundingBox:f,useSeamlessVariableTransitions:y,preferredSummaryLevelId:h,preferredVariableId:m}}},{key:"synchronizeMaps",value:function(e){e.forEach(function(t){e.forEach(function(e){t!==e&&(t.linkMapMovementsFrom(e),t.mimickMapMouseEvents(e))})})}},{key:"desynchronizeMapMovements",value:function(e){e.forEach(function(t){e.forEach(function(e){t!==e&&(t.unlinkMapMovementsFrom(e),t.stopMimickingMapMouseEvents(e))})})}},{key:"Popup",get:function(){return u["default"].Popup}},{key:"LngLat",get:function(){return u["default"].LngLat}},{key:"patternProperties",get:function(){return["fill-pattern","fill-extrusion-pattern","line-pattern","background-pattern","icon-image"]}},{key:"IconFontMapping",get:function(){return m["default"]}}]),t}(u["default"].Map);n["default"]=E,t.exports=n["default"]},{"./colorPalette":244,"./evaluateExpression":245,"./featureFilter":246,"./helpers":247,"./iconFontMapping":248,"chroma-js":5,"dragonfly-v2":37,"lodash.debounce":225}],250:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./core/map.js"),i=r(o);n["default"]=i["default"],t.exports=n["default"]},{"./core/map.js":249}]},{},[250])(250)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(i){return!1}}var i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=o()?Object.assign:function(e,t){for(var n,o=r(e),l,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)a.call(n,c)&&(o[c]=n[c]);if(i){l=i(n);for(var p=0;p<l.length;p++)s.call(n,l[p])&&(o[l[p]]=n[l[p]])}}return o}},{}],28:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===r||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){m&&y&&(m=!1,y.length?h=y.concat(h):v=-1,h.length&&l())}function l(){if(!m){var e=i(s);m=!0;for(var t=h.length;t;){for(y=h,h=[];++v<t;)y&&y[v].run();v=-1,t=h.length}y=null,m=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var p=t.exports={},d,f;!function(){try{d="function"==typeof setTimeout?setTimeout:r}catch(e){d=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h=[],m=!1,y,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||i(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],29:[function(e,t,n){"use strict";t.exports=e("./lib/ReactDOM")},{"./lib/ReactDOM":59}],30:[function(e,t,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};t.exports=r},{}],31:[function(e,t,n){"use strict";var r=e("./ReactDOMComponentTree"),o=e("fbjs/lib/focusNode"),i={focusDOMComponent:function(){o(r.getNodeFromInstance(this))}};t.exports=i},{"./ReactDOMComponentTree":62,"fbjs/lib/focusNode":11}],32:[function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function o(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function i(e){switch(e){case"topCompositionStart":return S.compositionStart;case"topCompositionEnd":return S.compositionEnd;case"topCompositionUpdate":return S.compositionUpdate}}function a(e,t){return"topKeyDown"===e&&t.keyCode===_}function s(e,t){switch(e){case"topKeyUp":return g.indexOf(t.keyCode)!==-1;case"topKeyDown":return t.keyCode!==_;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,r){var o,u;if(b?o=i(e):O?s(e,n)&&(o=S.compositionEnd):a(e,n)&&(o=S.compositionStart),!o)return null;E&&(O||o!==S.compositionStart?o===S.compositionEnd&&O&&(u=O.getData()):O=m.getPooled(r));var c=y.getPooled(o,t,n,r);if(u)c.data=u;else{var p=l(n);null!==p&&(c.data=p)}return f.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case"topCompositionEnd":return l(t);case"topKeyPress":var n=t.which;return n!==k?null:(P=!0,C);case"topTextInput":var r=t.data;return r===C&&P?null:r;default:return null}}function p(e,t){if(O){if("topCompositionEnd"===e||!b&&s(e,t)){var n=O.getData();return m.release(O),O=null,n}return null}switch(e){case"topPaste":return null;case"topKeyPress":return t.which&&!o(t)?String.fromCharCode(t.which):null;case"topCompositionEnd":return E?null:t.data;default:return null}}function d(e,t,n,r){var o;if(o=w?c(e,n):p(e,n),!o)return null;var i=v.getPooled(S.beforeInput,t,n,r);return i.data=o,f.accumulateTwoPhaseDispatches(i),i}var f=e("./EventPropagators"),h=e("fbjs/lib/ExecutionEnvironment"),m=e("./FallbackCompositionState"),y=e("./SyntheticCompositionEvent"),v=e("./SyntheticInputEvent"),g=[9,13,27,32],_=229,b=h.canUseDOM&&"CompositionEvent"in window,x=null;h.canUseDOM&&"documentMode"in document&&(x=document.documentMode);var w=h.canUseDOM&&"TextEvent"in window&&!x&&!r(),E=h.canUseDOM&&(!b||x&&x>8&&x<=11),k=32,C=String.fromCharCode(k),S={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},P=!1,O=null,M={eventTypes:S,extractEvents:function(e,t,n,r){return[u(e,t,n,r),d(e,t,n,r)]}};t.exports=M},{"./EventPropagators":48,"./FallbackCompositionState":49,"./SyntheticCompositionEvent":113,"./SyntheticInputEvent":117,"fbjs/lib/ExecutionEnvironment":3}],33:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(o).forEach(function(e){i.forEach(function(t){o[r(t,e)]=o[e]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,
backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:o,shorthandPropertyExpansions:a};t.exports=s},{}],34:[function(e,t,n){(function(n){"use strict";var r=e("./CSSProperty"),o=e("fbjs/lib/ExecutionEnvironment"),i=e("./ReactInstrumentation"),a=e("fbjs/lib/camelizeStyleName"),s=e("./dangerousStyleValue"),l=e("fbjs/lib/hyphenateStyleName"),u=e("fbjs/lib/memoizeStringOnly"),c=e("fbjs/lib/warning"),p=u(function(e){return l(e)}),d=!1,f="cssFloat";if(o.canUseDOM){var h=document.createElement("div").style;try{h.font=""}catch(m){d=!0}void 0===document.documentElement.style.cssFloat&&(f="styleFloat")}if("production"!==n.env.NODE_ENV)var y=/^(?:webkit|moz|o)[A-Z]/,v=/;\s*$/,g={},_={},b=!1,x=function(e,t){g.hasOwnProperty(e)&&g[e]||(g[e]=!0,"production"!==n.env.NODE_ENV?c(!1,"Unsupported style property %s. Did you mean %s?%s",e,a(e),C(t)):void 0)},w=function(e,t){g.hasOwnProperty(e)&&g[e]||(g[e]=!0,"production"!==n.env.NODE_ENV?c(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",e,e.charAt(0).toUpperCase()+e.slice(1),C(t)):void 0)},E=function(e,t,r){_.hasOwnProperty(t)&&_[t]||(_[t]=!0,"production"!==n.env.NODE_ENV?c(!1,'Style property values shouldn\'t contain a semicolon.%s Try "%s: %s" instead.',C(r),e,t.replace(v,"")):void 0)},k=function(e,t,r){b||(b=!0,"production"!==n.env.NODE_ENV?c(!1,"`NaN` is an invalid value for the `%s` css style property.%s",e,C(r)):void 0)},C=function(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""},S=function(e,t,n){var r;n&&(r=n._currentElement._owner),e.indexOf("-")>-1?x(e,r):y.test(e)?w(e,r):v.test(t)&&E(e,t,r),"number"==typeof t&&isNaN(t)&&k(e,t,r)};var P={createMarkupForStyles:function(e,t){var r="";for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];"production"!==n.env.NODE_ENV&&S(o,i,t),null!=i&&(r+=p(o)+":",r+=s(o,i,t)+";")}return r||null},setValueForStyles:function(e,t,o){"production"!==n.env.NODE_ENV&&i.debugTool.onHostOperation({instanceID:o._debugID,type:"update styles",payload:t});var a=e.style;for(var l in t)if(t.hasOwnProperty(l)){"production"!==n.env.NODE_ENV&&S(l,t[l],o);var u=s(l,t[l],o);if("float"!==l&&"cssFloat"!==l||(l=f),u)a[l]=u;else{var c=d&&r.shorthandPropertyExpansions[l];if(c)for(var p in c)a[p]="";else a[l]=""}}}};t.exports=P}).call(this,e("_process"))},{"./CSSProperty":33,"./ReactInstrumentation":91,"./dangerousStyleValue":130,_process:28,"fbjs/lib/ExecutionEnvironment":3,"fbjs/lib/camelizeStyleName":5,"fbjs/lib/hyphenateStyleName":16,"fbjs/lib/memoizeStringOnly":20,"fbjs/lib/warning":24}],35:[function(e,t,n){(function(n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("./reactProdInvariant"),i=e("./PooledClass"),a=e("fbjs/lib/invariant"),s=function(){function e(t){r(this,e),this._callbacks=null,this._contexts=null,this._arg=t}return e.prototype.enqueue=function t(e,n){this._callbacks=this._callbacks||[],this._callbacks.push(e),this._contexts=this._contexts||[],this._contexts.push(n)},e.prototype.notifyAll=function i(){var e=this._callbacks,t=this._contexts,r=this._arg;if(e&&t){e.length!==t.length?"production"!==n.env.NODE_ENV?a(!1,"Mismatched list of contexts in callback queue"):o("24"):void 0,this._callbacks=null,this._contexts=null;for(var i=0;i<e.length;i++)e[i].call(t[i],r);e.length=0,t.length=0}},e.prototype.checkpoint=function s(){return this._callbacks?this._callbacks.length:0},e.prototype.rollback=function l(e){this._callbacks&&this._contexts&&(this._callbacks.length=e,this._contexts.length=e)},e.prototype.reset=function u(){this._callbacks=null,this._contexts=null},e.prototype.destructor=function c(){this.reset()},e}();t.exports=i.addPoolingTo(s)}).call(this,e("_process"))},{"./PooledClass":53,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],36:[function(e,t,n){"use strict";function r(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function o(e){var t=E.getPooled(P.change,M,e,k(e));_.accumulateTwoPhaseDispatches(t),w.batchedUpdates(i,t)}function i(e){g.enqueueEvents(e),g.processEventQueue(!1)}function a(e,t){O=e,M=t,O.attachEvent("onchange",o)}function s(){O&&(O.detachEvent("onchange",o),O=null,M=null)}function l(e,t){if("topChange"===e)return t}function u(e,t,n){"topFocus"===e?(s(),a(t,n)):"topBlur"===e&&s()}function c(e,t){O=e,M=t,D=e.value,T=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(O,"value",L),O.attachEvent?O.attachEvent("onpropertychange",d):O.addEventListener("propertychange",d,!1)}function p(){O&&(delete O.value,O.detachEvent?O.detachEvent("onpropertychange",d):O.removeEventListener("propertychange",d,!1),O=null,M=null,D=null,T=null)}function d(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==D&&(D=t,o(e))}}function f(e,t){if("topInput"===e)return t}function h(e,t,n){"topFocus"===e?(p(),c(t,n)):"topBlur"===e&&p()}function m(e,t){if(("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)&&O&&O.value!==D)return D=O.value,M}function y(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function v(e,t){if("topClick"===e)return t}var g=e("./EventPluginHub"),_=e("./EventPropagators"),b=e("fbjs/lib/ExecutionEnvironment"),x=e("./ReactDOMComponentTree"),w=e("./ReactUpdates"),E=e("./SyntheticEvent"),k=e("./getEventTarget"),C=e("./isEventSupported"),S=e("./isTextInputElement"),P={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},O=null,M=null,D=null,T=null,N=!1;b.canUseDOM&&(N=C("change")&&(!document.documentMode||document.documentMode>8));var I=!1;b.canUseDOM&&(I=C("input")&&(!document.documentMode||document.documentMode>11));var L={get:function(){return T.get.call(this)},set:function(e){D=""+e,T.set.call(this,e)}},R={eventTypes:P,extractEvents:function(e,t,n,o){var i=t?x.getNodeFromInstance(t):window,a,s;if(r(i)?N?a=l:s=u:S(i)?I?a=f:(a=m,s=h):y(i)&&(a=v),a){var c=a(e,t);if(c){var p=E.getPooled(P.change,c,n,o);return p.type="change",_.accumulateTwoPhaseDispatches(p),p}}s&&s(e,i,t)}};t.exports=R},{"./EventPluginHub":45,"./EventPropagators":48,"./ReactDOMComponentTree":62,"./ReactUpdates":106,"./SyntheticEvent":115,"./getEventTarget":138,"./isEventSupported":146,"./isTextInputElement":147,"fbjs/lib/ExecutionEnvironment":3}],37:[function(e,t,n){(function(n){"use strict";function r(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function o(e,t,n){c.insertTreeBefore(e,t,n)}function i(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):v(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,r){for(var o=t;;){var i=o.nextSibling;if(v(e,o,r),o===n)break;o=i}}function l(e,t,n){for(;;){var r=t.nextSibling;if(r===n)break;e.removeChild(r)}}function u(e,t,r){var o=e.parentNode,i=e.nextSibling;i===t?r&&v(o,document.createTextNode(r),i):r?(y(i,r),l(o,i,t)):l(o,e,t),"production"!==n.env.NODE_ENV&&f.debugTool.onHostOperation({instanceID:d.getInstanceFromNode(e)._debugID,type:"replace text",payload:r})}var c=e("./DOMLazyTree"),p=e("./Danger"),d=e("./ReactDOMComponentTree"),f=e("./ReactInstrumentation"),h=e("./createMicrosoftUnsafeLocalFunction"),m=e("./setInnerHTML"),y=e("./setTextContent"),v=h(function(e,t,n){e.insertBefore(t,n)}),g=p.dangerouslyReplaceNodeWithMarkup;"production"!==n.env.NODE_ENV&&(g=function(e,t,n){if(p.dangerouslyReplaceNodeWithMarkup(e,t),0!==n._debugID)f.debugTool.onHostOperation({instanceID:n._debugID,type:"replace with",payload:t.toString()});else{var r=d.getInstanceFromNode(t.node);0!==r._debugID&&f.debugTool.onHostOperation({instanceID:r._debugID,type:"mount",payload:t.toString()})}});var _={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:u,processUpdates:function(e,t){if("production"!==n.env.NODE_ENV)var s=d.getInstanceFromNode(e)._debugID;for(var l=0;l<t.length;l++){var u=t[l];switch(u.type){case"INSERT_MARKUP":o(e,u.content,r(e,u.afterNode)),"production"!==n.env.NODE_ENV&&f.debugTool.onHostOperation({instanceID:s,type:"insert child",payload:{toIndex:u.toIndex,content:u.content.toString()}});break;case"MOVE_EXISTING":i(e,u.fromNode,r(e,u.afterNode)),"production"!==n.env.NODE_ENV&&f.debugTool.onHostOperation({instanceID:s,type:"move child",payload:{fromIndex:u.fromIndex,toIndex:u.toIndex}});break;case"SET_MARKUP":m(e,u.content),"production"!==n.env.NODE_ENV&&f.debugTool.onHostOperation({instanceID:s,type:"replace children",payload:u.content.toString()});break;case"TEXT_CONTENT":y(e,u.content),"production"!==n.env.NODE_ENV&&f.debugTool.onHostOperation({instanceID:s,type:"replace text",payload:u.content.toString()});break;case"REMOVE_NODE":a(e,u.fromNode),"production"!==n.env.NODE_ENV&&f.debugTool.onHostOperation({instanceID:s,type:"remove child",payload:{fromIndex:u.fromIndex}})}}}};t.exports=_}).call(this,e("_process"))},{"./DOMLazyTree":38,"./Danger":42,"./ReactDOMComponentTree":62,"./ReactInstrumentation":91,"./createMicrosoftUnsafeLocalFunction":129,"./setInnerHTML":151,"./setTextContent":152,_process:28}],38:[function(e,t,n){"use strict";function r(e){if(y){var t=e.node,n=e.children;if(n.length)for(var r=0;r<n.length;r++)v(t,n[r],null);else null!=e.html?p(t,e.html):null!=e.text&&f(t,e.text)}}function o(e,t){e.parentNode.replaceChild(t.node,e),r(t)}function i(e,t){y?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){y?e.html=t:p(e.node,t)}function s(e,t){y?e.text=t:f(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=e("./DOMNamespaces"),p=e("./setInnerHTML"),d=e("./createMicrosoftUnsafeLocalFunction"),f=e("./setTextContent"),h=1,m=11,y="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=d(function(e,t,n){t.node.nodeType===m||t.node.nodeType===h&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(r(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),r(t))});u.insertTreeBefore=v,u.replaceChildWithTree=o,u.queueChild=i,u.queueHTML=a,u.queueText=s,t.exports=u},{"./DOMNamespaces":39,"./createMicrosoftUnsafeLocalFunction":129,"./setInnerHTML":151,"./setTextContent":152}],39:[function(e,t,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=r},{}],40:[function(e,t,n){(function(n){"use strict";function r(e,t){return(e&t)===t}var o=e("./reactProdInvariant"),i=e("fbjs/lib/invariant"),a={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=a,s=e.Properties||{},u=e.DOMAttributeNamespaces||{},c=e.DOMAttributeNames||{},p=e.DOMPropertyNames||{},d=e.DOMMutationMethods||{};e.isCustomAttribute&&l._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var f in s){l.properties.hasOwnProperty(f)?"production"!==n.env.NODE_ENV?i(!1,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",f):o("48",f):void 0;var h=f.toLowerCase(),m=s[f],y={attributeName:h,attributeNamespace:null,propertyName:f,mutationMethod:null,mustUseProperty:r(m,t.MUST_USE_PROPERTY),hasBooleanValue:r(m,t.HAS_BOOLEAN_VALUE),hasNumericValue:r(m,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(m,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(m,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(y.hasBooleanValue+y.hasNumericValue+y.hasOverloadedBooleanValue<=1?void 0:"production"!==n.env.NODE_ENV?i(!1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",f):o("50",f),"production"!==n.env.NODE_ENV&&(l.getPossibleStandardName[h]=f),c.hasOwnProperty(f)){var v=c[f];y.attributeName=v,"production"!==n.env.NODE_ENV&&(l.getPossibleStandardName[v]=f)}u.hasOwnProperty(f)&&(y.attributeNamespace=u[f]),p.hasOwnProperty(f)&&(y.propertyName=p[f]),d.hasOwnProperty(f)&&(y.mutationMethod=d[f]),l.properties[f]=y}}},s=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",l={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:s,ATTRIBUTE_NAME_CHAR:s+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:"production"!==n.env.NODE_ENV?{autofocus:"autoFocus"}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<l._isCustomAttributeFunctions.length;t++){var n=l._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:a};t.exports=l}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],41:[function(e,t,n){(function(n){"use strict";function r(e){return!!d.hasOwnProperty(e)||!p.hasOwnProperty(e)&&(c.test(e)?(d[e]=!0,!0):(p[e]=!0,"production"!==n.env.NODE_ENV?u(!1,"Invalid attribute name: `%s`",e):void 0,!1))}function o(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var i=e("./DOMProperty"),a=e("./ReactDOMComponentTree"),s=e("./ReactInstrumentation"),l=e("./quoteAttributeValueForBrowser"),u=e("fbjs/lib/warning"),c=new RegExp("^["+i.ATTRIBUTE_NAME_START_CHAR+"]["+i.ATTRIBUTE_NAME_CHAR+"]*$"),p={},d={},f={createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+l(e)},setAttributeForID:function(e,t){e.setAttribute(i.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return i.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(i.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=i.properties.hasOwnProperty(e)?i.properties[e]:null;if(n){if(o(n,t))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?r+'=""':r+"="+l(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+l(t):null},createMarkupForCustomAttribute:function(e,t){return r(e)&&null!=t?e+"="+l(t):""},setValueForProperty:function(e,t,r){var l=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(l){var u=l.mutationMethod;if(u)u(e,r);else{if(o(l,r))return void this.deleteValueForProperty(e,t);if(l.mustUseProperty)e[l.propertyName]=r;else{var c=l.attributeName,p=l.attributeNamespace;p?e.setAttributeNS(p,c,""+r):l.hasBooleanValue||l.hasOverloadedBooleanValue&&r===!0?e.setAttribute(c,""):e.setAttribute(c,""+r)}}}else if(i.isCustomAttribute(t))return void f.setValueForAttribute(e,t,r);if("production"!==n.env.NODE_ENV){var d={};d[t]=r,s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(e)._debugID,type:"update attribute",payload:d})}},setValueForAttribute:function(e,t,o){if(r(t)&&(null==o?e.removeAttribute(t):e.setAttribute(t,""+o),"production"!==n.env.NODE_ENV)){var i={};i[t]=o,s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(e)._debugID,type:"update attribute",payload:i})}},deleteValueForAttribute:function(e,t){e.removeAttribute(t),"production"!==n.env.NODE_ENV&&s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(e)._debugID,type:"remove attribute",payload:t})},deleteValueForProperty:function(e,t){var r=i.properties.hasOwnProperty(t)?i.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseProperty){var l=r.propertyName;r.hasBooleanValue?e[l]=!1:e[l]=""}else e.removeAttribute(r.attributeName)}else i.isCustomAttribute(t)&&e.removeAttribute(t);"production"!==n.env.NODE_ENV&&s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(e)._debugID,type:"remove attribute",payload:t})}};t.exports=f}).call(this,e("_process"))},{"./DOMProperty":40,"./ReactDOMComponentTree":62,"./ReactInstrumentation":91,"./quoteAttributeValueForBrowser":148,_process:28,"fbjs/lib/warning":24}],42:[function(e,t,n){(function(n){"use strict";var r=e("./reactProdInvariant"),o=e("./DOMLazyTree"),i=e("fbjs/lib/ExecutionEnvironment"),a=e("fbjs/lib/createNodesFromMarkup"),s=e("fbjs/lib/emptyFunction"),l=e("fbjs/lib/invariant"),u={dangerouslyReplaceNodeWithMarkup:function(e,t){if(i.canUseDOM?void 0:"production"!==n.env.NODE_ENV?l(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):r("56"),t?void 0:"production"!==n.env.NODE_ENV?l(!1,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):r("57"),"HTML"===e.nodeName?"production"!==n.env.NODE_ENV?l(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):r("58"):void 0,"string"==typeof t){var u=a(t,s)[0];e.parentNode.replaceChild(u,e)}else o.replaceChildWithTree(e,t)}};t.exports=u}).call(this,e("_process"))},{"./DOMLazyTree":38,"./reactProdInvariant":149,_process:28,"fbjs/lib/ExecutionEnvironment":3,"fbjs/lib/createNodesFromMarkup":8,"fbjs/lib/emptyFunction":9,"fbjs/lib/invariant":17}],43:[function(e,t,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];t.exports=r},{}],44:[function(e,t,n){"use strict";var r=e("./EventPropagators"),o=e("./ReactDOMComponentTree"),i=e("./SyntheticMouseEvent"),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(e,t,n,s){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==e&&"topMouseOver"!==e)return null;var l;if(s.window===s)l=s;else{var u=s.ownerDocument;l=u?u.defaultView||u.parentWindow:window}var c,p;if("topMouseOut"===e){c=t;var d=n.relatedTarget||n.toElement;p=d?o.getClosestInstanceFromNode(d):null}else c=null,p=t;if(c===p)return null;var f=null==c?l:o.getNodeFromInstance(c),h=null==p?l:o.getNodeFromInstance(p),m=i.getPooled(a.mouseLeave,c,n,s);m.type="mouseleave",m.target=f,m.relatedTarget=h;var y=i.getPooled(a.mouseEnter,p,n,s);return y.type="mouseenter",y.target=h,y.relatedTarget=f,r.accumulateEnterLeaveDispatches(m,y,c,p),[m,y]}};t.exports=s},{"./EventPropagators":48,"./ReactDOMComponentTree":62,"./SyntheticMouseEvent":119}],45:[function(e,t,n){(function(n){"use strict";function r(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}function o(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(t));default:return!1}}var i=e("./reactProdInvariant"),a=e("./EventPluginRegistry"),s=e("./EventPluginUtils"),l=e("./ReactErrorUtils"),u=e("./accumulateInto"),c=e("./forEachAccumulated"),p=e("fbjs/lib/invariant"),d={},f=null,h=function(e,t){e&&(s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},m=function(e){return h(e,!0)},y=function(e){return h(e,!1)},v=function(e){return"."+e._rootNodeID},g={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(e,t,r){"function"!=typeof r?"production"!==n.env.NODE_ENV?p(!1,"Expected %s listener to be a function, instead got type %s",t,typeof r):i("94",t,typeof r):void 0;var o=v(e),s=d[t]||(d[t]={});s[o]=r;var l=a.registrationNameModules[t];l&&l.didPutListener&&l.didPutListener(e,t,r)},getListener:function(e,t){var n=d[t];if(o(t,e._currentElement.type,e._currentElement.props))return null;var r=v(e);return n&&n[r]},deleteListener:function(e,t){var n=a.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var r=d[t];if(r){var o=v(e);delete r[o]}},deleteAllListeners:function(e){var t=v(e);for(var n in d)if(d.hasOwnProperty(n)&&d[n][t]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(e,n),delete d[n][t]}},extractEvents:function(e,t,n,r){for(var o,i=a.plugins,s=0;s<i.length;s++){var l=i[s];if(l){var c=l.extractEvents(e,t,n,r);c&&(o=u(o,c))}}return o},enqueueEvents:function(e){e&&(f=u(f,e))},processEventQueue:function(e){var t=f;f=null,e?c(t,m):c(t,y),f?"production"!==n.env.NODE_ENV?p(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):i("95"):void 0,l.rethrowCaughtError()},__purge:function(){d={}},__getListenerBank:function(){return d}};t.exports=g}).call(this,e("_process"))},{"./EventPluginRegistry":46,"./EventPluginUtils":47,"./ReactErrorUtils":82,"./accumulateInto":126,"./forEachAccumulated":134,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],46:[function(e,t,n){(function(n){"use strict";function r(){if(l)for(var e in u){var t=u[e],r=l.indexOf(e);if(r>-1?void 0:"production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e):a("96",e),!c.plugins[r]){t.extractEvents?void 0:"production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e):a("97",e),c.plugins[r]=t;var i=t.eventTypes;for(var p in i)o(i[p],t,p)?void 0:"production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",p,e):a("98",p,e)}}}function o(e,t,r){c.eventNameDispatchConfigs.hasOwnProperty(r)?"production"!==n.env.NODE_ENV?s(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a("99",r):void 0,c.eventNameDispatchConfigs[r]=e;var o=e.phasedRegistrationNames;if(o){for(var l in o)if(o.hasOwnProperty(l)){var u=o[l];i(u,t,r)}return!0}return!!e.registrationName&&(i(e.registrationName,t,r),!0)}function i(e,t,r){if(c.registrationNameModules[e]?"production"!==n.env.NODE_ENV?s(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e):a("100",e):void 0,c.registrationNameModules[e]=t,c.registrationNameDependencies[e]=t.eventTypes[r].dependencies,"production"!==n.env.NODE_ENV){var o=e.toLowerCase();c.possibleRegistrationNames[o]=e,"onDoubleClick"===e&&(c.possibleRegistrationNames.ondblclick=e)}}var a=e("./reactProdInvariant"),s=e("fbjs/lib/invariant"),l=null,u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:"production"!==n.env.NODE_ENV?{}:null,injectEventPluginOrder:function(e){l?"production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a("101"):void 0,l=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var o in e)if(e.hasOwnProperty(o)){var i=e[o];u.hasOwnProperty(o)&&u[o]===i||(u[o]?"production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",o):a("102",o):void 0,u[o]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;if(void 0!==t.phasedRegistrationNames){var n=t.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var o=c.registrationNameModules[n[r]];if(o)return o}}return null},_resetEventPlugins:function(){l=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var r in t)t.hasOwnProperty(r)&&delete t[r];var o=c.registrationNameModules;for(var i in o)o.hasOwnProperty(i)&&delete o[i];if("production"!==n.env.NODE_ENV){var a=c.possibleRegistrationNames;for(var s in a)a.hasOwnProperty(s)&&delete a[s]}}};t.exports=c}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],47:[function(e,t,n){(function(n){"use strict";function r(e){return"topMouseUp"===e||"topTouchEnd"===e||"topTouchCancel"===e}function o(e){return"topMouseMove"===e||"topTouchMove"===e}function i(e){return"topMouseDown"===e||"topTouchStart"===e}function a(e,t,n,r){var o=e.type||"unknown-event";e.currentTarget=b.getNodeFromInstance(r),t?f.invokeGuardedCallbackWithCatch(o,n,e):f.invokeGuardedCallback(o,n,e),e.currentTarget=null}function s(e,t){var r=e._dispatchListeners,o=e._dispatchInstances;if("production"!==n.env.NODE_ENV&&_(e),Array.isArray(r))for(var i=0;i<r.length&&!e.isPropagationStopped();i++)a(e,t,r[i],o[i]);else r&&a(e,t,r,o);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,r=e._dispatchInstances;if("production"!==n.env.NODE_ENV&&_(e),Array.isArray(t)){for(var o=0;o<t.length&&!e.isPropagationStopped();o++)if(t[o](e,r[o]))return r[o]}else if(t&&t(e,r))return r;return null}function u(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){"production"!==n.env.NODE_ENV&&_(e);var t=e._dispatchListeners,r=e._dispatchInstances;Array.isArray(t)?"production"!==n.env.NODE_ENV?h(!1,"executeDirectDispatch(...): Invalid `event`."):d("103"):void 0,e.currentTarget=t?b.getNodeFromInstance(r):null;var o=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,o}function p(e){return!!e._dispatchListeners}var d=e("./reactProdInvariant"),f=e("./ReactErrorUtils"),h=e("fbjs/lib/invariant"),m=e("fbjs/lib/warning"),y,v,g={injectComponentTree:function(e){y=e,"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?m(e&&e.getNodeFromInstance&&e.getInstanceFromNode,"EventPluginUtils.injection.injectComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode."):void 0)},injectTreeTraversal:function(e){v=e,"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?m(e&&e.isAncestor&&e.getLowestCommonAncestor,"EventPluginUtils.injection.injectTreeTraversal(...): Injected module is missing isAncestor or getLowestCommonAncestor."):void 0)}},_;"production"!==n.env.NODE_ENV&&(_=function(e){var t=e._dispatchListeners,r=e._dispatchInstances,o=Array.isArray(t),i=o?t.length:t?1:0,a=Array.isArray(r),s=a?r.length:r?1:0;"production"!==n.env.NODE_ENV?m(a===o&&s===i,"EventPluginUtils: Invalid `event`."):void 0});var b={isEndish:r,isMoveish:o,isStartish:i,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,getInstanceFromNode:function(e){return y.getInstanceFromNode(e)},getNodeFromInstance:function(e){return y.getNodeFromInstance(e)},isAncestor:function(e,t){return v.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return v.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return v.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return v.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,r,o){return v.traverseEnterLeave(e,t,n,r,o)},injection:g};t.exports=b}).call(this,e("_process"))},{"./ReactErrorUtils":82,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24}],48:[function(e,t,n){(function(n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function o(e,t,o){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?v(e,"Dispatching inst must not be null"):void 0);var i=r(e,o,t);i&&(o._dispatchListeners=m(o._dispatchListeners,i),o._dispatchInstances=m(o._dispatchInstances,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.traverseTwoPhase(e._targetInst,o,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?h.getParentInstance(t):null;h.traverseTwoPhase(n,o,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,o=g(e,r);o&&(n._dispatchListeners=m(n._dispatchListeners,o),n._dispatchInstances=m(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){y(e,i)}function c(e){y(e,a)}function p(e,t,n,r){h.traverseEnterLeave(n,r,s,e,t)}function d(e){y(e,l)}var f=e("./EventPluginHub"),h=e("./EventPluginUtils"),m=e("./accumulateInto"),y=e("./forEachAccumulated"),v=e("fbjs/lib/warning"),g=f.getListener,_={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:d,accumulateEnterLeaveDispatches:p};t.exports=_}).call(this,e("_process"))},{"./EventPluginHub":45,"./EventPluginUtils":47,"./accumulateInto":126,"./forEachAccumulated":134,_process:28,"fbjs/lib/warning":24}],49:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var o=e("object-assign"),i=e("./PooledClass"),a=e("./getTextContentAccessor");o(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t=this._startText,n=t.length,r,o=this.getText(),i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[i-r];r++);var s=r>1?1-r:void 0;return this._fallbackText=o.slice(e,s),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},{"./PooledClass":53,"./getTextContentAccessor":143,"object-assign":27}],50:[function(e,t,n){"use strict";var r=e("./DOMProperty"),o=r.injection.MUST_USE_PROPERTY,i=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,l=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:i,allowTransparency:0,alt:0,as:0,async:i,autoComplete:0,autoPlay:i,capture:i,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:o|i,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:i,coords:0,crossOrigin:0,data:0,dateTime:0,"default":i,defer:i,dir:0,disabled:i,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:i,formTarget:0,frameBorder:0,headers:0,height:0,hidden:i,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:i,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:o|i,muted:o|i,name:0,nonce:0,noValidate:i,open:i,optimum:0,pattern:0,placeholder:0,playsInline:i,poster:0,preload:0,profile:0,radioGroup:0,readOnly:i,referrerPolicy:0,rel:0,required:i,reversed:i,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:i,scrolling:0,seamless:i,selected:o|i,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,"typeof":0,vocab:0,
autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:i,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=u},{"./DOMProperty":40}],51:[function(e,t,n){"use strict";function r(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},r=(""+e).replace(t,function(e){return n[e]});return"$"+r}function o(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},r="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+r).replace(t,function(e){return n[e]})}var i={escape:r,unescape:o};t.exports=i},{}],52:[function(e,t,n){(function(n){"use strict";function r(e){null!=e.checkedLink&&null!=e.valueLink?"production"!==n.env.NODE_ENV?c(!1,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):s("87"):void 0}function o(e){r(e),null!=e.value||null!=e.onChange?"production"!==n.env.NODE_ENV?c(!1,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):s("88"):void 0}function i(e){r(e),null!=e.checked||null!=e.onChange?"production"!==n.env.NODE_ENV?c(!1,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=e("./reactProdInvariant"),l=e("react/lib/React"),u=e("./ReactPropTypesSecret"),c=e("fbjs/lib/invariant"),p=e("fbjs/lib/warning"),d={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},f={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.PropTypes.func},h={},m={checkPropTypes:function(e,t,r){for(var o in f){if(f.hasOwnProperty(o))var i=f[o](t,o,e,"prop",null,u);if(i instanceof Error&&!(i.message in h)){h[i.message]=!0;var s=a(r);"production"!==n.env.NODE_ENV?p(!1,"Failed form propType: %s%s",i.message,s):void 0}}},getValue:function(e){return e.valueLink?(o(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(i(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(o(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(i(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};t.exports=m}).call(this,e("_process"))},{"./ReactPropTypesSecret":99,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"react/lib/React":159}],53:[function(e,t,n){(function(n){"use strict";var r=e("./reactProdInvariant"),o=e("fbjs/lib/invariant"),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},a=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},s=function(e,t,n){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n),o}return new r(e,t,n)},l=function(e,t,n,r){var o=this;if(o.instancePool.length){var i=o.instancePool.pop();return o.call(i,e,t,n,r),i}return new o(e,t,n,r)},u=function(e){var t=this;e instanceof t?void 0:"production"!==n.env.NODE_ENV?o(!1,"Trying to release an instance into a pool of a different type."):r("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,p=i,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||p,n.poolSize||(n.poolSize=c),n.release=u,n},f={addPoolingTo:d,oneArgumentPooler:i,twoArgumentPooler:a,threeArgumentPooler:s,fourArgumentPooler:l};t.exports=f}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],54:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=f++,p[e[m]]={}),p[e[m]]}var o=e("object-assign"),i=e("./EventPluginRegistry"),a=e("./ReactEventEmitterMixin"),s=e("./ViewportMetrics"),l=e("./getVendorPrefixedEventName"),u=e("./isEventSupported"),c,p={},d=!1,f=0,h={topAbort:"abort",topAnimationEnd:l("animationend")||"animationend",topAnimationIteration:l("animationiteration")||"animationiteration",topAnimationStart:l("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:l("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),y=o({},a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(y.handleTopLevel),y.ReactEventListener=e}},setEnabled:function(e){y.ReactEventListener&&y.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!y.ReactEventListener||!y.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,o=r(n),a=i.registrationNameDependencies[e],s=0;s<a.length;s++){var l=a[s];o.hasOwnProperty(l)&&o[l]||("topWheel"===l?u("wheel")?y.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):u("mousewheel")?y.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):y.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===l?u("scroll",!0)?y.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):y.ReactEventListener.trapBubbledEvent("topScroll","scroll",y.ReactEventListener.WINDOW_HANDLE):"topFocus"===l||"topBlur"===l?(u("focus",!0)?(y.ReactEventListener.trapCapturedEvent("topFocus","focus",n),y.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):u("focusin")&&(y.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),y.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),o.topBlur=!0,o.topFocus=!0):h.hasOwnProperty(l)&&y.ReactEventListener.trapBubbledEvent(l,h[l],n),o[l]=!0)}},trapBubbledEvent:function(e,t,n){return y.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return y.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===c&&(c=y.supportsEventPageXY()),!c&&!d){var e=s.refreshScrollValues;y.ReactEventListener.monitorScrollValue(e),d=!0}}});t.exports=y},{"./EventPluginRegistry":46,"./ReactEventEmitterMixin":83,"./ViewportMetrics":125,"./getVendorPrefixedEventName":144,"./isEventSupported":146,"object-assign":27}],55:[function(e,t,n){(function(n){"use strict";function r(t,r,o,s){var l=void 0===t[o];"production"!==n.env.NODE_ENV&&(c||(c=e("react/lib/ReactComponentTreeHook")),l||("production"!==n.env.NODE_ENV?u(!1,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.%s",a.unescape(o),c.getStackAddendumByID(s)):void 0)),null!=r&&l&&(t[o]=i(r,!0))}var o=e("./ReactReconciler"),i=e("./instantiateReactComponent"),a=e("./KeyEscapeUtils"),s=e("./shouldUpdateReactComponent"),l=e("./traverseAllChildren"),u=e("fbjs/lib/warning"),c;"undefined"!=typeof n&&n.env&&"test"===n.env.NODE_ENV&&(c=e("react/lib/ReactComponentTreeHook"));var p={instantiateChildren:function(e,t,o,i){if(null==e)return null;var a={};return"production"!==n.env.NODE_ENV?l(e,function(e,t,n){return r(e,t,n,i)},a):l(e,r,a),a},updateChildren:function(e,t,n,r,a,l,u,c,p){if(t||e){var d,f;for(d in t)if(t.hasOwnProperty(d)){f=e&&e[d];var h=f&&f._currentElement,m=t[d];if(null!=f&&s(h,m))o.receiveComponent(f,m,a,c),t[d]=f;else{f&&(r[d]=o.getHostNode(f),o.unmountComponent(f,!1));var y=i(m,!0);t[d]=y;var v=o.mountComponent(y,a,l,u,c,p);n.push(v)}}for(d in e)!e.hasOwnProperty(d)||t&&t.hasOwnProperty(d)||(f=e[d],r[d]=o.getHostNode(f),o.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];o.unmountComponent(r,t)}}};t.exports=p}).call(this,e("_process"))},{"./KeyEscapeUtils":51,"./ReactReconciler":101,"./instantiateReactComponent":145,"./shouldUpdateReactComponent":153,"./traverseAllChildren":154,_process:28,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],56:[function(e,t,n){"use strict";var r=e("./DOMChildrenOperations"),o=e("./ReactDOMIDOperations"),i={processChildrenUpdates:o.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=i},{"./DOMChildrenOperations":37,"./ReactDOMIDOperations":66}],57:[function(e,t,n){(function(n){"use strict";var r=e("./reactProdInvariant"),o=e("fbjs/lib/invariant"),i=!1,a={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){i?"production"!==n.env.NODE_ENV?o(!1,"ReactCompositeComponent: injectEnvironment() can only be called once."):r("104"):void 0,a.replaceNodeWithMarkup=e.replaceNodeWithMarkup,a.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};t.exports=a}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],58:[function(e,t,n){(function(n){"use strict";function r(e){}function o(e,t){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?E(null===t||t===!1||c.isValidElement(t),"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",e.displayName||e.name||"Component"):void 0,"production"!==n.env.NODE_ENV?E(!e.childContextTypes,"%s(...): childContextTypes cannot be defined on a functional component.",e.displayName||e.name||"Component"):void 0)}function i(e){return!(!e.prototype||!e.prototype.isReactComponent)}function a(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}function s(e,t,n){if(0===t)return e();m.debugTool.onBeginLifeCycleTimer(t,n);try{return e()}finally{m.debugTool.onEndLifeCycleTimer(t,n)}}var l=e("./reactProdInvariant"),u=e("object-assign"),c=e("react/lib/React"),p=e("./ReactComponentEnvironment"),d=e("react/lib/ReactCurrentOwner"),f=e("./ReactErrorUtils"),h=e("./ReactInstanceMap"),m=e("./ReactInstrumentation"),y=e("./ReactNodeTypes"),v=e("./ReactReconciler");if("production"!==n.env.NODE_ENV)var g=e("./checkReactTypeSpec");var _=e("fbjs/lib/emptyObject"),b=e("fbjs/lib/invariant"),x=e("fbjs/lib/shallowEqual"),w=e("./shouldUpdateReactComponent"),E=e("fbjs/lib/warning"),k={ImpureClass:0,PureClass:1,StatelessFunctional:2};r.prototype.render=function(){var e=h.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return o(e,t),t};var C=1,S={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1,"production"!==n.env.NODE_ENV&&(this._warnedAboutRefsInRender=!1)},mountComponent:function(e,t,u,p){var d=this;this._context=p,this._mountOrder=C++,this._hostParent=t,this._hostContainerInfo=u;var f=this._currentElement.props,m=this._processContext(p),y=this._currentElement.type,v=e.getUpdateQueue(),g=i(y),x=this._constructComponent(g,f,m,v),w;if(g||null!=x&&null!=x.render?a(y)?this._compositeType=k.PureClass:this._compositeType=k.ImpureClass:(w=x,o(y,w),null===x||x===!1||c.isValidElement(x)?void 0:"production"!==n.env.NODE_ENV?b(!1,"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",y.displayName||y.name||"Component"):l("105",y.displayName||y.name||"Component"),x=new r(y),this._compositeType=k.StatelessFunctional),"production"!==n.env.NODE_ENV){null==x.render&&("production"!==n.env.NODE_ENV?E(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",y.displayName||y.name||"Component"):void 0);var S=x.props!==f,P=y.displayName||y.name||"Component";"production"!==n.env.NODE_ENV?E(void 0===x.props||!S,"%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",P,P):void 0}x.props=f,x.context=m,x.refs=_,x.updater=v,this._instance=x,h.set(x,this),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?E(!x.getInitialState||x.getInitialState.isReactClassApproved||x.state,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"):void 0,"production"!==n.env.NODE_ENV?E(!x.getDefaultProps||x.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"):void 0,"production"!==n.env.NODE_ENV?E(!x.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"):void 0,"production"!==n.env.NODE_ENV?E(!x.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"):void 0,"production"!==n.env.NODE_ENV?E("function"!=typeof x.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"):void 0,"production"!==n.env.NODE_ENV?E("function"!=typeof x.componentDidUnmount,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",this.getName()||"A component"):void 0,"production"!==n.env.NODE_ENV?E("function"!=typeof x.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"):void 0);var O=x.state;void 0===O&&(x.state=O=null),"object"!=typeof O||Array.isArray(O)?"production"!==n.env.NODE_ENV?b(!1,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):l("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var M;return M=x.unstable_handleError?this.performInitialMountWithErrorHandling(w,t,u,e,p):this.performInitialMount(w,t,u,e,p),x.componentDidMount&&("production"!==n.env.NODE_ENV?e.getReactMountReady().enqueue(function(){s(function(){return x.componentDidMount()},d._debugID,"componentDidMount")}):e.getReactMountReady().enqueue(x.componentDidMount,x)),M},_constructComponent:function(e,t,r,o){if("production"===n.env.NODE_ENV)return this._constructComponentWithoutOwner(e,t,r,o);d.current=this;try{return this._constructComponentWithoutOwner(e,t,r,o)}finally{d.current=null}},_constructComponentWithoutOwner:function(e,t,r,o){var i=this._currentElement.type;return e?"production"!==n.env.NODE_ENV?s(function(){return new i(t,r,o)},this._debugID,"ctor"):new i(t,r,o):"production"!==n.env.NODE_ENV?s(function(){return i(t,r,o)},this._debugID,"render"):i(t,r,o)},performInitialMountWithErrorHandling:function(e,t,n,r,o){var i,a=r.checkpoint();try{i=this.performInitialMount(e,t,n,r,o)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),i=this.performInitialMount(e,t,n,r,o)}return i},performInitialMount:function(e,t,r,o,i){var a=this._instance,l=0;"production"!==n.env.NODE_ENV&&(l=this._debugID),a.componentWillMount&&("production"!==n.env.NODE_ENV?s(function(){return a.componentWillMount()},l,"componentWillMount"):a.componentWillMount(),this._pendingStateQueue&&(a.state=this._processPendingState(a.props,a.context))),void 0===e&&(e=this._renderValidatedComponent());var u=y.getType(e);this._renderedNodeType=u;var c=this._instantiateReactComponent(e,u!==y.EMPTY);this._renderedComponent=c;var p=v.mountComponent(c,o,t,r,this._processChildContext(i),l);if("production"!==n.env.NODE_ENV&&0!==l){var d=0!==c._debugID?[c._debugID]:[];m.debugTool.onSetChildren(l,d)}return p},getHostNode:function(){return v.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var r=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(r,t.componentWillUnmount.bind(t))}else"production"!==n.env.NODE_ENV?s(function(){return t.componentWillUnmount()},this._debugID,"componentWillUnmount"):t.componentWillUnmount();this._renderedComponent&&(v.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,h.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return _;var r={};for(var o in n)r[o]=e[o];return r},_processContext:function(e){var t=this._maskContext(e);if("production"!==n.env.NODE_ENV){var r=this._currentElement.type;r.contextTypes&&this._checkContextTypes(r.contextTypes,t,"context")}return t},_processChildContext:function(e){var t=this._currentElement.type,r=this._instance,o;if(r.getChildContext)if("production"!==n.env.NODE_ENV){m.debugTool.onBeginProcessingChildContext();try{o=r.getChildContext()}finally{m.debugTool.onEndProcessingChildContext()}}else o=r.getChildContext();if(o){"object"!=typeof t.childContextTypes?"production"!==n.env.NODE_ENV?b(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):l("107",this.getName()||"ReactCompositeComponent"):void 0,"production"!==n.env.NODE_ENV&&this._checkContextTypes(t.childContextTypes,o,"childContext");for(var i in o)i in t.childContextTypes?void 0:"production"!==n.env.NODE_ENV?b(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",i):l("108",this.getName()||"ReactCompositeComponent",i);return u({},e,o)}return e},_checkContextTypes:function(e,t,r){"production"!==n.env.NODE_ENV&&g(e,t,r,this.getName(),null,this._debugID)},receiveComponent:function(e,t,n){var r=this._currentElement,o=this._context;this._pendingElement=null,this.updateComponent(t,r,e,o,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?v.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,r,o,i){var a=this._instance;null==a?"production"!==n.env.NODE_ENV?b(!1,"Attempted to update component `%s` that has already been unmounted (or failed to mount).",this.getName()||"ReactCompositeComponent"):l("136",this.getName()||"ReactCompositeComponent"):void 0;var u=!1,c;this._context===i?c=a.context:(c=this._processContext(i),u=!0);var p=t.props,d=r.props;t!==r&&(u=!0),u&&a.componentWillReceiveProps&&("production"!==n.env.NODE_ENV?s(function(){return a.componentWillReceiveProps(d,c)},this._debugID,"componentWillReceiveProps"):a.componentWillReceiveProps(d,c));var f=this._processPendingState(d,c),h=!0;this._pendingForceUpdate||(a.shouldComponentUpdate?h="production"!==n.env.NODE_ENV?s(function(){return a.shouldComponentUpdate(d,f,c)},this._debugID,"shouldComponentUpdate"):a.shouldComponentUpdate(d,f,c):this._compositeType===k.PureClass&&(h=!x(p,d)||!x(a.state,f))),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?E(void 0!==h,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"):void 0),this._updateBatchNumber=null,h?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,d,f,c,e,i)):(this._currentElement=r,this._context=i,a.props=d,a.state=f,a.context=c)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,o=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(o&&1===r.length)return r[0];for(var i=u({},o?r[0]:n.state),a=o?1:0;a<r.length;a++){var s=r[a];u(i,"function"==typeof s?s.call(n,i,e,t):s)}return i},_performComponentUpdate:function(e,t,r,o,i,a){var l=this,u=this._instance,c=Boolean(u.componentDidUpdate),p,d,f;c&&(p=u.props,d=u.state,f=u.context),u.componentWillUpdate&&("production"!==n.env.NODE_ENV?s(function(){return u.componentWillUpdate(t,r,o)},this._debugID,"componentWillUpdate"):u.componentWillUpdate(t,r,o)),this._currentElement=e,this._context=a,u.props=t,u.state=r,u.context=o,this._updateRenderedComponent(i,a),c&&("production"!==n.env.NODE_ENV?i.getReactMountReady().enqueue(function(){s(u.componentDidUpdate.bind(u,p,d,f),l._debugID,"componentDidUpdate")}):i.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,p,d,f),u))},_updateRenderedComponent:function(e,t){var r=this._renderedComponent,o=r._currentElement,i=this._renderValidatedComponent(),a=0;if("production"!==n.env.NODE_ENV&&(a=this._debugID),w(o,i))v.receiveComponent(r,i,e,this._processChildContext(t));else{var s=v.getHostNode(r);v.unmountComponent(r,!1);var l=y.getType(i);this._renderedNodeType=l;var u=this._instantiateReactComponent(i,l!==y.EMPTY);this._renderedComponent=u;var c=v.mountComponent(u,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),a);if("production"!==n.env.NODE_ENV&&0!==a){var p=0!==u._debugID?[u._debugID]:[];m.debugTool.onSetChildren(a,p)}this._replaceNodeWithMarkup(s,c,r)}},_replaceNodeWithMarkup:function(e,t,n){p.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t;return t="production"!==n.env.NODE_ENV?s(function(){return e.render()},this._debugID,"render"):e.render(),"production"!==n.env.NODE_ENV&&void 0===t&&e.render._isMockFunction&&(t=null),t},_renderValidatedComponent:function(){var e;if("production"!==n.env.NODE_ENV||this._compositeType!==k.StatelessFunctional){d.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{d.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||c.isValidElement(e)?void 0:"production"!==n.env.NODE_ENV?b(!1,"%s.render(): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):l("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var r=this.getPublicInstance();null==r?"production"!==n.env.NODE_ENV?b(!1,"Stateless function components cannot have refs."):l("110"):void 0;var o=t.getPublicInstance();if("production"!==n.env.NODE_ENV){var i=t&&t.getName?t.getName():"a component";"production"!==n.env.NODE_ENV?E(null!=o||t._compositeType!==k.StatelessFunctional,'Stateless function components cannot be given refs (See ref "%s" in %s created by %s). Attempts to access this ref will fail.',e,i,this.getName()):void 0}var a=r.refs===_?r.refs={}:r.refs;a[e]=o},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===k.StatelessFunctional?null:e},_instantiateReactComponent:null};t.exports=S}).call(this,e("_process"))},{"./ReactComponentEnvironment":57,"./ReactErrorUtils":82,"./ReactInstanceMap":90,"./ReactInstrumentation":91,"./ReactNodeTypes":96,"./ReactReconciler":101,"./checkReactTypeSpec":128,"./reactProdInvariant":149,"./shouldUpdateReactComponent":153,_process:28,"fbjs/lib/emptyObject":10,"fbjs/lib/invariant":17,"fbjs/lib/shallowEqual":23,"fbjs/lib/warning":24,"object-assign":27,"react/lib/React":159,"react/lib/ReactCurrentOwner":164}],59:[function(e,t,n){(function(n){"use strict";var r=e("./ReactDOMComponentTree"),o=e("./ReactDefaultInjection"),i=e("./ReactMount"),a=e("./ReactReconciler"),s=e("./ReactUpdates"),l=e("./ReactVersion"),u=e("./findDOMNode"),c=e("./getHostComponentFromComposite"),p=e("./renderSubtreeIntoContainer"),d=e("fbjs/lib/warning");o.inject();var f={findDOMNode:u,render:i.render,unmountComponentAtNode:i.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:p};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?r.getNodeFromInstance(e):null}},Mount:i,Reconciler:a}),"production"!==n.env.NODE_ENV){var h=e("fbjs/lib/ExecutionEnvironment");if(h.canUseDOM&&window.top===window.self){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var m=window.location.protocol.indexOf("http")===-1&&navigator.userAgent.indexOf("Firefox")===-1;console.debug("Download the React DevTools "+(m?"and use an HTTP server (instead of a file: URL) ":"")+"for a better development experience: https://fb.me/react-devtools")}var y=function k(){};"production"!==n.env.NODE_ENV?d((y.name||y.toString()).indexOf("testFn")!==-1,"It looks like you're using a minified copy of the development build of React. When deploying React apps to production, make sure to use the production build which skips development warnings and is faster. See https://fb.me/react-minification for more details."):void 0;var v=document.documentMode&&document.documentMode<8;"production"!==n.env.NODE_ENV?d(!v,'Internet Explorer is running in compatibility mode; please add the following tag to your HTML to prevent this from happening: <meta http-equiv="X-UA-Compatible" content="IE=edge" />'):void 0;for(var g=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.trim],_=0;_<g.length;_++)if(!g[_]){"production"!==n.env.NODE_ENV?d(!1,"One or more ES5 shims expected by React are not available: https://fb.me/react-warning-polyfills"):void 0;break}}}if("production"!==n.env.NODE_ENV){var b=e("./ReactInstrumentation"),x=e("./ReactDOMUnknownPropertyHook"),w=e("./ReactDOMNullInputValuePropHook"),E=e("./ReactDOMInvalidARIAHook");b.debugTool.addHook(x),b.debugTool.addHook(w),b.debugTool.addHook(E)}t.exports=f}).call(this,e("_process"))},{"./ReactDOMComponentTree":62,"./ReactDOMInvalidARIAHook":68,"./ReactDOMNullInputValuePropHook":69,"./ReactDOMUnknownPropertyHook":76,"./ReactDefaultInjection":79,"./ReactInstrumentation":91,"./ReactMount":94,"./ReactReconciler":101,"./ReactUpdates":106,"./ReactVersion":107,"./findDOMNode":132,"./getHostComponentFromComposite":139,"./renderSubtreeIntoContainer":150,_process:28,"fbjs/lib/ExecutionEnvironment":3,"fbjs/lib/warning":24}],60:[function(e,t,n){(function(n){"use strict";function r(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function o(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(o).join(", ")+"]";var t=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=/^[a-z$_][\w$_]*$/i.test(n)?n:JSON.stringify(n);t.push(r+": "+o(e[n]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function i(e,t,r){if(null!=e&&null!=t&&!B(e,t)){var i=r._tag,a=r._currentElement._owner,s;a&&(s=a.getName());var l=s+"|"+i;ee.hasOwnProperty(l)||(ee[l]=!0,"production"!==n.env.NODE_ENV?W(!1,"`%s` was passed a style object that has previously been mutated. Mutating `style` is deprecated. Consider cloning it beforehand. Check the `render` %s. Previous style: %s. Mutated style: %s.",i,a?"of `"+s+"`":"using <"+i+">",o(e),o(t)):void 0)}}function a(e,t){t&&(ie[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?"production"!==n.env.NODE_ENV?V(!1,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):v("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?"production"!==n.env.NODE_ENV?V(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):v("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&J in t.dangerouslySetInnerHTML?void 0:"production"!==n.env.NODE_ENV?V(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):v("61")),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?W(null==t.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."):void 0,"production"!==n.env.NODE_ENV?W(t.suppressContentEditableWarning||!t.contentEditable||null==t.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."):void 0,"production"!==n.env.NODE_ENV?W(null==t.onFocusIn&&null==t.onFocusOut,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."):void 0),
null!=t.style&&"object"!=typeof t.style?"production"!==n.env.NODE_ENV?V(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",r(e)):v("62",r(e)):void 0)}function s(e,t,r,o){if(!(o instanceof A)){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?W("onScroll"!==t||F("scroll",!0),"This browser doesn't support the `onScroll` event"):void 0);var i=e._hostContainerInfo,a=i._node&&i._node.nodeType===Q,s=a?i._node:i._ownerDocument;G(t,s),o.getReactMountReady().enqueue(l,{inst:e,registrationName:t,listener:r})}}function l(){var e=this;C.putListener(e.inst,e.registrationName,e.listener)}function u(){var e=this;D.postMountWrapper(e)}function c(){var e=this;I.postMountWrapper(e)}function p(){var e=this;T.postMountWrapper(e)}function d(){var e=this;e._rootNodeID?void 0:"production"!==n.env.NODE_ENV?V(!1,"Must be mounted to trap events"):v("63");var t=Z(e);switch(t?void 0:"production"!==n.env.NODE_ENV?V(!1,"trapBubbledEvent(...): Requires node to be rendered."):v("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[P.trapBubbledEvent("topLoad","load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in ne)ne.hasOwnProperty(r)&&e._wrapperState.listeners.push(P.trapBubbledEvent(r,ne[r],t));break;case"source":e._wrapperState.listeners=[P.trapBubbledEvent("topError","error",t)];break;case"img":e._wrapperState.listeners=[P.trapBubbledEvent("topError","error",t),P.trapBubbledEvent("topLoad","load",t)];break;case"form":e._wrapperState.listeners=[P.trapBubbledEvent("topReset","reset",t),P.trapBubbledEvent("topSubmit","submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[P.trapBubbledEvent("topInvalid","invalid",t)]}}function f(){N.postUpdateWrapper(this)}function h(e){le.call(se,e)||(ae.test(e)?void 0:"production"!==n.env.NODE_ENV?V(!1,"Invalid tag: %s",e):v("65",e),se[e]=!0)}function m(e,t){return e.indexOf("-")>=0||null!=t.is}function y(e){var t=e.type;h(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0,"production"!==n.env.NODE_ENV&&(this._ancestorInfo=null,te.call(this,null))}var v=e("./reactProdInvariant"),g=e("object-assign"),_=e("./AutoFocusUtils"),b=e("./CSSPropertyOperations"),x=e("./DOMLazyTree"),w=e("./DOMNamespaces"),E=e("./DOMProperty"),k=e("./DOMPropertyOperations"),C=e("./EventPluginHub"),S=e("./EventPluginRegistry"),P=e("./ReactBrowserEventEmitter"),O=e("./ReactDOMComponentFlags"),M=e("./ReactDOMComponentTree"),D=e("./ReactDOMInput"),T=e("./ReactDOMOption"),N=e("./ReactDOMSelect"),I=e("./ReactDOMTextarea"),L=e("./ReactInstrumentation"),R=e("./ReactMultiChild"),A=e("./ReactServerRenderingTransaction"),j=e("fbjs/lib/emptyFunction"),z=e("./escapeTextContentForBrowser"),V=e("fbjs/lib/invariant"),F=e("./isEventSupported"),B=e("fbjs/lib/shallowEqual"),U=e("./validateDOMNesting"),W=e("fbjs/lib/warning"),q=O,H=C.deleteListener,Z=M.getNodeFromInstance,G=P.listenTo,X=S.registrationNameModules,K={string:!0,number:!0},Y="style",J="__html",$={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},Q=11,ee={},te=j;"production"!==n.env.NODE_ENV&&(te=function(e){var t=null!=this._contentDebugID,n=this._debugID,r=-n;return null==e?(t&&L.debugTool.onUnmountComponent(this._contentDebugID),void(this._contentDebugID=null)):(U(null,String(e),this,this._ancestorInfo),this._contentDebugID=r,void(t?(L.debugTool.onBeforeUpdateComponent(r,e),L.debugTool.onUpdateComponent(r)):(L.debugTool.onBeforeMountComponent(r,e,n),L.debugTool.onMountComponent(r),L.debugTool.onSetChildren(n,[r]))))});var ne={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},re={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},oe={listing:!0,pre:!0,textarea:!0},ie=g({menuitem:!0},re),ae=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,se={},le={}.hasOwnProperty,ue=1;y.displayName="ReactDOMComponent",y.Mixin={mountComponent:function(e,t,r,o){this._rootNodeID=ue++,this._domID=r._idCounter++,this._hostParent=t,this._hostContainerInfo=r;var i=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(d,this);break;case"input":D.mountWrapper(this,i,t),i=D.getHostProps(this,i),e.getReactMountReady().enqueue(d,this);break;case"option":T.mountWrapper(this,i,t),i=T.getHostProps(this,i);break;case"select":N.mountWrapper(this,i,t),i=N.getHostProps(this,i),e.getReactMountReady().enqueue(d,this);break;case"textarea":I.mountWrapper(this,i,t),i=I.getHostProps(this,i),e.getReactMountReady().enqueue(d,this)}a(this,i);var s,l;if(null!=t?(s=t._namespaceURI,l=t._tag):r._tag&&(s=r._namespaceURI,l=r._tag),(null==s||s===w.svg&&"foreignobject"===l)&&(s=w.html),s===w.html&&("svg"===this._tag?s=w.svg:"math"===this._tag&&(s=w.mathml)),this._namespaceURI=s,"production"!==n.env.NODE_ENV){var f;null!=t?f=t._ancestorInfo:r._tag&&(f=r._ancestorInfo),f&&U(this._tag,null,this,f),this._ancestorInfo=U.updatedAncestorInfo(f,this._tag,this)}var h;if(e.useCreateElement){var m=r._ownerDocument,y;if(s===w.html)if("script"===this._tag){var v=m.createElement("div"),g=this._currentElement.type;v.innerHTML="<"+g+"></"+g+">",y=v.removeChild(v.firstChild)}else y=i.is?m.createElement(this._currentElement.type,i.is):m.createElement(this._currentElement.type);else y=m.createElementNS(s,this._currentElement.type);M.precacheNode(this,y),this._flags|=q.hasCachedChildNodes,this._hostParent||k.setAttributeForRoot(y),this._updateDOMProperties(null,i,e);var b=x(y);this._createInitialChildren(e,i,o,b),h=b}else{var E=this._createOpenTagMarkupAndPutListeners(e,i),C=this._createContentMarkup(e,i,o);h=!C&&re[this._tag]?E+"/>":E+">"+C+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(u,this),i.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(c,this),i.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"select":i.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"button":i.autoFocus&&e.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(p,this)}return h},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var o in t)if(t.hasOwnProperty(o)){var i=t[o];if(null!=i)if(X.hasOwnProperty(o))i&&s(this,o,i,e);else{o===Y&&(i&&("production"!==n.env.NODE_ENV&&(this._previousStyle=i),i=this._previousStyleCopy=g({},t.style)),i=b.createMarkupForStyles(i,this));var a=null;null!=this._tag&&m(this._tag,t)?$.hasOwnProperty(o)||(a=k.createMarkupForCustomAttribute(o,i)):a=k.createMarkupForProperty(o,i),a&&(r+=" "+a)}}return e.renderToStaticMarkup?r:(this._hostParent||(r+=" "+k.createMarkupForRoot()),r+=" "+k.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,r){var o="",i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(o=i.__html);else{var a=K[typeof t.children]?t.children:null,s=null!=a?null:t.children;if(null!=a)o=z(a),"production"!==n.env.NODE_ENV&&te.call(this,a);else if(null!=s){var l=this.mountChildren(s,e,r);o=l.join("")}}return oe[this._tag]&&"\n"===o.charAt(0)?"\n"+o:o},_createInitialChildren:function(e,t,r,o){var i=t.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&x.queueHTML(o,i.__html);else{var a=K[typeof t.children]?t.children:null,s=null!=a?null:t.children;if(null!=a)""!==a&&("production"!==n.env.NODE_ENV&&te.call(this,a),x.queueText(o,a));else if(null!=s)for(var l=this.mountChildren(s,e,r),u=0;u<l.length;u++)x.queueChild(o,l[u])}},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,r){var o=t.props,i=this._currentElement.props;switch(this._tag){case"input":o=D.getHostProps(this,o),i=D.getHostProps(this,i);break;case"option":o=T.getHostProps(this,o),i=T.getHostProps(this,i);break;case"select":o=N.getHostProps(this,o),i=N.getHostProps(this,i);break;case"textarea":o=I.getHostProps(this,o),i=I.getHostProps(this,i)}switch(a(this,i),this._updateDOMProperties(o,i,e),this._updateDOMChildren(o,i,e,r),this._tag){case"input":D.updateWrapper(this);break;case"textarea":I.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(f,this)}},_updateDOMProperties:function(e,t,r){var o,a,l;for(o in e)if(!t.hasOwnProperty(o)&&e.hasOwnProperty(o)&&null!=e[o])if(o===Y){var u=this._previousStyleCopy;for(a in u)u.hasOwnProperty(a)&&(l=l||{},l[a]="");this._previousStyleCopy=null}else X.hasOwnProperty(o)?e[o]&&H(this,o):m(this._tag,e)?$.hasOwnProperty(o)||k.deleteValueForAttribute(Z(this),o):(E.properties[o]||E.isCustomAttribute(o))&&k.deleteValueForProperty(Z(this),o);for(o in t){var c=t[o],p=o===Y?this._previousStyleCopy:null!=e?e[o]:void 0;if(t.hasOwnProperty(o)&&c!==p&&(null!=c||null!=p))if(o===Y)if(c?("production"!==n.env.NODE_ENV&&(i(this._previousStyleCopy,this._previousStyle,this),this._previousStyle=c),c=this._previousStyleCopy=g({},c)):this._previousStyleCopy=null,p){for(a in p)!p.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(l=l||{},l[a]="");for(a in c)c.hasOwnProperty(a)&&p[a]!==c[a]&&(l=l||{},l[a]=c[a])}else l=c;else if(X.hasOwnProperty(o))c?s(this,o,c,r):p&&H(this,o);else if(m(this._tag,t))$.hasOwnProperty(o)||k.setValueForAttribute(Z(this),o,c);else if(E.properties[o]||E.isCustomAttribute(o)){var d=Z(this);null!=c?k.setValueForProperty(d,o,c):k.deleteValueForProperty(d,o)}}l&&b.setValueForStyles(Z(this),l,this)},_updateDOMChildren:function(e,t,r,o){var i=K[typeof e.children]?e.children:null,a=K[typeof t.children]?t.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,l=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=null!=i?null:e.children,c=null!=a?null:t.children,p=null!=i||null!=s,d=null!=a||null!=l;null!=u&&null==c?this.updateChildren(null,r,o):p&&!d&&(this.updateTextContent(""),"production"!==n.env.NODE_ENV&&L.debugTool.onSetChildren(this._debugID,[])),null!=a?i!==a&&(this.updateTextContent(""+a),"production"!==n.env.NODE_ENV&&te.call(this,a)):null!=l?(s!==l&&this.updateMarkup(""+l),"production"!==n.env.NODE_ENV&&L.debugTool.onSetChildren(this._debugID,[])):null!=c&&("production"!==n.env.NODE_ENV&&te.call(this,null),this.updateChildren(c,r,o))},getHostNode:function(){return Z(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var r=0;r<t.length;r++)t[r].remove();break;case"html":case"head":case"body":"production"!==n.env.NODE_ENV?V(!1,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):v("66",this._tag)}this.unmountChildren(e),M.uncacheNode(this),C.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null,"production"!==n.env.NODE_ENV&&te.call(this,null)},getPublicInstance:function(){return Z(this)}},g(y.prototype,y.Mixin,R.Mixin),t.exports=y}).call(this,e("_process"))},{"./AutoFocusUtils":31,"./CSSPropertyOperations":34,"./DOMLazyTree":38,"./DOMNamespaces":39,"./DOMProperty":40,"./DOMPropertyOperations":41,"./EventPluginHub":45,"./EventPluginRegistry":46,"./ReactBrowserEventEmitter":54,"./ReactDOMComponentFlags":61,"./ReactDOMComponentTree":62,"./ReactDOMInput":67,"./ReactDOMOption":70,"./ReactDOMSelect":71,"./ReactDOMTextarea":74,"./ReactInstrumentation":91,"./ReactMultiChild":95,"./ReactServerRenderingTransaction":103,"./escapeTextContentForBrowser":131,"./isEventSupported":146,"./reactProdInvariant":149,"./validateDOMNesting":155,_process:28,"fbjs/lib/emptyFunction":9,"fbjs/lib/invariant":17,"fbjs/lib/shallowEqual":23,"fbjs/lib/warning":24,"object-assign":27}],61:[function(e,t,n){"use strict";var r={hasCachedChildNodes:1};t.exports=r},{}],62:[function(e,t,n){(function(n){"use strict";function r(e,t){return 1===e.nodeType&&e.getAttribute(m)===String(t)||8===e.nodeType&&e.nodeValue===" react-text: "+t+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+t+" "}function o(e){for(var t;t=e._renderedComponent;)e=t;return e}function i(e,t){var n=o(e);n._hostNode=t,t[v]=n}function a(e){var t=e._hostNode;t&&(delete t[v],e._hostNode=null)}function s(e,t){if(!(e._flags&y.hasCachedChildNodes)){var a=e._renderedChildren,s=t.firstChild;e:for(var l in a)if(a.hasOwnProperty(l)){var u=a[l],c=o(u)._domID;if(0!==c){for(;null!==s;s=s.nextSibling)if(r(s,c)){i(u,s);continue e}"production"!==n.env.NODE_ENV?h(!1,"Unable to find element with ID %s.",c):p("32",c)}}e._flags|=y.hasCachedChildNodes}}function l(e){if(e[v])return e[v];for(var t=[];!e[v];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,r;e&&(r=e[v]);e=t.pop())n=r,t.length&&s(r,e);return n}function u(e){var t=l(e);return null!=t&&t._hostNode===e?t:null}function c(e){if(void 0===e._hostNode?"production"!==n.env.NODE_ENV?h(!1,"getNodeFromInstance: Invalid argument."):p("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:"production"!==n.env.NODE_ENV?h(!1,"React DOM tree root should always have a node reference."):p("34"),e=e._hostParent;for(;t.length;e=t.pop())s(e,e._hostNode);return e._hostNode}var p=e("./reactProdInvariant"),d=e("./DOMProperty"),f=e("./ReactDOMComponentFlags"),h=e("fbjs/lib/invariant"),m=d.ID_ATTRIBUTE_NAME,y=f,v="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:l,getInstanceFromNode:u,getNodeFromInstance:c,precacheChildNodes:s,precacheNode:i,uncacheNode:a};t.exports=g}).call(this,e("_process"))},{"./DOMProperty":40,"./ReactDOMComponentFlags":61,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],63:[function(e,t,n){(function(n){"use strict";function r(e,t){var r={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===i?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return"production"!==n.env.NODE_ENV&&(r._ancestorInfo=t?o.updatedAncestorInfo(null,r._tag,null):null),r}var o=e("./validateDOMNesting"),i=9;t.exports=r}).call(this,e("_process"))},{"./validateDOMNesting":155,_process:28}],64:[function(e,t,n){"use strict";var r=e("object-assign"),o=e("./DOMLazyTree"),i=e("./ReactDOMComponentTree"),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(e,t,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return i.precacheNode(this,u),o(u)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return i.getNodeFromInstance(this)},unmountComponent:function(){i.uncacheNode(this)}}),t.exports=a},{"./DOMLazyTree":38,"./ReactDOMComponentTree":62,"object-assign":27}],65:[function(e,t,n){"use strict";var r={useCreateElement:!0,useFiber:!1};t.exports=r},{}],66:[function(e,t,n){"use strict";var r=e("./DOMChildrenOperations"),o=e("./ReactDOMComponentTree"),i={dangerouslyProcessChildrenUpdates:function(e,t){var n=o.getNodeFromInstance(e);r.processUpdates(n,t)}};t.exports=i},{"./DOMChildrenOperations":37,"./ReactDOMComponentTree":62}],67:[function(e,t,n){(function(n){"use strict";function r(){this._rootNodeID&&b.updateWrapper(this)}function o(e){var t="checkbox"===e.type||"radio"===e.type;return t?null!=e.checked:null!=e.value}function i(e){var t=this._currentElement.props,o=u.executeOnChange(t,e);p.asap(r,this);var i=t.name;if("radio"===t.type&&null!=i){for(var s=c.getNodeFromInstance(this),l=s;l.parentNode;)l=l.parentNode;for(var f=l.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),h=0;h<f.length;h++){var m=f[h];if(m!==s&&m.form===s.form){var y=c.getInstanceFromNode(m);y?void 0:"production"!==n.env.NODE_ENV?d(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):a("90"),p.asap(r,y)}}}return o}var a=e("./reactProdInvariant"),s=e("object-assign"),l=e("./DOMPropertyOperations"),u=e("./LinkedValueUtils"),c=e("./ReactDOMComponentTree"),p=e("./ReactUpdates"),d=e("fbjs/lib/invariant"),f=e("fbjs/lib/warning"),h=!1,m=!1,y=!1,v=!1,g=!1,_=!1,b={getHostProps:function(e,t){var n=u.getValue(t),r=u.getChecked(t),o=s({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return o},mountWrapper:function(e,t){if("production"!==n.env.NODE_ENV){u.checkPropTypes("input",t,e._currentElement._owner);var r=e._currentElement._owner;void 0===t.valueLink||h||("production"!==n.env.NODE_ENV?f(!1,"`valueLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0,h=!0),void 0===t.checkedLink||m||("production"!==n.env.NODE_ENV?f(!1,"`checkedLink` prop on `input` is deprecated; set `value` and `onChange` instead."):void 0,m=!0),void 0===t.checked||void 0===t.defaultChecked||v||("production"!==n.env.NODE_ENV?f(!1,"%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",r&&r.getName()||"A component",t.type):void 0,v=!0),void 0===t.value||void 0===t.defaultValue||y||("production"!==n.env.NODE_ENV?f(!1,"%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",r&&r.getName()||"A component",t.type):void 0,y=!0)}var a=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:a,listeners:null,onChange:i.bind(e)},"production"!==n.env.NODE_ENV&&(e._wrapperState.controlled=o(t))},updateWrapper:function(e){var t=e._currentElement.props;if("production"!==n.env.NODE_ENV){var r=o(t),i=e._currentElement._owner;e._wrapperState.controlled||!r||_||("production"!==n.env.NODE_ENV?f(!1,"%s is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",i&&i.getName()||"A component",t.type):void 0,_=!0),!e._wrapperState.controlled||r||g||("production"!==n.env.NODE_ENV?f(!1,"%s is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",i&&i.getName()||"A component",t.type):void 0,g=!0)}var a=t.checked;null!=a&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",a||!1);var s=c.getNodeFromInstance(e),p=u.getValue(t);if(null!=p){var d=""+p;d!==s.value&&(s.value=d)}else null==t.value&&null!=t.defaultValue&&s.defaultValue!==""+t.defaultValue&&(s.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(s.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}};t.exports=b}).call(this,e("_process"))},{"./DOMPropertyOperations":41,"./LinkedValueUtils":52,"./ReactDOMComponentTree":62,"./ReactUpdates":106,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"object-assign":27}],68:[function(e,t,n){(function(n){"use strict";function r(e,t,r){if(u.hasOwnProperty(t)&&u[t])return!0;if(c.test(t)){var o=t.toLowerCase(),i=a.getPossibleStandardName.hasOwnProperty(o)?a.getPossibleStandardName[o]:null;if(null==i)return u[t]=!0,!1;if(t!==i)return"production"!==n.env.NODE_ENV?l(!1,"Unknown ARIA attribute %s. Did you mean %s?%s",t,i,s.getStackAddendumByID(r)):void 0,u[t]=!0,!0}return!0}function o(e,t){var o=[];for(var i in t.props){var a=r(t.type,i,e);a||o.push(i)}var u=o.map(function(e){return"`"+e+"`"}).join(", ");1===o.length?"production"!==n.env.NODE_ENV?l(!1,"Invalid aria prop %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",u,t.type,s.getStackAddendumByID(e)):void 0:o.length>1&&("production"!==n.env.NODE_ENV?l(!1,"Invalid aria props %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",u,t.type,s.getStackAddendumByID(e)):void 0)}function i(e,t){null!=t&&"string"==typeof t.type&&(t.type.indexOf("-")>=0||t.props.is||o(e,t))}var a=e("./DOMProperty"),s=e("react/lib/ReactComponentTreeHook"),l=e("fbjs/lib/warning"),u={},c=new RegExp("^(aria)-["+a.ATTRIBUTE_NAME_CHAR+"]*$"),p={onBeforeMountComponent:function(e,t){"production"!==n.env.NODE_ENV&&i(e,t)},onBeforeUpdateComponent:function(e,t){"production"!==n.env.NODE_ENV&&i(e,t)}};t.exports=p}).call(this,e("_process"))},{"./DOMProperty":40,_process:28,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],69:[function(e,t,n){(function(n){"use strict";function r(e,t){null!=t&&("input"!==t.type&&"textarea"!==t.type&&"select"!==t.type||null==t.props||null!==t.props.value||a||("production"!==n.env.NODE_ENV?i(!1,"`value` prop on `%s` should not be null. Consider using the empty string to clear the component or `undefined` for uncontrolled components.%s",t.type,o.getStackAddendumByID(e)):void 0,a=!0))}var o=e("react/lib/ReactComponentTreeHook"),i=e("fbjs/lib/warning"),a=!1,s={onBeforeMountComponent:function(e,t){r(e,t)},onBeforeUpdateComponent:function(e,t){r(e,t)}};t.exports=s}).call(this,e("_process"))},{_process:28,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],70:[function(e,t,n){(function(n){"use strict";function r(e){var t="";return i.Children.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:u||(u=!0,"production"!==n.env.NODE_ENV?l(!1,"Only strings and numbers are supported as <option> children."):void 0))}),t}var o=e("object-assign"),i=e("react/lib/React"),a=e("./ReactDOMComponentTree"),s=e("./ReactDOMSelect"),l=e("fbjs/lib/warning"),u=!1,c={mountWrapper:function(e,t,o){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?l(null==t.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."):void 0);var i=null;if(null!=o){var a=o;"optgroup"===a._tag&&(a=a._hostParent),null!=a&&"select"===a._tag&&(i=s.getSelectValueContext(a))}var u=null;if(null!=i){var c;if(c=null!=t.value?t.value+"":r(t.children),u=!1,Array.isArray(i)){for(var p=0;p<i.length;p++)if(""+i[p]===c){u=!0;break}}else u=""+i===c}e._wrapperState={selected:u}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=a.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=o({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var i=r(t.children);return i&&(n.children=i),n}};t.exports=c}).call(this,e("_process"))},{"./ReactDOMComponentTree":62,"./ReactDOMSelect":71,_process:28,"fbjs/lib/warning":24,"object-assign":27,"react/lib/React":159}],71:[function(e,t,n){(function(n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=u.getValue(e);null!=t&&a(this,Boolean(e.multiple),t)}}function o(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(e,t){var r=e._currentElement._owner;u.checkPropTypes("select",t,r),void 0===t.valueLink||f||("production"!==n.env.NODE_ENV?d(!1,"`valueLink` prop on `select` is deprecated; set `value` and `onChange` instead."):void 0,f=!0);for(var i=0;i<m.length;i++){var a=m[i];if(null!=t[a]){var s=Array.isArray(t[a]);t.multiple&&!s?"production"!==n.env.NODE_ENV?d(!1,"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",a,o(r)):void 0:!t.multiple&&s&&("production"!==n.env.NODE_ENV?d(!1,"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",a,o(r)):void 0)}}}function a(e,t,n){var r,o,i=c.getNodeFromInstance(e).options;if(t){for(r={},o=0;o<n.length;o++)r[""+n[o]]=!0;for(o=0;o<i.length;o++){var a=r.hasOwnProperty(i[o].value);i[o].selected!==a&&(i[o].selected=a)}}else{for(r=""+n,o=0;o<i.length;o++)if(i[o].value===r)return void(i[o].selected=!0);i.length&&(i[0].selected=!0)}}function s(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),p.asap(r,this),n}var l=e("object-assign"),u=e("./LinkedValueUtils"),c=e("./ReactDOMComponentTree"),p=e("./ReactUpdates"),d=e("fbjs/lib/warning"),f=!1,h=!1,m=["value","defaultValue"],y={getHostProps:function(e,t){return l({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){"production"!==n.env.NODE_ENV&&i(e,t);var r=u.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=r?r:t.defaultValue,listeners:null,onChange:s.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||h||("production"!==n.env.NODE_ENV?d(!1,"Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"):void 0,h=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var r=u.getValue(t);null!=r?(e._wrapperState.pendingUpdate=!1,a(e,Boolean(t.multiple),r)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?a(e,Boolean(t.multiple),t.defaultValue):a(e,Boolean(t.multiple),t.multiple?[]:""))}};t.exports=y}).call(this,e("_process"))},{"./LinkedValueUtils":52,"./ReactDOMComponentTree":62,"./ReactUpdates":106,_process:28,"fbjs/lib/warning":24,"object-assign":27}],72:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function o(e){var t=document.selection,n=t.createRange(),r=n.text.length,o=n.duplicate();o.moveToElementText(e),o.setEndPoint("EndToStart",n);var i=o.text.length,a=i+r;return{start:i,end:a}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,i=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(l){return null}var u=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=u?0:s.toString().length,p=s.cloneRange();p.selectNodeContents(e),p.setEnd(s.startContainer,s.startOffset);var d=r(p.startContainer,p.startOffset,p.endContainer,p.endOffset),f=d?0:p.toString().length,h=f+c,m=document.createRange();m.setStart(n,o),m.setEnd(i,a);var y=m.collapsed;return{start:y?h:f,end:y?f:h}}function a(e,t){var n=document.selection.createRange().duplicate(),r,o;void 0===t.end?(r=t.start,o=r):t.start>t.end?(r=t.end,o=t.start):(r=t.start,o=t.end),n.moveToElementText(e),n.moveStart("character",r),n.setEndPoint("EndToStart",n),n.moveEnd("character",o-r),n.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[c()].length,o=Math.min(t.start,r),i=void 0===t.end?o:Math.min(t.end,r);if(!n.extend&&o>i){var a=i;i=o,o=a}var s=u(e,o),l=u(e,i);if(s&&l){var p=document.createRange();p.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(p),n.extend(l.node,l.offset)):(p.setEnd(l.node,l.offset),n.addRange(p))}}}var l=e("fbjs/lib/ExecutionEnvironment"),u=e("./getNodeForCharacterOffset"),c=e("./getTextContentAccessor"),p=l.canUseDOM&&"selection"in document&&!("getSelection"in window),d={getOffsets:p?o:i,setOffsets:p?a:s};t.exports=d},{"./getNodeForCharacterOffset":142,"./getTextContentAccessor":143,"fbjs/lib/ExecutionEnvironment":3}],73:[function(e,t,n){(function(n){"use strict";var r=e("./reactProdInvariant"),o=e("object-assign"),i=e("./DOMChildrenOperations"),a=e("./DOMLazyTree"),s=e("./ReactDOMComponentTree"),l=e("./escapeTextContentForBrowser"),u=e("fbjs/lib/invariant"),c=e("./validateDOMNesting"),p=function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null};o(p.prototype,{mountComponent:function(e,t,r,o){if("production"!==n.env.NODE_ENV){var i;null!=t?i=t._ancestorInfo:null!=r&&(i=r._ancestorInfo),i&&c(null,this._stringText,this,i)}var u=r._idCounter++,p=" react-text: "+u+" ",d=" /react-text ";if(this._domID=u,this._hostParent=t,e.useCreateElement){var f=r._ownerDocument,h=f.createComment(p),m=f.createComment(d),y=a(f.createDocumentFragment());return a.queueChild(y,a(h)),this._stringText&&a.queueChild(y,a(f.createTextNode(this._stringText))),a.queueChild(y,a(m)),s.precacheNode(this,h),this._closingComment=m,y}var v=l(this._stringText);return e.renderToStaticMarkup?v:"<!--"+p+"-->"+v+"<!--"+d+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();i.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),o=t.nextSibling;;){if(null==o?"production"!==n.env.NODE_ENV?u(!1,"Missing closing comment for text component %s",this._domID):r("67",this._domID):void 0,8===o.nodeType&&" /react-text "===o.nodeValue){this._closingComment=o;break}o=o.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=p}).call(this,e("_process"))},{"./DOMChildrenOperations":37,"./DOMLazyTree":38,"./ReactDOMComponentTree":62,"./escapeTextContentForBrowser":131,"./reactProdInvariant":149,"./validateDOMNesting":155,_process:28,"fbjs/lib/invariant":17,"object-assign":27}],74:[function(e,t,n){(function(n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function o(e){var t=this._currentElement.props,n=s.executeOnChange(t,e);
return u.asap(r,this),n}var i=e("./reactProdInvariant"),a=e("object-assign"),s=e("./LinkedValueUtils"),l=e("./ReactDOMComponentTree"),u=e("./ReactUpdates"),c=e("fbjs/lib/invariant"),p=e("fbjs/lib/warning"),d=!1,f=!1,h={getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?"production"!==n.env.NODE_ENV?c(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):i("91"):void 0;var r=a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return r},mountWrapper:function(e,t){"production"!==n.env.NODE_ENV&&(s.checkPropTypes("textarea",t,e._currentElement._owner),void 0===t.valueLink||d||("production"!==n.env.NODE_ENV?p(!1,"`valueLink` prop on `textarea` is deprecated; set `value` and `onChange` instead."):void 0,d=!0),void 0===t.value||void 0===t.defaultValue||f||("production"!==n.env.NODE_ENV?p(!1,"Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components"):void 0,f=!0));var r=s.getValue(t),a=r;if(null==r){var l=t.defaultValue,u=t.children;null!=u&&("production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?p(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."):void 0),null!=l?"production"!==n.env.NODE_ENV?c(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."):i("92"):void 0,Array.isArray(u)&&(u.length<=1?void 0:"production"!==n.env.NODE_ENV?c(!1,"<textarea> can only have at most one child."):i("93"),u=u[0]),l=""+u),null==l&&(l=""),a=l}e._wrapperState={initialValue:""+a,listeners:null,onChange:o.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=l.getNodeFromInstance(e),r=s.getValue(t);if(null!=r){var o=""+r;o!==n.value&&(n.value=o),null==t.defaultValue&&(n.defaultValue=o)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=l.getNodeFromInstance(e),n=t.textContent;n===e._wrapperState.initialValue&&(t.value=n)}};t.exports=h}).call(this,e("_process"))},{"./LinkedValueUtils":52,"./ReactDOMComponentTree":62,"./ReactUpdates":106,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"object-assign":27}],75:[function(e,t,n){(function(n){"use strict";function r(e,t){"_hostNode"in e?void 0:"production"!==n.env.NODE_ENV?u(!1,"getNodeFromInstance: Invalid argument."):l("33"),"_hostNode"in t?void 0:"production"!==n.env.NODE_ENV?u(!1,"getNodeFromInstance: Invalid argument."):l("33");for(var r=0,o=e;o;o=o._hostParent)r++;for(var i=0,a=t;a;a=a._hostParent)i++;for(;r-i>0;)e=e._hostParent,r--;for(;i-r>0;)t=t._hostParent,i--;for(var s=r;s--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function o(e,t){"_hostNode"in e?void 0:"production"!==n.env.NODE_ENV?u(!1,"isAncestor: Invalid argument."):l("35"),"_hostNode"in t?void 0:"production"!==n.env.NODE_ENV?u(!1,"isAncestor: Invalid argument."):l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function i(e){return"_hostNode"in e?void 0:"production"!==n.env.NODE_ENV?u(!1,"getParentInstance: Invalid argument."):l("36"),e._hostParent}function a(e,t,n){for(var r=[];e;)r.push(e),e=e._hostParent;var o;for(o=r.length;o-- >0;)t(r[o],"captured",n);for(o=0;o<r.length;o++)t(r[o],"bubbled",n)}function s(e,t,n,o,i){for(var a=e&&t?r(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var l=[];t&&t!==a;)l.push(t),t=t._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],"bubbled",o);for(u=l.length;u-- >0;)n(l[u],"captured",i)}var l=e("./reactProdInvariant"),u=e("fbjs/lib/invariant");t.exports={isAncestor:o,getLowestCommonAncestor:r,getParentInstance:i,traverseTwoPhase:a,traverseEnterLeave:s}}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],76:[function(e,t,n){(function(n){"use strict";function r(e,t){null!=t&&"string"==typeof t.type&&(t.type.indexOf("-")>=0||t.props.is||p(e,t))}var o=e("./DOMProperty"),i=e("./EventPluginRegistry"),a=e("react/lib/ReactComponentTreeHook"),s=e("fbjs/lib/warning");if("production"!==n.env.NODE_ENV)var l={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0,autoFocus:!0,defaultValue:!0,valueLink:!0,defaultChecked:!0,checkedLink:!0,innerHTML:!0,suppressContentEditableWarning:!0,onFocusIn:!0,onFocusOut:!0},u={},c=function(e,t,r){if(o.properties.hasOwnProperty(t)||o.isCustomAttribute(t))return!0;if(l.hasOwnProperty(t)&&l[t]||u.hasOwnProperty(t)&&u[t])return!0;if(i.registrationNameModules.hasOwnProperty(t))return!0;u[t]=!0;var c=t.toLowerCase(),p=o.isCustomAttribute(c)?c:o.getPossibleStandardName.hasOwnProperty(c)?o.getPossibleStandardName[c]:null,d=i.possibleRegistrationNames.hasOwnProperty(c)?i.possibleRegistrationNames[c]:null;return null!=p?("production"!==n.env.NODE_ENV?s(!1,"Unknown DOM property %s. Did you mean %s?%s",t,p,a.getStackAddendumByID(r)):void 0,!0):null!=d&&("production"!==n.env.NODE_ENV?s(!1,"Unknown event handler property %s. Did you mean `%s`?%s",t,d,a.getStackAddendumByID(r)):void 0,!0)};var p=function(e,t){var r=[];for(var o in t.props){var i=c(t.type,o,e);i||r.push(o)}var l=r.map(function(e){return"`"+e+"`"}).join(", ");1===r.length?"production"!==n.env.NODE_ENV?s(!1,"Unknown prop %s on <%s> tag. Remove this prop from the element. For details, see https://fb.me/react-unknown-prop%s",l,t.type,a.getStackAddendumByID(e)):void 0:r.length>1&&("production"!==n.env.NODE_ENV?s(!1,"Unknown props %s on <%s> tag. Remove these props from the element. For details, see https://fb.me/react-unknown-prop%s",l,t.type,a.getStackAddendumByID(e)):void 0)},d={onBeforeMountComponent:function(e,t){r(e,t)},onBeforeUpdateComponent:function(e,t){r(e,t)}};t.exports=d}).call(this,e("_process"))},{"./DOMProperty":40,"./EventPluginRegistry":46,_process:28,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],77:[function(e,t,n){(function(n){"use strict";function r(e,t,r,o,i,a,s,l){try{t.call(r,o,i,a,s,l)}catch(u){"production"!==n.env.NODE_ENV?x(E[e],"Exception thrown by hook while handling %s: %s",e,u+"\n"+u.stack):void 0,E[e]=!0}}function o(e,t,n,o,i,a){for(var s=0;s<w.length;s++){var l=w[s],u=l[e];u&&r(e,u,l,t,n,o,i,a)}}function i(){g.purgeUnmountedComponents(),v.clearHistory()}function a(e){return e.reduce(function(e,t){var n=g.getOwnerID(t),r=g.getParentID(t);return e[t]={displayName:g.getDisplayName(t),text:g.getText(t),updateCount:g.getUpdateCount(t),childIDs:g.getChildIDs(t),ownerID:n||r&&g.getOwnerID(r)||0,parentID:r},e},{})}function s(){var e=M,t=O,n=v.getHistory();if(0===P)return M=0,O=[],void i();if(t.length||n.length){var r=g.getRegisteredIDs();C.push({duration:b()-e,measurements:t||[],operations:n||[],treeSnapshot:a(r)})}i(),M=b(),O=[]}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&0===e||e||("production"!==n.env.NODE_ENV?x(!1,"ReactDebugTool: debugID may not be empty."):void 0)}function u(e,t){0!==P&&(I&&!L&&("production"!==n.env.NODE_ENV?x(!1,"There is an internal error in the React performance measurement code. Did not expect %s timer to start while %s timer is still in progress for %s instance.",t,I||"no",e===D?"the same":"another"):void 0,L=!0),T=b(),N=0,D=e,I=t)}function c(e,t){0!==P&&(I===t||L||("production"!==n.env.NODE_ENV?x(!1,"There is an internal error in the React performance measurement code. We did not expect %s timer to stop while %s timer is still in progress for %s instance. Please report this as a bug in React.",t,I||"no",e===D?"the same":"another"):void 0,L=!0),k&&O.push({timerType:t,instanceID:e,duration:b()-T-N}),T=0,N=0,D=null,I=null)}function p(){var e={startTime:T,nestedFlushStartTime:b(),debugID:D,timerType:I};S.push(e),T=0,N=0,D=null,I=null}function d(){var e=S.pop(),t=e.startTime,n=e.nestedFlushStartTime,r=e.debugID,o=e.timerType,i=b()-n;T=t,N+=i,D=r,I=o}function f(e){if(!k||!A)return!1;var t=g.getElement(e);if(null==t||"object"!=typeof t)return!1;var n="string"==typeof t.type;return!n}function h(e,t){if(f(e)){var n=e+"::"+t;R=b(),performance.mark(n)}}function m(e,t){if(f(e)){var n=e+"::"+t,r=g.getDisplayName(e)||"Unknown",o=b();if(o-R>.1){var i=r+" ["+t+"]";performance.measure(i,n)}performance.clearMarks(n),performance.clearMeasures(i)}}var y=e("./ReactInvalidSetStateWarningHook"),v=e("./ReactHostOperationHistoryHook"),g=e("react/lib/ReactComponentTreeHook"),_=e("fbjs/lib/ExecutionEnvironment"),b=e("fbjs/lib/performanceNow"),x=e("fbjs/lib/warning"),w=[],E={},k=!1,C=[],S=[],P=0,O=[],M=0,D=null,T=0,N=0,I=null,L=!1,R=0,A="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,j={addHook:function(e){w.push(e)},removeHook:function(e){for(var t=0;t<w.length;t++)w[t]===e&&(w.splice(t,1),t--)},isProfiling:function(){return k},beginProfiling:function(){k||(k=!0,C.length=0,s(),j.addHook(v))},endProfiling:function(){k&&(k=!1,s(),j.removeHook(v))},getFlushHistory:function(){return C},onBeginFlush:function(){P++,s(),p(),o("onBeginFlush")},onEndFlush:function(){s(),P--,d(),o("onEndFlush")},onBeginLifeCycleTimer:function(e,t){l(e),o("onBeginLifeCycleTimer",e,t),h(e,t),u(e,t)},onEndLifeCycleTimer:function(e,t){l(e),c(e,t),m(e,t),o("onEndLifeCycleTimer",e,t)},onBeginProcessingChildContext:function(){o("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){o("onEndProcessingChildContext")},onHostOperation:function(e){l(e.instanceID),o("onHostOperation",e)},onSetState:function(){o("onSetState")},onSetChildren:function(e,t){l(e),t.forEach(l),o("onSetChildren",e,t)},onBeforeMountComponent:function(e,t,n){l(e),l(n,!0),o("onBeforeMountComponent",e,t,n),h(e,"mount")},onMountComponent:function(e){l(e),m(e,"mount"),o("onMountComponent",e)},onBeforeUpdateComponent:function(e,t){l(e),o("onBeforeUpdateComponent",e,t),h(e,"update")},onUpdateComponent:function(e){l(e),m(e,"update"),o("onUpdateComponent",e)},onBeforeUnmountComponent:function(e){l(e),o("onBeforeUnmountComponent",e),h(e,"unmount")},onUnmountComponent:function(e){l(e),m(e,"unmount"),o("onUnmountComponent",e)},onTestEvent:function(){o("onTestEvent")}};j.addDevtool=j.addHook,j.removeDevtool=j.removeHook,j.addHook(y),j.addHook(g);var z=_.canUseDOM&&window.location.href||"";/[?&]react_perf\b/.test(z)&&j.beginProfiling(),t.exports=j}).call(this,e("_process"))},{"./ReactHostOperationHistoryHook":87,"./ReactInvalidSetStateWarningHook":92,_process:28,"fbjs/lib/ExecutionEnvironment":3,"fbjs/lib/performanceNow":22,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],78:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var o=e("object-assign"),i=e("./ReactUpdates"),a=e("./Transaction"),s=e("fbjs/lib/emptyFunction"),l={initialize:s,close:function(){d.isBatchingUpdates=!1}},u={initialize:s,close:i.flushBatchedUpdates.bind(i)},c=[u,l];o(r.prototype,a,{getTransactionWrappers:function(){return c}});var p=new r,d={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,o,i){var a=d.isBatchingUpdates;return d.isBatchingUpdates=!0,a?e(t,n,r,o,i):p.perform(e,null,t,n,r,o,i)}};t.exports=d},{"./ReactUpdates":106,"./Transaction":124,"fbjs/lib/emptyFunction":9,"object-assign":27}],79:[function(e,t,n){"use strict";function r(){E||(E=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(s),g.EventPluginUtils.injectComponentTree(d),g.EventPluginUtils.injectTreeTraversal(h),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:l,ChangeEventPlugin:a,SelectEventPlugin:x,BeforeInputEventPlugin:i}),g.HostComponent.injectGenericComponentClass(p),g.HostComponent.injectTextComponentClass(m),g.DOMProperty.injectDOMPropertyConfig(o),g.DOMProperty.injectDOMPropertyConfig(u),g.DOMProperty.injectDOMPropertyConfig(b),g.EmptyComponent.injectEmptyComponentFactory(function(e){return new f(e)}),g.Updates.injectReconcileTransaction(_),g.Updates.injectBatchingStrategy(y),g.Component.injectEnvironment(c))}var o=e("./ARIADOMPropertyConfig"),i=e("./BeforeInputEventPlugin"),a=e("./ChangeEventPlugin"),s=e("./DefaultEventPluginOrder"),l=e("./EnterLeaveEventPlugin"),u=e("./HTMLDOMPropertyConfig"),c=e("./ReactComponentBrowserEnvironment"),p=e("./ReactDOMComponent"),d=e("./ReactDOMComponentTree"),f=e("./ReactDOMEmptyComponent"),h=e("./ReactDOMTreeTraversal"),m=e("./ReactDOMTextComponent"),y=e("./ReactDefaultBatchingStrategy"),v=e("./ReactEventListener"),g=e("./ReactInjection"),_=e("./ReactReconcileTransaction"),b=e("./SVGDOMPropertyConfig"),x=e("./SelectEventPlugin"),w=e("./SimpleEventPlugin"),E=!1;t.exports={inject:r}},{"./ARIADOMPropertyConfig":30,"./BeforeInputEventPlugin":32,"./ChangeEventPlugin":36,"./DefaultEventPluginOrder":43,"./EnterLeaveEventPlugin":44,"./HTMLDOMPropertyConfig":50,"./ReactComponentBrowserEnvironment":56,"./ReactDOMComponent":60,"./ReactDOMComponentTree":62,"./ReactDOMEmptyComponent":64,"./ReactDOMTextComponent":73,"./ReactDOMTreeTraversal":75,"./ReactDefaultBatchingStrategy":78,"./ReactEventListener":84,"./ReactInjection":88,"./ReactReconcileTransaction":100,"./SVGDOMPropertyConfig":108,"./SelectEventPlugin":109,"./SimpleEventPlugin":110}],80:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;t.exports=r},{}],81:[function(e,t,n){"use strict";var r,o={injectEmptyComponentFactory:function(e){r=e}},i={create:function(e){return r(e)}};i.injection=o,t.exports=i},{}],82:[function(e,t,n){(function(e){"use strict";function n(e,t,n){try{t(n)}catch(o){null===r&&(r=o)}}var r=null,o={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};if("production"!==e.env.NODE_ENV&&"undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var i=document.createElement("react");o.invokeGuardedCallback=function(e,t,n){var r=t.bind(null,n),o="react-"+e;i.addEventListener(o,r,!1);var a=document.createEvent("Event");a.initEvent(o,!1,!1),i.dispatchEvent(a),i.removeEventListener(o,r,!1)}}t.exports=o}).call(this,e("_process"))},{_process:28}],83:[function(e,t,n){"use strict";function r(e){o.enqueueEvents(e),o.processEventQueue(!1)}var o=e("./EventPluginHub"),i={handleTopLevel:function(e,t,n,i){var a=o.extractEvents(e,t,n,i);r(a)}};t.exports=i},{"./EventPluginHub":45}],84:[function(e,t,n){"use strict";function r(e){for(;e._hostParent;)e=e._hostParent;var t=p.getNodeFromInstance(e),n=t.parentNode;return p.getClosestInstanceFromNode(n)}function o(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){var t=f(e.nativeEvent),n=p.getClosestInstanceFromNode(t),o=n;do e.ancestors.push(o),o=o&&r(o);while(o);for(var i=0;i<e.ancestors.length;i++)n=e.ancestors[i],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function a(e){var t=h(window);e(t)}var s=e("object-assign"),l=e("fbjs/lib/EventListener"),u=e("fbjs/lib/ExecutionEnvironment"),c=e("./PooledClass"),p=e("./ReactDOMComponentTree"),d=e("./ReactUpdates"),f=e("./getEventTarget"),h=e("fbjs/lib/getUnboundedScrollPosition");s(o.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(o,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){return n?l.listen(n,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){return n?l.capture(n,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=o.getPooled(e,t);try{d.batchedUpdates(i,n)}finally{o.release(n)}}}};t.exports=m},{"./PooledClass":53,"./ReactDOMComponentTree":62,"./ReactUpdates":106,"./getEventTarget":138,"fbjs/lib/EventListener":2,"fbjs/lib/ExecutionEnvironment":3,"fbjs/lib/getUnboundedScrollPosition":14,"object-assign":27}],85:[function(e,t,n){"use strict";var r={logTopLevelRenders:!1};t.exports=r},{}],86:[function(e,t,n){(function(n){"use strict";function r(e){return l?void 0:"production"!==n.env.NODE_ENV?s(!1,"There is no registered component for the tag %s",e.type):a("111",e.type),new l(e)}function o(e){return new u(e)}function i(e){return e instanceof u}var a=e("./reactProdInvariant"),s=e("fbjs/lib/invariant"),l=null,u=null,c={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){u=e}},p={createInternalComponent:r,createInstanceForText:o,isTextComponent:i,injection:c};t.exports=p}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],87:[function(e,t,n){"use strict";var r=[],o={onHostOperation:function(e){r.push(e)},clearHistory:function(){o._preventClearing||(r=[])},getHistory:function(){return r}};t.exports=o},{}],88:[function(e,t,n){"use strict";var r=e("./DOMProperty"),o=e("./EventPluginHub"),i=e("./EventPluginUtils"),a=e("./ReactComponentEnvironment"),s=e("./ReactEmptyComponent"),l=e("./ReactBrowserEventEmitter"),u=e("./ReactHostComponent"),c=e("./ReactUpdates"),p={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:o.injection,EventPluginUtils:i.injection,EventEmitter:l.injection,HostComponent:u.injection,Updates:c.injection};t.exports=p},{"./DOMProperty":40,"./EventPluginHub":45,"./EventPluginUtils":47,"./ReactBrowserEventEmitter":54,"./ReactComponentEnvironment":57,"./ReactEmptyComponent":81,"./ReactHostComponent":86,"./ReactUpdates":106}],89:[function(e,t,n){"use strict";function r(e){return i(document.documentElement,e)}var o=e("./ReactDOMSelection"),i=e("fbjs/lib/containsNode"),a=e("fbjs/lib/focusNode"),s=e("fbjs/lib/getActiveElement"),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,o=e.selectionRange;t!==n&&r(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,o),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=o.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if(void 0===r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else o.setOffsets(e,t)}};t.exports=l},{"./ReactDOMSelection":72,"fbjs/lib/containsNode":6,"fbjs/lib/focusNode":11,"fbjs/lib/getActiveElement":12}],90:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],91:[function(e,t,n){(function(n){"use strict";var r=null;if("production"!==n.env.NODE_ENV){var o=e("./ReactDebugTool");r=o}t.exports={debugTool:r}}).call(this,e("_process"))},{"./ReactDebugTool":77,_process:28}],92:[function(e,t,n){(function(n){"use strict";var r=e("fbjs/lib/warning");if("production"!==n.env.NODE_ENV)var o=!1,i=function(){"production"!==n.env.NODE_ENV?r(!o,"setState(...): Cannot call setState() inside getChildContext()"):void 0};var a={onBeginProcessingChildContext:function(){o=!0},onEndProcessingChildContext:function(){o=!1},onSetState:function(){i()}};t.exports=a}).call(this,e("_process"))},{_process:28,"fbjs/lib/warning":24}],93:[function(e,t,n){"use strict";var r=e("./adler32"),o=/\/?>/,i=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return i.test(e)?e:e.replace(o," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var o=r(e);return o===n}};t.exports=a},{"./adler32":127}],94:[function(e,t,n){(function(n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function o(e){return e?e.nodeType===F?e.documentElement:e.firstChild:null}function i(e){return e.getAttribute&&e.getAttribute(j)||""}function a(e,t,n,r,o){var i;if(k.logTopLevelRenders){var a=e._currentElement.props.child,s=a.type;i="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(i)}var l=O.mountComponent(e,n,null,w(e,t),o,0);i&&console.timeEnd(i),e._renderedComponent._topLevelWrapper=e,H._mountImageIntoNode(l,t,e,r,n)}function s(e,t,n,r){var o=D.ReactReconcileTransaction.getPooled(!n&&E.useCreateElement);o.perform(a,null,e,t,o,n,r),D.ReactReconcileTransaction.release(o)}function l(e,t,r){for("production"!==n.env.NODE_ENV&&S.debugTool.onBeginFlush(),O.unmountComponent(e,r),"production"!==n.env.NODE_ENV&&S.debugTool.onEndFlush(),t.nodeType===F&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=o(e);if(t){var n=x.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){var t=o(e);return!(!t||!d(t)||x.getInstanceFromNode(t))}function p(e){return!(!e||e.nodeType!==V&&e.nodeType!==F&&e.nodeType!==B)}function d(e){return p(e)&&(e.hasAttribute(z)||e.hasAttribute(j))}function f(e){var t=o(e),n=t&&x.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function h(e){var t=f(e);return t?t._hostContainerInfo._topLevelWrapper:null}var m=e("./reactProdInvariant"),y=e("./DOMLazyTree"),v=e("./DOMProperty"),g=e("react/lib/React"),_=e("./ReactBrowserEventEmitter"),b=e("react/lib/ReactCurrentOwner"),x=e("./ReactDOMComponentTree"),w=e("./ReactDOMContainerInfo"),E=e("./ReactDOMFeatureFlags"),k=e("./ReactFeatureFlags"),C=e("./ReactInstanceMap"),S=e("./ReactInstrumentation"),P=e("./ReactMarkupChecksum"),O=e("./ReactReconciler"),M=e("./ReactUpdateQueue"),D=e("./ReactUpdates"),T=e("fbjs/lib/emptyObject"),N=e("./instantiateReactComponent"),I=e("fbjs/lib/invariant"),L=e("./setInnerHTML"),R=e("./shouldUpdateReactComponent"),A=e("fbjs/lib/warning"),j=v.ID_ATTRIBUTE_NAME,z=v.ROOT_ATTRIBUTE_NAME,V=1,F=9,B=11,U={},W=1,q=function(){this.rootID=W++};q.prototype.isReactComponent={},"production"!==n.env.NODE_ENV&&(q.displayName="TopLevelWrapper"),q.prototype.render=function(){return this.props.child},q.isReactTopLevelWrapper=!0;var H={TopLevelWrapper:q,_instancesByReactRootID:U,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r,o){return H.scrollMonitor(r,function(){M.enqueueElementInternal(e,t,n),o&&M.enqueueCallbackInternal(e,o)}),e},_renderNewRootComponent:function(e,t,r,o){"production"!==n.env.NODE_ENV?A(null==b.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",b.current&&b.current.getName()||"ReactCompositeComponent"):void 0,p(t)?void 0:"production"!==n.env.NODE_ENV?I(!1,"_registerComponent(...): Target container is not a DOM element."):m("37"),_.ensureScrollValueMonitoring();var i=N(e,!1);D.batchedUpdates(s,i,t,r,o);var a=i._instance.rootID;return U[a]=i,i},renderSubtreeIntoContainer:function(e,t,r,o){return null!=e&&C.has(e)?void 0:"production"!==n.env.NODE_ENV?I(!1,"parentComponent must be a valid React Component"):m("38"),H._renderSubtreeIntoContainer(e,t,r,o)},_renderSubtreeIntoContainer:function(e,t,r,a){M.validateCallback(a,"ReactDOM.render"),g.isValidElement(t)?void 0:"production"!==n.env.NODE_ENV?I(!1,"ReactDOM.render(): Invalid component element.%s","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":""):m("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":""),"production"!==n.env.NODE_ENV?A(!r||!r.tagName||"BODY"!==r.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app."):void 0;var s=g.createElement(q,{child:t}),l;if(e){var c=C.get(e);l=c._processChildContext(c._context)}else l=T;var p=h(r);if(p){var d=p._currentElement,f=d.props.child;if(R(f,t)){var y=p._renderedComponent.getPublicInstance(),v=a&&function(){a.call(y)};return H._updateRootComponent(p,s,l,r,v),y}H.unmountComponentAtNode(r)}var _=o(r),b=_&&!!i(_),x=u(r);if("production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?A(!x,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."):void 0,!b||_.nextSibling))for(var w=_;w;){if(i(w)){"production"!==n.env.NODE_ENV?A(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup."):void 0;break}w=w.nextSibling}var E=b&&!p&&!x,k=H._renderNewRootComponent(s,r,E,l)._renderedComponent.getPublicInstance();return a&&a.call(k),k},render:function(e,t,n){return H._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){"production"!==n.env.NODE_ENV?A(null==b.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",b.current&&b.current.getName()||"ReactCompositeComponent"):void 0,p(e)?void 0:"production"!==n.env.NODE_ENV?I(!1,"unmountComponentAtNode(...): Target container is not a DOM element."):m("40"),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?A(!c(e),"unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."):void 0);var t=h(e);if(!t){var r=u(e),o=1===e.nodeType&&e.hasAttribute(z);return"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?A(!r,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",o?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."):void 0),!1}return delete U[t._instance.rootID],D.batchedUpdates(l,t,e,!1),!0},_mountImageIntoNode:function(e,t,i,a,s){if(p(t)?void 0:"production"!==n.env.NODE_ENV?I(!1,"mountComponentIntoNode(...): Target container is not valid."):m("41"),a){var l=o(t);if(P.canReuseMarkup(e,l))return void x.precacheNode(i,l);var u=l.getAttribute(P.CHECKSUM_ATTR_NAME);l.removeAttribute(P.CHECKSUM_ATTR_NAME);var c=l.outerHTML;l.setAttribute(P.CHECKSUM_ATTR_NAME,u);var d=e;if("production"!==n.env.NODE_ENV){var f;t.nodeType===V?(f=document.createElement("div"),f.innerHTML=e,d=f.innerHTML):(f=document.createElement("iframe"),document.body.appendChild(f),f.contentDocument.write(e),d=f.contentDocument.documentElement.outerHTML,document.body.removeChild(f))}var h=r(d,c),v=" (client) "+d.substring(h-20,h+20)+"\n (server) "+c.substring(h-20,h+20);t.nodeType===F?"production"!==n.env.NODE_ENV?I(!1,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",v):m("42",v):void 0,"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?A(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",v):void 0)}if(t.nodeType===F?"production"!==n.env.NODE_ENV?I(!1,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):m("43"):void 0,s.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);y.insertTreeBefore(t,e,null)}else L(t,e),x.precacheNode(i,t.firstChild);if("production"!==n.env.NODE_ENV){var g=x.getInstanceFromNode(t.firstChild);0!==g._debugID&&S.debugTool.onHostOperation({instanceID:g._debugID,type:"mount",payload:e.toString()})}}};t.exports=H}).call(this,e("_process"))},{"./DOMLazyTree":38,"./DOMProperty":40,"./ReactBrowserEventEmitter":54,"./ReactDOMComponentTree":62,"./ReactDOMContainerInfo":63,"./ReactDOMFeatureFlags":65,"./ReactFeatureFlags":85,"./ReactInstanceMap":90,"./ReactInstrumentation":91,"./ReactMarkupChecksum":93,"./ReactReconciler":101,"./ReactUpdateQueue":105,"./ReactUpdates":106,"./instantiateReactComponent":145,"./reactProdInvariant":149,"./setInnerHTML":151,"./shouldUpdateReactComponent":153,_process:28,"fbjs/lib/emptyObject":10,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"react/lib/React":159,"react/lib/ReactCurrentOwner":164}],95:[function(e,t,n){(function(n){"use strict";function r(e,t,n){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function o(e,t,n){return{type:"MOVE_EXISTING",content:null,fromIndex:e._mountIndex,fromNode:m.getHostNode(e),toIndex:n,afterNode:t}}function i(e,t){return{type:"REMOVE_NODE",content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:"SET_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:"TEXT_CONTENT",content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){p.processChildrenUpdates(e,t)}var c=e("./reactProdInvariant"),p=e("./ReactComponentEnvironment"),d=e("./ReactInstanceMap"),f=e("./ReactInstrumentation"),h=e("react/lib/ReactCurrentOwner"),m=e("./ReactReconciler"),y=e("./ReactChildReconciler"),v=e("fbjs/lib/emptyFunction"),g=e("./flattenChildren"),_=e("fbjs/lib/invariant"),b=v;if("production"!==n.env.NODE_ENV){var x=function(e){if(!e._debugID){var t;(t=d.get(e))&&(e=t)}return e._debugID};b=function(e){var t=x(this);0!==t&&f.debugTool.onSetChildren(t,e?Object.keys(e).map(function(t){return e[t]._debugID}):[])}}var w={Mixin:{_reconcilerInstantiateChildren:function(e,t,r){if("production"!==n.env.NODE_ENV){
var o=x(this);if(this._currentElement)try{return h.current=this._currentElement._owner,y.instantiateChildren(e,t,r,o)}finally{h.current=null}}return y.instantiateChildren(e,t,r)},_reconcilerUpdateChildren:function(e,t,r,o,i,a){var s,l=0;if("production"!==n.env.NODE_ENV&&(l=x(this),this._currentElement)){try{h.current=this._currentElement._owner,s=g(t,l)}finally{h.current=null}return y.updateChildren(e,s,r,o,i,this,this._hostContainerInfo,a,l),s}return s=g(t,l),y.updateChildren(e,s,r,o,i,this,this._hostContainerInfo,a,l),s},mountChildren:function(e,t,r){var o=this._reconcilerInstantiateChildren(e,t,r);this._renderedChildren=o;var i=[],a=0;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s],u=0;"production"!==n.env.NODE_ENV&&(u=x(this));var c=m.mountComponent(l,t,this,this._hostContainerInfo,r,u);l._mountIndex=a++,i.push(c)}return"production"!==n.env.NODE_ENV&&b.call(this,o),i},updateTextContent:function(e){var t=this._renderedChildren;y.unmountChildren(t,!1);for(var r in t)t.hasOwnProperty(r)&&("production"!==n.env.NODE_ENV?_(!1,"updateTextContent called on non-empty component."):c("118"));var o=[s(e)];u(this,o)},updateMarkup:function(e){var t=this._renderedChildren;y.unmountChildren(t,!1);for(var r in t)t.hasOwnProperty(r)&&("production"!==n.env.NODE_ENV?_(!1,"updateTextContent called on non-empty component."):c("118"));var o=[a(e)];u(this,o)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,r){var o=this._renderedChildren,i={},a=[],s=this._reconcilerUpdateChildren(o,e,a,i,t,r);if(s||o){var c=null,p,d=0,f=0,h=0,y=null;for(p in s)if(s.hasOwnProperty(p)){var v=o&&o[p],g=s[p];v===g?(c=l(c,this.moveChild(v,y,d,f)),f=Math.max(v._mountIndex,f),v._mountIndex=d):(v&&(f=Math.max(v._mountIndex,f)),c=l(c,this._mountChildAtIndex(g,a[h],y,d,t,r)),h++),d++,y=m.getHostNode(g)}for(p in i)i.hasOwnProperty(p)&&(c=l(c,this._unmountChild(o[p],i[p])));c&&u(this,c),this._renderedChildren=s,"production"!==n.env.NODE_ENV&&b.call(this,s)}},unmountChildren:function(e){var t=this._renderedChildren;y.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,r){if(e._mountIndex<r)return o(e,t,n)},createChild:function(e,t,n){return r(n,t,e._mountIndex)},removeChild:function(e,t){return i(e,t)},_mountChildAtIndex:function(e,t,n,r,o,i){return e._mountIndex=r,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}};t.exports=w}).call(this,e("_process"))},{"./ReactChildReconciler":55,"./ReactComponentEnvironment":57,"./ReactInstanceMap":90,"./ReactInstrumentation":91,"./ReactReconciler":101,"./flattenChildren":133,"./reactProdInvariant":149,_process:28,"fbjs/lib/emptyFunction":9,"fbjs/lib/invariant":17,"react/lib/ReactCurrentOwner":164}],96:[function(e,t,n){(function(n){"use strict";var r=e("./reactProdInvariant"),o=e("react/lib/React"),i=e("fbjs/lib/invariant"),a={HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?a.EMPTY:o.isValidElement(e)?"function"==typeof e.type?a.COMPOSITE:a.HOST:void("production"!==n.env.NODE_ENV?i(!1,"Unexpected node: %s",e):r("26",e))}};t.exports=a}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"react/lib/React":159}],97:[function(e,t,n){(function(n){"use strict";function r(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)}var o=e("./reactProdInvariant"),i=e("fbjs/lib/invariant"),a={addComponentAsRefTo:function(e,t,a){r(a)?void 0:"production"!==n.env.NODE_ENV?i(!1,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):o("119"),a.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,a){r(a)?void 0:"production"!==n.env.NODE_ENV?i(!1,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):o("120");var s=a.getPublicInstance();s&&s.refs[t]===e.getPublicInstance()&&a.detachRef(t)}};t.exports=a}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],98:[function(e,t,n){(function(e){"use strict";var n={};"production"!==e.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),t.exports=n}).call(this,e("_process"))},{_process:28}],99:[function(e,t,n){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=r},{}],100:[function(e,t,n){(function(n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.useCreateElement=e}var o=e("object-assign"),i=e("./CallbackQueue"),a=e("./PooledClass"),s=e("./ReactBrowserEventEmitter"),l=e("./ReactInputSelection"),u=e("./ReactInstrumentation"),c=e("./Transaction"),p=e("./ReactUpdateQueue"),d={initialize:l.getSelectionInformation,close:l.restoreSelection},f={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},m=[d,f,h];"production"!==n.env.NODE_ENV&&m.push({initialize:u.debugTool.onBeginFlush,close:u.debugTool.onEndFlush});var y={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return p},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null}};o(r.prototype,c,y),a.addPoolingTo(r),t.exports=r}).call(this,e("_process"))},{"./CallbackQueue":35,"./PooledClass":53,"./ReactBrowserEventEmitter":54,"./ReactInputSelection":89,"./ReactInstrumentation":91,"./ReactUpdateQueue":105,"./Transaction":124,_process:28,"object-assign":27}],101:[function(e,t,n){(function(n){"use strict";function r(){o.attachRefs(this,this._currentElement)}var o=e("./ReactRef"),i=e("./ReactInstrumentation"),a=e("fbjs/lib/warning"),s={mountComponent:function(e,t,o,a,s,l){"production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onBeforeMountComponent(e._debugID,e._currentElement,l);var u=e.mountComponent(t,o,a,s,l);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(r,e),"production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onMountComponent(e._debugID),u},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){"production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onBeforeUnmountComponent(e._debugID),o.detachRefs(e,e._currentElement),e.unmountComponent(t),"production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onUnmountComponent(e._debugID)},receiveComponent:function(e,t,a,s){var l=e._currentElement;if(t!==l||s!==e._context){"production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onBeforeUpdateComponent(e._debugID,t);var u=o.shouldUpdateRefs(l,t);u&&o.detachRefs(e,l),e.receiveComponent(t,a,s),u&&e._currentElement&&null!=e._currentElement.ref&&a.getReactMountReady().enqueue(r,e),"production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onUpdateComponent(e._debugID)}},performUpdateIfNecessary:function(e,t,r){return e._updateBatchNumber!==r?void("production"!==n.env.NODE_ENV?a(null==e._updateBatchNumber||e._updateBatchNumber===r+1,"performUpdateIfNecessary: Unexpected batch number (current %s, pending %s)",r,e._updateBatchNumber):void 0):("production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onBeforeUpdateComponent(e._debugID,e._currentElement),e.performUpdateIfNecessary(t),void("production"!==n.env.NODE_ENV&&0!==e._debugID&&i.debugTool.onUpdateComponent(e._debugID)))}};t.exports=s}).call(this,e("_process"))},{"./ReactInstrumentation":91,"./ReactRef":102,_process:28,"fbjs/lib/warning":24}],102:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function o(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=e("./ReactOwner"),a={};a.attachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&r(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null,r=null;null!==e&&"object"==typeof e&&(n=e.ref,r=e._owner);var o=null,i=null;return null!==t&&"object"==typeof t&&(o=t.ref,i=t._owner),n!==o||"string"==typeof o&&i!==r},a.detachRefs=function(e,t){if(null!==t&&"object"==typeof t){var n=t.ref;null!=n&&o(n,e,t._owner)}},t.exports=a},{"./ReactOwner":97}],103:[function(e,t,n){(function(n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new l(this)}var o=e("object-assign"),i=e("./PooledClass"),a=e("./Transaction"),s=e("./ReactInstrumentation"),l=e("./ReactServerUpdateQueue"),u=[];"production"!==n.env.NODE_ENV&&u.push({initialize:s.debugTool.onBeginFlush,close:s.debugTool.onEndFlush});var c={enqueue:function(){}},p={getTransactionWrappers:function(){return u},getReactMountReady:function(){return c},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};o(r.prototype,a,p),i.addPoolingTo(r),t.exports=r}).call(this,e("_process"))},{"./PooledClass":53,"./ReactInstrumentation":91,"./ReactServerUpdateQueue":104,"./Transaction":124,_process:28,"object-assign":27}],104:[function(e,t,n){(function(n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("production"!==n.env.NODE_ENV){var r=e.constructor;"production"!==n.env.NODE_ENV?a(!1,"%s(...): Can only update a mounting component. This usually means you called %s() outside componentWillMount() on the server. This is a no-op. Please check the code for the %s component.",t,t,r&&(r.displayName||r.name)||"ReactClass"):void 0}}var i=e("./ReactUpdateQueue"),a=e("fbjs/lib/warning"),s=function(){function e(t){r(this,e),this.transaction=t}return e.prototype.isMounted=function t(e){return!1},e.prototype.enqueueCallback=function n(e,t,r){this.transaction.isInTransaction()&&i.enqueueCallback(e,t,r)},e.prototype.enqueueForceUpdate=function a(e){this.transaction.isInTransaction()?i.enqueueForceUpdate(e):o(e,"forceUpdate")},e.prototype.enqueueReplaceState=function s(e,t){this.transaction.isInTransaction()?i.enqueueReplaceState(e,t):o(e,"replaceState")},e.prototype.enqueueSetState=function l(e,t){this.transaction.isInTransaction()?i.enqueueSetState(e,t):o(e,"setState")},e}();t.exports=s}).call(this,e("_process"))},{"./ReactUpdateQueue":105,_process:28,"fbjs/lib/warning":24}],105:[function(e,t,n){(function(n){"use strict";function r(e){c.enqueueUpdate(e)}function o(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,r=Object.keys(e);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function i(e,t){var r=l.get(e);if(!r){if("production"!==n.env.NODE_ENV){var o=e.constructor;"production"!==n.env.NODE_ENV?d(!t,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",t,t,o&&(o.displayName||o.name)||"ReactClass"):void 0}return null}return"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?d(null==s.current,"%s(...): Cannot update during an existing state transition (such as within `render` or another component's constructor). Render methods should be a pure function of props and state; constructor side-effects are an anti-pattern, but can be moved to `componentWillMount`.",t):void 0),r}var a=e("./reactProdInvariant"),s=e("react/lib/ReactCurrentOwner"),l=e("./ReactInstanceMap"),u=e("./ReactInstrumentation"),c=e("./ReactUpdates"),p=e("fbjs/lib/invariant"),d=e("fbjs/lib/warning"),f={isMounted:function(e){if("production"!==n.env.NODE_ENV){var t=s.current;null!==t&&("production"!==n.env.NODE_ENV?d(t._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"):void 0,t._warnedAboutRefsInRender=!0)}var r=l.get(e);return!!r&&!!r._renderedComponent},enqueueCallback:function(e,t,n){f.validateCallback(t,n);var o=i(e);return o?(o._pendingCallbacks?o._pendingCallbacks.push(t):o._pendingCallbacks=[t],void r(o)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){"production"!==n.env.NODE_ENV&&(u.debugTool.onSetState(),"production"!==n.env.NODE_ENV?d(null!=t,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."):void 0);var o=i(e,"setState");if(o){var a=o._pendingStateQueue||(o._pendingStateQueue=[]);a.push(t),r(o)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,r(e)},validateCallback:function(e,t){e&&"function"!=typeof e?"production"!==n.env.NODE_ENV?p(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,o(e)):a("122",t,o(e)):void 0}};t.exports=f}).call(this,e("_process"))},{"./ReactInstanceMap":90,"./ReactInstrumentation":91,"./ReactUpdates":106,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"react/lib/ReactCurrentOwner":164}],106:[function(e,t,n){(function(n){"use strict";function r(){O.ReactReconcileTransaction&&w?void 0:"production"!==n.env.NODE_ENV?v(!1,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):c("123")}function o(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=d.getPooled(),this.reconcileTransaction=O.ReactReconcileTransaction.getPooled(!0)}function i(e,t,n,o,i,a){return r(),w.batchedUpdates(e,t,n,o,i,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==g.length?"production"!==n.env.NODE_ENV?v(!1,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,g.length):c("124",t,g.length):void 0,g.sort(a),_++;for(var r=0;r<t;r++){var o=g[r],i=o._pendingCallbacks;o._pendingCallbacks=null;var s;if(h.logTopLevelRenders){var l=o;o._currentElement.type.isReactTopLevelWrapper&&(l=o._renderedComponent),s="React update: "+l.getName(),console.time(s)}if(m.performUpdateIfNecessary(o,e.reconcileTransaction,_),s&&console.timeEnd(s),i)for(var u=0;u<i.length;u++)e.callbackQueue.enqueue(i[u],o.getPublicInstance())}}function l(e){return r(),w.isBatchingUpdates?(g.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=_+1))):void w.batchedUpdates(l,e)}function u(e,t){w.isBatchingUpdates?void 0:"production"!==n.env.NODE_ENV?v(!1,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):c("125"),b.enqueue(e,t),x=!0}var c=e("./reactProdInvariant"),p=e("object-assign"),d=e("./CallbackQueue"),f=e("./PooledClass"),h=e("./ReactFeatureFlags"),m=e("./ReactReconciler"),y=e("./Transaction"),v=e("fbjs/lib/invariant"),g=[],_=0,b=d.getPooled(),x=!1,w=null,E={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),S()):g.length=0}},k={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},C=[E,k];p(o.prototype,y,{getTransactionWrappers:function(){return C},destructor:function(){this.dirtyComponentsLength=null,d.release(this.callbackQueue),this.callbackQueue=null,O.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return y.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(o);var S=function(){for(;g.length||x;){if(g.length){var e=o.getPooled();e.perform(s,null,e),o.release(e)}if(x){x=!1;var t=b;b=d.getPooled(),t.notifyAll(),d.release(t)}}},P={injectReconcileTransaction:function(e){e?void 0:"production"!==n.env.NODE_ENV?v(!1,"ReactUpdates: must provide a reconcile transaction class"):c("126"),O.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:"production"!==n.env.NODE_ENV?v(!1,"ReactUpdates: must provide a batching strategy"):c("127"),"function"!=typeof e.batchedUpdates?"production"!==n.env.NODE_ENV?v(!1,"ReactUpdates: must provide a batchedUpdates() function"):c("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?"production"!==n.env.NODE_ENV?v(!1,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):c("129"):void 0,w=e}},O={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:l,flushBatchedUpdates:S,injection:P,asap:u};t.exports=O}).call(this,e("_process"))},{"./CallbackQueue":35,"./PooledClass":53,"./ReactFeatureFlags":85,"./ReactReconciler":101,"./Transaction":124,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"object-assign":27}],107:[function(e,t,n){"use strict";t.exports="15.4.2"},{}],108:[function(e,t,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},o={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},i={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(o).forEach(function(e){i.Properties[e]=0,o[e]&&(i.DOMAttributeNames[e]=o[e])}),t.exports=i},{}],109:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&l.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function o(e,t){if(g||null==m||m!==c())return null;var n=r(m);if(!v||!d(v,n)){v=n;var o=u.getPooled(h.select,y,e,t);return o.type="select",o.target=m,i.accumulateTwoPhaseDispatches(o),o}return null}var i=e("./EventPropagators"),a=e("fbjs/lib/ExecutionEnvironment"),s=e("./ReactDOMComponentTree"),l=e("./ReactInputSelection"),u=e("./SyntheticEvent"),c=e("fbjs/lib/getActiveElement"),p=e("./isTextInputElement"),d=e("fbjs/lib/shallowEqual"),f=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,h={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},m=null,y=null,v=null,g=!1,_=!1,b={eventTypes:h,extractEvents:function(e,t,n,r){if(!_)return null;var i=t?s.getNodeFromInstance(t):window;switch(e){case"topFocus":(p(i)||"true"===i.contentEditable)&&(m=i,y=t,v=null);break;case"topBlur":m=null,y=null,v=null;break;case"topMouseDown":g=!0;break;case"topContextMenu":case"topMouseUp":return g=!1,o(n,r);case"topSelectionChange":if(f)break;case"topKeyDown":case"topKeyUp":return o(n,r)}return null},didPutListener:function(e,t,n){"onSelect"===t&&(_=!0)}};t.exports=b},{"./EventPropagators":48,"./ReactDOMComponentTree":62,"./ReactInputSelection":89,"./SyntheticEvent":115,"./isTextInputElement":147,"fbjs/lib/ExecutionEnvironment":3,"fbjs/lib/getActiveElement":12,"fbjs/lib/shallowEqual":23}],110:[function(e,t,n){(function(n){"use strict";function r(e){return"."+e._rootNodeID}function o(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}var i=e("./reactProdInvariant"),a=e("fbjs/lib/EventListener"),s=e("./EventPropagators"),l=e("./ReactDOMComponentTree"),u=e("./SyntheticAnimationEvent"),c=e("./SyntheticClipboardEvent"),p=e("./SyntheticEvent"),d=e("./SyntheticFocusEvent"),f=e("./SyntheticKeyboardEvent"),h=e("./SyntheticMouseEvent"),m=e("./SyntheticDragEvent"),y=e("./SyntheticTouchEvent"),v=e("./SyntheticTransitionEvent"),g=e("./SyntheticUIEvent"),_=e("./SyntheticWheelEvent"),b=e("fbjs/lib/emptyFunction"),x=e("./getEventCharCode"),w=e("fbjs/lib/invariant"),E={},k={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t,r="top"+t,o={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};E[e]=o,k[r]=o});var C={},S={eventTypes:E,extractEvents:function(e,t,r,o){var a=k[e];if(!a)return null;var l;switch(e){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":l=p;break;case"topKeyPress":if(0===x(r))return null;case"topKeyDown":case"topKeyUp":l=f;break;case"topBlur":case"topFocus":l=d;break;case"topClick":if(2===r.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":l=h;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":l=m;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":l=y;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":l=u;break;case"topTransitionEnd":l=v;break;case"topScroll":l=g;break;case"topWheel":l=_;break;case"topCopy":case"topCut":case"topPaste":l=c}l?void 0:"production"!==n.env.NODE_ENV?w(!1,"SimpleEventPlugin: Unhandled event type, `%s`.",e):i("86",e);var b=l.getPooled(a,t,r,o);return s.accumulateTwoPhaseDispatches(b),b},didPutListener:function(e,t,n){if("onClick"===t&&!o(e._tag)){var i=r(e),s=l.getNodeFromInstance(e);C[i]||(C[i]=a.listen(s,"click",b))}},willDeleteListener:function(e,t){if("onClick"===t&&!o(e._tag)){var n=r(e);C[n].remove(),delete C[n]}}};t.exports=S}).call(this,e("_process"))},{"./EventPropagators":48,"./ReactDOMComponentTree":62,"./SyntheticAnimationEvent":111,"./SyntheticClipboardEvent":112,"./SyntheticDragEvent":114,"./SyntheticEvent":115,"./SyntheticFocusEvent":116,"./SyntheticKeyboardEvent":118,"./SyntheticMouseEvent":119,"./SyntheticTouchEvent":120,"./SyntheticTransitionEvent":121,"./SyntheticUIEvent":122,"./SyntheticWheelEvent":123,"./getEventCharCode":135,"./reactProdInvariant":149,_process:28,"fbjs/lib/EventListener":2,"fbjs/lib/emptyFunction":9,"fbjs/lib/invariant":17}],111:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticEvent"),i={animationName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticEvent":115}],112:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};o.augmentClass(r,i),t.exports=r},{"./SyntheticEvent":115}],113:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticEvent"),i={data:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticEvent":115}],114:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticMouseEvent"),i={dataTransfer:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticMouseEvent":119}],115:[function(e,t,n){(function(n){"use strict";function r(e,t,r,o){"production"!==n.env.NODE_ENV&&(delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation),this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r;var i=this.constructor.Interface;for(var a in i)if(i.hasOwnProperty(a)){"production"!==n.env.NODE_ENV&&delete this[a];var l=i[a];l?this[a]=l(r):"target"===a?this.target=o:this[a]=r[a]}var u=null!=r.defaultPrevented?r.defaultPrevented:r.returnValue===!1;return u?this.isDefaultPrevented=s.thatReturnsTrue:this.isDefaultPrevented=s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function o(e,t){function r(e){var t=a?"setting the method":"setting the property";return i(t,"This is effectively a no-op"),e}function o(){var e=a?"accessing the method":"accessing the property",n=a?"This is a no-op function":"This is set to null";return i(e,n),t}function i(t,r){var o=!1;"production"!==n.env.NODE_ENV?l(o,"This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",t,e,r):void 0}var a="function"==typeof t;return{configurable:!0,set:r,get:o}}var i=e("object-assign"),a=e("./PooledClass"),s=e("fbjs/lib/emptyFunction"),l=e("fbjs/lib/warning"),u=!1,c="function"==typeof Proxy,p=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"],d={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){
var e=this.constructor.Interface;for(var t in e)"production"!==n.env.NODE_ENV?Object.defineProperty(this,t,o(t,e[t])):this[t]=null;for(var r=0;r<p.length;r++)this[p[r]]=null;"production"!==n.env.NODE_ENV&&(Object.defineProperty(this,"nativeEvent",o("nativeEvent",null)),Object.defineProperty(this,"preventDefault",o("preventDefault",s)),Object.defineProperty(this,"stopPropagation",o("stopPropagation",s)))}}),r.Interface=d,"production"!==n.env.NODE_ENV&&c&&(r=new Proxy(r,{construct:function(e,t){return this.apply(e,Object.create(e.prototype),t)},apply:function(e,t,r){return new Proxy(e.apply(t,r),{set:function(e,t,r){return"isPersistent"===t||e.constructor.Interface.hasOwnProperty(t)||p.indexOf(t)!==-1||("production"!==n.env.NODE_ENV?l(u||e.isPersistent(),"This synthetic event is reused for performance reasons. If you're seeing this, you're adding a new property in the synthetic event object. The property is never released. See https://fb.me/react-event-pooling for more information."):void 0,u=!0),e[t]=r,!0}})}})),r.augmentClass=function(e,t){var n=this,r=function(){};r.prototype=n.prototype;var o=new r;i(o,e.prototype),e.prototype=o,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,a.addPoolingTo(e,a.fourArgumentPooler)},a.addPoolingTo(r,a.fourArgumentPooler),t.exports=r}).call(this,e("_process"))},{"./PooledClass":53,_process:28,"fbjs/lib/emptyFunction":9,"fbjs/lib/warning":24,"object-assign":27}],116:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticUIEvent"),i={relatedTarget:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticUIEvent":122}],117:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticEvent"),i={data:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticEvent":115}],118:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticUIEvent"),i=e("./getEventCharCode"),a=e("./getEventKey"),s=e("./getEventModifierState"),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};o.augmentClass(r,l),t.exports=r},{"./SyntheticUIEvent":122,"./getEventCharCode":135,"./getEventKey":136,"./getEventModifierState":137}],119:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),a=e("./getEventModifierState"),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};o.augmentClass(r,s),t.exports=r},{"./SyntheticUIEvent":122,"./ViewportMetrics":125,"./getEventModifierState":137}],120:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticUIEvent"),i=e("./getEventModifierState"),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};o.augmentClass(r,a),t.exports=r},{"./SyntheticUIEvent":122,"./getEventModifierState":137}],121:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticEvent"),i={propertyName:null,elapsedTime:null,pseudoElement:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticEvent":115}],122:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticEvent"),i=e("./getEventTarget"),a={view:function(e){if(e.view)return e.view;var t=i(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};o.augmentClass(r,a),t.exports=r},{"./SyntheticEvent":115,"./getEventTarget":138}],123:[function(e,t,n){"use strict";function r(e,t,n,r){return o.call(this,e,t,n,r)}var o=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};o.augmentClass(r,i),t.exports=r},{"./SyntheticMouseEvent":119}],124:[function(e,t,n){(function(n){"use strict";var r=e("./reactProdInvariant"),o=e("fbjs/lib/invariant"),i={},a={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,i,a,s,l,u,c){this.isInTransaction()?"production"!==n.env.NODE_ENV?o(!1,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r("27"):void 0;var p,d;try{this._isInTransaction=!0,p=!0,this.initializeAll(0),d=e.call(t,i,a,s,l,u,c),p=!1}finally{try{if(p)try{this.closeAll(0)}catch(f){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return d},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i)try{this.initializeAll(n+1)}catch(o){}}}},closeAll:function(e){this.isInTransaction()?void 0:"production"!==n.env.NODE_ENV?o(!1,"Transaction.closeAll(): Cannot close transaction when none are open."):r("28");for(var t=this.transactionWrappers,a=e;a<t.length;a++){var s=t[a],l=this.wrapperInitData[a],u;try{u=!0,l!==i&&s.close&&s.close.call(this,l),u=!1}finally{if(u)try{this.closeAll(a+1)}catch(c){}}}this.wrapperInitData.length=0}};t.exports=a}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],125:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],126:[function(e,t,n){(function(n){"use strict";function r(e,t){return null==t?"production"!==n.env.NODE_ENV?i(!1,"accumulateInto(...): Accumulated items must not be null or undefined."):o("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var o=e("./reactProdInvariant"),i=e("fbjs/lib/invariant");t.exports=r}).call(this,e("_process"))},{"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17}],127:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0,i=e.length,a=i&-4;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)n+=(t+=e.charCodeAt(r))+(t+=e.charCodeAt(r+1))+(t+=e.charCodeAt(r+2))+(t+=e.charCodeAt(r+3));t%=o,n%=o}for(;r<i;r++)n+=t+=e.charCodeAt(r);return t%=o,n%=o,t|n<<16}var o=65521;t.exports=r},{}],128:[function(e,t,n){(function(n){"use strict";function r(t,r,p,d,f,h){for(var m in t)if(t.hasOwnProperty(m)){var y;try{"function"!=typeof t[m]?"production"!==n.env.NODE_ENV?s(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",d||"React class",i[p],m):o("84",d||"React class",i[p],m):void 0,y=t[m](r,m,d,p,null,a)}catch(v){y=v}if("production"!==n.env.NODE_ENV?l(!y||y instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",d||"React class",i[p],m,typeof y):void 0,y instanceof Error&&!(y.message in c)){c[y.message]=!0;var g="";"production"!==n.env.NODE_ENV&&(u||(u=e("react/lib/ReactComponentTreeHook")),null!==h?g=u.getStackAddendumByID(h):null!==f&&(g=u.getCurrentStackAddendum(f))),"production"!==n.env.NODE_ENV?l(!1,"Failed %s type: %s%s",p,y.message,g):void 0}}}var o=e("./reactProdInvariant"),i=e("./ReactPropTypeLocationNames"),a=e("./ReactPropTypesSecret"),s=e("fbjs/lib/invariant"),l=e("fbjs/lib/warning"),u;"undefined"!=typeof n&&n.env&&"test"===n.env.NODE_ENV&&(u=e("react/lib/ReactComponentTreeHook"));var c={};t.exports=r}).call(this,e("_process"))},{"./ReactPropTypeLocationNames":98,"./ReactPropTypesSecret":99,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],129:[function(e,t,n){"use strict";var r=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e};t.exports=r},{}],130:[function(e,t,n){(function(n){"use strict";function r(e,t,r){var o=null==t||"boolean"==typeof t||""===t;if(o)return"";var l=isNaN(t);if(l||0===t||a.hasOwnProperty(e)&&a[e])return""+t;if("string"==typeof t){if("production"!==n.env.NODE_ENV&&r&&"0"!==t){var u=r._currentElement._owner,c=u?u.getName():null;c&&!s[c]&&(s[c]={});var p=!1;if(c){var d=s[c];p=d[e],p||(d[e]=!0)}p||("production"!==n.env.NODE_ENV?i(!1,"a `%s` tag (owner: `%s`) was passed a numeric string value for CSS property `%s` (value: `%s`) which will be treated as a unitless number in a future version of React.",r._currentElement.type,c||"unknown",e,t):void 0)}t=t.trim()}return t+"px"}var o=e("./CSSProperty"),i=e("fbjs/lib/warning"),a=o.isUnitlessNumber,s={};t.exports=r}).call(this,e("_process"))},{"./CSSProperty":33,_process:28,"fbjs/lib/warning":24}],131:[function(e,t,n){"use strict";function r(e){var t=""+e,n=i.exec(t);if(!n)return t;var r,o="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(o+=t.substring(s,a)),s=a+1,o+=r}return s!==a?o+t.substring(s,a):o}function o(e){return"boolean"==typeof e||"number"==typeof e?""+e:r(e)}var i=/["'&<>]/;t.exports=o},{}],132:[function(e,t,n){(function(n){"use strict";function r(e){if("production"!==n.env.NODE_ENV){var t=i.current;null!==t&&("production"!==n.env.NODE_ENV?c(t._warnedAboutRefsInRender,"%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",t.getName()||"A component"):void 0,t._warnedAboutRefsInRender=!0)}if(null==e)return null;if(1===e.nodeType)return e;var r=s.get(e);return r?(r=l(r),r?a.getNodeFromInstance(r):null):void("function"==typeof e.render?"production"!==n.env.NODE_ENV?u(!1,"findDOMNode was called on an unmounted component."):o("44"):"production"!==n.env.NODE_ENV?u(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(e)):o("45",Object.keys(e)))}var o=e("./reactProdInvariant"),i=e("react/lib/ReactCurrentOwner"),a=e("./ReactDOMComponentTree"),s=e("./ReactInstanceMap"),l=e("./getHostComponentFromComposite"),u=e("fbjs/lib/invariant"),c=e("fbjs/lib/warning");t.exports=r}).call(this,e("_process"))},{"./ReactDOMComponentTree":62,"./ReactInstanceMap":90,"./getHostComponentFromComposite":139,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"react/lib/ReactCurrentOwner":164}],133:[function(e,t,n){(function(n){"use strict";function r(t,r,o,a){if(t&&"object"==typeof t){var u=t,c=void 0===u[o];"production"!==n.env.NODE_ENV&&(l||(l=e("react/lib/ReactComponentTreeHook")),c||("production"!==n.env.NODE_ENV?s(!1,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.%s",i.unescape(o),l.getStackAddendumByID(a)):void 0)),c&&null!=r&&(u[o]=r)}}function o(e,t){if(null==e)return e;var o={};return"production"!==n.env.NODE_ENV?a(e,function(e,n,o){return r(e,n,o,t)},o):a(e,r,o),o}var i=e("./KeyEscapeUtils"),a=e("./traverseAllChildren"),s=e("fbjs/lib/warning"),l;"undefined"!=typeof n&&n.env&&"test"===n.env.NODE_ENV&&(l=e("react/lib/ReactComponentTreeHook")),t.exports=o}).call(this,e("_process"))},{"./KeyEscapeUtils":51,"./traverseAllChildren":154,_process:28,"fbjs/lib/warning":24,"react/lib/ReactComponentTreeHook":163}],134:[function(e,t,n){"use strict";function r(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}t.exports=r},{}],135:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=o(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var o=e("./getEventCharCode"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{"./getEventCharCode":135}],137:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function o(e){return r}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=o},{}],138:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}t.exports=r},{}],139:[function(e,t,n){"use strict";function r(e){for(var t;(t=e._renderedNodeType)===o.COMPOSITE;)e=e._renderedComponent;return t===o.HOST?e._renderedComponent:t===o.EMPTY?null:void 0}var o=e("./ReactNodeTypes");t.exports=r},{"./ReactNodeTypes":96}],140:[function(e,t,n){"use strict";function r(e){var t=e&&(o&&e[o]||e[i]);if("function"==typeof t)return t}var o="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=r},{}],141:[function(e,t,n){"use strict";function r(){return o++}var o=1;t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function o(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var n=r(e),i=0,a=0;n;){if(3===n.nodeType){if(a=i+n.textContent.length,i<=t&&a>=t)return{node:n,offset:t-i};i=a}n=r(o(n))}}t.exports=i},{}],143:[function(e,t,n){"use strict";function r(){return!i&&o.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var o=e("fbjs/lib/ExecutionEnvironment"),i=null;t.exports=r},{"fbjs/lib/ExecutionEnvironment":3}],144:[function(e,t,n){"use strict";function r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function o(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return s[e]=t[n];return""}var i=e("fbjs/lib/ExecutionEnvironment"),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},l={};i.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=o},{"fbjs/lib/ExecutionEnvironment":3}],145:[function(e,t,n){(function(n){"use strict";function r(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function o(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var s;if(null===e||e===!1)s=u.create(i);else if("object"==typeof e){var l=e,m=l.type;if("function"!=typeof m&&"string"!=typeof m){var y="";"production"!==n.env.NODE_ENV&&(void 0===m||"object"==typeof m&&null!==m&&0===Object.keys(m).length)&&(y+=" You likely forgot to export your component from the file it's defined in."),y+=r(l._owner),"production"!==n.env.NODE_ENV?d(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==m?m:typeof m,y):a("130",null==m?m:typeof m,y)}"string"==typeof l.type?s=c.createInternalComponent(l):o(l.type)?(s=new l.type(l),s.getHostNode||(s.getHostNode=s.getNativeNode)):s=new h(l)}else"string"==typeof e||"number"==typeof e?s=c.createInstanceForText(e):"production"!==n.env.NODE_ENV?d(!1,"Encountered invalid React node of type %s",typeof e):a("131",typeof e);return"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?f("function"==typeof s.mountComponent&&"function"==typeof s.receiveComponent&&"function"==typeof s.getHostNode&&"function"==typeof s.unmountComponent,"Only React Components can be mounted."):void 0),s._mountIndex=0,s._mountImage=null,"production"!==n.env.NODE_ENV&&(s._debugID=t?p():0),"production"!==n.env.NODE_ENV&&Object.preventExtensions&&Object.preventExtensions(s),s}var a=e("./reactProdInvariant"),s=e("object-assign"),l=e("./ReactCompositeComponent"),u=e("./ReactEmptyComponent"),c=e("./ReactHostComponent"),p=e("./getNextDebugID"),d=e("fbjs/lib/invariant"),f=e("fbjs/lib/warning"),h=function(e){this.construct(e)};s(h.prototype,l,{_instantiateReactComponent:i}),t.exports=i}).call(this,e("_process"))},{"./ReactCompositeComponent":58,"./ReactEmptyComponent":81,"./ReactHostComponent":86,"./getNextDebugID":141,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"object-assign":27}],146:[function(e,t,n){"use strict";function r(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var o=e("fbjs/lib/ExecutionEnvironment"),i;o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},{"fbjs/lib/ExecutionEnvironment":3}],147:[function(e,t,n){"use strict";function r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!o[e.type]:"textarea"===t}var o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],148:[function(e,t,n){"use strict";function r(e){return'"'+o(e)+'"'}var o=e("./escapeTextContentForBrowser");t.exports=r},{"./escapeTextContentForBrowser":131}],149:[function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var o=new Error(n);throw o.name="Invariant Violation",o.framesToPop=1,o}t.exports=r},{}],150:[function(e,t,n){"use strict";var r=e("./ReactMount");t.exports=r.renderSubtreeIntoContainer},{"./ReactMount":94}],151:[function(e,t,n){"use strict";var r=e("fbjs/lib/ExecutionEnvironment"),o=e("./DOMNamespaces"),i=/^[ \r\n\t\f]/,a=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,s=e("./createMicrosoftUnsafeLocalFunction"),l,u=s(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{l=l||document.createElement("div"),l.innerHTML="<svg>"+t+"</svg>";for(var n=l.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(r.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&a.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}t.exports=u},{"./DOMNamespaces":39,"./createMicrosoftUnsafeLocalFunction":129,"fbjs/lib/ExecutionEnvironment":3}],152:[function(e,t,n){"use strict";var r=e("fbjs/lib/ExecutionEnvironment"),o=e("./escapeTextContentForBrowser"),i=e("./setInnerHTML"),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){return 3===e.nodeType?void(e.nodeValue=t):void i(e,o(t))})),t.exports=a},{"./escapeTextContentForBrowser":131,"./setInnerHTML":151,"fbjs/lib/ExecutionEnvironment":3}],153:[function(e,t,n){"use strict";function r(e,t){var n=null===e||e===!1,r=null===t||t===!1;if(n||r)return n===r;var o=typeof e,i=typeof t;return"string"===o||"number"===o?"string"===i||"number"===i:"object"===i&&e.type===t.type&&e.key===t.key}t.exports=r},{}],154:[function(e,t,n){(function(n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?p.escape(e.key):t.toString(36)}function o(e,t,i,y){var v=typeof e;if("undefined"!==v&&"boolean"!==v||(e=null),null===e||"string"===v||"number"===v||"object"===v&&e.$$typeof===l)return i(y,e,""===t?f+r(e,0):t),1;var g,_,b=0,x=""===t?f:t+h;if(Array.isArray(e))for(var w=0;w<e.length;w++)g=e[w],_=x+r(g,w),b+=o(g,_,i,y);else{var E=u(e);if(E){var k=E.call(e),C;if(E!==e.entries)for(var S=0;!(C=k.next()).done;)g=C.value,_=x+r(g,S++),b+=o(g,_,i,y);else{if("production"!==n.env.NODE_ENV){var P="";if(s.current){var O=s.current.getName();O&&(P=" Check the render method of `"+O+"`.")}"production"!==n.env.NODE_ENV?d(m,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead.%s",P):void 0,m=!0}for(;!(C=k.next()).done;){var M=C.value;M&&(g=M[1],_=x+p.escape(M[0])+h+r(g,0),b+=o(g,_,i,y))}}}else if("object"===v){var D="";if("production"!==n.env.NODE_ENV&&(D=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",e._isReactElement&&(D=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),s.current)){var T=s.current.getName();T&&(D+=" Check the render method of `"+T+"`.")}var N=String(e);"production"!==n.env.NODE_ENV?c(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===N?"object with keys {"+Object.keys(e).join(", ")+"}":N,D):a("31","[object Object]"===N?"object with keys {"+Object.keys(e).join(", ")+"}":N,D)}}return b}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=e("./reactProdInvariant"),s=e("react/lib/ReactCurrentOwner"),l=e("./ReactElementSymbol"),u=e("./getIteratorFn"),c=e("fbjs/lib/invariant"),p=e("./KeyEscapeUtils"),d=e("fbjs/lib/warning"),f=".",h=":",m=!1;t.exports=i}).call(this,e("_process"))},{"./KeyEscapeUtils":51,"./ReactElementSymbol":80,"./getIteratorFn":140,"./reactProdInvariant":149,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"react/lib/ReactCurrentOwner":164}],155:[function(e,t,n){(function(n){"use strict";var r=e("object-assign"),o=e("fbjs/lib/emptyFunction"),i=e("fbjs/lib/warning"),a=o;if("production"!==n.env.NODE_ENV){var s=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],l=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],u=l.concat(["button"]),c=["dd","dt","li","option","optgroup","p","rp","rt"],p={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},d=function(e,t,n){var o=r({},e||p),i={tag:t,instance:n};return l.indexOf(t)!==-1&&(o.aTagInScope=null,o.buttonTagInScope=null,o.nobrTagInScope=null),u.indexOf(t)!==-1&&(o.pTagInButtonScope=null),s.indexOf(t)!==-1&&"address"!==t&&"div"!==t&&"p"!==t&&(o.listItemTagAutoclosing=null,o.dlItemTagAutoclosing=null),o.current=i,"form"===t&&(o.formTag=i),"a"===t&&(o.aTagInScope=i),"button"===t&&(o.buttonTagInScope=i),"nobr"===t&&(o.nobrTagInScope=i),"p"===t&&(o.pTagInButtonScope=i),"li"===t&&(o.listItemTagAutoclosing=i),"dd"!==t&&"dt"!==t||(o.dlItemTagAutoclosing=i),o},f=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return c.indexOf(t)===-1;case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0},h=function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null},m=function(e){if(!e)return[];var t=[];do t.push(e);while(e=e._currentElement._owner);return t.reverse(),t},y={};a=function(e,t,r,o){o=o||p;var a=o.current,s=a&&a.tag;null!=t&&("production"!==n.env.NODE_ENV?i(null==e,"validateDOMNesting: when childText is passed, childTag should be null"):void 0,e="#text");var l=f(e,s)?null:a,u=l?null:h(e,o),c=l||u;if(c){var d=c.tag,v=c.instance,g=r&&r._currentElement._owner,_=v&&v._currentElement._owner,b=m(g),x=m(_),w=Math.min(b.length,x.length),E,k=-1;for(E=0;E<w&&b[E]===x[E];E++)k=E;var C="(unknown)",S=b.slice(k+1).map(function(e){return e.getName()||C}),P=x.slice(k+1).map(function(e){return e.getName()||C}),O=[].concat(k!==-1?b[k].getName()||C:[],P,d,u?["..."]:[],S,e).join(" > "),M=!!l+"|"+e+"|"+d+"|"+O;if(y[M])return;y[M]=!0;var D=e,T="";if("#text"===e?/\S/.test(t)?D="Text nodes":(D="Whitespace text nodes",T=" Make sure you don't have any extra whitespace between tags on each line of your source code."):D="<"+e+">",l){var N="";"table"===d&&"tr"===e&&(N+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),"production"!==n.env.NODE_ENV?i(!1,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s See %s.%s",D,d,T,O,N):void 0}else"production"!==n.env.NODE_ENV?i(!1,"validateDOMNesting(...): %s cannot appear as a descendant of <%s>. See %s.",D,d,O):void 0}},a.updatedAncestorInfo=d,a.isTagValidInContext=function(e,t){t=t||p;var n=t.current,r=n&&n.tag;return f(e,r)&&!h(e,t)}}t.exports=a}).call(this,e("_process"))},{_process:28,"fbjs/lib/emptyFunction":9,"fbjs/lib/warning":24,"object-assign":27}],156:[function(t,n,r){!function o(i,a){"object"==typeof r&&"object"==typeof n?n.exports=a(t("react"),t("react-dom")):"function"==typeof e&&e.amd?e(["react","react-dom"],a):"object"==typeof r?r.ReactDraggable=a(t("react"),t("react-dom")):i.ReactDraggable=a(i.React,i.ReactDOM)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1)["default"],e.exports.DraggableCore=n(9)["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(2),d=r(p),f=n(3),h=r(f),m=n(4),y=r(m),v=n(5),g=n(8),_=n(6),b=n(9),x=r(b),w=n(11),E=r(w),k=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDragStart=function(e,t){(0,E["default"])("Draggable: onDragStart: %j",t);var r=n.props.onStart(e,(0,g.createDraggableData)(n,t));return r!==!1&&void n.setState({dragging:!0,dragged:!0})},n.onDrag=function(e,t){if(!n.state.dragging)return!1;(0,E["default"])("Draggable: onDrag: %j",t);var r=(0,g.createDraggableData)(n,t),o={x:r.x,y:r.y};if(n.props.bounds){var i=o.x,a=o.y;o.x+=n.state.slackX,o.y+=n.state.slackY;var s=(0,g.getBoundPosition)(n,o.x,o.y),l=u(s,2);o.x=l[0],o.y=l[1],
o.slackX=n.state.slackX+(i-o.x),o.slackY=n.state.slackY+(a-o.y),r.x=i,r.y=a,r.deltaX=o.x-n.state.x,r.deltaY=o.y-n.state.y}var c=n.props.onDrag(e,r);return c!==!1&&void n.setState(o)},n.onDragStop=function(e,t){if(!n.state.dragging)return!1;var r=n.props.onStop(e,(0,g.createDraggableData)(n,t));if(r===!1)return!1;(0,E["default"])("Draggable: onDragStop: %j",t);var o={dragging:!1,slackX:0,slackY:0},i=Boolean(n.props.position);if(i){var a=n.props.position,s=a.x,l=a.y;o.x=s,o.y=l}n.setState(o)},n.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},n}return s(t,e),c(t,[{key:"componentWillMount",value:function n(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function r(){"undefined"!=typeof SVGElement&&h["default"].findDOMNode(this)instanceof SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function p(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function f(){this.setState({dragging:!1})}},{key:"render",value:function m(){var e,t={},n=null,r=Boolean(this.props.position),i=!r||this.state.dragging,a=this.props.position||this.props.defaultPosition,s={x:(0,g.canDragX)(this)&&i?this.state.x:a.x,y:(0,g.canDragY)(this)&&i?this.state.y:a.y};this.state.isElementSVG?n=(0,v.createSVGTransform)(s):t=(0,v.createCSSTransform)(s);var u=this.props,c=u.defaultClassName,p=u.defaultClassNameDragging,f=u.defaultClassNameDragged,h=(0,y["default"])(this.props.children.props.className||"",c,(e={},o(e,p,this.state.dragging),o(e,f,this.state.dragged),e));return d["default"].createElement(x["default"],l({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),d["default"].cloneElement(d["default"].Children.only(this.props.children),{className:h,style:l({},this.props.children.props.style,t),transform:n}))}}]),t}(d["default"].Component);k.displayName="Draggable",k.propTypes=l({},x["default"].propTypes,{axis:p.PropTypes.oneOf(["both","x","y","none"]),bounds:p.PropTypes.oneOfType([p.PropTypes.shape({left:p.PropTypes.number,right:p.PropTypes.number,top:p.PropTypes.number,bottom:p.PropTypes.number}),p.PropTypes.string,p.PropTypes.oneOf([!1])]),defaultClassName:p.PropTypes.string,defaultClassNameDragging:p.PropTypes.string,defaultClassNameDragged:p.PropTypes.string,defaultPosition:p.PropTypes.shape({x:p.PropTypes.number,y:p.PropTypes.number}),position:p.PropTypes.shape({x:p.PropTypes.number,y:p.PropTypes.number}),className:_.dontSetMe,style:_.dontSetMe,transform:_.dontSetMe}),k.defaultProps=l({},x["default"].defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t["default"]=k},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var a in r)i.call(r,a)&&r[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=[],o=function(){return n}.apply(t,r),!(void 0!==o&&(e.exports=o)))}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return C||(C=(0,w.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,w.isFunction)(e[t])})),e[C].call(e,t)}function a(e,t,n){var r=e;do{if(i(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function s(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function l(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function u(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,w["int"])(n.borderTopWidth),t+=(0,w["int"])(n.borderBottomWidth)}function c(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,w["int"])(n.borderLeftWidth),t+=(0,w["int"])(n.borderRightWidth)}function p(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,w["int"])(n.paddingTop),t-=(0,w["int"])(n.paddingBottom)}function d(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,w["int"])(n.paddingLeft),t-=(0,w["int"])(n.paddingRight)}function f(e,t){var n=t===t.ownerDocument.body,r=n?{left:0,top:0}:t.getBoundingClientRect(),o=e.clientX+t.scrollLeft-r.left,i=e.clientY+t.scrollTop-r.top;return{x:o,y:i}}function h(e){var t=e.x,n=e.y;return o({},(0,E.browserPrefixToKey)("transform",k["default"]),"translate("+t+"px,"+n+"px)")}function m(e){var t=e.x,n=e.y;return"translate("+t+","+n+")"}function y(e,t){return e.targetTouches&&(0,w.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,w.findInArray)(e.changedTouches,function(e){return t===e.identifier})}function v(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function g(e){var t=e.getAttribute("style")||"";e.setAttribute("style",t+O)}function _(e){var t=e.getAttribute("style")||"";e.setAttribute("style",t.replace(M,""))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return x({touchAction:"none"},e)}Object.defineProperty(t,"__esModule",{value:!0});var x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.matchesSelector=i,t.matchesSelectorAndParentsTo=a,t.addEvent=s,t.removeEvent=l,t.outerHeight=u,t.outerWidth=c,t.innerHeight=p,t.innerWidth=d,t.offsetXYFromParent=f,t.createCSSTransform=h,t.createSVGTransform=m,t.getTouch=y,t.getTouchIdentifier=v,t.addUserSelectStyles=g,t.removeUserSelectStyles=_,t.styleHacks=b;var w=n(6),E=n(7),k=r(E),C="",S=(0,E.getPrefix)("user-select"),P=(0,E.browserPrefixToStyle)("user-select",S),O=";"+P+": none;",M=new RegExp(";?"+P+": none;")},function(e,t){"use strict";function n(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function r(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&!isNaN(e)}function i(e){return parseInt(e,10)}function a(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=n,t.isFunction=r,t.isNum=o,t["int"]=i,t.dontSetMe=a},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||"undefined"==typeof window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<a.length;n++)if(r(e,a[n])in t)return a[n];return""}function r(e,t){return t?""+t+i(e):e}function o(e,t){return t?"-"+t.toLowerCase()+"-"+e:e}function i(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=n,t.browserPrefixToKey=r,t.browserPrefixToStyle=o;var a=["Moz","Webkit","O","ms"];t["default"]=n()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:p(r);var o=h["default"].findDOMNode(e);if("string"==typeof r){var i=o.ownerDocument,a=i.defaultView,s=void 0;if("parent"===r)s=o.parentNode;else if(s=i.querySelector(r),!s)throw new Error('Bounds selector "'+r+'" could not find an element.');var l=a.getComputedStyle(o),u=a.getComputedStyle(s);r={left:-o.offsetLeft+(0,d["int"])(u.paddingLeft)+(0,d["int"])(l.borderLeftWidth)+(0,d["int"])(l.marginLeft),top:-o.offsetTop+(0,d["int"])(u.paddingTop)+(0,d["int"])(l.borderTopWidth)+(0,d["int"])(l.marginTop),right:(0,m.innerWidth)(s)-(0,m.outerWidth)(o)-o.offsetLeft,bottom:(0,m.innerHeight)(s)-(0,m.outerHeight)(o)-o.offsetTop}}return(0,d.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,d.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,d.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,d.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function i(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]}function a(e){return"both"===e.props.axis||"x"===e.props.axis}function s(e){return"both"===e.props.axis||"y"===e.props.axis}function l(e,t,n){var r="number"==typeof t?(0,m.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=h["default"].findDOMNode(n),i=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,m.offsetXYFromParent)(r||e,i)}function u(e,t,n){var r=e.state,o=!(0,d.isNum)(r.lastX);return o?{node:h["default"].findDOMNode(e),deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:h["default"].findDOMNode(e),deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}}function c(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function p(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=o,t.snapToGrid=i,t.canDragX=a,t.canDragY=s,t.getControlPosition=l,t.createCoreData=u,t.createDraggableData=c;var d=n(6),f=n(3),h=r(f),m=n(5)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){o=!0,i=l}finally{try{!r&&a["return"]&&a["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u),p=n(3),d=r(p),f=n(5),h=n(8),m=n(6),y=n(11),v=r(y),g={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},_=g.mouse,b=function(e){function t(){var e,n,r,a;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.handleDragStart=function(e){if(r.props.onMouseDown(e),!r.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=d["default"].findDOMNode(r),n=t.ownerDocument;if(!(r.props.disabled||!(e.target instanceof n.defaultView.Node)||r.props.handle&&!(0,f.matchesSelectorAndParentsTo)(e.target,r.props.handle,t)||r.props.cancel&&(0,f.matchesSelectorAndParentsTo)(e.target,r.props.cancel,t))){var o=(0,f.getTouchIdentifier)(e);r.setState({touchIdentifier:o});var i=(0,h.getControlPosition)(e,o,r);if(null!=i){var a=i.x,s=i.y,l=(0,h.createCoreData)(r,a,s);(0,v["default"])("DraggableCore: handleDragStart: %j",l),(0,v["default"])("calling",r.props.onStart);var u=r.props.onStart(e,l);u!==!1&&(r.props.enableUserSelectHack&&(0,f.addUserSelectStyles)(n.body),r.setState({dragging:!0,lastX:a,lastY:s}),(0,f.addEvent)(n,_.move,r.handleDrag),(0,f.addEvent)(n,_.stop,r.handleDragStop))}}},r.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=(0,h.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y;if(Array.isArray(r.props.grid)){var i=n-r.state.lastX,a=o-r.state.lastY,l=(0,h.snapToGrid)(r.props.grid,i,a),u=s(l,2);if(i=u[0],a=u[1],!i&&!a)return;n=r.state.lastX+i,o=r.state.lastY+a}var c=(0,h.createCoreData)(r,n,o);(0,v["default"])("DraggableCore: handleDrag: %j",c);var p=r.props.onDrag(e,c);if(p!==!1)r.setState({lastX:n,lastY:o});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(d){var f=document.createEvent("MouseEvents");f.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(f)}}},r.handleDragStop=function(e){if(r.state.dragging){var t=(0,h.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y,i=(0,h.createCoreData)(r,n,o),a=d["default"].findDOMNode(r),s=a.ownerDocument;r.props.enableUserSelectHack&&(0,f.removeUserSelectStyles)(s.body),(0,v["default"])("DraggableCore: handleDragStop: %j",i),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(e,i),(0,v["default"])("DraggableCore: Removing handlers"),(0,f.removeEvent)(s,_.move,r.handleDrag),(0,f.removeEvent)(s,_.stop,r.handleDragStop)}}},r.onMouseDown=function(e){return _=g.mouse,r.handleDragStart(e)},r.onMouseUp=function(e){return _=g.mouse,r.handleDragStop(e)},r.onTouchStart=function(e){return _=g.touch,r.handleDragStart(e)},r.onTouchEnd=function(e){return _=g.touch,r.handleDragStop(e)},a=n,i(r,a)}return a(t,e),l(t,[{key:"componentWillUnmount",value:function n(){var e=d["default"].findDOMNode(this),t=e.ownerDocument;(0,f.removeEvent)(t,g.mouse.move,this.handleDrag),(0,f.removeEvent)(t,g.touch.move,this.handleDrag),(0,f.removeEvent)(t,g.mouse.stop,this.handleDragStop),(0,f.removeEvent)(t,g.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,f.removeUserSelectStyles)(t.body)}},{key:"render",value:function r(){return c["default"].cloneElement(c["default"].Children.only(this.props.children),{style:(0,f.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),t}(c["default"].Component);b.displayName="DraggableCore",b.propTypes={allowAnyClick:u.PropTypes.bool,disabled:u.PropTypes.bool,enableUserSelectHack:u.PropTypes.bool,offsetParent:function x(t,n){if(e.browser&&t[n]&&1!==t[n].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:u.PropTypes.arrayOf(u.PropTypes.number),handle:u.PropTypes.string,cancel:u.PropTypes.string,onStart:u.PropTypes.func,onDrag:u.PropTypes.func,onStop:u.PropTypes.func,onMouseDown:u.PropTypes.func,className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe},b.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function w(){},onDrag:function E(){},onStop:function k(){},onMouseDown:function C(){}},t["default"]=b}).call(t,n(10))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){h&&m&&(h=!1,m.length?f=m.concat(f):y=-1,f.length&&s())}function s(){if(!h){var e=o(a);h=!0;for(var t=f.length;t;){for(m=f,f=[];++y<t;)m&&m[y].run();y=-1,t=f.length}m=null,h=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c=e.exports={},p,d;!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f=[],h=!1,m,y=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];f.push(new l(e,t)),1!==f.length||h||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=u,c.addListener=u,c.once=u,c.off=u,c.removeListener=u,c.removeAllListeners=u,c.emit=u,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){"use strict";function r(){var e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r}])})},{react:181,"react-dom":29}],157:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{dup:51}],158:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{"./reactProdInvariant":179,_process:28,dup:53,"fbjs/lib/invariant":17}],159:[function(e,t,n){(function(n){"use strict";var r=e("object-assign"),o=e("./ReactChildren"),i=e("./ReactComponent"),a=e("./ReactPureComponent"),s=e("./ReactClass"),l=e("./ReactDOMFactories"),u=e("./ReactElement"),c=e("./ReactPropTypes"),p=e("./ReactVersion"),d=e("./onlyChild"),f=e("fbjs/lib/warning"),h=u.createElement,m=u.createFactory,y=u.cloneElement;if("production"!==n.env.NODE_ENV){var v=e("./ReactElementValidator");h=v.createElement,m=v.createFactory,y=v.cloneElement}var g=r;if("production"!==n.env.NODE_ENV){var _=!1;g=function(){return"production"!==n.env.NODE_ENV?f(_,"React.__spread is deprecated and should not be used. Use Object.assign directly or another helper function with similar semantics. You may be seeing this warning due to your compiler. See https://fb.me/react-spread-deprecation for more details."):void 0,_=!0,r.apply(null,arguments)}}var b={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:d},Component:i,PureComponent:a,createElement:h,cloneElement:y,isValidElement:u.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:m,createMixin:function(e){return e},DOM:l,version:p,__spread:g};t.exports=b}).call(this,e("_process"))},{"./ReactChildren":160,"./ReactClass":161,"./ReactComponent":162,"./ReactDOMFactories":165,"./ReactElement":166,"./ReactElementValidator":168,"./ReactPropTypes":171,"./ReactPureComponent":173,"./ReactVersion":174,"./onlyChild":178,_process:28,"fbjs/lib/warning":24,"object-assign":27}],160:[function(e,t,n){"use strict";function r(e){return(""+e).replace(b,"$&/")}function o(e,t){this.func=e,this.context=t,this.count=0}function i(e,t,n){var r=e.func,o=e.context;r.call(o,t,e.count++)}function a(e,t,n){if(null==e)return e;var r=o.getPooled(t,n);v(e,i,r),o.release(r)}function s(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function l(e,t,n){var o=e.result,i=e.keyPrefix,a=e.func,s=e.context,l=a.call(s,t,e.count++);Array.isArray(l)?u(l,o,n,y.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,i+(!l.key||t&&t.key===l.key?"":r(l.key)+"/")+n)),o.push(l))}function u(e,t,n,o,i){var a="";null!=n&&(a=r(n)+"/");var u=s.getPooled(t,a,o,i);v(e,l,u),s.release(u)}function c(e,t,n){if(null==e)return e;var r=[];return u(e,r,null,t,n),r}function p(e,t,n){return null}function d(e,t){return v(e,p,null)}function f(e){var t=[];return u(e,t,null,y.thatReturnsArgument),t}var h=e("./PooledClass"),m=e("./ReactElement"),y=e("fbjs/lib/emptyFunction"),v=e("./traverseAllChildren"),g=h.twoArgumentPooler,_=h.fourArgumentPooler,b=/\/+/g;o.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(o,g),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,_);var x={forEach:a,map:c,mapIntoWithKeyPrefixInternal:u,count:d,toArray:f};t.exports=x},{"./PooledClass":158,"./ReactElement":166,"./traverseAllChildren":180,"fbjs/lib/emptyFunction":9}],161:[function(e,t,n){(function(n){"use strict";function r(e){return e}function o(e,t,r){for(var o in t)t.hasOwnProperty(o)&&("production"!==n.env.NODE_ENV?x("function"==typeof t[o],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactClass",v[r],o):void 0)}function i(e,t){var r=k.hasOwnProperty(t)?k[t]:null;S.hasOwnProperty(t)&&("OVERRIDE_BASE"!==r?"production"!==n.env.NODE_ENV?b(!1,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t):f("73",t):void 0),e&&("DEFINE_MANY"!==r&&"DEFINE_MANY_MERGED"!==r?"production"!==n.env.NODE_ENV?b(!1,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t):f("74",t):void 0)}function a(e,t){if(t){"function"==typeof t?"production"!==n.env.NODE_ENV?b(!1,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."):f("75"):void 0,y.isValidElement(t)?"production"!==n.env.NODE_ENV?b(!1,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):f("76"):void 0;var r=e.prototype,o=r.__reactAutoBindPairs;t.hasOwnProperty(w)&&C.mixins(e,t.mixins);for(var a in t)if(t.hasOwnProperty(a)&&a!==w){var s=t[a],l=r.hasOwnProperty(a);if(i(l,a),C.hasOwnProperty(a))C[a](e,s);else{var p=k.hasOwnProperty(a),d="function"==typeof s,h=d&&!p&&!l&&t.autobind!==!1;if(h)o.push(a,s),r[a]=s;else if(l){var m=k[a];!p||"DEFINE_MANY_MERGED"!==m&&"DEFINE_MANY"!==m?"production"!==n.env.NODE_ENV?b(!1,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,a):f("77",m,a):void 0,"DEFINE_MANY_MERGED"===m?r[a]=u(r[a],s):"DEFINE_MANY"===m&&(r[a]=c(r[a],s))}else r[a]=s,"production"!==n.env.NODE_ENV&&"function"==typeof s&&t.displayName&&(r[a].displayName=t.displayName+"_"+a)}}}else if("production"!==n.env.NODE_ENV){var v=typeof t,g="object"===v&&null!==t;"production"!==n.env.NODE_ENV?x(g,"%s: You're attempting to include a mixin that is either null or not an object. Check the mixins included by the component, as well as any mixins they include themselves. Expected object but got %s.",e.displayName||"ReactClass",null===t?null:v):void 0}}function s(e,t){if(t)for(var r in t){var o=t[r];if(t.hasOwnProperty(r)){var i=r in C;i?"production"!==n.env.NODE_ENV?b(!1,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):f("78",r):void 0;var a=r in e;a?"production"!==n.env.NODE_ENV?b(!1,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):f("79",r):void 0,e[r]=o}}}function l(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:"production"!==n.env.NODE_ENV?b(!1,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):f("80");for(var r in t)t.hasOwnProperty(r)&&(void 0!==e[r]?"production"!==n.env.NODE_ENV?b(!1,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):f("81",r):void 0,e[r]=t[r]);return e}function u(e,t){return function n(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var o={};return l(o,n),l(o,r),o}}function c(e,t){return function n(){e.apply(this,arguments),t.apply(this,arguments)}}function p(e,t){var r=t.bind(e);if("production"!==n.env.NODE_ENV){r.__reactBoundContext=e,r.__reactBoundMethod=t,r.__reactBoundArguments=null;var o=e.constructor.displayName,i=r.bind;r.bind=function(a){for(var s=arguments.length,l=Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];if(a!==e&&null!==a)"production"!==n.env.NODE_ENV?x(!1,"bind(): React component methods may only be bound to the component instance. See %s",o):void 0;else if(!l.length)return"production"!==n.env.NODE_ENV?x(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",o):void 0,r;var c=i.apply(r,arguments);return c.__reactBoundContext=e,c.__reactBoundMethod=t,c.__reactBoundArguments=l,c}}return r}function d(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[r]=p(e,o)}}var f=e("./reactProdInvariant"),h=e("object-assign"),m=e("./ReactComponent"),y=e("./ReactElement"),v=e("./ReactPropTypeLocationNames"),g=e("./ReactNoopUpdateQueue"),_=e("fbjs/lib/emptyObject"),b=e("fbjs/lib/invariant"),x=e("fbjs/lib/warning"),w="mixins",E=[],k={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},C={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)a(e,t[n])},childContextTypes:function(e,t){"production"!==n.env.NODE_ENV&&o(e,t,"childContext"),e.childContextTypes=h({},e.childContextTypes,t)},contextTypes:function(e,t){"production"!==n.env.NODE_ENV&&o(e,t,"context"),e.contextTypes=h({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=u(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){"production"!==n.env.NODE_ENV&&o(e,t,"prop"),e.propTypes=h({},e.propTypes,t)},statics:function(e,t){s(e,t)},autobind:function(){}},S={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},P=function(){};h(P.prototype,m.prototype,S);var O={createClass:function(e){var t=r(function(e,r,o){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?x(this instanceof t,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"):void 0),this.__reactAutoBindPairs.length&&d(this),this.props=e,this.context=r,this.refs=_,this.updater=o||g,this.state=null;var i=this.getInitialState?this.getInitialState():null;"production"!==n.env.NODE_ENV&&void 0===i&&this.getInitialState._isMockFunction&&(i=null),"object"!=typeof i||Array.isArray(i)?"production"!==n.env.NODE_ENV?b(!1,"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"):f("82",t.displayName||"ReactCompositeComponent"):void 0,this.state=i});t.prototype=new P,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],E.forEach(a.bind(null,t)),a(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),"production"!==n.env.NODE_ENV&&(t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved={}),t.prototype.getInitialState&&(t.prototype.getInitialState.isReactClassApproved={})),t.prototype.render?void 0:"production"!==n.env.NODE_ENV?b(!1,"createClass(...): Class specification must implement a `render` method."):f("83"),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV?x(!t.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",e.displayName||"A component"):void 0,"production"!==n.env.NODE_ENV?x(!t.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",e.displayName||"A component"):void 0);for(var o in k)t.prototype[o]||(t.prototype[o]=null);return t},injection:{injectMixin:function(e){E.push(e)}}};t.exports=O}).call(this,e("_process"))},{"./ReactComponent":162,"./ReactElement":166,"./ReactNoopUpdateQueue":169,"./ReactPropTypeLocationNames":170,"./reactProdInvariant":179,_process:28,"fbjs/lib/emptyObject":10,"fbjs/lib/invariant":17,"fbjs/lib/warning":24,"object-assign":27}],162:[function(e,t,n){(function(n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=s,this.updater=n||i}var o=e("./reactProdInvariant"),i=e("./ReactNoopUpdateQueue"),a=e("./canDefineProperty"),s=e("fbjs/lib/emptyObject"),l=e("fbjs/lib/invariant"),u=e("fbjs/lib/warning");if(r.prototype.isReactComponent={},r.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?"production"!==n.env.NODE_ENV?l(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):o("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},r.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},"production"!==n.env.NODE_ENV){var c={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},p=function(e,t){a&&Object.defineProperty(r.prototype,e,{get:function(){"production"!==n.env.NODE_ENV?u(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1]):void 0}})};for(var d in c)c.hasOwnProperty(d)&&p(d,c[d])}t.exports=r}).call(this,e("_process"))},{"./ReactNoopUpdateQueue":169,"./canDefineProperty":175,"./reactProdInvariant":179,_process:28,"fbjs/lib/emptyObject":10,"fbjs/lib/invariant":17,"fbjs/lib/warning":24}],163:[function(e,t,n){(function(n){"use strict";function r(e){var t=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+t.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var o=t.call(e);return r.test(o)}catch(i){return!1}}function o(e){var t=h(e);if(t){var n=t.childIDs;m(e),n.forEach(o)}}function i(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}function a(e){return null==e?"#empty":"string"==typeof e||"number"==typeof e?"#text":"string"==typeof e.type?e.type:e.type.displayName||e.type.name||"Unknown"}function s(e){var t=P.getDisplayName(e),r=P.getElement(e),o=P.getOwnerID(e),a;return o&&(a=P.getDisplayName(o)),"production"!==n.env.NODE_ENV?p(r,"ReactComponentTreeHook: Missing React element for debugID %s when building stack",e):void 0,i(t,r&&r._source,a)}var l=e("./reactProdInvariant"),u=e("./ReactCurrentOwner"),c=e("fbjs/lib/invariant"),p=e("fbjs/lib/warning"),d="function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys),f,h,m,y,v,g,_;
if(d){var b=new Map,x=new Set;f=function(e,t){b.set(e,t)},h=function(e){return b.get(e)},m=function(e){b["delete"](e)},y=function(){return Array.from(b.keys())},v=function(e){x.add(e)},g=function(e){x["delete"](e)},_=function(){return Array.from(x.keys())}}else{var w={},E={},k=function(e){return"."+e},C=function(e){return parseInt(e.substr(1),10)};f=function(e,t){var n=k(e);w[n]=t},h=function(e){var t=k(e);return w[t]},m=function(e){var t=k(e);delete w[t]},y=function(){return Object.keys(w).map(C)},v=function(e){var t=k(e);E[t]=!0},g=function(e){var t=k(e);delete E[t]},_=function(){return Object.keys(E).map(C)}}var S=[],P={onSetChildren:function(e,t){var r=h(e);r?void 0:"production"!==n.env.NODE_ENV?c(!1,"Item must have been set"):l("144"),r.childIDs=t;for(var o=0;o<t.length;o++){var i=t[o],a=h(i);a?void 0:"production"!==n.env.NODE_ENV?c(!1,"Expected hook events to fire for the child before its parent includes it in onSetChildren()."):l("140"),null==a.childIDs&&"object"==typeof a.element&&null!=a.element?"production"!==n.env.NODE_ENV?c(!1,"Expected onSetChildren() to fire for a container child before its parent includes it in onSetChildren()."):l("141"):void 0,a.isMounted?void 0:"production"!==n.env.NODE_ENV?c(!1,"Expected onMountComponent() to fire for the child before its parent includes it in onSetChildren()."):l("71"),null==a.parentID&&(a.parentID=e),a.parentID!==e?"production"!==n.env.NODE_ENV?c(!1,"Expected onBeforeMountComponent() parent and onSetChildren() to be consistent (%s has parents %s and %s).",i,a.parentID,e):l("142",i,a.parentID,e):void 0}},onBeforeMountComponent:function(e,t,n){var r={element:t,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0};f(e,r)},onBeforeUpdateComponent:function(e,t){var n=h(e);n&&n.isMounted&&(n.element=t)},onMountComponent:function(e){var t=h(e);t?void 0:"production"!==n.env.NODE_ENV?c(!1,"Item must have been set"):l("144"),t.isMounted=!0;var r=0===t.parentID;r&&v(e)},onUpdateComponent:function(e){var t=h(e);t&&t.isMounted&&t.updateCount++},onUnmountComponent:function(e){var t=h(e);if(t){t.isMounted=!1;var n=0===t.parentID;n&&g(e)}S.push(e)},purgeUnmountedComponents:function(){if(!P._preventPurging){for(var e=0;e<S.length;e++){var t=S[e];o(t)}S.length=0}},isMounted:function(e){var t=h(e);return!!t&&t.isMounted},getCurrentStackAddendum:function(e){var t="";if(e){var n=a(e),r=e._owner;t+=i(n,e._source,r&&r.getName())}var o=u.current,s=o&&o._debugID;return t+=P.getStackAddendumByID(s)},getStackAddendumByID:function(e){for(var t="";e;)t+=s(e),e=P.getParentID(e);return t},getChildIDs:function(e){var t=h(e);return t?t.childIDs:[]},getDisplayName:function(e){var t=P.getElement(e);return t?a(t):null},getElement:function(e){var t=h(e);return t?t.element:null},getOwnerID:function(e){var t=P.getElement(e);return t&&t._owner?t._owner._debugID:null},getParentID:function(e){var t=h(e);return t?t.parentID:null},getSource:function(e){var t=h(e),n=t?t.element:null,r=null!=n?n._source:null;return r},getText:function(e){var t=P.getElement(e);return"string"==typeof t?t:"number"==typeof t?""+t:null},getUpdateCount:function(e){var t=h(e);return t?t.updateCount:0},getRootIDs:_,getRegisteredIDs:y};t.exports=P}).call(this,e("_process"))},{"./ReactCurrentOwner":164,"./reactProdInvariant":179,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24}],164:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],165:[function(e,t,n){(function(n){"use strict";var r=e("./ReactElement"),o=r.createFactory;if("production"!==n.env.NODE_ENV){var i=e("./ReactElementValidator");o=i.createFactory}var a={a:o("a"),abbr:o("abbr"),address:o("address"),area:o("area"),article:o("article"),aside:o("aside"),audio:o("audio"),b:o("b"),base:o("base"),bdi:o("bdi"),bdo:o("bdo"),big:o("big"),blockquote:o("blockquote"),body:o("body"),br:o("br"),button:o("button"),canvas:o("canvas"),caption:o("caption"),cite:o("cite"),code:o("code"),col:o("col"),colgroup:o("colgroup"),data:o("data"),datalist:o("datalist"),dd:o("dd"),del:o("del"),details:o("details"),dfn:o("dfn"),dialog:o("dialog"),div:o("div"),dl:o("dl"),dt:o("dt"),em:o("em"),embed:o("embed"),fieldset:o("fieldset"),figcaption:o("figcaption"),figure:o("figure"),footer:o("footer"),form:o("form"),h1:o("h1"),h2:o("h2"),h3:o("h3"),h4:o("h4"),h5:o("h5"),h6:o("h6"),head:o("head"),header:o("header"),hgroup:o("hgroup"),hr:o("hr"),html:o("html"),i:o("i"),iframe:o("iframe"),img:o("img"),input:o("input"),ins:o("ins"),kbd:o("kbd"),keygen:o("keygen"),label:o("label"),legend:o("legend"),li:o("li"),link:o("link"),main:o("main"),map:o("map"),mark:o("mark"),menu:o("menu"),menuitem:o("menuitem"),meta:o("meta"),meter:o("meter"),nav:o("nav"),noscript:o("noscript"),object:o("object"),ol:o("ol"),optgroup:o("optgroup"),option:o("option"),output:o("output"),p:o("p"),param:o("param"),picture:o("picture"),pre:o("pre"),progress:o("progress"),q:o("q"),rp:o("rp"),rt:o("rt"),ruby:o("ruby"),s:o("s"),samp:o("samp"),script:o("script"),section:o("section"),select:o("select"),small:o("small"),source:o("source"),span:o("span"),strong:o("strong"),style:o("style"),sub:o("sub"),summary:o("summary"),sup:o("sup"),table:o("table"),tbody:o("tbody"),td:o("td"),textarea:o("textarea"),tfoot:o("tfoot"),th:o("th"),thead:o("thead"),time:o("time"),title:o("title"),tr:o("tr"),track:o("track"),u:o("u"),ul:o("ul"),"var":o("var"),video:o("video"),wbr:o("wbr"),circle:o("circle"),clipPath:o("clipPath"),defs:o("defs"),ellipse:o("ellipse"),g:o("g"),image:o("image"),line:o("line"),linearGradient:o("linearGradient"),mask:o("mask"),path:o("path"),pattern:o("pattern"),polygon:o("polygon"),polyline:o("polyline"),radialGradient:o("radialGradient"),rect:o("rect"),stop:o("stop"),svg:o("svg"),text:o("text"),tspan:o("tspan")};t.exports=a}).call(this,e("_process"))},{"./ReactElement":166,"./ReactElementValidator":168,_process:28}],166:[function(e,t,n){(function(n){"use strict";function r(e){if("production"!==n.env.NODE_ENV&&p.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function o(e){if("production"!==n.env.NODE_ENV&&p.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}function i(e,t){var r=function(){h||(h=!0,"production"!==n.env.NODE_ENV?u(!1,"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t):void 0)};r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}function a(e,t){var r=function(){m||(m=!0,"production"!==n.env.NODE_ENV?u(!1,"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t):void 0)};r.isReactWarning=!0,Object.defineProperty(e,"ref",{get:r,configurable:!0})}var s=e("object-assign"),l=e("./ReactCurrentOwner"),u=e("fbjs/lib/warning"),c=e("./canDefineProperty"),p=Object.prototype.hasOwnProperty,d=e("./ReactElementSymbol"),f={key:!0,ref:!0,__self:!0,__source:!0},h,m,y=function(e,t,r,o,i,a,s){var l={$$typeof:d,type:e,key:t,ref:r,props:s,_owner:a};return"production"!==n.env.NODE_ENV&&(l._store={},c?(Object.defineProperty(l._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(l,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(l,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i})):(l._store.validated=!1,l._self=o,l._source=i),Object.freeze&&(Object.freeze(l.props),Object.freeze(l))),l};y.createElement=function(e,t,s){var u,c={},h=null,m=null,v=null,g=null;if(null!=t){r(t)&&(m=t.ref),o(t)&&(h=""+t.key),v=void 0===t.__self?null:t.__self,g=void 0===t.__source?null:t.__source;for(u in t)p.call(t,u)&&!f.hasOwnProperty(u)&&(c[u]=t[u])}var _=arguments.length-2;if(1===_)c.children=s;else if(_>1){for(var b=Array(_),x=0;x<_;x++)b[x]=arguments[x+2];"production"!==n.env.NODE_ENV&&Object.freeze&&Object.freeze(b),c.children=b}if(e&&e.defaultProps){var w=e.defaultProps;for(u in w)void 0===c[u]&&(c[u]=w[u])}if("production"!==n.env.NODE_ENV&&(h||m)&&("undefined"==typeof c.$$typeof||c.$$typeof!==d)){var E="function"==typeof e?e.displayName||e.name||"Unknown":e;h&&i(c,E),m&&a(c,E)}return y(e,h,m,v,g,l.current,c)},y.createFactory=function(e){var t=y.createElement.bind(null,e);return t.type=e,t},y.cloneAndReplaceKey=function(e,t){var n=y(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},y.cloneElement=function(e,t,n){var i,a=s({},e.props),u=e.key,c=e.ref,d=e._self,h=e._source,m=e._owner;if(null!=t){r(t)&&(c=t.ref,m=l.current),o(t)&&(u=""+t.key);var v;e.type&&e.type.defaultProps&&(v=e.type.defaultProps);for(i in t)p.call(t,i)&&!f.hasOwnProperty(i)&&(void 0===t[i]&&void 0!==v?a[i]=v[i]:a[i]=t[i])}var g=arguments.length-2;if(1===g)a.children=n;else if(g>1){for(var _=Array(g),b=0;b<g;b++)_[b]=arguments[b+2];a.children=_}return y(e.type,u,c,d,h,m,a)},y.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===d},t.exports=y}).call(this,e("_process"))},{"./ReactCurrentOwner":164,"./ReactElementSymbol":167,"./canDefineProperty":175,_process:28,"fbjs/lib/warning":24,"object-assign":27}],167:[function(e,t,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],168:[function(e,t,n){(function(n){"use strict";function r(){if(l.current){var e=l.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function o(e){var t=r();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t=" Check the top-level render call using <"+n+">.")}return t}function i(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=m.uniqueKey||(m.uniqueKey={}),i=o(t);if(!r[i]){r[i]=!0;var a="";e&&e._owner&&e._owner!==l.current&&(a=" It was passed a child from "+e._owner.getName()+"."),"production"!==n.env.NODE_ENV?h(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.%s',i,a,u.getCurrentStackAddendum(e)):void 0}}}function a(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];c.isValidElement(r)&&i(r,t)}else if(c.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var o=f(e);if(o&&o!==e.entries)for(var a=o.call(e),s;!(s=a.next()).done;)c.isValidElement(s.value)&&i(s.value,t)}}function s(e){var t=e.type;if("function"==typeof t){var r=t.displayName||t.name;t.propTypes&&p(t.propTypes,e.props,"prop",r,e,null),"function"==typeof t.getDefaultProps&&("production"!==n.env.NODE_ENV?h(t.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."):void 0)}}var l=e("./ReactCurrentOwner"),u=e("./ReactComponentTreeHook"),c=e("./ReactElement"),p=e("./checkReactTypeSpec"),d=e("./canDefineProperty"),f=e("./getIteratorFn"),h=e("fbjs/lib/warning"),m={},y={createElement:function(e,t,o){var i="string"==typeof e||"function"==typeof e;if(!i&&"function"!=typeof e&&"string"!=typeof e){var l="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(l+=" You likely forgot to export your component from the file it's defined in."),l+=r(),"production"!==n.env.NODE_ENV?h(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==e?e:typeof e,l):void 0}var u=c.createElement.apply(this,arguments);if(null==u)return u;if(i)for(var p=2;p<arguments.length;p++)a(arguments[p],e);return s(u),u},createFactory:function(e){var t=y.createElement.bind(null,e);return t.type=e,"production"!==n.env.NODE_ENV&&d&&Object.defineProperty(t,"type",{enumerable:!1,get:function(){return"production"!==n.env.NODE_ENV?h(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."):void 0,Object.defineProperty(this,"type",{value:e}),e}}),t},cloneElement:function(e,t,n){for(var r=c.cloneElement.apply(this,arguments),o=2;o<arguments.length;o++)a(arguments[o],r.type);return s(r),r}};t.exports=y}).call(this,e("_process"))},{"./ReactComponentTreeHook":163,"./ReactCurrentOwner":164,"./ReactElement":166,"./canDefineProperty":175,"./checkReactTypeSpec":176,"./getIteratorFn":177,_process:28,"fbjs/lib/warning":24}],169:[function(e,t,n){(function(n){"use strict";function r(e,t){if("production"!==n.env.NODE_ENV){var r=e.constructor;"production"!==n.env.NODE_ENV?o(!1,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",t,t,r&&(r.displayName||r.name)||"ReactClass"):void 0}}var o=e("fbjs/lib/warning"),i={isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){r(e,"forceUpdate")},enqueueReplaceState:function(e,t){r(e,"replaceState")},enqueueSetState:function(e,t){r(e,"setState")}};t.exports=i}).call(this,e("_process"))},{_process:28,"fbjs/lib/warning":24}],170:[function(e,t,n){arguments[4][98][0].apply(n,arguments)},{_process:28,dup:98}],171:[function(e,t,n){(function(n){"use strict";function r(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function o(e){this.message=e,this.stack=""}function i(e){function t(t,i,a,s,l,u,c){if(s=s||P,u=u||a,"production"!==n.env.NODE_ENV&&c!==E&&"undefined"!=typeof console){var p=s+":"+a;r[p]||("production"!==n.env.NODE_ENV?S(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will not work in production with the next major version. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",u,s):void 0,r[p]=!0)}if(null==i[a]){var d=w[l];return t?new o(null===i[a]?"The "+d+" `"+u+"` is marked as required "+("in `"+s+"`, but its value is `null`."):"The "+d+" `"+u+"` is marked as required in "+("`"+s+"`, but its value is `undefined`.")):null}return e(i,a,s,l,u)}if("production"!==n.env.NODE_ENV)var r={};var i=t.bind(null,!1);return i.isRequired=t.bind(null,!0),i}function a(e){function t(t,n,r,i,a,s){var l=t[n],u=g(l);if(u!==e){var c=w[i],p=_(l);return new o("Invalid "+c+" `"+a+"` of type "+("`"+p+"` supplied to `"+r+"`, expected ")+("`"+e+"`."))}return null}return i(t)}function s(){return i(k.thatReturns(null))}function l(e){function t(t,n,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var l=w[i],u=g(s);return new o("Invalid "+l+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var c=0;c<s.length;c++){var p=e(s,c,r,i,a+"["+c+"]",E);if(p instanceof Error)return p}return null}return i(t)}function u(){function e(e,t,n,r,i){var a=e[t];if(!x.isValidElement(a)){var s=w[r],l=g(a);return new o("Invalid "+s+" `"+i+"` of type "+("`"+l+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return i(e)}function c(e){function t(t,n,r,i,a){if(!(t[n]instanceof e)){var s=w[i],l=e.name||P,u=b(t[n]);return new o("Invalid "+s+" `"+a+"` of type "+("`"+u+"` supplied to `"+r+"`, expected ")+("instance of `"+l+"`."))}return null}return i(t)}function p(e){function t(t,n,i,a,s){for(var l=t[n],u=0;u<e.length;u++)if(r(l,e[u]))return null;var c=w[a],p=JSON.stringify(e);return new o("Invalid "+c+" `"+s+"` of value `"+l+"` "+("supplied to `"+i+"`, expected one of "+p+"."))}return Array.isArray(e)?i(t):("production"!==n.env.NODE_ENV?S(!1,"Invalid argument supplied to oneOf, expected an instance of array."):void 0,k.thatReturnsNull)}function d(e){function t(t,n,r,i,a){if("function"!=typeof e)return new o("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],l=g(s);if("object"!==l){var u=w[i];return new o("Invalid "+u+" `"+a+"` of type "+("`"+l+"` supplied to `"+r+"`, expected an object."))}for(var c in s)if(s.hasOwnProperty(c)){var p=e(s,c,r,i,a+"."+c,E);if(p instanceof Error)return p}return null}return i(t)}function f(e){function t(t,n,r,i,a){for(var s=0;s<e.length;s++){var l=e[s];if(null==l(t,n,r,i,a,E))return null}var u=w[i];return new o("Invalid "+u+" `"+a+"` supplied to "+("`"+r+"`."))}return Array.isArray(e)?i(t):("production"!==n.env.NODE_ENV?S(!1,"Invalid argument supplied to oneOfType, expected an instance of array."):void 0,k.thatReturnsNull)}function h(){function e(e,t,n,r,i){if(!y(e[t])){var a=w[r];return new o("Invalid "+a+" `"+i+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return i(e)}function m(e){function t(t,n,r,i,a){var s=t[n],l=g(s);if("object"!==l){var u=w[i];return new o("Invalid "+u+" `"+a+"` of type `"+l+"` "+("supplied to `"+r+"`, expected `object`."))}for(var c in e){var p=e[c];if(p){var d=p(s,c,r,i,a+"."+c,E);if(d)return d}}return null}return i(t)}function y(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(y);if(null===e||x.isValidElement(e))return!0;var t=C(e);if(!t)return!1;var n=t.call(e),r;if(t!==e.entries){for(;!(r=n.next()).done;)if(!y(r.value))return!1}else for(;!(r=n.next()).done;){var o=r.value;if(o&&!y(o[1]))return!1}return!0;default:return!1}}function v(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":v(t,e)?"symbol":t}function _(e){var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){return e.constructor&&e.constructor.name?e.constructor.name:P}var x=e("./ReactElement"),w=e("./ReactPropTypeLocationNames"),E=e("./ReactPropTypesSecret"),k=e("fbjs/lib/emptyFunction"),C=e("./getIteratorFn"),S=e("fbjs/lib/warning"),P="<<anonymous>>",O={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:l,element:u(),instanceOf:c,node:h(),objectOf:d,oneOf:p,oneOfType:f,shape:m};o.prototype=Error.prototype,t.exports=O}).call(this,e("_process"))},{"./ReactElement":166,"./ReactPropTypeLocationNames":170,"./ReactPropTypesSecret":172,"./getIteratorFn":177,_process:28,"fbjs/lib/emptyFunction":9,"fbjs/lib/warning":24}],172:[function(e,t,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],173:[function(e,t,n){"use strict";function r(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||s}function o(){}var i=e("object-assign"),a=e("./ReactComponent"),s=e("./ReactNoopUpdateQueue"),l=e("fbjs/lib/emptyObject");o.prototype=a.prototype,r.prototype=new o,r.prototype.constructor=r,i(r.prototype,a.prototype),r.prototype.isPureReactComponent=!0,t.exports=r},{"./ReactComponent":162,"./ReactNoopUpdateQueue":169,"fbjs/lib/emptyObject":10,"object-assign":27}],174:[function(e,t,n){arguments[4][107][0].apply(n,arguments)},{dup:107}],175:[function(e,t,n){(function(e){"use strict";var n=!1;if("production"!==e.env.NODE_ENV)try{Object.defineProperty({},"x",{get:function(){}}),n=!0}catch(r){}t.exports=n}).call(this,e("_process"))},{_process:28}],176:[function(e,t,n){(function(n){"use strict";function r(t,r,p,d,f,h){for(var m in t)if(t.hasOwnProperty(m)){var y;try{"function"!=typeof t[m]?"production"!==n.env.NODE_ENV?s(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",d||"React class",i[p],m):o("84",d||"React class",i[p],m):void 0,y=t[m](r,m,d,p,null,a)}catch(v){y=v}if("production"!==n.env.NODE_ENV?l(!y||y instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",d||"React class",i[p],m,typeof y):void 0,y instanceof Error&&!(y.message in c)){c[y.message]=!0;var g="";"production"!==n.env.NODE_ENV&&(u||(u=e("./ReactComponentTreeHook")),null!==h?g=u.getStackAddendumByID(h):null!==f&&(g=u.getCurrentStackAddendum(f))),"production"!==n.env.NODE_ENV?l(!1,"Failed %s type: %s%s",p,y.message,g):void 0}}}var o=e("./reactProdInvariant"),i=e("./ReactPropTypeLocationNames"),a=e("./ReactPropTypesSecret"),s=e("fbjs/lib/invariant"),l=e("fbjs/lib/warning"),u;"undefined"!=typeof n&&n.env&&"test"===n.env.NODE_ENV&&(u=e("./ReactComponentTreeHook"));var c={};t.exports=r}).call(this,e("_process"))},{"./ReactComponentTreeHook":163,"./ReactPropTypeLocationNames":170,"./ReactPropTypesSecret":172,"./reactProdInvariant":179,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24}],177:[function(e,t,n){arguments[4][140][0].apply(n,arguments)},{dup:140}],178:[function(e,t,n){(function(n){"use strict";function r(e){return i.isValidElement(e)?void 0:"production"!==n.env.NODE_ENV?a(!1,"React.Children.only expected to receive a single React element child."):o("143"),e}var o=e("./reactProdInvariant"),i=e("./ReactElement"),a=e("fbjs/lib/invariant");t.exports=r}).call(this,e("_process"))},{"./ReactElement":166,"./reactProdInvariant":179,_process:28,"fbjs/lib/invariant":17}],179:[function(e,t,n){arguments[4][149][0].apply(n,arguments)},{dup:149}],180:[function(e,t,n){(function(n){"use strict";function r(e,t){return e&&"object"==typeof e&&null!=e.key?p.escape(e.key):t.toString(36)}function o(e,t,i,y){var v=typeof e;if("undefined"!==v&&"boolean"!==v||(e=null),null===e||"string"===v||"number"===v||"object"===v&&e.$$typeof===l)return i(y,e,""===t?f+r(e,0):t),1;var g,_,b=0,x=""===t?f:t+h;if(Array.isArray(e))for(var w=0;w<e.length;w++)g=e[w],_=x+r(g,w),b+=o(g,_,i,y);else{var E=u(e);if(E){var k=E.call(e),C;if(E!==e.entries)for(var S=0;!(C=k.next()).done;)g=C.value,_=x+r(g,S++),b+=o(g,_,i,y);else{if("production"!==n.env.NODE_ENV){var P="";if(s.current){var O=s.current.getName();O&&(P=" Check the render method of `"+O+"`.")}"production"!==n.env.NODE_ENV?d(m,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead.%s",P):void 0,m=!0}for(;!(C=k.next()).done;){var M=C.value;M&&(g=M[1],_=x+p.escape(M[0])+h+r(g,0),b+=o(g,_,i,y))}}}else if("object"===v){var D="";if("production"!==n.env.NODE_ENV&&(D=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",e._isReactElement&&(D=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),s.current)){var T=s.current.getName();T&&(D+=" Check the render method of `"+T+"`.")}var N=String(e);"production"!==n.env.NODE_ENV?c(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===N?"object with keys {"+Object.keys(e).join(", ")+"}":N,D):a("31","[object Object]"===N?"object with keys {"+Object.keys(e).join(", ")+"}":N,D)}}return b}function i(e,t,n){return null==e?0:o(e,"",t,n)}var a=e("./reactProdInvariant"),s=e("./ReactCurrentOwner"),l=e("./ReactElementSymbol"),u=e("./getIteratorFn"),c=e("fbjs/lib/invariant"),p=e("./KeyEscapeUtils"),d=e("fbjs/lib/warning"),f=".",h=":",m=!1;t.exports=i}).call(this,e("_process"))},{"./KeyEscapeUtils":157,"./ReactCurrentOwner":164,"./ReactElementSymbol":167,"./getIteratorFn":177,"./reactProdInvariant":179,_process:28,"fbjs/lib/invariant":17,"fbjs/lib/warning":24}],181:[function(e,t,n){"use strict";t.exports=e("./lib/React")},{"./lib/React":159}],182:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function v(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../components/mapLayouts/SingleMap"),p=r(c),d=e("../components/mapLayouts/SwipeMap"),f=r(d),h=e("../components/mapLayouts/SideBySideMap"),m=r(h),y=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={leftMapDefinition:this.props.leftMapDefinition,rightMapDefinition:this.props.rightMapDefinition}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({leftMapDefinition:e.leftMapDefinition,rightMapDefinition:e.rightMapDefinition})}},{key:"render",value:function r(){return this.state.leftMapDefinition.swipe?u["default"].createElement(f["default"],{leftMapDefinition:this.state.leftMapDefinition,rightMapDefinition:this.state.rightMapDefinition}):this.state.leftMapDefinition.sideBySide?u["default"].createElement(m["default"],{leftMapDefinition:this.state.leftMapDefinition,rightMapDefinition:this.state.rightMapDefinition}):u["default"].createElement(p["default"],{mapDefinition:this.state.leftMapDefinition})}}]),t}(u["default"].Component);n["default"]=y,t.exports=n["default"]},{"../components/mapLayouts/SideBySideMap":201,"../components/mapLayouts/SingleMap":202,"../components/mapLayouts/SwipeMap":203,react:181}],183:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function v(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../components/mapLayouts/SingleMap"),p=r(c),d=e("../components/mapLayouts/SwipeMap"),f=r(d),h=e("../components/mapLayouts/SideBySideMap"),m=r(h),y=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),console.log("constructor"),console.log(e),this.state=this.parseProps(e)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){console.log("componentWillReceiveProps"),console.log(e),this.setState(this.parseProps(e))}},{key:"render",value:function r(){return console.log("render"),console.log(this.state),this.state.leftMapDefinition?this.state.leftMapDefinition.swipe?u["default"].createElement(f["default"],{leftMapDefinition:this.state.leftMapDefinition,rightMapDefinition:this.state.rightMapDefinition}):this.state.leftMapDefinition.sideBySide?u["default"].createElement(m["default"],{leftMapDefinition:this.state.leftMapDefinition,rightMapDefinition:this.state.rightMapDefinition}):u["default"].createElement(p["default"],{mapDefinition:this.state.leftMapDefinition}):null}},{key:"parseProps",value:function l(e){console.log("parsenewProps"),console.log(e);var t=e.mapDefinitions&&e.mapDefinitions[0]?JSON.parse(JSON.stringify(e.mapDefinitions[0])):null;t&&(t.container="shadedleft",t.layout=void 0!==e.layouts&&e.layouts.length>0?e.layouts[0]:null,t.swipe=void 0!==e.swipe&&e.swipe,t.sideBySide=e.sideBySide);var n=e.mapDefinitions&&e.mapDefinitions[1]?JSON.parse(JSON.stringify(e.mapDefinitions[1])):null;return n&&(n.container="shadedright",n.layout=void 0!==e.layouts&&e.layouts.length>0?e.layouts[1]:null),console.log({leftMapDefinition:t,rightMapDefinition:n}),JSON.parse(JSON.stringify({leftMapDefinition:t,rightMapDefinition:n}))}}]),t}(u["default"].Component);n["default"]=y,t.exports=n["default"]},{"../components/mapLayouts/SideBySideMap":201,"../components/mapLayouts/SingleMap":202,"../components/mapLayouts/SwipeMap":203,react:181}],184:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ruleSets:null,mobileLayout:!1,map:this.props.map,mapDefinition:this.props.mapDefinition,additionalContent:this.props.additionalContent,title:this.props.title,show:!!this.props.additionalContent.initialOpened&&this.props.additionalContent.initialOpened,contentHTML:this.props.additionalContent.contentHTML,repositioned:!1,repositionTop:0,repositionBottom:0},this.onToggleSidebarEvent=this.onToggleSidebar.bind(this),this.timer={}}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){}},{key:"componentWillReceiveProps",value:function r(e){this.setState({map:e.map,mapDefinition:e.mapDefinition,additionalContent:e.additionalContent})}},{key:"componentWillUnmount",value:function l(){this.state.map.remove()}},{key:"componentDidUpdate",value:function c(){var e=this;(window.innerWidth<=480&&!this.state.mobileLayout||window.innerWidth>480&&this.state.mobileLayout)&&this.setState({mobileLayout:!this.state.mobileLayout}),this.state.map&&(this.state.map.fire("addcontentpopuped",{show:this.state.show}),this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".swipe-header").length>0?this.state.map.on("swipeLayoutLoaded",function(){e.repositionTop("swipe")}):this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".header-swipe").length>0?this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("single1")}):this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".header-single").length>0?this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".map-overlay-container.right").length>0?this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("zoomControl")}):this.state.map.on("singleLayoutLoaded",function(){
e.repositionTop("single2")}):this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".changeovertime-slider-container").length>0&&this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("changeovertime")}))}},{key:"onToggleSidebar",value:function p(){this.setState({show:!this.state.show})}},{key:"onNext",value:function d(){this.setState({show:!1})}},{key:"render",value:function f(){var e=this.state.additionalContent,t=this.state.show,n={};return this.state.repositioned&&this.state.repositionTop>0&&(n.top=this.state.repositionTop),this.state.show?u["default"].createElement("div",{className:"additional-content-container"+(t?" active":"")},u["default"].createElement("div",{className:"modal-background"}),u["default"].createElement("div",{tabIndex:"0",className:"content-overlay","aria-label":"Content description"},u["default"].createElement("div",{className:"title"},this.state.title),u["default"].createElement("div",{className:"content",id:"additional-content-container"},u["default"].createElement("div",{id:"additional-content-content-body",dangerouslySetInnerHTML:{__html:this.state.contentHTML}}),u["default"].createElement("div",{className:"mui-btn mui-btn--primary",onClick:this.onNext.bind(this)},"OK, GOT IT")))):e&&(e.title||e.contentHTML)?u["default"].createElement("div",{className:"additional-content legend-button "+e.position,style:n,onClick:this.onToggleSidebarEvent,tabIndex:"2","aria-label":"Additional description box"},u["default"].createElement("div",{className:"icon button info"})):void 0}},{key:"repositionTop",value:function h(e){if("swipe"===e){var t=document.querySelectorAll(".swipe-header")[0].clientHeight;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("single1"===e){var t=document.querySelectorAll(".header-swipe")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("single2"===e){var t=document.querySelectorAll(".header-single")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("changeovertime"===e){var t=document.querySelectorAll(".changeovertime-slider-container")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("zoomControl"===e){var t=document.querySelectorAll(".map-overlay-container.right")[0].clientHeight+75;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],185:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("react-draggable"),p=r(c),d=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={title:this.props.variablePicker.title,value:"var1495",render:!0,tabBarWidth:0,tabBarBodyWidth:0,leftMove:0,buttonIndex:0,scrollable:void 0!==this.props.layout.variablePicker.scrollable&&this.props.layout.variablePicker.scrollable,aligned:"inline"!==this.props.layout.header.layout||this.props.layout.title.hideTitle?"":" aligned-right"},this.onChangeValueEvent=this.onChangeValue.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,elementsCount:Object.keys(e.map.variables).length,value:e.currentVariable})}},{key:"shouldComponentUpdate",value:function r(e,t){return t.render||0===this.state.tabBarWidth}},{key:"componentDidUpdate",value:function l(){var e=document.getElementById("tab-bar-container").clientWidth,t=document.getElementById("tab-bar-body").clientWidth,n=document.querySelectorAll(".tab-bar-body div.button");this.setState({tabBarWidth:e,tabBarBodyWidth:t,render:!1,buttons:n})}},{key:"onChangeValue",value:function c(e,t,n){var r=Object.keys(this.state.map.variables).indexOf(n);r>-1&&this.onChangeIndex(r)}},{key:"onSelectChangeValue",value:function d(){var e=document.getElementById("dropdown-variable-select").value;this.onChangeValue(null,null,e)}},{key:"onHandleStop",value:function f(e,t){this.state.scrollable&&this.state.tabBarBodyWidth>this.state.tabBarWidth&&this.setState({leftMove:parseInt(t.x,10),render:!0})}},{key:"onChangeIndex",value:function h(e){var t=Object.keys(this.state.map.variables).map(function(e){return e});if(e>=0&&e<t.length){this.state.map.currentVariableId=t[e];var n=this.state.leftMove;this.state.tabBarBodyWidth>this.state.tabBarWidth?(n=this.state.buttons[e].offsetLeft-(this.state.tabBarWidth-this.state.buttons[e].clientWidth)/2,n=n<0?0:n,n=n>this.state.tabBarBodyWidth-this.state.tabBarWidth?this.state.tabBarBodyWidth-this.state.tabBarWidth:n,this.setState({value:t[e],buttonIndex:e,leftMove:-1*n,render:!0})):this.setState({value:t[e],buttonIndex:e,render:!0})}}},{key:"onChangeIndexKeyboard",value:function m(e,t){var n=Object.keys(this.state.map.variables).map(function(e){return e});if((13===t.keyCode||32===t.keyCode)&&e>=0&&e<n.length){this.state.map.currentVariableId=n[e];var r=this.state.leftMove;this.state.tabBarBodyWidth>this.state.tabBarWidth?(r=this.state.buttons[e].offsetLeft-(this.state.tabBarWidth-this.state.buttons[e].clientWidth)/2,r=r<0?0:r,r=r>this.state.tabBarBodyWidth-this.state.tabBarWidth?this.state.tabBarBodyWidth-this.state.tabBarWidth:r,this.setState({value:n[e],buttonIndex:e,leftMove:-1*r,render:!0})):this.setState({value:n[e],buttonIndex:e,render:!0})}}},{key:"render",value:function y(){var e=this;if(!this.state.map)return null;var t=this.state.map.variables,n=[],r=[];return Object.keys(t).map(function(o,i){n.push(u["default"].createElement("div",{key:"tabItem"+i,className:"button"+(o===e.state.value?" checked":""),onClick:e.onChangeIndex.bind(e,i),onKeyDown:e.onChangeIndexKeyboard.bind(e,i),tabIndex:1},t[o].name)),r.push(u["default"].createElement("option",{key:"menuItem"+i,value:o},t[o].name))}),this.state.scrollable?u["default"].createElement("div",{className:"tab-bar",id:"tab-bar","aria-label":this.state.title,tabIndex:"0",onKeyDown:this.focusChildren.bind(this)},u["default"].createElement("div",{className:"tab-bar-button"+(this.state.tabBarBodyWidth<this.state.tabBarWidth||this.state.leftMove<=5&&this.state.leftMove>=0?" disabled":"")},u["default"].createElement("div",{className:"icon button navigate-left",onClick:this.onChangeIndex.bind(this,this.state.buttonIndex-1)})),u["default"].createElement("div",{className:"tab-bar-container"+this.state.aligned,id:"tab-bar-container"},u["default"].createElement(p["default"],{axis:this.state.tabBarBodyWidth>this.state.tabBarWidth?"x":null,handle:".handle",defaultPosition:{x:5,y:0},position:{x:this.state.leftMove,y:0},bounds:{top:0,left:this.state.scrollable?this.state.tabBarWidth-this.state.tabBarBodyWidth:0,right:5,bottom:0},zIndex:100,onStop:this.onHandleStop.bind(this)},u["default"].createElement("div",{className:"tab-bar-body handle",id:"tab-bar-body"},n)),u["default"].createElement("select",{id:"dropdown-variable-select",className:"dropdown list",value:this.state.value,onChange:this.onSelectChangeValue.bind(this)},r)),u["default"].createElement("div",{className:"tab-bar-button"+(this.state.tabBarBodyWidth<this.state.tabBarWidth||this.state.leftMove===this.state.tabBarWidth-this.state.tabBarBodyWidth?" disabled":"")},u["default"].createElement("div",{className:"icon button navigate-right",onClick:this.onChangeIndex.bind(this,this.state.buttonIndex+1)}))):u["default"].createElement("div",{className:"tab-bar",id:"tab-bar"},u["default"].createElement("div",{className:"tab-bar-container"+this.state.aligned+" margined",id:"tab-bar-container"},u["default"].createElement("select",{id:"dropdown-variable-select",className:"dropdown list",value:this.state.value,onChange:this.onSelectChangeValue.bind(this)},r),u["default"].createElement("div",{className:"tab-bar-body handle",id:"tab-bar-body"},n)))}},{key:"focusChildren",value:function v(e){13!==e.keyCode&&32!==e.keyCode||(document.getElementById("tab-bar-body").children[0].focus(),document.getElementById("tab-bar-body").children[this.state.buttonIndex].focus())}}]),t}(u["default"].Component);n["default"]=d,t.exports=n["default"]},{react:181,"react-draggable":156}],186:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,layout:this.props.layout,min:this.props.mapDefinition.style.metadata["custom:defaultYearSpan"][0],max:this.props.mapDefinition.style.metadata["custom:defaultYearSpan"][this.props.mapDefinition.style.metadata["custom:defaultYearSpan"].length-1],activeValue:this.props.mapDefinition.style.metadata["custom:defaultYearSpan"][0],playing:!1,showHint:this.props.layout.hint&&this.props.layout.hint.length>0,timeout:this.props.mapDefinition.style.transition.duration?this.props.mapDefinition.style.transition.duration:500},this.onChangeValueEvent=this.onChangeValue.bind(this),this.onTooglePlayPauseEvent=this.onTooglePlayPause.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,max:e.mapDefinition.style.metadata["custom:defaultYearSpan"][e.mapDefinition.style.metadata["custom:defaultYearSpan"].length-1],activeValue:e.mapDefinition.style.metadata["custom:defaultYearSpan"][0]})}},{key:"componentDidUpdate",value:function r(){this.state.playing&&(this.state.activeValue===this.state.max?setTimeout(this.onNewValue.bind(this,0),this.state.timeout):setTimeout(this.onNewValue.bind(this,this.state.activeValue+1),this.state.timeout))}},{key:"onChangeValue",value:function l(e){var t=parseInt(e.target.value,10);this.onNewValue(t)}},{key:"onNewValue",value:function c(e){this.state.playing&&0===e?this.setState({activeValue:e,playing:!1}):this.setState({activeValue:e})}},{key:"onTooglePlayPause",value:function p(){this.setState({playing:!this.state.playing,showHint:!1})}},{key:"render",value:function d(){if(!this.state.map)return null;var e=this.state.min,t=this.state.activeValue,n=this.state.max,r=this.state.layout.hint&&this.state.showHint?u["default"].createElement("div",{className:"hint"},this.state.layout.hint):null;return u["default"].createElement("div",{className:"changeovertime-slider-container"},u["default"].createElement("div",{className:"up"},u["default"].createElement("div",{className:"yearlabel start"},u["default"].createElement("div",{className:"year"},e)),u["default"].createElement("div",{className:"controls"},u["default"].createElement("div",{className:"yearlabel current"},u["default"].createElement("div",{className:"year"},t)),u["default"].createElement("div",{className:"button"},u["default"].createElement("div",{id:"play-button",className:"play",onClick:this.onTooglePlayPauseEvent},u["default"].createElement("div",{className:"icon button "+(this.state.playing?"pause":"play")})))),u["default"].createElement("div",{className:"yearlabel end"},u["default"].createElement("div",{className:"year"},n))),u["default"].createElement("div",{className:"down"},u["default"].createElement("div",{className:"slider"},u["default"].createElement("div",{className:"yearlabel start"},u["default"].createElement("div",{className:"year"},e)),u["default"].createElement("input",{id:"variable-year-slider",type:"range",min:this.state.min,max:this.state.max,value:this.state.activeValue,onChange:this.onChangeValueEvent}),u["default"].createElement("div",{className:"yearlabel end"},u["default"].createElement("div",{className:"year"},n))),u["default"].createElement("div",{className:"controls"},u["default"].createElement("div",{className:"yearlabel current"},u["default"].createElement("div",{className:"year"},t)),u["default"].createElement("div",{className:"button"},u["default"].createElement("div",{id:"play-button",className:"play",onClick:this.onTooglePlayPauseEvent},u["default"].createElement("div",{className:"icon button "+(this.state.playing?"pause":"play")})))),r))}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],187:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,data:this.props.mapDefinition.style.sourceData,dataArray:Object.keys(this.props.mapDefinition.style.sourceData),layout:this.props.layout,min:0,max:Object.keys(this.props.mapDefinition.style.sourceData).length-1,activeIndex:0,playing:!1,showHint:this.props.layout.hint&&this.props.layout.hint.length>0,timeout:this.props.mapDefinition.style.transition.duration?this.props.mapDefinition.style.transition.duration:500},this.onChangeValueEvent=this.onChangeValue.bind(this),this.onTooglePlayPauseEvent=this.onTooglePlayPause.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,data:e.mapDefinition.style.sourceData,max:Object.keys(e.mapDefinition.style.sourceData).length-1,activeIndex:0})}},{key:"componentDidUpdate",value:function r(){this.state.playing&&(this.state.activeIndex===this.state.max?setTimeout(this.onNewIndex.bind(this,0),this.state.timeout):setTimeout(this.onNewIndex.bind(this,this.state.activeIndex+1),this.state.timeout))}},{key:"onChangeValue",value:function l(e){var t=parseInt(e.target.value,10);this.onNewIndex(t)}},{key:"onNewIndex",value:function c(e){var t=this.state.data[this.state.dataArray[e]];this.state.map.getSource("fred").setData(t),this.state.playing&&0===e?this.setState({activeIndex:e,playing:!1}):this.setState({activeIndex:e})}},{key:"onTooglePlayPause",value:function p(){this.setState({playing:!this.state.playing,showHint:!1})}},{key:"render",value:function d(){if(!this.state.map)return null;var e=this.state.data[this.state.dataArray[this.state.min]].features[0].properties,t=this.state.data[this.state.dataArray[this.state.activeIndex]].features[0].properties,n=this.state.data[this.state.dataArray[this.state.max]].features[0].properties,r=this.state.layout.hint&&this.state.showHint?u["default"].createElement("div",{className:"hint"},this.state.layout.hint):null;return u["default"].createElement("div",{className:"changeovertime-slider-container"},u["default"].createElement("div",{className:"up"},u["default"].createElement("div",{className:"yearlabel start"},u["default"].createElement("div",{className:"year"},e.year),u["default"].createElement("div",{className:"month"},e.month)),u["default"].createElement("div",{className:"controls"},u["default"].createElement("div",{className:"yearlabel current"},u["default"].createElement("div",{className:"year"},t.year),u["default"].createElement("div",{className:"month"},t.month)),u["default"].createElement("div",{className:"button"},u["default"].createElement("div",{id:"play-button",className:"play",onClick:this.onTooglePlayPauseEvent},u["default"].createElement("div",{className:"icon button "+(this.state.playing?"pause":"play")})))),u["default"].createElement("div",{className:"yearlabel end"},u["default"].createElement("div",{className:"year"},n.year),u["default"].createElement("div",{className:"month"},n.month))),u["default"].createElement("div",{className:"down"},u["default"].createElement("div",{className:"slider"},u["default"].createElement("div",{className:"yearlabel start"},u["default"].createElement("div",{className:"year"},e.year),u["default"].createElement("div",{className:"month"},e.month)),u["default"].createElement("input",{id:"variable-slider",type:"range",min:this.state.min,max:this.state.max,value:this.state.activeIndex,onChange:this.onChangeValueEvent}),u["default"].createElement("div",{className:"yearlabel end"},u["default"].createElement("div",{className:"year"},n.year),u["default"].createElement("div",{className:"month"},n.month))),u["default"].createElement("div",{className:"controls"},u["default"].createElement("div",{className:"yearlabel current"},u["default"].createElement("div",{className:"year"},t.year),u["default"].createElement("div",{className:"month"},t.month)),u["default"].createElement("div",{className:"button"},u["default"].createElement("div",{id:"play-button",className:"play",onClick:this.onTooglePlayPauseEvent},u["default"].createElement("div",{className:"icon button "+(this.state.playing?"pause":"play")})))),r))}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],188:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("classnames"),p=r(c),d=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isExpanded:!1}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this;this.setState({map:e.map}),e.map.on("variablechanged",function(){t.forceUpdate()})}},{key:"render",value:function r(){var e=this;if(this.state.map){var t=function(){var t=void 0;e.props.title&&(t=u["default"].createElement("div",{className:"dropdown-picker-items-title"},e.props.title));var n=e.state.map.colorPalettes,r=(0,p["default"])("dropdown-picker-items",{expanded:e.state.isExpanded});return{v:u["default"].createElement("div",{className:"variable-selector"},u["default"].createElement("div",{className:"dropdown-picker-container"},u["default"].createElement("div",{onClick:function(){e.setState({isExpanded:!e.state.isExpanded})},className:"dropdown-picker-selected-item"},u["default"].createElement("span",null,n[e.state.map.currentColorPaletteId].name)),u["default"].createElement("div",{className:r},t,Object.keys(n).map(function(t,r){var o=(0,p["default"])("dropdown-picker-item",{selected:t===e.state.map.currentColorPaletteId});return u["default"].createElement("div",{key:r,className:o,onClick:function(){e.state.map.applyColorPaletteToAllDataLayers(t),e.setState({isExpanded:!1})}},n[t].name)}))))}}();if("object"==typeof t)return t.v}return null}}]),t}(u["default"].Component);n["default"]=d,t.exports=n["default"]},{classnames:1,react:181}],189:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isExpanded:!1,title:this.props.title,value:null,allwaysVisible:this.props.allwaysVisible?" visible":""},this.onChangeValueEvent=this.onChangeValue.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,value:e.currentVariable,allwaysVisible:e.allwaysVisible?" visible":""})}},{key:"onChangeValue",value:function r(e,t,n){this.state.map.currentVariableId=n,this.setState({value:n})}},{key:"onSelectChangeValue",value:function l(){var e=document.getElementById("dropdown-picker-select").value;this.onChangeValue(null,null,e)}},{key:"render",value:function c(){if(!this.state.map)return null;var e=this.state.map.variables,t=Object.keys(e).map(function(t,n){return u["default"].createElement("option",{key:"dropdownItem"+n,value:t},e[t].name)});return u["default"].createElement("select",{id:"dropdown-picker-select",className:"dropdown list"+this.state.allwaysVisible,value:this.state.value,onChange:this.onSelectChangeValue.bind(this)},t)}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],190:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,geosearch:this.props.geosearch,placeholder:"Search...",inputValue:"",searchList:[],previewList:[],focusedID:null,pinned:!1},this.retreivingData=!1}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,geosearch:e.geosearch})}},{key:"componentDidUpdate",value:function r(e,t){t.inputValue!==this.state.inputValue&&this.state.inputValue.length>2&&!this.retreivingData&&this.getItemsAsync(this.state.inputValue)}},{key:"onInputChange",value:function l(e){var t=e.target.value;t.length>2?this.setState({inputValue:t}):this.setState({inputValue:t,focusedID:null,pinned:!1,searchList:[]})}},{key:"onResultSelection",value:function c(e,t){if(this.state.pinned){var n=0;switch(t){case"state":n=6;break;case"county":n=8;break;case"usps":n=10;break;case"place":n=14;break;case"postalCode":n=16;break;default:n=5}this.state.map.flyTo({center:e,zoom:n,speed:.2,curve:1,easing:function r(e){return e}}),this.state.map.getSource("geosearch-points").setData({type:"FeatureCollection",features:[]}),this.setState({pinned:!1,focusedID:null,inputValue:"",searchList:[],placeholder:"Search..."})}else this.setState({pinned:!0,inputValue:this.state.searchList.find(function(n){return n.coordinates===e&&n.type===t}).value})}},{key:"onKeypress",value:function p(e){if(this.state.searchList.length>0)if(27===e.keyCode)this.setState({placeholder:"Search...",inputValue:"",searchList:[],previewList:[],focusedID:null,pinned:!1});else if(38===e.keyCode)this.onChangeFocusedID(-1);else if(40===e.keyCode)this.onChangeFocusedID(1);else if(13===e.keyCode&&this.state.searchList[this.state.focusedID]){var t=this.state.searchList[this.state.focusedID];this.onResultSelection(t.coordinates,t.type)}}},{key:"onChangeFocusedID",value:function d(e){var t=0;e>0&&this.state.focusedID+1<this.state.searchList.length?t=null===this.state.focusedID?0:this.state.focusedID+1:e<0&&this.state.focusedID>0&&(t=this.state.focusedID-1),this.state.geosearch.activeMapFocus&&this.state.map.easeTo({center:this.state.searchList[t].coordinates}),this.setState({focusedID:t})}},{key:"getItemsAsync",value:function f(e){var t=this;this.retreivingData=!0;var n="http://geocoder.socialexplorer.com/search?limit=20&format=json&query="+e,r={type:"FeatureCollection",features:[]};fetch(n).then(function(e){return e.json()}).then(function(e){t.retreivingData=!1;var n=e.results.reduce(function(e,n){return"state"!==n.type&&"county"!==n.type&&"usps"!==n.type&&"place"!==n.type&&"postalCode"!==n.type||(n.levelID=t.decodeLevel(n.type),n.coordinates=t.parsePoint(n.point),r.features.push({type:"Feature",properties:{},geometry:{type:"Point",coordinates:t.parsePoint(n.point)}}),e.push(n)),e},[]),o=n.sort(t.compare.bind(t));t.state.map.getSource("geosearch-points").setData(r),t.setState({searchList:o})})}},{key:"render",value:function h(){var e=this,t=0,n=[];this.state.searchList.forEach(function(r,o){t!==r.levelID&&(t=r.levelID,n.push(u["default"].createElement("div",{key:"label"+r.id,className:"element label"},r.type))),n.push(u["default"].createElement("div",{key:r.id,className:"element"+(o===e.state.focusedID?" focused":""),onClick:e.onResultSelection.bind(e,r.coordinates,r.type),onTouchEnd:e.onResultSelection.bind(e,r.coordinates,r.type)},r.value))});var r=n.length>0?u["default"].createElement("div",{className:"results-container"},u["default"].createElement("div",{className:"results-list",style:{height:"auto",maxHeight:window.innerHeight-150}},n)):null;return u["default"].createElement("div",{id:"geosearch",className:"geosearch"},u["default"].createElement("div",{className:"input-container"},u["default"].createElement("input",{type:"text",role:"textbox","aria-label":this.state.placeholder,"aria-owns":"list-data","aria-expanded":"false","aria-haspopup":"true","aria-autocomplete":"list",tabIndex:0,placeholder:this.state.placeholder,value:this.state.inputValue,onChange:this.onInputChange.bind(this),onKeyDown:this.onKeypress.bind(this)})),r)}},{key:"decodeLevel",value:function m(e){var t=void 0;switch(e){case"state":t=10;break;case"county":t=20;break;case"usps":t=30;break;case"place":t=40;break;case"postalCode":t=60;break;default:t=70}return t}},{key:"compare",value:function y(e,t){return e.levelID<t.levelID?-1:e.levelID>t.levelID?1:0}},{key:"parsePoint",value:function v(e){return JSON.parse(e.substr(6).replace(")","]").replace("(","[").replace(" ",","))}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],191:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function x(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../dropdownPicker/DropdownPicker"),p=r(c),d=e("../geoSearch/GeoSearch"),f=r(d),h=e("../buttonTabBar/ButtonTabBar"),m=r(h),y=e("../summaryLevelPicker/SummaryLevelPicker"),v=r(y),g=e("../horizontalChoroplethLegend/HorizontalLegendComponent"),_=r(g),b=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,mapType:this.props.mapType?this.props.mapType:"single",mapDefinition:this.props.mapDefinition,layout:this.props.mapDefinition.layout,currentVariable:this.props.currentVariable}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,mapType:e.mapType?e.mapType:"single",mapDefinition:e.mapDefinition,layout:e.mapDefinition.layout,
currentVariable:e.currentVariable})}},{key:"render",value:function r(){this.showHeader=!1,this.header={left:[],center:[],right:[]};var e=this.state.layout,t=e.header&&e.header.layout?"horizontal "+e.header.layout:"horizontal",n={right:{flexGrow:1,flexShrink:1,flexBasis:"50%"},left:{flexGrow:1,flexShrink:1,flexBasis:"50%"}};if(e.header&&e.header.dominantSide&&(n="right"===e.header.dominantSide?{right:{flexGrow:1,flexShrink:0,flexBasis:"60%"},left:{flexGrow:0,flexShrink:1,flexBasis:"40%"}}:{left:{flexGrow:1,flexShrink:0,flexBasis:"60%"},right:{flexGrow:0,flexShrink:1,flexBasis:"40%"}}),e.title&&!e.title.hideTitle&&(this.title=u["default"].createElement("div",{key:"title",className:"visualization-title",tabIndex:"0","aria-label":"Title:"+e.title.text},e.title.text),e.title.position)){var r=e.title.position.split(" ");this[r[0]][r[1]].push(this.title)}if(e.geosearch&&e.geosearch.position&&this.state.map){var r=e.geosearch.position.split(" ");this[r[0]][r[1]].push(u["default"].createElement(f["default"],{key:"geo-search",map:this.state.map,geosearch:e.geosearch}))}if(e.variablePicker){var o=void 0;if(o=e.variablePicker.type&&"bar"===e.variablePicker.type?u["default"].createElement(m["default"],{key:"variable-bar",map:this.state.map,layout:e,variablePicker:e.variablePicker,currentVariable:this.state.currentVariable}):u["default"].createElement(p["default"],{key:"variable-picker",map:this.state.map,title:e.variablePicker.title,allwaysVisible:!0,currentVariable:this.state.currentVariable}),e.variablePicker.position){var r=e.variablePicker.position.split(" ");this[r[0]][r[1]].push(o)}}if(e.summaryLevelPicker&&e.summaryLevelPicker.position&&"header"===e.summaryLevelPicker.position[0]&&this.state.map&&Object.keys(this.state.map.summaryLevels).length>0){var r=e.summaryLevelPicker.position.split(" ");this[r[0]][r[1]].push(u["default"].createElement(v["default"],{key:"summary-picker",map:this.state.map,title:"Choose geo level"}))}var i=null;if(e.legend&&e.legend.position){var r=e.legend.position.split(" ");e.legend.orientation&&"horizontal"===e.legend.orientation&&"header"===r[0]&&(i=u["default"].createElement(_["default"],{key:"swipe"===this.state.mapType?"legend-horizontal-swipe":"legend-horizontal-single",map:this.state.map,mapType:"swipe",mapDefinition:this.state.mapDefinition}))}return(this.header.left.length>0||this.header.center.length>0||this.header.right.length>0||null!==i)&&(this.showHeader=!0),this.showHeader?"swipe"===this.state.mapType||null!==i?u["default"].createElement("div",{className:"header-swipe "+t},u["default"].createElement("div",{className:"title"},this.header.left.length>0?u["default"].createElement("div",{className:"left",style:n.left},this.header.left):null,this.header.right.length>0?u["default"].createElement("div",{className:"right",style:n.right},this.header.right):null),null!==i?u["default"].createElement("div",{className:"horizontal-component-legend"},i):null):u["default"].createElement("div",{className:"header-"+this.state.mapType+" "+t},this.header.left.length>0?u["default"].createElement("div",{className:"left",style:n.left},this.header.left):null,this.header.right.length>0?u["default"].createElement("div",{className:"right",style:n.right},this.header.right):null):null}}]),t}(u["default"].Component);n["default"]=b,t.exports=n["default"]},{"../buttonTabBar/ButtonTabBar":185,"../dropdownPicker/DropdownPicker":189,"../geoSearch/GeoSearch":190,"../horizontalChoroplethLegend/HorizontalLegendComponent":192,"../summaryLevelPicker/SummaryLevelPicker":209,react:181}],192:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ruleSets:null,mapDefinition:this.props.mapDefinition,mapType:this.props.mapType}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this,n={};e.map&&e.mapDefinition&&e.map.currentVariableRules.forEach(function(t){n[t.layerId]?n[t.layerId].rules.push(t):(n[t.layerId]={},n[t.layerId].rules=[t],n[t.layerId].layerId=t.layerId,n[t.layerId].label=e.mapDefinition.style.layers.find(function(e){return e.id===t.layerId}).metadata["mapspice:rulesLegendTitle"])});var r=Object.keys(n)?Object.keys(n).length:1,o=Object.keys(n)[0]?n[Object.keys(n)[0]].rules.length:0,i={map:e.map,mapDefinition:e.mapDefinition,mapType:e.mapType,ruleSets:n};if(e.map&&e.mapDefinition){i.rules=e.map.currentVariableRules;var a=function s(){t.setState({rules:e.map.currentVariableRules})};e.map.on("variablechanged",a),e.map.on("rulepaintpropertychanged",a),e.map.on("rulelayoutpropertychanged",a),e.map.on("rulefilterchanged",a),e.map.on("featurehoverstart",function(e){var n=t.state.rules,i=n.findIndex(function(t){return t.filter({type:2,properties:e.featureData})}),a=i>-1?n[i].layerId:"";i=i+1>o?i%r:i,t.setState({activeRuleIndex:i,activeRulesetName:a})}),e.map.on("featurehoverend",function(){t.setState({activeRuleIndex:-1})})}this.setState(i)}},{key:"render",value:function r(){var e=this,t=this.state.mapDefinition.layout.legend,n=t.orientation?t.orientation:"vertical";if(this.state.map&&this.state.ruleSets){var r=Object.keys(this.state.ruleSets),o=r.map(function(t,r){return u["default"].createElement("div",{key:"ruleset"+r,className:"legend-ruleset"},e.state.ruleSets[t].label?u["default"].createElement("div",{className:"ruleset-header"},u["default"].createElement("div",{className:"ruleset-title"},e.state.ruleSets[t].label)):null,u["default"].createElement("div",{className:"ruleset-elements"},e.state.ruleSets[t].rules.map(function(o,i){var a="";0===i?a=" first":i===e.state.ruleSets[t].rules.length-1&&(a=" last");var s="horizontal"===n&&r>0?" hidden":"",l="horizontal"===n?{width:100/e.state.ruleSets[t].rules.length+"%"}:{},c=o.description?u["default"].createElement("div",{className:"tooltip "+a+s},o.description):null,p=o.label?u["default"].createElement("div",{className:"text-block"+a+s},o.label):"";return u["default"].createElement("div",{key:"rule"+i,className:"ruleset-element"+(e.state.activeRuleIndex===i&&e.state.activeRulesetName===t?" bolded":""),style:l,onMouseOver:e._onMouseOver.bind(e,t,i),onMouseOut:e._onMouseOut.bind(e,t,i)},u["default"].createElement("div",{className:"color-block",style:{backgroundColor:o.colors[0]?o.colors[0]:"none",backgroundImage:o.patterns[0]?'url("sprite/'+o.patterns[0]+'.svg")':"none"}}," "),p,c)})))});return u["default"].createElement("div",{className:"choropleth-legend "+this.state.mapType},o)}return null}},{key:"_onMouseOver",value:function l(e,t){var n=this;this.state.mapDefinition.layout.legend.preventHoverHighlight||this.state.ruleSets[e].rules.forEach(function(e,r){r!==t?!function(){var t=n._getPaintProperty("opacity",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,.15)}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,.15)}))}():!function(){var t=n._getPaintProperty("outline",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,"rgba(0,0,0,0.7)")}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,"rgba(0,0,0,0.7)")}))}()})}},{key:"_onMouseOut",value:function c(e,t){var n=this;this.state.mapDefinition.layout.legend.preventHoverHighlight||this.state.ruleSets[e].rules.forEach(function(e,r){r!==t?!function(){var t=n._getPaintProperty("opacity",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,1)}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,1)}))}():!function(){var t=n._getPaintProperty("outline",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,"rgba(0,0,0,0)")}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,"rgba(0,0,0,0)")}))}()})}},{key:"_getPaintProperty",value:function p(e,t){var n="";if("opacity"===e)n=t+"-"+e;else if("outline"===e)switch(t){case"bubble":n="bubble-outline-color";break;case"fill":n="fill-outline-color";break;default:n=null}return n}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],193:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("classnames"),p=r(c),d=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isVisible:!1,isPinned:!1,tooltipVisible:!1,tooltipPinned:!1,correctionRight:!1,correctionBottom:!1,annotation:this.props.annotation,legendPopuped:this.props.legend&&this.props.legend.initialOpened}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this;this.setState({map:e.map,annotation:e.annotation,isVisible:!1,isPinned:!1}),e.map&&(e.map.on("featurehoverstart",function(){t.setState({tooltipVisible:!0})}),e.map.on("featurehoverend",function(){t.setState({tooltipVisible:!1})}),e.map.on("featureselected",function(){t.setState({tooltipPinned:!0})}),e.map.on("featuredeselected",function(){t.setState({tooltipPinned:!1})}),e.map.on("showannotation",function(e){t.state.isPinned||t.state.tooltipPinned||t.setState({isVisible:!0,isPinned:!1,featureData:e.selectedFeature,position:e.position,correctionRight:JSON.stringify(e.selectedFeature)===JSON.stringify(t.state.featureData)&&t.state.correctionRight,correctionBottom:JSON.stringify(e.selectedFeature)===JSON.stringify(t.state.featureData)&&t.state.correctionBottom})}),e.map.on("hideannotation",function(){t.state.isPinned||t.setState({isVisible:!1,isPinned:!1,featureData:void 0})}),e.map.on("pinnannotation",function(e){t.setState({isPinned:!0,isVisible:!0,featureData:e.selectedFeature,position:e.position})}),e.map.on("unpinnannotation",function(){t.setState({isVisible:!1,isPinned:!1})}),e.map.on("repositionAnnotation",function(e){t.state.isPinned&&t.setState({position:e.xy})}),e.map.on("variablechanged",function(){t.setState({isPinned:!1,isVisible:!1,featureData:void 0})}),e.map.on("legendpopuped",function(e){t.setState({legendPopuped:e[0]})}))}},{key:"componentDidUpdate",value:function r(e,t){if(t.position){var n=document.getElementById("annotation-bubble").clientHeight,r=document.getElementById("annotation-bubble").clientWidth;t.position.y+10+n>window.innerHeight&&t.position.x+10+r>window.innerWidth?t.correctionRight||t.correctionBottom||this.setState({correctionRight:!0,correctionBottom:!0}):t.position.y+10+n>window.innerHeight?t.correctionBottom||this.setState({correctionRight:!1,correctionBottom:!0}):t.position.x+10+r>window.innerWidth&&(t.correctionRight||this.setState({correctionRight:!0,correctionBottom:!1}))}}},{key:"render",value:function l(){var e=this;if(this.state.map){var t={annotation:{}},n=void 0;void 0===this.state.annotation.position&&this.state.position?(t={annotation:{position:"absolute",left:this.state.correctionRight?"auto":this.state.position.x+10,right:this.state.correctionRight?10:"auto",top:this.state.correctionBottom?"auto":this.state.position.y+10,bottom:this.state.correctionBottom?10:"auto"}},n=(0,p["default"])("info-bubble",{visible:this.state.isVisible,pinned:this.state.isPinned,legendpopuped:this.state.legendPopuped})):n=(0,p["default"])("info-bubble "+this.props.annotation.position,{visible:this.state.isVisible,pinned:this.state.isPinned,legendpopuped:this.state.legendPopuped}),this.state.annotation.customWidth&&(t.annotation.width=this.state.annotation.customWidth,t.annotation.minWidth=0,t.annotation.maxWidth=1e3),this.state.annotation.customHeight&&(t.annotation.height=this.state.annotation.customHeight);var r=(0,p["default"])("info-bubble-close-button",{visible:this.state.isPinned}),o=u["default"].Children.map(this.props.children,function(t){return u["default"].cloneElement(t,{featureData:e.state.featureData,map:e.state.map})});return u["default"].createElement("div",{id:"annotation-bubble",className:n,style:t.annotation},o,u["default"].createElement("div",{className:r,onClick:function(){e.state.map.clearSelectedFeatures(),e.state.map.fire("unpinnannotation",{}),e.state.map.fire("unpinnannotationAll",{}),e.setState({featureData:void 0,isVisible:!1,isPinned:!1})},onKeyDown:function(t){13!==t.keyCode&&32!==t.keyCode||(e.state.map.clearSelectedFeatures(),e.state.map.fire("unpinnannotation",{}),e.state.map.fire("unpinnannotationAll",{}),e.setState({featureData:void 0,isVisible:!1,isPinned:!1}))}},u["default"].createElement("div",{className:"icon button close"})))}return null}}]),t}(u["default"].Component);n["default"]=d,t.exports=n["default"]},{classnames:1,react:181}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("classnames"),p=r(c),d=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isVisible:!1,isPinned:!1,annotationVisible:!1,annotationPinned:!1,correctionRight:!1,correctionBottom:!1,tooltip:this.props.tooltip,index:void 0!==this.props.index?"-"+this.props.index:"",legendPopuped:this.props.legend.initialOpened,additionalContentPopuped:this.props.additionalContent?this.props.additionalContent.initialOpened:null,additionalContentPopupedHeigth:this.props.additionalContent?this.props.additionalContent.height:null}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this;this.setState({map:e.map,index:e.index,legendPopuped:e.legend.initialOpened,additionalContentPopuped:e.additionalContent?e.additionalContent.initialOpened:null}),e.map&&(e.map.on("showannotation",function(){t.setState({annotationVisible:!0})}),e.map.on("hideannotation",function(){t.setState({annotationVisible:!1})}),e.map.on("pinnannotation",function(){t.setState({annotationPinned:!0})}),e.map.on("unpinnannotation",function(){t.setState({annotationPinned:!1})}),e.map.on("featurehoverstart",function(e){t.state.isPinned||t.state.annotationPinned||t.setState({isVisible:!0,featureData:e.featureData,position:e.point,correctionRight:JSON.stringify(e.featureData)===JSON.stringify(t.state.featureData)&&t.state.correctionRight,correctionBottom:JSON.stringify(e.featureData)===JSON.stringify(t.state.featureData)&&t.state.correctionBottom})}),e.map.on("featurehoverend",function(){t.state.isPinned||t.setState({isVisible:!1,isPinned:!1,featureData:void 0})}),e.map.on("featureselected",function(e){t.setState({isPinned:!0,isVisible:!0,featureData:e.featureData,position:e.point})}),e.map.on("featuredeselected",function(){t.setState({isVisible:!1,isPinned:!1})}),e.map.on("repositionTooltip",function(e){t.state.isPinned&&!t.props.index&&t.setState({position:e.xy})}),e.map.on("variablechanged",function(){t.setState({isPinned:!1,isVisible:!1,featureData:void 0})}),e.map.on("legendpopuped",function(e){t.setState({legendPopuped:e[0]})}),e.map.on("addcontentpopuped",function(e){setTimeout(function(){if(document.getElementById("additional-content")){var n=e.show?document.getElementById("additional-content").clientHeight+15:0;t.state.additionalContentPopupedHeigth!==n&&t.setState({additionalContentPopuped:e.show,additionalContentPopupedHeigth:n})}},100)}))}},{key:"componentDidUpdate",value:function r(e,t){if(t.position){var n=document.getElementById("tooltip-bubble"+this.state.index).clientHeight,r=document.getElementById("tooltip-bubble"+this.state.index).clientWidth,o=void 0!==this.props.index?window.innerWidth/2*(this.props.index-1):0,i=void 0!==this.props.index?window.innerWidth/2*this.props.index:window.innerWidth,a=window.innerHeight;t.position.y+10+n>a&&o+t.position.x+10+r>i?t.correctionRight||t.correctionBottom||this.setState({correctionRight:!0,correctionBottom:!0}):t.position.y+10+n>a?t.correctionBottom||this.setState({correctionRight:!1,correctionBottom:!0}):o+t.position.x+10+r>i&&(t.correctionRight||this.setState({correctionRight:!0,correctionBottom:!1}))}}},{key:"render",value:function l(){var e=this;if(this.state.map){var t={tooltip:{}},n=void 0;void 0===this.state.tooltip.position&&this.state.position?(t={tooltip:{position:"absolute",left:this.state.correctionRight?"auto":this.state.position.x+10,right:this.state.correctionRight?10:"auto",top:this.state.correctionBottom?"auto":this.state.position.y+10}},n=(0,p["default"])("info-bubble",{visible:this.state.isVisible,pinned:this.state.isPinned,legendpopuped:this.state.legendPopuped,addcontentpopuped:this.state.additionalContentPopuped})):n=(0,p["default"])("info-bubble "+this.props.tooltip.position,{visible:this.state.isVisible,pinned:this.state.isPinned,legendpopuped:this.state.legendPopuped,addcontentpopuped:this.state.additionalContentPopuped}),this.state.tooltip.customWidth&&(t.tooltip.width=this.state.tooltip.customWidth,t.tooltip.minWidth=0,t.tooltip.maxWidth=1e3),this.state.tooltip.customHeight&&(t.tooltip.height=this.state.tooltip.customHeight),this.state.additionalContentPopuped&&window.innerWidth<=480?t.tooltip.bottom=this.state.additionalContentPopupedHeigth:t.tooltip.bottom=8;var r=(0,p["default"])("info-bubble-close-button",{visible:this.state.isPinned}),o=u["default"].Children.map(this.props.children,function(t){return u["default"].cloneElement(t,{featureData:e.state.featureData,map:e.state.map})});return u["default"].createElement("div",{id:"tooltip-bubble"+this.state.index,className:n,style:t.tooltip,tabIndex:"0"},o,u["default"].createElement("div",{className:r,onClick:function(){e.state.map.clearSelectedFeatures(),e.state.map.fire("featuredeselected",{}),e.state.map.fire("featuredeselectedAll",{}),e.setState({featureData:void 0,isVisible:!1,isPinned:!1})},onKeyDown:function(t){13!==t.keyCode&&32!==t.keyCode||(e.state.map.clearSelectedFeatures(),e.state.map.fire("featuredeselected",{}),e.state.map.fire("featuredeselectedAll",{}),e.setState({featureData:void 0,isVisible:!1,isPinned:!1}))}},u["default"].createElement("div",{className:"icon button close",tabIndex:"3"})))}return null}}]),t}(u["default"].Component);n["default"]=d,t.exports=n["default"]},{classnames:1,react:181}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function m(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("classnames"),p=r(c),d=e("../infoBubble/InfoBubbleTemplate"),f=r(d),h=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isVisible:!1,isPinned:!1,leftMapDefinition:this.props.leftMapDefinition,rightMapDefinition:this.props.rightMapDefinition,additionalContentPopuped:this.props.additionalContent?this.props.additionalContent.initialOpened:null,additionalContentPopupedHeigth:this.props.additionalContent?this.props.additionalContent.height:null}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this;this.setState({leftMap:e.leftMap,rightMap:e.rightMap,additionalContentPopuped:e.additionalContent?e.additionalContent.initialOpened:null}),e.leftMap&&e.rightMap&&(e.leftMap.on("featurehoverstart",function(e){t.state.isPinned||t.setState({isVisible:!0,leftFeatureData:e.featureData})}),e.leftMap.on("featurehoverend",function(){t.state.isPinned||t.setState({isVisible:!1,leftFeatureData:void 0})}),e.leftMap.on("featureselected",function(e){t.setState({isPinned:!0,isVisible:!0,leftFeatureData:e.featureData})}),e.leftMap.on("featuredeselected",function(){t.setState({isPinned:!1})}),e.leftMap.on("variablechanged",function(){t.setState({isPinned:!1,isVisible:!1,leftFeatureData:void 0})}),e.rightMap.on("featurehoverstart",function(e){t.state.isPinned||t.setState({isVisible:!0,rightFeatureData:e.featureData})}),e.rightMap.on("featurehoverend",function(){t.state.isPinned||t.setState({isVisible:!1,rightFeatureData:void 0})}),e.rightMap.on("featureselected",function(e){t.setState({isPinned:!0,isVisible:!0,rightFeatureData:e.featureData})}),e.rightMap.on("featuredeselected",function(){t.setState({isPinned:!1})}),e.rightMap.on("variablechanged",function(){t.setState({isPinned:!1,isVisible:!1,rightFeatureData:void 0})}))}},{key:"render",value:function r(){var e=this;if(this.state.leftMap&&this.state.rightMap){var t=this.state.leftMapDefinition.layout,n=this.state.rightMapDefinition.layout,r={tooltip:{}};t.tooltip.customWidth&&(r.tooltip.width=t.tooltip.customWidth,r.tooltip.minWidth=0,r.tooltip.maxWidth=1e3),t.tooltip.customHeight&&(r.tooltip.height=t.tooltip.customHeight);var o=t.tooltip.position?t.tooltip.position:"mapfooter left",i=(0,p["default"])("info-bubble "+o,{visible:this.state.isVisible,pinned:this.state.isPinned,addcontentpopuped:this.state.additionalContentPopuped}),a=(0,p["default"])("info-bubble-close-button",{visible:this.state.isPinned});return this.state.additionalContentPopuped&&window.innerWidth<=480?r.tooltip.bottom=this.state.additionalContentPopupedHeigth:r.tooltip.bottom=8,u["default"].createElement("div",{id:"tooltip-bubble-swipe",className:i,style:r.tooltip,tabIndex:"0"},u["default"].createElement(f["default"],{map:this.state.leftMap,featureData:this.state.leftFeatureData,content:t.tooltip.content,mapDefinition:this.state.leftMapDefinition}),u["default"].createElement(f["default"],{map:this.state.rightMap,featureData:this.state.rightFeatureData,content:n.tooltip.content,mapDefinition:this.state.rightMapDefinition}),u["default"].createElement("div",{className:a,onClick:function(){e.state.leftMap.fire("featuredeselected",{}),e.state.rightMap.fire("featuredeselected",{}),e.state.leftMap.clearSelectedFeatures(),e.state.rightMap.clearSelectedFeatures(),e.setState({isVisible:!1,isPinned:!1,leftFeatureData:void 0,rightFeatureData:void 0})}},u["default"].createElement("div",{className:"icon button close"})))}return null}}]),t}(u["default"].Component);n["default"]=h,t.exports=n["default"]},{"../infoBubble/InfoBubbleTemplate":196,classnames:1,react:181}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={content:this.props.content,mapDefinition:this.props.mapDefinition}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({content:e.content,mapDefinition:e.mapDefinition})}},{key:"getTooltipProp",value:function r(e){if(void 0!==e){if("*"===e[0]&&"*"===e[1]&&"*"===e[e.length-1]&&"*"===e[e.length-2])return{value:e.substring(2,e.length-2),style:"bold"};if("_"===e[0]&&"_"===e[1]&&"_"===e[e.length-1]&&"_"===e[e.length-2])return{value:e.substring(2,e.length-2),style:"italic"};if("*"===e[0]&&"_"===e[1]&&"*"===e[e.length-1]&&"_"===e[e.length-2])return{value:e.substring(2,e.length-2),style:"bold-italic"}}return{value:e,style:""}}},{key:"renderPart",value:function l(e){var t=e.prefix?this.getTooltipProp(e.prefix).value:"",n=this.getTooltipProp(e.prefix).style,r=e.sufix?e.sufix:"",o=this.getTooltipProp(e.sufix).style,i=e.overrideNullValue?e.overrideNullValue:null,a=e.decimalPrecision?e.decimalPrecision:null,s=void 0!==e.currSymbol&&null!==e.currSymbol?e.currSymbol:"$",l=this.getTooltipProp(e.valueColumns).value,c=this.getTooltipProp(e.valueColumns).style,p={prefix:n,content:c,sufix:o},d=e.variables?e.variables:{},f=e.colorPalette?e.colorPalette:void 0,h=[],m=void 0;if(f){var y=this.state.mapDefinition.style.metadata["mapspice:color-palettes"][f].colors;m=y[y.length-1],h.push(u["default"].createElement("div",{key:"partElement1",className:"part-colorbox",style:{backgroundColor:m}}))}if(void 0!==l&&null!==l){switch(l){case"#changeOverTimeValue":h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value"},t+this.props.featureData[this.props.map.currentVariableId]+r));break;case"#currentVariableId":h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value"},t+this.props.map.variables[this.props.map.currentVariableId].name+r));break;case"#currentSummaryLevelId":h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value"},t+this.props.map.summaryLevels[this.props.map.currentSummaryLevelId].name+r));break;case"#variableBased":var v=d[this.props.map.currentVariableId].split(", ");h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value"},this.parseColumns(v,t,r,i,a,s,p)));break;default:if("_html"===l.substring(l.length-5))this.props.featureData[l].length>0?h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value html",dangerouslySetInnerHTML:{__html:this.props.featureData[l]}})):h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value html"},i));else{var g=l.split(", ");h.push(u["default"].createElement("div",{key:"partElement2",className:"part-value"},this.parseColumns(g,t,r,i,a,s,p)))}}return h}return null}},{key:"render",value:function c(){var e=this;if(this.props.map&&void 0!==this.props.featureData){var t=this.state.content.map(function(t,n){return t.style?u["default"].createElement("div",{key:"part-"+n,className:"tooltip "+t.style},e.renderPart(t)):null});return u["default"].createElement("div",{className:"content"},t)}return null}},{key:"parseColumns",value:function p(e,t,n,r,o,i,a){var s=this,l=[];return t.length>0&&l.push(u["default"].createElement("span",{key:"valueElementPrefix",className:"text label first"},this.addStyle(t,a.prefix))),e.forEach(function(e,n){var c=void 0!==s.props.featureData[e]&&null!==s.props.featureData[e]&&s.props.featureData[e].toString().length>0?s.props.featureData[e]:r,p=0===n&&0===t.length?" first":"";"number"==typeof c?"_pct"===e.substring(e.length-4)?n>0?l.push(u["default"].createElement("span",{key:"valueElement"+n,className:"percentage value"+p},"(",s.addStyle(s.formated(c,o),a.content),s.addStyle("%",a.content),")")):l.push(u["default"].createElement("span",{key:"valueElement"+n,className:"percentage value"+p},s.addStyle(s.formated(c,o),a.content)," ",s.addStyle("%",a.content))):"_curr"===e.substring(e.length-5)?l.push(u["default"].createElement("span",{key:"valueElement"+n,className:"number value"+p},s.addStyle(i,a.content)," ",s.addStyle(s.formated(c,o),a.content))):l.push(u["default"].createElement("span",{key:"valueElement"+n,className:"number value"+p},s.addStyle(s.formated(c,o),a.content))):("_pct"!==e.substring(e.length-4)||c===r&&0!==n)&&"_pct"===e.substring(e.length-4)||l.push(u["default"].createElement("span",{key:"valueElement"+n,className:"text value"+p},s.addStyle(c,a.content)))}),n.length>0&&l.push(u["default"].createElement("span",{key:"valueElementSufix",className:"text value"},this.addStyle(n,a.sufix))),l}},{key:"addStyle",value:function d(e,t){switch(t){case"bold":return u["default"].createElement("b",null,e);case"italic":return u["default"].createElement("i",null,e);case"bold-italic":return u["default"].createElement("b",null,u["default"].createElement("i",null,e));default:return e;
}}},{key:"formated",value:function f(e,t){return null===t?e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function y(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("mapspice-map-2.1.0"),u=r(l),c=e("react"),p=r(c),d=e("lodash.isequal"),f=r(d),h=50,m=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.deferredMapReconstruction=void 0,this.state={areExtendedPropertiesInitialized:!1}}return i(t,e),a(t,[{key:"initializeMap",value:function n(){var e=this,t=new u["default"](this.props.mapDefinition);if(!this.state.areExtendedPropertiesInitialized){var n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=function(r){if(n.find(function(e){return e===r}))return"continue";switch(typeof r){case"function":e[r]=t[r].bind(t);break;default:Object.defineProperty(e,r,{configurable:!0,get:function o(){return t[r]},set:function i(e){return t[r]=e,t[r]}})}};for(var o in t){var i=r(o)}n.forEach(function(n){switch(typeof n){case"function":e[n]=t[n].bind(t);break;default:Object.defineProperty(e,n,{configurable:!0,get:function r(){return t[n]},set:function o(e){return t[n]=e,t[n]}})}})}this.setState({areExtendedPropertiesInitialized:!0,map:t}),this.props.onInitialized&&this.props.onInitialized(t)}},{key:"destroyMap",value:function r(){this.state.map&&(this.state.map.remove(),this.setState({map:void 0}))}},{key:"componentWillReceiveProps",value:function l(e){var t=this,n=!(0,f["default"])(e.mapDefinition,this.props.mapDefinition),r=!(0,f["default"])(e.className,this.props.className);(n||r)&&(this.deferredMapReconstruction&&clearTimeout(this.deferredMapReconstruction),this.deferredMapReconstruction=setTimeout(function(){t.setState({shouldReconstructMap:!0},function(){t.deferredMapReconstruction=void 0})},h))}},{key:"componentDidMount",value:function c(){this.initializeMap()}},{key:"componentWillUnmount",value:function d(){this.destroyMap()}},{key:"shouldComponentUpdate",value:function m(e,t){return t.shouldReconstructMap===!0}},{key:"componentDidUpdate",value:function y(){var e=this;this.state.shouldReconstructMap&&this.setState({shouldReconstructMap:void 0},function(){e.destroyMap(),e.initializeMap()})}},{key:"render",value:function v(){var e=this.props.className;return p["default"].createElement("div",{id:this.props.mapDefinition.container,className:e})}}]),t}(p["default"].Component);m.propTypes={mapDefinition:p["default"].PropTypes.object.isRequired,onInitialized:p["default"].PropTypes.func},n["default"]=m,t.exports=n["default"]},{"lodash.isequal":25,"mapspice-map-2.1.0":26,react:181}],198:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map})}},{key:"render",value:function r(){return this.state.map?u["default"].createElement("div",{className:"geolocation"},u["default"].createElement("div",{className:"element",onClick:this.locateMe.bind(this)},u["default"].createElement("div",{className:"icon button map-locate-me"}))):null}},{key:"locateMe",value:function l(){var e=this,t={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},n=function o(t){var n=t.coords;e.state.map.displayGeolocationMarker(n.longitude,n.latitude,{accuracy:n.accuracy}),e.state.map.flyTo({center:[n.longitude,n.latitude],zoom:18})},r=function i(e){console.warn("ERROR("+e.code+"): "+e.message)};navigator.geolocation.getCurrentPosition(n,r,t)}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],199:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function m(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("classnames"),p=r(c),d=e("../mapControls/Geolocation"),f=r(d),h=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,geolocation:this.props.geolocation,repositioned:!1,repositionTop:0,repositionBottom:0}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,geolocation:e.geolocation})}},{key:"componentDidUpdate",value:function r(){var e=this;this.state.map&&(this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".swipe-header").length>0?this.state.map.on("swipeLayoutLoaded",function(){e.repositionTop("swipe")}):this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".header-swipe").length>0?this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("single1")}):this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".header-single").length>0?this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("single2")}):this.props.position.indexOf("mapheader")>-1&&document.querySelectorAll(".changeovertime-slider-container").length>0&&this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("changeovertime")}))}},{key:"onZoomInClicked",value:function l(){this.state.map.zoomIn()}},{key:"onZoomInPressed",value:function c(e){13!==e.keyCode&&32!==e.keyCode||this.state.map.zoomIn()}},{key:"onZoomOutClicked",value:function d(){this.state.map.zoomOut()}},{key:"onZoomOutPressed",value:function h(e){13!==e.keyCode&&32!==e.keyCode||this.state.map.zoomOut()}},{key:"onResetToInitialViewClicked",value:function m(){this.state.map.fitBounds(this.props.mapDefinition.bounds)}},{key:"onResetToInitialViewPressed",value:function y(e){13!==e.keyCode&&32!==e.keyCode||this.state.map.fitBounds(this.props.mapDefinition.bounds)}},{key:"render",value:function v(){if(this.state.map){var e=(0,p["default"])(this.props.className,"mapspice-ui-zoom-control-container"),t=this.state.geolocation?u["default"].createElement(f["default"],{key:"geo-locator",map:this.state.map}):null,n={};return this.state.repositioned&&this.state.repositionTop>0&&(n.top=this.state.repositionTop),u["default"].createElement("div",{className:"map-control "+this.props.position,style:n,tabIndex:"0","aria-label":"zoom controls"},u["default"].createElement("div",{className:e+this.props.orientation},u["default"].createElement("div",{className:"element plus",tabIndex:"3",onClick:this.onZoomInClicked.bind(this),onKeyDown:this.onZoomInPressed.bind(this),"aria-label":"zoom in"},u["default"].createElement("div",{className:"icon button map-zoom-in"})),u["default"].createElement("div",{className:"element home",tabIndex:"3",onClick:this.onResetToInitialViewClicked.bind(this),onKeyDown:this.onResetToInitialViewPressed.bind(this),"aria-label":"reset zoom"},u["default"].createElement("div",{className:"icon button map-zoom-reset"})),u["default"].createElement("div",{className:"element minus",tabIndex:"3",onClick:this.onZoomOutClicked.bind(this),onKeyDown:this.onZoomOutPressed.bind(this),"aria-label":"zoom out"},u["default"].createElement("div",{className:"icon button map-zoom-out"})),t))}return null}},{key:"repositionTop",value:function g(e){if("swipe"===e){var t=document.querySelectorAll(".swipe-header")[0].clientHeight;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("single1"===e){var t=document.querySelectorAll(".header-swipe")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("single2"===e){var t=document.querySelectorAll(".header-single")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("changeovertime"===e){var t=document.querySelectorAll(".changeovertime-slider-container")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}}}]),t}(u["default"].Component);n["default"]=h,t.exports=n["default"]},{"../mapControls/Geolocation":198,classnames:1,react:181}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function f(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../mapControls/Geolocation"),p=r(c),d=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,mapDefinition:this.props.mapDefinition,geolocation:this.props.geolocation}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,mapDefinition:e.mapDefinition,geolocation:e.geolocation})}},{key:"onZoomInClicked",value:function r(){this.state.map.zoomIn()}},{key:"onZoomInPressed",value:function l(e){13!==e.keyCode&&32!==e.keyCode||this.state.map.zoomIn()}},{key:"onZoomOutClicked",value:function c(){this.state.map.zoomOut()}},{key:"onZoomOutPressed",value:function d(e){13!==e.keyCode&&32!==e.keyCode||this.state.map.zoomOut()}},{key:"onResetToInitialViewClicked",value:function f(){this.state.map.fitBounds(this.props.mapDefinition.bounds)}},{key:"onResetToInitialViewPressed",value:function h(e){13!==e.keyCode&&32!==e.keyCode||this.state.map.fitBounds(this.props.mapDefinition.bounds)}},{key:"render",value:function m(){if(this.state.map){var e=this.state.geolocation?u["default"].createElement(p["default"],{key:"geo-locator",map:this.state.map}):null;return u["default"].createElement("div",{className:"mapspice-ui-zoom-control-container"+this.props.orientation},u["default"].createElement("div",{className:"element plus",tabIndex:"3",onClick:this.onZoomInClicked.bind(this),onKeyDown:this.onZoomInPressed.bind(this),"aria-label":"zoom in"},u["default"].createElement("div",{className:"icon button map-zoom-in"})),u["default"].createElement("div",{className:"element home",tabIndex:"3",onClick:this.onResetToInitialViewClicked.bind(this),onKeyDown:this.onResetToInitialViewPressed.bind(this),"aria-label":"reset zoom"},u["default"].createElement("div",{className:"icon button map-zoom-reset"})),u["default"].createElement("div",{className:"element minus",tabIndex:"3",onClick:this.onZoomOutClicked.bind(this),onKeyDown:this.onZoomOutPressed.bind(this),"aria-label":"zoom out"},u["default"].createElement("div",{className:"icon button map-zoom-out"})),e)}return null}}]),t}(u["default"].Component);n["default"]=d,t.exports=n["default"]},{"../mapControls/Geolocation":198,react:181}],201:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function M(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../map/Map"),p=r(c),d=e("../mapControls/ZoomControl"),f=r(d),h=e("../mapLoadProgress/MapLoadProgress"),m=r(h),y=e("../additionalContentBox/AdditionalContentBox"),v=r(y),g=e("../infoBubble/InfoBubble"),_=r(g),b=e("../infoBubble/InfoBubbleTemplate"),x=r(b),w=e("../header/Header"),E=r(w),k=e("../popupLegend/PopupChoroplethLegend"),C=r(k),S=e("../popupLegend/PopupCustomLegend"),P=r(S),O=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={leftLoading:!0,rightLoading:!0,leftMapDefinition:this.props.leftMapDefinition,rightMapDefinition:this.props.rightMapDefinition,leftCurrentVariable:this.props.leftMapDefinition.style.metadata["mapspice:preferred-variable-id"],rightCurrentVariable:this.props.rightMapDefinition.style.metadata["mapspice:preferred-variable-id"]}}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){var e=this;window.addEventListener("resize",function(){e.onResize()},!1)}},{key:"componentWillReceiveProps",value:function r(e){this.setState({leftMapDefinition:e.leftMapDefinition,rightMapDefinition:e.rightMapDefinition})}},{key:"shouldComponentUpdate",value:function l(e,t){return!t.maxBoundsSetted&&!t.boundsSetted}},{key:"componentWillUnmount",value:function c(){this.state.leftMap.remove(),this.state.rightMap.remove()}},{key:"componentDidUpdate",value:function d(){var e=this;this.state.leftMapDefinition.sideBySide&&this.state.leftMap&&this.state.rightMap&&(this.state.leftMap.on("featuredeselectedAll",function(){e.state.leftMap.fire("featuredeselected",{}),e.state.rightMap.fire("featuredeselected",{})}),this.state.leftMap.on("unpinnannotationAll",function(){e.state.leftMap.fire("unpinnannotation",{}),e.state.rightMap.fire("unpinnannotation",{})}),this.state.rightMap.on("featuredeselectedAll",function(){e.state.leftMap.fire("featuredeselected",{}),e.state.rightMap.fire("featuredeselected",{})}),this.state.rightMap.on("unpinnannotationAll",function(){e.state.leftMap.fire("unpinnannotation",{}),e.state.rightMap.fire("unpinnannotation",{})})),"synced"===this.state.leftMapDefinition.sideBySide&&(this.state.leftMap.linkMapMovementsFrom(this.state.rightMap),this.state.leftMap.mimickMapMouseEvents(this.state.rightMap),this.state.rightMap.linkMapMovementsFrom(this.state.leftMap),this.state.rightMap.mimickMapMouseEvents(this.state.leftMap)),this.state.leftLoading||this.state.rightLoading||(this.setMaxBounds(),this.setBounds()),this.layoutRefresh()}},{key:"onResize",value:function h(){document.querySelectorAll(".swipe-header").length>0&&this.headerBottom!==parseInt(document.querySelectorAll(".swipe-header")[0].clientHeight,10)&&(this.headerBottom=parseInt(document.querySelectorAll(".swipe-header")[0].clientHeight,10),this.layoutRefresh())}},{key:"onLeftMapInitialized",value:function y(e){var t=this;e.on("variablechanged",function(){e.clearSelectedFeatures(),t.setState({leftCurrentVariable:t.state.leftMap.currentVariableId})}),e.on("load",function(){t.setState({leftLoading:!1})}),e.touchZoomRotate.enable(),e.touchZoomRotate.disableRotation(),window.leftmap=e,this.setState({leftMap:e})}},{key:"onRightMapInitialized",value:function g(e){var t=this;e.on("variablechanged",function(){e.clearSelectedFeatures(),t.setState({rightCurrentVariable:t.state.rightMap.currentVariableId})}),e.on("load",function(){t.setState({rightLoading:!1})}),e.touchZoomRotate.enable(),e.touchZoomRotate.disableRotation(),window.rightmap=e,this.setState({rightMap:e})}},{key:"render",value:function b(){var e=this.state.leftMapDefinition.layout,t=this.state.rightMapDefinition.layout,n=null;e.tooltip&&(n=u["default"].createElement(_["default"],{key:"tooltip-left",index:1,map:this.state.leftMap,tooltip:e.tooltip,legend:e.legend},u["default"].createElement(x["default"],{content:e.tooltip.content,mapDefinition:this.state.leftMapDefinition})));var r=null;t.tooltip&&(r=u["default"].createElement(_["default"],{key:"tooltip-right",index:2,map:this.state.rightMap,tooltip:t.tooltip,legend:t.legend},u["default"].createElement(x["default"],{content:t.tooltip.content,mapDefinition:this.state.rightMapDefinition})));var o=null;e.additionalContent&&(o=u["default"].createElement(v["default"],{additionalContent:e.additionalContent}));var i=null;t.additionalContent&&(i=u["default"].createElement(v["default"],{additionalContent:t.additionalContent}));var a=e.locateControl&&e.locateControl.show,s=null;if(e.zoomControl){var l=e.zoomControl.orientation?" "+e.zoomControl.orientation:" vertical";s=u["default"].createElement(f["default"],{key:"zoom-control",map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition,position:e.zoomControl.position,geolocation:a,orientation:l})}var c=null;if(t.zoomControl){var l=t.zoomControl.orientation?" "+t.zoomControl.orientation:" vertical";c=u["default"].createElement(f["default"],{key:"zoom-control",map:this.state.rightMap,mapDefinition:this.state.rightMapDefinition,position:t.zoomControl.position,geolocation:a,orientation:l})}var d=e.hideSElogo?null:u["default"].createElement("div",{className:e.legend&&"mapfooter left"===e.legend.position?"se-logo right":"se-logo"}),h=null;e.legend&&(e.legend.custom?h=u["default"].createElement(P["default"],{key:"legend-custom-leftMap",map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition}):"vertical"===e.legend.orientation&&(h=u["default"].createElement(C["default"],{key:"legend-leftMap-"+e.legend.orientation,map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition})));var y=null;t.legend&&(t.legend.custom?y=u["default"].createElement(P["default"],{key:"legend-custom-rightMap",map:this.state.rightMap,mapDefinition:this.state.rightMapDefinition}):"vertical"===t.legend.orientation&&(y=u["default"].createElement(C["default"],{key:"legend-rightMap-"+t.legend.orientation,map:this.state.rightMap,mapDefinition:this.state.rightMapDefinition})));var g=e.showMapLoading?u["default"].createElement(m["default"],{modalLoading:this.state.leftLoading,map:this.state.leftMap}):null;return u["default"].createElement("div",{className:"visualization sidebyside"},u["default"].createElement("div",{className:"map-container-sidebyside",id:"shadedleft"},u["default"].createElement(p["default"],{className:"map",onInitialized:this.onLeftMapInitialized.bind(this),mapDefinition:this.props.leftMapDefinition}),n,h,o,s),u["default"].createElement("div",{className:"map-container-sidebyside",id:"shadedright"},u["default"].createElement(p["default"],{className:"map",onInitialized:this.onRightMapInitialized.bind(this),mapDefinition:this.props.rightMapDefinition}),r,y,i,c),u["default"].createElement("div",{id:"sidebyside-ruler"}),u["default"].createElement("div",{className:"sidebyside-header-container"},u["default"].createElement("div",{className:"sidebyside-header left"},u["default"].createElement(E["default"],{map:this.state.leftMap,mapType:"swipe",mapDefinition:this.props.leftMapDefinition,currentVariable:this.state.leftCurrentVariable})),u["default"].createElement("div",{className:"sidebyside-header right"},u["default"].createElement(E["default"],{map:this.state.rightMap,mapType:"swipe",mapDefinition:this.props.rightMapDefinition,currentVariable:this.state.rightCurrentVariable}))),d,g)}},{key:"setMaxBounds",value:function w(){!this.state.maxBoundsSetted&&this.state.leftMapDefinition.maxBounds&&this.state.rightMapDefinition.maxBounds&&(this.state.leftMap.setMaxBounds(this.state.leftMapDefinition.maxBounds),this.state.rightMap.setMaxBounds(this.state.rightMapDefinition.maxBounds),this.setState({maxBoundsSetted:!0}))}},{key:"setBounds",value:function k(){!this.state.boundsSetted&&this.state.leftMapDefinition.bounds&&this.state.rightMapDefinition.bounds&&(this.state.leftMap.fitBounds(this.state.leftMapDefinition.bounds),this.state.rightMap.fitBounds(this.state.rightMapDefinition.bounds),this.setState({boundsSetted:!0}))}},{key:"layoutRefresh",value:function S(){this.state.leftMap&&this.state.leftMap.fire("swipeLayoutLoaded"),this.state.rightMap&&this.state.rightMap.fire("swipeLayoutLoaded")}}]),t}(u["default"].Component);n["default"]=O,t.exports=n["default"]},{"../additionalContentBox/AdditionalContentBox":184,"../header/Header":191,"../infoBubble/InfoBubble":194,"../infoBubble/InfoBubbleTemplate":196,"../map/Map":197,"../mapControls/ZoomControl":199,"../mapLoadProgress/MapLoadProgress":204,"../popupLegend/PopupChoroplethLegend":207,"../popupLegend/PopupCustomLegend":208,react:181}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function W(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../map/Map"),p=r(c),d=e("../mapControls/ZoomControl"),f=r(d),h=e("../mapLoadProgress/MapLoadProgress"),m=r(h),y=e("../additionalContentBox/AdditionalContentBox"),v=r(y),g=e("../variableDescriptionOverlay/VariableDescriptionOverlay"),_=r(g),b=e("../variableDescriptionSidebar/VariableDescriptionSidebar"),x=r(b),w=e("../infoBubble/InfoBubble"),E=r(w),k=e("../infoBubble/InfoBubbleTemplate"),C=r(k),S=e("../infoBubble/AnnotationPopup"),P=r(S),O=e("../header/Header"),M=r(O),D=e("../mapOverlayContainer/MapOverlayContainer"),T=r(D),N=e("../popupLegend/PopupChoroplethLegend"),I=r(N),L=e("../popupLegend/PopupCustomLegend"),R=r(L),A=e("../changeOverTimeSlider/ChangeOverTimeSlider"),j=r(A),z=e("../changeOverTimeComposite/ChangeOverTimeComposite"),V=r(z),F=e("../summaryLevelPicker/SummaryLevelPicker"),B=r(F),U=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={mapDefinition:this.props.mapDefinition,currentVariable:this.props.mapDefinition.style.metadata["mapspice:preferred-variable-id"],anotadedLayerIDs:this.props.mapDefinition.layout.annotation&&this.props.mapDefinition.layout.annotation["mapspice:annotaded-layer-id"]?this.props.mapDefinition.layout.annotation["mapspice:annotaded-layer-id"]:[]},this.annotation={showed:!1,pinned:!1,position:[]},this.tooltip={showed:!1,pinned:!1,position:[]}}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){var e=this;window.addEventListener("resize",function(){e.onResize()},!1)}},{key:"componentWillUnmount",value:function r(){this.state.map.remove()}},{key:"componentDidUpdate",value:function l(){this.layoutRefresh()}},{key:"onResize",value:function c(){document.querySelectorAll(".header-swipe").length>0&&this.headerBottom!==parseInt(document.querySelectorAll(".header-swipe")[0].clientHeight,10)&&(this.headerBottom=parseInt(document.querySelectorAll(".header-swipe")[0].clientHeight,10),this.layoutRefresh())}},{key:"onMapInitialized",value:function d(e){var t=this;e.on("load",function(){t.state.mapDefinition.maxBounds&&e.setMaxBounds(t.state.mapDefinition.maxBounds),t.state.mapDefinition.bounds&&e.fitBounds(t.state.mapDefinition.bounds),e.touchZoomRotate.enable(),e.touchZoomRotate.disableRotation(),window.map=e,t.setState({map:e})}),e.on("variablechanged",function(){e.clearSelectedFeatures(),t.state.mapDefinition.bounds&&t.state.mapDefinition.autoFitBounds?e.fitBounds(t.state.mapDefinition.bounds):t.state.map.currentVariableId&&t.state.mapDefinition.style.metadata["mapspice:variables"][t.state.map.currentVariableId].bounds&&e.fitBounds(t.state.mapDefinition.style.metadata["mapspice:variables"][t.state.map.currentVariableId].bounds),t.setState({currentVariable:t.state.map.currentVariableId})}),e.on("mousemove",function(n){var r=[[n.point.x-5,n.point.y-5],[n.point.x+5,n.point.y+5]],o=e.queryRenderedFeatures(r,{layers:t.state.anotadedLayerIDs});o.length>0&&!t.annotation.pinned?(e.fire("showannotation",{position:n.point,selectedFeature:o[0].properties}),t.annotation.showed=!0,t.annotation.position=n.lngLat):t.annotation.showed&&!t.annotation.pinned&&e.fire("hideannotation",{})}),e.on("click",function(n){var r=[[n.point.x-5,n.point.y-5],[n.point.x+5,n.point.y+5]],o=e.queryRenderedFeatures(r,{layers:t.state.anotadedLayerIDs});o.length>0?t.annotation.pinned||(e.fire("pinnannotation",{position:n.point,selectedFeature:o[0].properties}),t.annotation.pinned=!0,t.annotation.position=n.lngLat):t.annotation.pinned&&e.fire("unpinnannotation",{})}),e.on("hideannotation",function(){t.annotation.showed=!1}),e.on("unpinnannotation",function(){t.annotation.pinned=!1}),e.on("featurehoverstart",function(e){t.tooltip.showed=!0,t.tooltip.position=e.lngLat}),e.on("featurehoverend",function(){t.tooltip.showed=!1}),e.on("featureselected",function(e){t.tooltip.pinned=!0,t.tooltip.position=e.lngLat}),e.on("featuredeselected",function(){t.tooltip.pinned=!1}),e.on("zoom",function(){if(t.tooltip.pinned){var n=e.project(t.tooltip.position);e.fire("repositionTooltip",{xy:n})}if(t.annotation.pinned){var n=e.project(t.annotation.position);e.fire("repositionAnnotation",{xy:n})}}),e.on("move",function(){if(t.tooltip.pinned){var n=e.project(t.tooltip.position);e.fire("repositionTooltip",{xy:n})}if(t.annotation.pinned){var n=e.project(t.annotation.position);e.fire("repositionAnnotation",{xy:n})}})}},{key:"render",value:function h(){this.showMapFooter=!1,this.mapfooter={left:[],center:[],right:[]};var e=this.state.mapDefinition.layout,t=null;e.changeOverTime&&e.changeOverTime.position&&e.changeOverTime.position.indexOf("mapheader")===-1&&(t=e.changeOverTime.type&&"composite"===e.changeOverTime.type?u["default"].createElement(V["default"],{key:"changeovertime-composite",map:this.state.map,mapDefinition:this.state.mapDefinition,layout:e.changeOverTime}):u["default"].createElement(j["default"],{key:"changeovertime-slider",map:this.state.map,mapDefinition:this.state.mapDefinition,layout:e.changeOverTime}));var n=null;e.summaryLevelPicker&&e.summaryLevelPicker.position&&e.summaryLevelPicker.position.indexOf("mapheader")===-1&&this.state.map&&(n=u["default"].createElement("div",{className:"map-overlay-container "+e.summaryLevelPicker.position,tabIndex:"0","aria-label":"zoom controls"},u["default"].createElement(B["default"],{key:"summary-picker",map:this.state.map,title:"Choose geo level"})));var r=null;e.legend&&e.legend.position&&e.legend.position.indexOf("mapheader")===-1&&(e.legend.custom?r=u["default"].createElement(R["default"],{key:"legend-custom",map:this.state.map,mapDefinition:this.state.mapDefinition}):"header"!==e.legend.position.substring(0,6)&&("horizontal"!==e.legend.orientation&&"vertical"!==e.legend.orientation||(r=u["default"].createElement(I["default"],{key:"legend-"+e.legend.orientation,map:this.state.map,mapDefinition:this.state.mapDefinition}))));var o=null;e.tooltip&&(o=u["default"].createElement(E["default"],{key:"tooltip",map:this.state.map,tooltip:e.tooltip,legend:e.legend,additionalContent:e.additionalContent},u["default"].createElement(C["default"],{content:e.tooltip.content,mapDefinition:this.state.mapDefinition})));var i=null;e.annotation&&(i=u["default"].createElement(P["default"],{key:"annotation",map:this.state.map,annotation:e.annotation,legend:e.legend},u["default"].createElement(C["default"],{content:e.annotation.content,mapDefinition:this.state.mapDefinition})));var a=null;e.additionalContent&&e.additionalContent.position&&(a=u["default"].createElement(v["default"],{additionalContent:e.additionalContent,map:this.state.map,position:e.additionalContent.position}));var s=null,l=null;e.variableDescription&&e.variableDescription.type&&("sidebar"===e.variableDescription.type?l=u["default"].createElement(x["default"],{map:this.state.map,mapDefinition:this.state.mapDefinition,variableDescription:e.variableDescription}):"overlay"===e.variableDescription.type&&(s=u["default"].createElement(_["default"],{
map:this.state.map,mapDefinition:this.state.mapDefinition,variableDescription:e.variableDescription})));var c=e.locateControl&&e.locateControl.show,d=null;if(e.zoomControl&&e.zoomControl.position&&e.zoomControl.position.indexOf("mapheader")===-1){var h=e.zoomControl.orientation?" "+e.zoomControl.orientation:" vertical";d=u["default"].createElement(f["default"],{key:"zoom-control",map:this.state.map,mapDefinition:this.state.mapDefinition,position:e.zoomControl.position,geolocation:c,orientation:h})}var y=e.hideSElogo?null:u["default"].createElement("div",{className:e.legend&&"mapfooter left"===e.legend.position?"se-logo right":"se-logo"}),g=e.loadingIndicator&&e.loadingIndicator.type?u["default"].createElement(m["default"],{type:e.loadingIndicator.type,map:this.state.map}):null;return u["default"].createElement("div",{className:"visualization"},u["default"].createElement("div",{className:"map-container"},u["default"].createElement(p["default"],{className:"map",onInitialized:this.onMapInitialized.bind(this),mapDefinition:this.state.mapDefinition}),u["default"].createElement(M["default"],{map:this.state.map,mapDefinition:this.state.mapDefinition,currentVariable:this.state.currentVariable}),u["default"].createElement(T["default"],{map:this.state.map,mapDefinition:this.state.mapDefinition,position:"left"}),u["default"].createElement(T["default"],{map:this.state.map,mapDefinition:this.state.mapDefinition,position:"right"}),t,n,y,r,o,i,a,d,s,l),g)}},{key:"layoutRefresh",value:function y(){this.state.map.fire("singleLayoutLoaded")}},{key:"toogleLayersFilters",value:function g(e,t){var n=this,r=Object.keys(this.state.mapDefinition.style.metadata["mapspice:variables"]);r.forEach(function(r){var o=n.state.mapDefinition.style.metadata["mapspice:variables"][r]["layers-ids"];r===t?o.forEach(function(t){e.style._layers[t]&&e.style._layers.top&&e.style._layers.worldlandmass&&(e.setLayoutProperty(t,"visibility","visible"),e.moveLayer(t,"top"))}):o.forEach(function(t){e.style._layers[t]&&e.style._layers.top&&e.style._layers.worldlandmas&&(e.setLayoutProperty(t,"visibility","none"),e.moveLayer(t,"worldlandmass"))})})}}]),t}(u["default"].Component);n["default"]=U,t.exports=n["default"]},{"../additionalContentBox/AdditionalContentBox":184,"../changeOverTimeComposite/ChangeOverTimeComposite":186,"../changeOverTimeSlider/ChangeOverTimeSlider":187,"../header/Header":191,"../infoBubble/AnnotationPopup":193,"../infoBubble/InfoBubble":194,"../infoBubble/InfoBubbleTemplate":196,"../map/Map":197,"../mapControls/ZoomControl":199,"../mapLoadProgress/MapLoadProgress":204,"../mapOverlayContainer/MapOverlayContainer":205,"../popupLegend/PopupChoroplethLegend":207,"../popupLegend/PopupCustomLegend":208,"../summaryLevelPicker/SummaryLevelPicker":209,"../variableDescriptionOverlay/VariableDescriptionOverlay":210,"../variableDescriptionSidebar/VariableDescriptionSidebar":211,react:181}],203:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function P(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../map/Map"),p=r(c),d=e("../mapControls/ZoomControl"),f=r(d),h=e("../mapLoadProgress/MapLoadProgress"),m=r(h),y=e("../additionalContentBox/AdditionalContentBox"),v=r(y),g=e("../infoBubble/InfoBubbleSwipe"),_=r(g),b=e("../header/Header"),x=r(b),w=e("../popupLegend/PopupChoroplethLegend"),E=r(w),k=e("../popupLegend/PopupCustomLegend"),C=r(k),S=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={leftLoading:!0,rightLoading:!0,leftMapDefinition:this.props.leftMapDefinition,rightMapDefinition:this.props.rightMapDefinition,leftCurrentVariable:this.props.leftMapDefinition.style.metadata["mapspice:preferred-variable-id"],anotadedLayerIDs:this.props.leftMapDefinition.layout.tooltip&&this.props.leftMapDefinition.layout.tooltip["mapspice:annotaded-layer-id"]?this.props.leftMapDefinition.layout.tooltip["mapspice:annotaded-layer-id"]:[]},this.pageX=50,this.pageXpct=50,this.onDragEvent=this.onDrag.bind(this),this.onTouchMoveEvent=this.onTouchMove.bind(this),this.onMouseDownEvent=this.onMouseDown.bind(this),this.onMouseUpEvent=this.onMouseUp.bind(this)}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){var e=this;window.addEventListener("resize",function(){var t=window.innerWidth*e.pageXpct/100;e.onResize(t)},!1)}},{key:"componentWillReceiveProps",value:function r(e){this.setState({leftMapDefinition:e.leftMapDefinition,rightMapDefinition:e.rightMapDefinition})}},{key:"shouldComponentUpdate",value:function l(e,t){return!t.maxBoundsSetted&&!t.boundsSetted}},{key:"componentWillUnmount",value:function c(){this.state.leftMap.remove(),this.state.rightMap.remove()}},{key:"componentDidUpdate",value:function d(){this.state.leftMap&&this.state.rightMap&&(this.state.leftMap.linkMapMovementsFrom(this.state.rightMap),this.state.leftMap.mimickMapMouseEvents(this.state.rightMap),this.state.rightMap.linkMapMovementsFrom(this.state.leftMap),this.state.rightMap.mimickMapMouseEvents(this.state.leftMap)),this.state.leftLoading||this.state.rightLoading||(this.setMaxBounds(),this.setBounds(),this.headerBottom=document.querySelectorAll(".swipe-header")[0].clientHeight,this.layoutRefresh())}},{key:"onMouseDown",value:function h(){window.addEventListener("mousemove",this.onDragEvent,!1)}},{key:"onMouseUp",value:function y(){window.removeEventListener("mousemove",this.onDragEvent,!1)}},{key:"onDrag",value:function g(e){e.preventDefault(),this.onResize(e.pageX)}},{key:"onTouchMove",value:function b(e){e.preventDefault(),this.onResize(e.touches[0].clientX)}},{key:"onResize",value:function w(e){this.pageX=e;var t=e/window.innerWidth*100;e>10&&window.innerWidth-e>15&&(this.pageXpct=parseInt(t,10),document.getElementById("shadedright").style.clip="rect(0px,"+window.innerWidth+"px,"+window.innerHeight+"px,"+this.pageX+"px)",document.getElementById("swipe-ruler").style.left=t+"%",document.querySelectorAll(".swipe-header").length>0&&this.headerBottom!==parseInt(document.querySelectorAll(".swipe-header")[0].clientHeight,10)&&(this.headerBottom=parseInt(document.querySelectorAll(".swipe-header")[0].clientHeight,10),this.layoutRefresh()))}},{key:"onLeftMapInitialized",value:function k(e){var t=this;e.on("variablechanged",function(){e.clearSelectedFeatures(),t.setState({leftCurrentVariable:t.state.leftMap.currentVariableId})}),e.on("load",function(){t.trigerAnnotation(e),t.setState({leftLoading:!1})}),e.touchZoomRotate.enable(),e.touchZoomRotate.disableRotation(),window.leftmap=e,this.setState({leftMap:e})}},{key:"onRightMapInitialized",value:function S(e){var t=this;e.on("variablechanged",function(){e.clearSelectedFeatures(),t.setState({rightCurrentVariable:t.state.rightMap.currentVariableId})}),e.on("load",function(){t.trigerAnnotation(e),t.setState({rightLoading:!1})}),e.touchZoomRotate.enable(),e.touchZoomRotate.disableRotation(),window.rightmap=e,document.getElementById("shadedright").style.clip="rect(0px,"+window.innerWidth+"px,"+window.innerHeight+"px,"+window.innerWidth/2+"px)",this.setState({rightMap:e})}},{key:"render",value:function P(){var e=this.state.leftMapDefinition.layout,t=this.state.rightMapDefinition.layout,n=null;e.tooltip&&(n=u["default"].createElement(_["default"],{key:"swipe-tooltip",leftMap:this.state.leftMap,rightMap:this.state.rightMap,leftMapDefinition:this.state.leftMapDefinition,rightMapDefinition:this.state.rightMapDefinition}));var r=null;e.additionalContent&&(r=u["default"].createElement(v["default"],{additionalContent:e.additionalContent,map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition}));var o=null;t.additionalContent&&(o=u["default"].createElement(v["default"],{additionalContent:t.additionalContent,map:this.state.rightMap,mapDefinition:this.state.rightMapDefinition}));var i=e.locateControl&&e.locateControl.show,a=null,s=e.zoomControl.orientation?" "+e.zoomControl.orientation:" vertical";e.zoomControl&&(a=u["default"].createElement(f["default"],{key:"zoom-control",map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition,position:e.zoomControl.position,geolocation:i,orientation:s}));var l=e.hideSElogo?null:u["default"].createElement("div",{className:e.legend&&"mapfooter left"===e.legend.position?"se-logo right":"se-logo"}),c=null;e.legend&&(e.legend.custom?c=u["default"].createElement(C["default"],{key:"legend-custom-leftMap",map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition}):"vertical"===e.legend.orientation&&(c=u["default"].createElement(E["default"],{key:"legend-leftMap-"+e.legend.orientation,map:this.state.leftMap,mapDefinition:this.state.leftMapDefinition})));var d=null;t.legend&&(t.legend.custom?d=u["default"].createElement(C["default"],{key:"legend-custom-rightMap",map:this.state.rightMap,mapDefinition:this.state.rightMapDefinition}):"vertical"===t.legend.orientation&&(d=u["default"].createElement(E["default"],{key:"legend-rightMap-"+t.legend.orientation,map:this.state.rightMap,mapDefinition:this.state.rightMapDefinition})));var h=e.showMapLoading?u["default"].createElement(m["default"],{modalLoading:this.state.leftLoading,map:this.state.leftMap}):null;return u["default"].createElement("div",{className:"visualization swipe"},u["default"].createElement("div",{className:"map-container-swipe",id:"shadedleft"},u["default"].createElement(p["default"],{className:"map",onInitialized:this.onLeftMapInitialized.bind(this),mapDefinition:this.props.leftMapDefinition}),l,n,a,c,d,r,o),u["default"].createElement("div",{className:"map-container-swipe",id:"shadedright"},u["default"].createElement(p["default"],{className:"map",onInitialized:this.onRightMapInitialized.bind(this),mapDefinition:this.props.rightMapDefinition})),u["default"].createElement("div",{id:"swipe-ruler",onTouchMove:this.onTouchMoveEvent,onMouseDown:this.onMouseDownEvent,onMouseUp:this.onMouseUpEvent}),u["default"].createElement("div",{className:"swipe-header-container"},u["default"].createElement("div",{className:"swipe-header left"},u["default"].createElement(x["default"],{map:this.state.leftMap,mapType:"swipe",mapDefinition:this.props.leftMapDefinition,currentVariable:this.state.leftCurrentVariable})),u["default"].createElement("div",{className:"swipe-header right"},u["default"].createElement(x["default"],{map:this.state.rightMap,mapType:"swipe",mapDefinition:this.props.rightMapDefinition,currentVariable:this.state.rightCurrentVariable}))),h)}},{key:"trigerAnnotation",value:function O(e){var t=this;this.state.anotadedLayerIDs.length>0&&(e.on("mousemove",function(n){var r=[[n.point.x-10,n.point.y-10],[n.point.x+10,n.point.y+10]],o=e.queryRenderedFeatures(r,{layers:t.state.anotadedLayerIDs});o.length>0?e.fire("featurehoverstart",{point:n.point,featureData:o[0].properties}):e.fire("featurehoverend",{})}),e.on("click",function(n){var r=[[n.point.x-10,n.point.y-10],[n.point.x+10,n.point.y+10]],o=e.queryRenderedFeatures(r,{layers:t.state.anotadedLayerIDs});o.length>0?e.fire("featureselected",{point:n.point,featureData:o[0].properties}):e.fire("featuredeselected",{})}))}},{key:"setMaxBounds",value:function M(){!this.state.maxBoundsSetted&&this.state.leftMapDefinition.maxBounds&&(this.state.leftMap.setMaxBounds(this.state.leftMapDefinition.maxBounds),this.state.rightMap.setMaxBounds(this.state.leftMapDefinition.maxBounds),this.setState({maxBoundsSetted:!0}))}},{key:"setBounds",value:function D(){!this.state.boundsSetted&&this.state.leftMapDefinition.bounds&&(this.state.leftMap.fitBounds(this.state.leftMapDefinition.bounds),this.state.rightMap.fitBounds(this.state.leftMapDefinition.bounds),this.setState({boundsSetted:!0}))}},{key:"layoutRefresh",value:function T(){this.state.leftMap&&this.state.leftMap.fire("swipeLayoutLoaded"),this.state.rightMap&&this.state.rightMap.fire("swipeLayoutLoaded")}}]),t}(u["default"].Component);n["default"]=S,t.exports=n["default"]},{"../additionalContentBox/AdditionalContentBox":184,"../header/Header":191,"../infoBubble/InfoBubbleSwipe":195,"../map/Map":197,"../mapControls/ZoomControl":199,"../mapLoadProgress/MapLoadProgress":204,"../popupLegend/PopupChoroplethLegend":207,"../popupLegend/PopupCustomLegend":208,react:181}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,type:this.props.type,showLoading:!1}}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){}},{key:"componentWillReceiveProps",value:function r(e){this.setState({map:e.map,type:e.type})}},{key:"componentDidUpdate",value:function l(){var e=this;this.state.map.on("rendered",function(){e.state.showLoading&&e.setState({showLoading:!1})}),this.state.map.on("data",function(){e.state.showLoading||e.setState({showLoading:!0})})}},{key:"render",value:function c(){return"modal"===this.state.type?u["default"].createElement("div",{className:"loader modal"+(this.state.showLoading?" visible":"")},u["default"].createElement("div",{className:"loading-message"},"Loading maps...")):u["default"].createElement("div",{className:"loader tray"+(this.state.showLoading?" visible":"")})}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function _(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=e("../geoSearch/GeoSearch"),p=r(c),d=e("../dropdownPicker/DropdownPicker"),f=r(d),h=e("../summaryLevelPicker/SummaryLevelPicker"),m=r(h),y=e("../mapControls/ZoomControlComponent"),v=r(y),g=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={map:this.props.map,position:this.props.position,mapDefinition:this.props.mapDefinition,layout:this.props.mapDefinition.layout}}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,position:e.position,mapDefinition:e.mapDefinition,layout:e.mapDefinition.layout})}},{key:"componentDidUpdate",value:function r(){var e=this;this.state.map&&(document.querySelectorAll(".swipe-header").length>0?this.state.map.on("swipeLayoutLoaded",function(){e.repositionTop("swipe")}):document.querySelectorAll(".header-swipe").length>0?this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("single1")}):document.querySelectorAll(".header-single").length>0?this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("single2")}):document.querySelectorAll(".changeovertime-slider-container").length>0&&this.state.map.on("singleLayoutLoaded",function(){e.repositionTop("changeovertime")}))}},{key:"render",value:function l(){if(this.state.map){var e=this.state.layout,t=[],n=e.locateControl&&e.locateControl.show;if(e.zoomControl&&e.zoomControl.position&&e.zoomControl.position==="mapheader "+this.state.position){var r=e.zoomControl.orientation?" "+e.zoomControl.orientation:" vertical";t.push(u["default"].createElement(v["default"],{key:"zoom-control",map:this.state.map,mapDefinition:this.state.mapDefinition,geolocation:n,orientation:r}))}e.geosearch&&e.geosearch.position&&e.geosearch.position==="mapheader "+this.state.position&&t.push(u["default"].createElement(p["default"],{key:"geo-search",map:this.state.map,geosearch:e.geosearch})),e.summaryLevelPicker&&e.summaryLevelPicker.position&&e.summaryLevelPicker.position==="mapheader "+this.state.position&&t.push(u["default"].createElement(m["default"],{key:"summary-picker",map:this.state.map,title:"Choose geo level"})),e.variablePicker&&e.variablePicker.position&&e.variablePicker.position==="mapheader "+this.state.position&&t.push(u["default"].createElement(f["default"],{key:"variable-picker",map:this.state.map,title:e.variablePicker.title,allwaysVisible:!0,currentVariable:this.state.currentVariable}));var o={};return this.state.repositioned&&this.state.repositionTop>0&&(o.top=this.state.repositionTop),u["default"].createElement("div",{className:"map-overlay-container "+this.props.position,style:o,tabIndex:"0","aria-label":"Map overlay element"},t)}return null}},{key:"repositionTop",value:function c(e){if("swipe"===e){var t=document.querySelectorAll(".swipe-header")[0].clientHeight;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("single1"===e){var t=document.querySelectorAll(".header-swipe")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("single2"===e){var t=document.querySelectorAll(".header-single")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}else if("changeovertime"===e){var t=document.querySelectorAll(".changeovertime-slider-container")[0].clientHeight+16;t!==this.state.repositionTop&&this.setState({repositioned:!0,repositionTop:t})}}}]),t}(u["default"].Component);n["default"]=g,t.exports=n["default"]},{"../dropdownPicker/DropdownPicker":189,"../geoSearch/GeoSearch":190,"../mapControls/ZoomControlComponent":200,"../summaryLevelPicker/SummaryLevelPicker":209,react:181}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.currentYear=1870}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map})}},{key:"onPlayYears",value:function r(){this.currentYear<2010&&(this.currentYear=parseInt(this.currentYear+1,10),this.state.map.currentVariableId="G"+this.currentYear,setTimeout(this.onPlayYears.bind(this),1e3))}},{key:"render",value:function l(){return u["default"].createElement("div",{className:"play-button",key:"play-years",onClick:this.onPlayYears.bind(this)},"Play Years")}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],207:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ruleSets:null,mobileLayout:!1,showChoroplethPopup:!!this.props.mapDefinition.layout.legend.initialOpened&&this.props.mapDefinition.layout.legend.initialOpened,mapDefinition:this.props.mapDefinition,legend:this.props.mapDefinition.layout.legend,orientation:this.props.mapDefinition.layout.legend.orientation?this.props.mapDefinition.layout.legend.orientation:"vertical"},this.onTogglePopupEvent=this.onTogglePopup.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this,n={};e.map&&e.mapDefinition&&e.map.currentVariableRules.forEach(function(t){n[t.layerId]?n[t.layerId].rules.push(t):(n[t.layerId]={},n[t.layerId].rules=[t],n[t.layerId].layerId=t.layerId,n[t.layerId].label=e.mapDefinition.style.layers.find(function(e){return e.id===t.layerId}).metadata["mapspice:rulesLegendTitle"])});var r=Object.keys(n)?Object.keys(n).length:1,o=Object.keys(n)[0]?n[Object.keys(n)[0]].rules.length:0,i={map:e.map,mapDefinition:e.mapDefinition,legend:e.mapDefinition.layout.legend,ruleSets:n};if(e.map&&e.mapDefinition){i.rules=e.map.currentVariableRules;var a=function s(){t.setState({rules:e.map.currentVariableRules})};e.map.on("variablechanged",a),e.map.on("rulepaintpropertychanged",a),e.map.on("rulelayoutpropertychanged",a),e.map.on("rulefilterchanged",a),e.map.on("featurehoverstart",function(e){var n=t.state.rules,i=n.findIndex(function(t){return t.filter({type:2,properties:e.featureData})}),a=i>-1?n[i].layerId:"";i=i+1>o?i%r:i,t.setState({activeRuleIndex:i,activeRulesetName:a})}),e.map.on("featurehoverend",function(){t.setState({activeRuleIndex:-1})})}this.setState(i)}},{key:"componentDidUpdate",value:function r(){(window.innerWidth<=480&&!this.state.mobileLayout||window.innerWidth>480&&this.state.mobileLayout)&&this.setState({mobileLayout:!this.state.mobileLayout})}},{key:"onTogglePopup",value:function l(){this.setState({showChoroplethPopup:!this.state.showChoroplethPopup}),this.state.map.fire("legendpopuped",[!this.state.showChoroplethPopup]),this.render()}},{key:"onTogglePopupKeypress",value:function c(e){13===e.keyCode&&(this.setState({showChoroplethPopup:!this.state.showChoroplethPopup}),this.state.map.fire("legendpopuped",[!this.state.showChoroplethPopup]),this.render())}},{key:"renderColoredIcon",value:function p(){var e=Object.keys(this.state.ruleSets)[0],t=this.state.mapDefinition.style.layers.filter(function(t){if(t.id===e)return t})[0].metadata["mapspice:color-palette-id"],n=this.state.mapDefinition.style.metadata["mapspice:color-palettes"][t].colors,r={colorbox:{},one:{},two:{},three:{},four:{}};return n.length>0&&(1===n.length?r.colorbox.background=n[0]:2===n.length?(r.one.background=n[0],r.two.background=n[1],r.three.background=n[0],r.four.background=n[1]):3===n.length?(r.one.background=n[0],r.two.background=n[1],r.three.background=n[2],r.four.background=n[2]):n.length>3&&(r.one.background=n[0],r.two.background=n[1],r.three.background=n[2],r.four.background=n[3])),u["default"].createElement("span",null,u["default"].createElement("div",{className:"colorbox",style:r.colorbox},u["default"].createElement("div",null,u["default"].createElement("div",{className:"color one",style:r.one}),u["default"].createElement("div",{className:"color two",style:r.two})),u["default"].createElement("div",null,u["default"].createElement("div",{className:"color thr",style:r.three}),u["default"].createElement("div",{className:"color fou",style:r.four}))))}},{key:"render",value:function d(){var e=this,t=this.state.legend;if(this.state.map&&this.state.ruleSets){var n=function(){var n=Object.keys(e.state.ruleSets),r={height:t.customHeight&&!e.state.mobileLayout?t.customHeight:"auto",maxHeight:t.customHeight&&!e.state.mobileLayout?"auto":300,width:t.customWidth&&!e.state.mobileLayout?t.customWidth:"100%"},o=n.map(function(t,n){return u["default"].createElement("div",{key:"rulest"+n,className:"legend-ruleset",style:r},e.state.ruleSets[t].label?u["default"].createElement("div",{className:"ruleset-header"},u["default"].createElement("span",{className:"ruleset-title"},e.state.ruleSets[t].label)):null,u["default"].createElement("div",{className:"ruleset-elements"},e.state.ruleSets[t].rules.map(function(r,o){var i="";0===o?i=" first":o===e.state.ruleSets[t].rules.length-1&&(i=" last");var a=r.description?r.description:"",s="horizontal"===e.state.orientation&&n>0?" hidden":"",l="horizontal"===e.state.orientation?{width:100/e.state.ruleSets[t].rules.length+"%"}:{};return u["default"].createElement("div",{key:"rule"+o,className:"ruleset-element"+(e.state.activeRuleIndex===o&&e.state.activeRulesetName===t?" bolded":""),style:l,title:a,onClick:e._onMouseOver.bind(e,t,o),onMouseOver:e._onMouseOver.bind(e,t,o),onFocus:e._onMouseOver.bind(e,t,o),onMouseOut:e._onMouseOut.bind(e,t,o),onBlur:e._onMouseOut.bind(e,t,o),tabIndex:2,"aria-label":"Legend item: "+r.label},u["default"].createElement("div",{className:"color-block",style:{backgroundColor:r.colors[0]}}," "),u["default"].createElement("div",{className:"text-block"+i+s},r.label))})))});return e.state.showChoroplethPopup?{v:u["default"].createElement("div",{className:"choropleth-legend "+e.state.orientation+" "+t.position,onKeyDown:e.onTogglePopupKeypress.bind(e),tabIndex:"0","aria-label":"Legend"},u["default"].createElement("div",{className:"legend-header"},u["default"].createElement("div",{className:"legend-title"},t.title?t.title:"Legend"),u["default"].createElement("div",{className:"legend-close",onClick:e.onTogglePopupEvent,tabIndex:"2","aria-label":"Close legend button"},u["default"].createElement("div",{className:"icon button close"}))),o)}:{v:u["default"].createElement("div",{className:"choropleth-legend legend-button "+t.position,onClick:e.onTogglePopupEvent,onKeyDown:e.onTogglePopupKeypress.bind(e),tabIndex:"0","aria-label":"Legend"},e.renderColoredIcon(),u["default"].createElement("span",{className:"caption",style:{paddingLeft:"16px",fontSize:"13px"}},"Legend"))}}();if("object"==typeof n)return n.v}return null}},{key:"_onMouseOver",value:function f(e,t){var n=this;this.state.legend.preventHoverHighlight||this.state.ruleSets[e].rules.forEach(function(e,r){r!==t?!function(){var t=n._getPaintProperty("opacity",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,.15)}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,.15)}))}():!function(){var t=n._getPaintProperty("outline",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,"rgba(0,0,0,0.7)")}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,"rgba(0,0,0,0.7)")}))}()})}},{key:"_onMouseOut",value:function h(e,t){var n=this;this.state.legend.preventHoverHighlight||this.state.ruleSets[e].rules.forEach(function(e,r){r!==t?!function(){var t=n._getPaintProperty("opacity",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,1)}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,1)}))}():!function(){var t=n._getPaintProperty("outline",e.layerType);t&&(e.colorProperties.forEach(function(){n.state.map.setRulePaintProperty(e.layerId,r,t,"rgba(0,0,0,0)")}),e.controledLayerIDs&&e.controledLayerIDs.length>0&&e.controledLayerIDs.forEach(function(e){n.state.map.setPaintProperty(e,t,"rgba(0,0,0,0)")}))}()})}},{key:"_getPaintProperty",value:function m(e,t){var n="";if("opacity"===e)n=t+"-"+e;else if("outline"===e)switch(t){case"bubble":n="bubble-outline-color";break;case"fill":n="fill-outline-color";break;default:n=null}return n}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],208:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){
function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={ruleSets:null,mobileLayout:!1,mapDefinition:this.props.mapDefinition,showChoroplethPopup:!!this.props.mapDefinition.layout.legend.initialOpened&&this.props.mapDefinition.layout.legend.initialOpened,legend:this.props.mapDefinition.layout.legend},this.onTogglePopupEvent=this.onTogglePopup.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){var t=this,n={};e.map&&e.mapDefinition&&e.map.currentVariableRules.forEach(function(t){n[t.layerId]?n[t.layerId].rules.push(t):(n[t.layerId]={},n[t.layerId].rules=[t],n[t.layerId].layerId=t.layerId,n[t.layerId].label=e.mapDefinition.style.layers.find(function(e){return e.id===t.layerId}).metadata["mapspice:rulesLegendTitle"])});var r=this.state.legend.custom.body.map(function(r){var o=[];r.controledLayerID&&null!==r.cutpointID&&void 0!==r.cutpointID&&(o=Array.isArray(r.cutpointID)&&r.cutpointID.length>0?r.cutpointID:[parseInt(r.cutpointID,10)]);var i=[];i=o.length>0?i.map(function(e){return t.state.map._dataLayers[r.controledLayerID][e].id}):Array.isArray(r.controledLayerID)&&r.controledLayerID.length>0?r.controledLayerID:[r.controledLayerID];var a={type:"box",color:o.length>0?n[i[0]].rules[r.cutpointID].colors[0]:"#CCCCC",radius:null};if(e.map.style._layers[i[0]]&&e.map.getLayoutProperty(i[0],"icon-image")){var s=e.map.getLayoutProperty(i[0],"icon-image");a={type:"customIcon",data:e.map.style.sprite.data[s]}}return r.icon&&(a={type:r.icon.type?r.icon.type:"box",color:r.icon.color?r.icon.color:a.color,radius:"circle"!==r.icon.type||r.icon.radius?r.icon.radius:12}),{showned:!0,controledLayerIDs:i,controledCutpointIDs:o,label:r.label?r.label:n[i[0]].rules[r.cutpointID].label,description:r.description?r.description:"",icon:a}}),o={map:e.map,mapDefinition:e.mapDefinition,legend:e.mapDefinition.layout.legend,ruleSets:n,legendElements:r};e.map&&e.mapDefinition&&(o.rules=e.map.currentVariableRules),this.setState(o)}},{key:"componentDidUpdate",value:function r(){(window.innerWidth<=480&&!this.state.mobileLayout||window.innerWidth>480&&this.state.mobileLayout)&&this.setState({mobileLayout:!this.state.mobileLayout})}},{key:"onTogglePopup",value:function l(){this.setState({showChoroplethPopup:!this.state.showChoroplethPopup})}},{key:"onChangeIndexKeyboard",value:function c(e,t){13!==t.keyCode&&32!==t.keyCode||this.toggleLegendElement(e)}},{key:"renderColoredIcon",value:function p(){var e=Object.keys(this.state.mapDefinition.style.metadata["mapspice:color-palettes"])[0],t=this.state.mapDefinition.style.metadata["mapspice:color-palettes"][e].colors,n=this.state.legend,r=n.custom.body.map(function(e,n){return e.icon&&e.icon.color?e.icon.color:t[n]}),o={colorbox:{},one:{},two:{},three:{},four:{}};return r.length>0&&(1===r.length?o.colorbox.background=r[0]:2===r.length?(o.one.background=r[0],o.two.background=r[1],o.three.background=r[0],o.four.background=r[1]):3===r.length?(o.one.background=r[0],o.two.background=r[1],o.three.background=r[2],o.four.background=r[2]):r.length>3&&(o.one.background=r[0],o.two.background=r[1],o.three.background=r[2],o.four.background=r[3])),u["default"].createElement("span",null,u["default"].createElement("div",{className:"colorbox",style:o.colorbox},u["default"].createElement("div",null,u["default"].createElement("div",{className:"color one",style:o.one}),u["default"].createElement("div",{className:"color two",style:o.two})),u["default"].createElement("div",null,u["default"].createElement("div",{className:"color thr",style:o.three}),u["default"].createElement("div",{className:"color fou",style:o.four}))))}},{key:"renderElementSymbol",value:function d(e){var t=void 0;if("object"==typeof e){if(e.type&&e.color){var n={backgroundColor:e.color,borderColor:e.color,width:e.radius?e.radius:null,height:e.radius?e.radius:null};return u["default"].createElement("div",{className:"legend-icon "+e.type,style:n})}if(e.type&&"customIcon"===e.type){var r=this.state.mapDefinition.style.sprite.replace(e.data.pixelRatio,"1"),o=e.data.x/e.data.pixelRatio,i=e.data.y/e.data.pixelRatio,n={background:"url("+r+".png) -"+o+"px -"+i+"px",width:"20px",height:"20px"};return u["default"].createElement("div",{className:"legend-icon custom",style:n})}}else t=e;return t}},{key:"render",value:function f(){var e=this,t=this.state.legend;if(this.state.map&&t.custom){var n=t.custom.header&&t.custom.header.length>0?u["default"].createElement("div",{className:"ruleset-header"},t.custom.header.map(function(t,n){return u["default"].createElement("div",{key:"header-"+n,className:"column "+(0===n?"first":"")},e.renderElementSymbol(t))})):null,r=[];this.state.legendElements.length>0&&(r=this.state.legendElements.map(function(t,n){var r="";return u["default"].createElement("div",{className:"ruleset-element"+(t.showned?"":" fadded"),key:"row-"+n,title:r,tabIndex:2,"aria-label":"Legend item: "+t.label,onClick:e.toggleLegendElement.bind(e,n),onMouseOver:e._onMouseOver.bind(e,n),onFocus:e._onMouseOver.bind(e,n),onMouseOut:e._onMouseOut.bind(e,n),onBlur:e._onMouseOut.bind(e,n),onKeyDown:e.onChangeIndexKeyboard.bind(e,n)},u["default"].createElement("div",{key:"row-"+n+"-icon",className:"column first"},e.renderElementSymbol(t.icon)),u["default"].createElement("div",{key:"row-"+n+"-label",className:"column"},t.label))}));var o={height:t.customHeight&&!this.state.mobileLayout?t.customHeight:"auto",maxHeight:t.customHeight&&!this.state.mobileLayout?"auto":300,width:t.customWidth&&!this.state.mobileLayout?t.customWidth:"100%"};return this.state.showChoroplethPopup?u["default"].createElement("div",{className:"choropleth-legend "+t.position+" custom-legend",tabIndex:"0","aria-label":"Legend"},u["default"].createElement("div",{className:"legend-header"},u["default"].createElement("div",{className:"legend-title"},t.custom&&t.custom.title&&t.custom.title.length>0?t.custom.title:null),u["default"].createElement("div",{className:"legend-close",onClick:this.onTogglePopupEvent,tabIndex:"2","aria-label":"Close legend button"},u["default"].createElement("div",{className:"icon button close"}))),u["default"].createElement("div",{key:"ruleset1",className:"legend-ruleset",style:o},n,u["default"].createElement("div",{className:"ruleset-elements"},r))):u["default"].createElement("div",{className:"choropleth-legend legend-button "+this.state.legend.position,onClick:this.onTogglePopupEvent,tabIndex:"0","aria-label":"Legend"},this.renderColoredIcon(),u["default"].createElement("span",{className:"caption",style:{paddingLeft:"16px",fontSize:"13px"}},"Legend"))}return null}},{key:"toggleLegendElement",value:function h(e){var t=this,n=this.state.legendElements,r=n[e];r.showned=!r.showned,r.controledLayerIDs.forEach(function(e){t.state.map.getLayoutProperty(e,"visibility")&&"none"===t.state.map.getLayoutProperty(e,"visibility")?t.state.map.setLayoutProperty(e,"visibility","visible"):t.state.map.setLayoutProperty(e,"visibility","none")}),this.setState({legendElements:n})}},{key:"_onMouseOver",value:function m(e){var t=this;this.state.legend.preventHoverHighlight||this.state.legendElements.forEach(function(n,r){n.controledLayerIDs.length>0&&n.controledLayerIDs.forEach(function(n){var o=t.state.map.style._layers[n];r===e?t._setVisualProperty("expose",o):t._setVisualProperty("conceal",o)})})}},{key:"_onMouseOut",value:function y(e){var t=this;this.state.legend.preventHoverHighlight||this.state.legendElements.forEach(function(n,r){n.controledLayerIDs.length>0&&n.controledLayerIDs.forEach(function(n){var o=t.state.map.style._layers[n];r===e?t._setVisualProperty("reset-opacity",o):t._setVisualProperty("reset-outline",o)})})}},{key:"_setVisualProperty",value:function v(e,t){if("symbol"===t.type)t.layout["icon-image"]&&t.layout["icon-image"].length>0?"conceal"===e?this.state.map.setPaintProperty(t.id,"icon-opacity",.15):this.state.map.setPaintProperty(t.id,"icon-opacity",1):t.layout["text-field"]&&t.layout["text-field"].length>0&&("conceal"===e?this.state.map.setPaintProperty(t.id,"text-opacity",.15):this.state.map.setPaintProperty(t.id,"text-opacity",1));else switch(e){case"expose":switch(t.type){case"bubble":this.state.map.setPaintProperty(t.id,"bubble-outline-color","rgba(0,0,0,0.7)");break;case"fill":this.state.map.setPaintProperty(t.id,"fill-outline-color","rgba(0,0,0,0.7)");break;default:console.log("None")}break;case"conceal":this.state.map.setPaintProperty(t.id,"opacity-"+t.type,.15);break;case"reset-opacity":this.state.map.setPaintProperty(t.id,"opacity-"+t.type,1);break;case"reset-outline":switch(t.type){case"bubble":this.state.map.setPaintProperty(t.id,"bubble-outline-color","rgba(0,0,0,0)");break;case"fill":this.state.map.setPaintProperty(t.id,"fill-outline-color","rgba(0,0,0,0)");break;default:console.log("None")}break;default:console.log("None")}}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={isExpanded:!1,title:this.props.title,map:this.props.map,currentSummaryLevelId:this.props.map.preferredSummaryLevelId?this.props.map.preferredSummaryLevelId:"base"},this.onChangeValueEvent=this.onChangeValue.bind(this)}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function n(e){this.setState({map:e.map,title:e.title})}},{key:"onChangeValue",value:function r(e,t,n){this.state.map.preferredSummaryLevelId="base"===n?void 0:n,this.setState({currentSummaryLevelId:n})}},{key:"onSelectChangeValue",value:function l(){var e=document.getElementById("dropdown-summary-level-select").value;this.onChangeValue(null,null,e)}},{key:"render",value:function c(){if(!this.state.map)return null;var e=this.state.map.summaryLevels,t=Object.keys(e).map(function(t,n){return u["default"].createElement("option",{key:"dropdownItem"+(n+1),value:t},e[t].name)});return t.unshift(u["default"].createElement("option",{key:"dropdownItem0",value:"base"},"base"===this.state.currentSummaryLevelId?"Show data by:":"Auto by zoom level")),u["default"].createElement("div",{className:"summary-level-dropdown"},u["default"].createElement("select",{id:"dropdown-summary-level-select",className:"dropdown visible list",value:this.state.value,onChange:this.onSelectChangeValue.bind(this)},t))}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],210:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.props.map&&this.props.mapDefinition&&this.props.map.currentVariableId&&this.props.variableDescription&&this.props.variableDescription.initialOpened?this.props={map:this.props.map,mapDefinition:this.props.mapDefinition,title:this.props.mapDefinition.style.metadata["mapspice:variables"][this.props.map.currentVariableId].title,contentHTML:this.props.mapDefinition.style.metadata["mapspice:variables"][this.props.map.currentVariableId].content,scrollable:!1}:this.state={map:this.props.map,mapDefinition:this.props.mapDefinition,title:null,contentHTML:null,scrollable:!1}}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){window.addEventListener("resize",this.onLayoutChanged.bind(this),!1)}},{key:"componentWillReceiveProps",value:function r(e){e.map&&this.state.mapDefinition&&e.map.currentVariableId&&e.variableDescription&&e.variableDescription.initialOpened?this.setState({map:e.map,mapDefinition:e.mapDefinition,title:e.mapDefinition.style.metadata["mapspice:variables"][e.map.currentVariableId].title,contentHTML:e.mapDefinition.style.metadata["mapspice:variables"][e.map.currentVariableId].content}):this.setState({map:e.map,mapDefinition:e.mapDefinition})}},{key:"componentWillUnmount",value:function l(){this.state.map.remove(),window.removeEventListener("resize",this.onLayoutChanged.bind(this),!1)}},{key:"componentDidUpdate",value:function c(){var e=this,t=this.state.map;t.on("variablechanged",function(){e.updateContent()}),this.onLayoutChanged()}},{key:"onLayoutChanged",value:function p(){var e=document.getElementById("overlay-variable-content-body").clientHeight,t=document.getElementById("overlay-variable-content-container").clientHeight;(e>t&&!this.state.scrollable||e<=t&&this.state.scrollable)&&this.setState({scrollable:!this.state.scrollable})}},{key:"onNext",value:function d(){this.setState({title:null,contentHTML:null})}},{key:"render",value:function f(){var e=this.state.title&&this.state.contentHTML;return u["default"].createElement("div",{className:"variable-overlay-container"+(e?" active":"")},u["default"].createElement("div",{className:"modal-background"}),u["default"].createElement("div",{tabIndex:"0",className:"content-overlay","aria-label":"Content description"},u["default"].createElement("div",{className:"title"},this.state.title),u["default"].createElement("div",{className:"content",id:"overlay-variable-content-container"},u["default"].createElement("div",{id:"overlay-variable-content-body",dangerouslySetInnerHTML:{__html:this.state.contentHTML}})),u["default"].createElement("div",{className:"navigation"},u["default"].createElement("div",{className:"more-content"+(this.state.scrollable?" active":"")}),u["default"].createElement("div",{className:"control fwd",onClick:this.onNext.bind(this)},u["default"].createElement("div",{className:"icon button navigate-right"})))))}},{key:"updateContent",value:function h(){var e={},t=this.state.mapDefinition.style.metadata["mapspice:variables"][this.state.map.currentVariableId];e=t.title&&t.content&&t.content.length>0?{title:t.title,contentHTML:t.content}:{title:t.title,contentHTML:t.content},this.setState(e)}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],211:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function p(e,t,n){for(var r=!0;r;){var o=e,i=t,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=i,n=a,r=!0,s=u=void 0}},l=e("react"),u=r(l),c=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var n=this.props.mapDefinition.style.metadata["mapspice:variables"][this.props.mapDefinition.style.metadata["mapspice:preferred-variable-id"]];this.state={map:this.props.map,mapDefinition:this.props.mapDefinition,variableDescription:this.props.variableDescription,title:n.title,contentHTML:n.content,show:this.props.variableDescription.initialOpened===!0},this.onToggleSidebarEvent=this.onToggleSidebar.bind(this)}return i(t,e),a(t,[{key:"componentDidMount",value:function n(){}},{key:"componentWillReceiveProps",value:function r(e){this.setState({map:e.map,mapDefinition:e.mapDefinition,variableDescription:e.variableDescription})}},{key:"componentWillUnmount",value:function l(){this.state.map.remove()}},{key:"componentDidUpdate",value:function c(){var e=this,t=this.state.map;t.on("variablechanged",function(){e.onNewVariable()})}},{key:"onNewVariable",value:function p(){var e=this.state.mapDefinition.style.metadata["mapspice:variables"][this.state.map.currentVariableId];this.setState({title:e.title,contentHTML:e.content})}},{key:"onToggleSidebar",value:function d(){this.setState({show:!this.state.show})}},{key:"render",value:function f(){return this.state.show?u["default"].createElement("div",{tabIndex:"0",className:"variable-sidebar-container "+this.state.variableDescription.position,"aria-label":"Sidebar content description"},u["default"].createElement("div",{className:"header"},u["default"].createElement("div",{className:"title"},this.state.title),u["default"].createElement("div",{className:"legend-close",onClick:this.onToggleSidebarEvent,tabIndex:"2","aria-label":"Close legend button"},u["default"].createElement("div",{className:"icon button close"}))),u["default"].createElement("div",{className:"content",id:"sidebar-variable-content-container"},u["default"].createElement("div",{id:"sidebar-variable-content-body",className:"text",dangerouslySetInnerHTML:{__html:this.state.contentHTML}}))):u["default"].createElement("div",{className:"choropleth-legend legend-button "+this.state.variableDescription.position,onClick:this.onToggleSidebarEvent,tabIndex:"2","aria-label":"Open description sidebar"},u["default"].createElement("span",{className:"caption",style:{fontSize:13}},"Show description"))}}]),t}(u["default"].Component);n["default"]=c,t.exports=n["default"]},{react:181}],212:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./components/MapApplication"),i=r(o),a=e("./components/MapApp"),s=r(a),l=e("./components/map/Map"),u=r(l),c=e("./components/mapLayouts/SingleMap"),p=r(c),d=e("./components/mapLayouts/SwipeMap"),f=r(d),h=e("./components/mapLayouts/SideBySideMap"),m=r(h),y=e("./components/mapControls/ZoomControl"),v=r(y),g=e("./components/mapControls/ZoomControlComponent"),_=r(g),b=e("./components/mapControls/Geolocation"),x=r(b),w=e("./components/mapLoadProgress/MapLoadProgress"),E=r(w),k=e("./components/header/Header"),C=r(k),S=e("./components/mapOverlayContainer/MapOverlayContainer"),P=r(S),O=e("./components/buttonTabBar/ButtonTabBar"),M=r(O),D=e("./components/dropdownPicker/DropdownPicker"),T=r(D),N=e("./components/geoSearch/GeoSearch"),I=r(N),L=e("./components/infoBubble/InfoBubble"),R=r(L),A=e("./components/infoBubble/InfoBubbleSwipe"),j=r(A),z=e("./components/infoBubble/InfoBubbleTemplate"),V=r(z),F=e("./components/infoBubble/AnnotationPopup"),B=r(F),U=e("./components/popupLegend/PopupChoroplethLegend"),W=r(U),q=e("./components/popupLegend/PopupCustomLegend"),H=r(q),Z=e("./components/horizontalChoroplethLegend/HorizontalLegendComponent"),G=r(Z),X=e("./components/changeOverTimeSlider/ChangeOverTimeSlider"),K=r(X),Y=e("./components/changeOverTimeComposite/ChangeOverTimeComposite"),J=r(Y),$=e("./components/playYears/PlayYears"),Q=r($),ee=e("./components/summaryLevelPicker/SummaryLevelPicker"),te=r(ee),ne=e("./components/colorPalettePicker/ColorPalettePicker"),re=r(ne),oe=e("./components/additionalContentBox/AdditionalContentBox"),ie=r(oe),ae=e("./components/variableDescriptionOverlay/VariableDescriptionOverlay"),se=r(ae),le=e("./components/variableDescriptionSidebar/VariableDescriptionSidebar"),ue=r(le);n["default"]={MapApplication:i["default"],MapApp:s["default"],Map:u["default"],SingleMap:p["default"],SwipeMap:f["default"],SideBySideMap:m["default"],ZoomControl:v["default"],ZoomControlComponent:_["default"],Geolocation:x["default"],MapLoadProgress:E["default"],Header:C["default"],MapOverlayContainer:P["default"],ButtonTabBar:M["default"],DropdownPicker:T["default"],GeoSearch:I["default"],InfoBubble:R["default"],InfoBubbleSwipe:j["default"],InfoBubbleTemplate:V["default"],AnnotationPopup:B["default"],PopupChoroplethLegend:W["default"],PopupCustomLegend:H["default"],HorizontalLegendComponent:G["default"],ChangeOverTimeSlider:K["default"],ChangeOverTimeComposite:J["default"],PlayYears:Q["default"],SummaryLevelPicker:te["default"],ColorPalettePicker:re["default"],AdditionalContentBox:ie["default"],VariableDescriptionOverlay:se["default"],VariableDescriptionSidebar:ue["default"]},t.exports=n["default"]},{"./components/MapApp":182,"./components/MapApplication":183,"./components/additionalContentBox/AdditionalContentBox":184,"./components/buttonTabBar/ButtonTabBar":185,"./components/changeOverTimeComposite/ChangeOverTimeComposite":186,"./components/changeOverTimeSlider/ChangeOverTimeSlider":187,"./components/colorPalettePicker/ColorPalettePicker":188,"./components/dropdownPicker/DropdownPicker":189,"./components/geoSearch/GeoSearch":190,"./components/header/Header":191,"./components/horizontalChoroplethLegend/HorizontalLegendComponent":192,"./components/infoBubble/AnnotationPopup":193,"./components/infoBubble/InfoBubble":194,"./components/infoBubble/InfoBubbleSwipe":195,"./components/infoBubble/InfoBubbleTemplate":196,"./components/map/Map":197,"./components/mapControls/Geolocation":198,"./components/mapControls/ZoomControl":199,"./components/mapControls/ZoomControlComponent":200,"./components/mapLayouts/SideBySideMap":201,"./components/mapLayouts/SingleMap":202,"./components/mapLayouts/SwipeMap":203,"./components/mapLoadProgress/MapLoadProgress":204,"./components/mapOverlayContainer/MapOverlayContainer":205,"./components/playYears/PlayYears":206,"./components/popupLegend/PopupChoroplethLegend":207,"./components/popupLegend/PopupCustomLegend":208,"./components/summaryLevelPicker/SummaryLevelPicker":209,"./components/variableDescriptionOverlay/VariableDescriptionOverlay":210,"./components/variableDescriptionSidebar/VariableDescriptionSidebar":211}]},{},[212])(212)});